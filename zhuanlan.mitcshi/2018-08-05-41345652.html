<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>趋势追踪：均线 vs 通道突破</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/41345652">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-1d1344db04ea75a8af2a67945ee4dc99_r.jpg" alt=""></div><h2><b>写在前面</b></h2><p>放一篇关于技术分析的老文（写于 2017 年 6 月）；为的是之后再放另外一篇技术分析的老文……</p><h2><b>1 引言</b></h2><p>在技术分析领域的趋势类策略中，<b>均线</b>和<b>通道突破</b>无疑是两大门派。虽然目的都是为了抓住价格走势的趋势，但是<b>这两类策略的交易哲学以及风险特征截然不同</b>。</p><blockquote><i>There is no best system, only trade-offs.</i></blockquote><p>这是被技术分析的使用者广为接受的一句话：<b>没有最好的交易系统，只能在不同系统的收益风险特征之间权衡，找到适合使用者的交易系统。</b></p><p>那么，我们又当如何在均线和通道突破间权衡的？看完本文，也许你会认可上面这句话。</p><h2><b>2 不同的交易哲学</b></h2><p>均线，一般又称为趋势线（trend line），是趋势策略中的一大战将。</p><p><b>均线策略一般是利用固定长度的价格均线作为多、空趋势的判断：滑动均线随时间增加说明趋势向上；反之滑动均线随时间减少说明趋势向下。</b></p><p>由于每一期的价格只在均线的计算中占一小部分，<b>均线随时间的变化是相对连续的</b>，即使某一期价格发生急涨或者急跌也很难直接造成均线方向的变化。然而，<b>使用均线作为交易信号又不可避免的引入了滞后</b>，这是因为均线相对当前价格来说都是有滞后性的（见<a href="https://zhuanlan.zhihu.com/p/38276041">《移动平均：你知道的和你不知道的》</a>）。</p><p>通道突破则是趋势策略中的另一个利器。</p><p><b>通道突破策略使用给定的技术指标计算当前的价格区间，认为当价格有效突破这个价格区间时就是新的趋势形成之时。</b></p><p>特别的，如果价格向上突破了通道上限，则新的上涨趋势形成；如果价格向下突破了通道下限，则新的下跌趋势形成。正因如此，单期价格的大涨或者大跌就有可能使得之前的通道被突破，从而触发交易信号。因此，<b>突破系统也可以被认为是“事件驱动型”的策略</b>。与均线策略存在滞后性不同，<b>通道突破策略在价格突破的一瞬间就可以发出交易信号，因此这类策略没有滞后性。</b></p><p>现在我们已经了解了这两类策略不同的交易哲学。以此发展出的交易系统虽然都是为了捕捉价格中的大趋势，但是却体现出了完全不同的收益和风险特征。接下来通过两组对比来说明这两类策略收益、风险特征的区别。这两组对比是：</p><ul><li><b>基础版 PK：单均线策略 vs 唐奇安通道突破策略</b></li><li><b>加强版 PK：双均线策略 vs 布林带突破策略</b></li></ul><h2><b>3 实验说明</b></h2><p>在下面两节的两组比较中，我们会测试四组基于<b>日线</b>的交易系统。它们的区别仅仅在于使用不同的技术指标来产生多空的买卖交易信号。除此之外，在交易品种、回测时间以及风险控制方面没有任何区别。在此先对它们的共同之处做一个说明。</p><p>交易品为如下五个商品期货的合成指数：郑商所的棉花、大商所的豆粕以及上期所的螺纹钢、橡胶和沪锌。之所以选这些只是因为它们的数据足够长，回测起来更有说服力。另外一个原因就是这几个品种分别来自农产品、基本金属和能源化工。回测期为 2011 年 1 月 1 日到 2017 年 6 月 23 日。</p><p>风控方面，每笔交易使用 2% 的资金量，采用 ATR（average true range）进行跟踪止损。在交易执行方面，均假设在每日收盘后利用已有的价格数据计算是否有交易信号；如果产生了交易信号，则按下一个交易日的开盘价执行。交易成本方面，假设每笔交易（包括开多、开空、平多、平空）的手续费和滑点一共为千分之一。</p><p>最后需要说明的是，<b>无论是哪种趋势类策略，选择计算趋势的时间窗口都格外重要</b>。如果窗口太短，则价格噪声太大而趋势太弱；如果窗口太长，则策略对价格的反应时间就会被拉长。<b>在本文的研究中，我们不做任何参数优化的尝试。但是，为了使不同的策略有可比性，我们尽量选取同样的时间窗口。在这样的设定下，实验结果很好的给出了这两类策略收益、风险特征。</b></p><h2><b>4 基础版 PK：单均线 vs 唐奇安通道</b></h2><p>单均线策略如下：</p><ul><li><b>时间窗口为 50 个交易日。如果当日的均线大于上一个交易日的均线则做多（同时平掉任何空头仓位）；如果当日的均线小于上一个交易日的均线则做空（同时平掉任何多头仓位）。当持有任何仓位时，如果价格触及止损线则平仓止损。</b></li></ul><p>唐奇安通道（Donchian channel，由期货交易大师 Richard Donchian 发明）是著名的海龟交易法则的重要部分。它利用一段时间窗口的最高价和最低价作为通道。唐奇安通道策略如下：</p><ul><li><b>在没有任何头寸时，如果当日的收盘价高于前 50 日的最高价，则做多；如果当日的收盘价低于前 50 日的最低价，则做空。持有多头头寸时，如果当日收盘价低于前 10 日的最低价时，平掉多头仓位。持有空头头寸时，如果当日收盘价高于前 10 日的最高价时，平掉空头仓位。当持有任何仓位时，如果价格触及止损线则平仓止损。</b></li></ul><p>选择两个时间窗口计算建仓和平仓信号的原因是：唐奇安通道的常见建仓、平仓时间窗口都是 20。为了和单均线策略有可比性，我们把建仓的时间窗口设定为 50。如果再用它作为平仓窗口，则会使得策略的反应非常慢。因此，选择了一个更短的平仓时间窗口。</p><p>在使用单均线交易系统时，得到的净值曲线和最大回撤曲线如下图：</p><img src="https://pic2.zhimg.com/v2-7c6845d9ba82b584503e23266df876bf_r.jpg" data-caption="" data-size="normal" data-rawwidth="583" data-rawheight="378" data-watermark="watermark" data-original-src="v2-7c6845d9ba82b584503e23266df876bf" data-watermark-src="v2-0dcfe6fd21b40d004a8748760410ec68" data-private-watermark-src=""><p>在使用唐奇安通道突破交易系统时，得到的净值曲线和最大回撤曲线如下图：</p><img src="https://pic4.zhimg.com/v2-9b3543b2193972718f7fd967e4df9e48_r.jpg" data-caption="" data-size="normal" data-rawwidth="578" data-rawheight="379" data-watermark="watermark" data-original-src="v2-9b3543b2193972718f7fd967e4df9e48" data-watermark-src="v2-040bd02cdccccb928a3a582e8b6335d5" data-private-watermark-src=""><p>一眼望去，这两个交易系统的净值曲线十分接近（总收益也很像），这说明它们都有效地捕捉了这些投资品价格的大趋势。不过，通过比较策略评价指标（下图）还是能看出来它们截然不同的风险收益特征。</p><img src="https://pic2.zhimg.com/v2-359617d021e0d22d08052eebc4d5c57f_r.jpg" data-caption="" data-size="normal" data-rawwidth="569" data-rawheight="334" data-watermark="watermark" data-original-src="v2-359617d021e0d22d08052eebc4d5c57f" data-watermark-src="v2-a9c946a6e9eb22ac3822aa120fd2eb8b" data-private-watermark-src=""><p>我们先来总结，待到本文第 6 节再分析：</p><ul><li><b>单均线策略较唐奇安通道突破策略有：更多的交易次数、更低的胜率；从每笔交易来看，盈利交易有更低的平均收益率，而亏损交易也有更少的平均亏损。</b>最后一个指标利润因子为总收益和总亏损的比值。从这组对比来看，均线策略的利润因子比通道策略略低。</li><li><b>这样的回测结果不仅仅是这两个交易系统的区别，更是代表了这两类（均线类和通道突破类）策略的区别，这些区别源自它们不同的交易哲学。</b>为了说明这个区别是大类策略的区别，而不仅仅是来自个别策略的偶然，我们再来看看两类策略加强版的 PK。</li></ul><h2><b>5 加强版再 PK：双均线 vs 布林带</b></h2><p>顾名思义，双均线是利用两个不同周期的均线进行交易的策略。<b>双均线系统由一个短周期趋势和一个长周期趋势构成。投资品的大趋势依然由长周期均线捕捉，而短周期均线起到的是择时的作用。</b>因此，双均线可以看成是单均线的加强版。</p><p>双均线策略如下：</p><ul><li><b>长、短均线的时间窗口分别为 50 和 10 个交易日。在没有头寸时，如果当日的长均线大于上一个交易日的长均线、且短均线在自下而上穿越长均线则做多；如果当日的长均线小于上一个交易日的长均线、且短均线自上而下穿越长均线则做空。当持有多头头寸时，如果短均线自上而下穿越长均线则平仓；当持有空头头寸是，如果短均线自下而上穿越长均线则平仓。持有任何仓位时，如果价格触及止损线则平仓止损。</b></li></ul><p>布林带（Bollinger bands）由技术分析大师 John Bollinger 发明。与唐奇安通道不同，它利用价格自身的波动率计算通道的宽度。<b>相比于唐奇安使用的最高最低价，布林带在构建通道时更加直接的考虑了价格波动。</b>因此，我们姑且称它是唐奇安通道的升级版。</p><p>布林带策略如下：</p><ul><li><b>时间窗口为 50 个交易日。建仓的波动率标准差为 2，平仓的波动率标准差为 1。在没有任何头寸时，如果当日的收盘价高于 2 个标准差计算的布林带上轨，则做多；如果当日的收盘价低于 2 个标准差计算的布林带下轨，则做空。当持有多头头寸时，如果当日收盘价低于 1 个标准差计算的布林带下轨，则平仓；持有空头头寸时，如果当日收盘价高于 1 个标准差计算的布林带上轨，则平仓。当持有任何仓位时，如果价格触及止损线则平仓止损。</b></li></ul><p>选择两个标准差计算建仓和平仓信号和唐奇安通道类似：布林带中，常见的时间窗口是 20、常见的标准差是 2。为了和均线策略有可比性，我们把时间窗口设定为 50。为了避免因此造成的策略的平仓反应过慢，我们将平仓使用的标准差参数选为 1。</p><p>双均线交易系统的净值曲线和最大回撤曲线如下图：</p><img src="https://pic1.zhimg.com/v2-2ae4f3cc6bea9d16370656bcc0ccd304_r.jpg" data-caption="" data-size="normal" data-rawwidth="597" data-rawheight="388" data-watermark="watermark" data-original-src="v2-2ae4f3cc6bea9d16370656bcc0ccd304" data-watermark-src="v2-e40f06384ad7d0ceaf64ea701fa41c74" data-private-watermark-src=""><p>布林带突破交易系统的净值曲线和最大回撤曲线如下图：</p><img src="https://pic2.zhimg.com/v2-4089cd9bebadb94aa819729900be4462_r.jpg" data-caption="" data-size="normal" data-rawwidth="586" data-rawheight="391" data-watermark="watermark" data-original-src="v2-4089cd9bebadb94aa819729900be4462" data-watermark-src="v2-57926060138dd46e9b290ee062c3ea18" data-private-watermark-src=""><p>它们的风险收益特征为：</p><img src="https://pic4.zhimg.com/v2-6ec06dfbec7dcf034064d6daf4dfd8f2_r.jpg" data-caption="" data-size="normal" data-rawwidth="570" data-rawheight="334" data-watermark="watermark" data-original-src="v2-6ec06dfbec7dcf034064d6daf4dfd8f2" data-watermark-src="v2-f97d487bd2f177c6206254a996634294" data-private-watermark-src=""><p>毫无悬念的，在加强版的 PK 中，我们再次看到了这两类策略的特点：<b>双均线策略较布林带突破策略有：更多的交易次数、更低的胜率；从每笔交易来看，盈利交易有更低的平均收益率，而亏损交易也有更少的平均亏损。</b></p><p>那么，这两类策略到底孰优孰虑呢？</p><h2><b>6 没有最好的交易系统</b></h2><p>如果我们画出任何趋势策略的收益和亏损分布，都会和下面这个图类似。它表明了趋势类策略的核心：<b>以不断的小亏损作为风险成本来换取大趋势中的高收益。</b>这当然和价格的走势有关，因为大趋势不常有，而趋势类策略只有在做好严格风控的情况下不断地对可能的趋势信号做出反应。这样做的结果是，这类策略的胜率不会很高（因此会有很多小的亏损交易）；而一旦成功，就会捕捉到一波大的趋势（轻松覆盖之前的小亏损）。</p><img src="https://pic3.zhimg.com/v2-b157bae535afe41031e895525a1dfa9e_r.jpg" data-caption="" data-size="normal" data-rawwidth="685" data-rawheight="361" data-watermark="watermark" data-original-src="v2-b157bae535afe41031e895525a1dfa9e" data-watermark-src="v2-5c3ae87a975aeb79281fd1be8dea48bb" data-private-watermark-src=""><p>了解了趋势类策略的收益亏损特征后，我们可以从风险特征（即亏损）的角度有效地说明均线和通道突破系统的区别。</p><ul><li><b>对于均线策略，当价格震荡时，均线的方向可能会发生频繁的变化。因此，这样的价格走势会产生大量的错误开仓信号，从而造成更多的交易次数以及较低的胜率。但由于信号出现的比较频繁，因此持仓时间较短，每次错误信号造成的亏损也不会很大、正确信号带来的收益也相对较低。</b></li><li><b>反观通道突破策略，由于通道不易经常被突破，因此交易次数会少得多，不过胜率会更高。一旦突破建仓后，系统必须等到通道再次被突破才能做出反应。在这个过程中，由于持仓时间较长，因此错误信号造成的亏损也会比较大，而正确信号带来的收益也会更高。</b></li></ul><p>这两类策略的收益、风险特征总结如下。这些特征在上面四个实验中得到了很好的体现。</p><img src="https://pic3.zhimg.com/v2-d0e2abeffdd1973b7a0be0737a2df51c_r.jpg" data-caption="" data-size="normal" data-rawwidth="569" data-rawheight="207" data-watermark="watermark" data-original-src="v2-d0e2abeffdd1973b7a0be0737a2df51c" data-watermark-src="v2-7053c7e72fedf099bc185a72bd4134ca" data-private-watermark-src=""><p>所以，有没有最好的交易系统？</p><p><b>两个字的答案是：没有；四个字的答案是：因人而异。</b></p><p>很多交易员都喜欢通道突破策略的高胜率，以及每笔交易的高收益。但是他们当然知道，这是靠更大的持仓风险换来的。并没有太多交易员都喜欢长期持仓（持仓和空仓的心理压力是完全不同的）。想象一下，如果一个策略的信号让一个交易者持仓 100 天，那这不是交易（trading），而是投资（investing）了。这显然是交易员不习惯的，他们更倾向于均线策略中平均持仓较短的特征。<b>想要以较短的持仓时间来享受大趋势带来的高收益本身就是个伪命题。必须有所取舍。</b></p><p>一个交易员选择什么样的系统显然和他的风险偏好直接相关。<b>明确自己的交易目标、正确认识每个系统的收益风险特征、找到让自己最舒服的策略，这些怎么强调都不过分。</b></p><p>At the end of the day, it is just a matter of personal taste.</p><p><br></p><p><br></p><p>原创不易，请保护版权。如需转载，请联系获得授权，并注明出处，谢谢。已委托“维权骑士”(<a href="http://rightknights.com">维权骑士_免费版权监测/版权保护/版权分发</a>) 为进行维权行动。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
</body>
</html>
