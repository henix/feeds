<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>图书馆大妈二分稍微升级</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/34912227">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-85d93ca55f7203ec6369c16bbedfb07d_r.jpg" alt=""></div><p>以前看过一个图书馆大妈用二分法的老段子. 人人时代就看到过的东西. 以下来自于<a href="https://twitter.com/xueshudi/status/911375561498357761">学术状态帝twitter</a>. </p><blockquote>图书馆自习的时候,一女生背着一堆书进阅览室,结果警报响了,大妈让女生看是哪本书把警报弄响了，女生把书倒出来，一本一本的测。大妈见状急了，把书分成两份,第一份过了一下,响了。又把这一份分成两份接着测，三回就找到了，大妈用鄙视的眼神看着女生，仿佛在说 <equation>O(n)</equation> 和 <equation>O(\log n)</equation> 都分不清</blockquote><p>知乎上看到一些类似的回答. 很多人会提到这个方法有用因为只有一本书. 如果女生有 <equation>k</equation> 本书可以让警报响呢? (而且还有人问为什么不是离开图书馆的时候才要检测, 这样可以偷出去几本书.)</p><p>问题可以抽象成给一个n个元素的集合. 有一个子集H. 可以每次检测一个子集是否包含H中至少一个元素. 用比较少的检测次数找到H. 我们让子集H的大小为k. 因为每次检测我们可以获得1个bit的结果. 因为有 <equation>n\choose k</equation> 个不同的可能, 所以我们需要 <equation>\log_2 {n\choose k}</equation> 次检测. </p><p>这里的log定义为 <equation>\max(\log n,1)</equation> . </p><p>我们可以给出一个 <equation>O(k \log (n/k))</equation> 次检测的算法. 因为前面的下限, 所以这个已经是能达到的最好结果了. </p><p><b>新算法:</b></p><blockquote>检测整个集合和H是否相交. 有的话二分, 两边都递归. 没有的话停止.</blockquote><p>为了简单起见我们考虑 <equation>n</equation> 是 <equation>2^d</equation> 的形式.</p><p>我们可以在元素上建立一个complete binary tree. 我们mark一个node, 如果我们检测了这个node的subtree的所有leaf组成的集合. 我们要做的是考虑如果有k个leaf, 那么有多少个node被mark. 这个tree的root为 <equation>r</equation> .</p><p>对于给定的k个leaf  <equation>L</equation> , 我们叫一个node为good, 如果对于某一个 <equation>v\in L</equation> , 这个node在 <equation>rv</equation>  path上. 被mark的node的个数最多为2倍good node的个数. </p><p>那么, 最多有多少个good node? </p><p>考虑第i层有多少个good node. 第i层也最多有 <equation>2^{i-1}</equation> 个元素. 而且good node每一层也不能超过k个. 所以我们得知第i层可以有 <equation>\min(k, 2^{i-1})</equation> good nodes. 则我们得到good nodes的数量为 <equation>\sum_{i=1}^{1+\log n} \min(k,2^{i-1}) = O(k(\log n - \log k)+k) = O(k\log (n/k))</equation> .</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
