<p>随着全同态加密的迅速发展，一些全同态加密库应运而生。学术界和工业界非常关注各个全同态加密库的计算效率和性能，以便做出更好的应用选择。</p><p>为了回答“全同态加密库具体性能如何？”这个问题，<b>格密链科技自主研发全同态加密测试系统（HEbenchmark）</b>。该系统可以全面评估比较全同态加密库的性能，能够自动化的完成整个测试过程。例如：选择参数，执行测试，密文计算与明文计算进行性能比较，测试结果的统计分析与图表生成。</p><p><b>目前全同态加密界缺乏一个综合通用的基准测试工具。</b>此外，由于数据是在不同平台上产生的，使得对各个全同态加密库无法直接比较评价。虽然测试在原则上是可重复的，但是测试软件依赖于具体环境，使得再现别人的测试结果变得困难。</p><p> 格密链科技研发的全同态加密测试系统（HEbenchmark）的主要贡献是为全同态加密方案的测试提供一个通用的系统。在本系统中，用户可以根据自己的需求，在测试系统设置参数，生成密钥、公钥、密文后，进行运算、解密，验证结果并生成测试报告。</p><h2><b>方案概述</b></h2><p>我们的测试系统的设计是由三个目标驱动的。首先，我们想以黑盒方式通过测量密钥生成，加密，解密和计算的持续时间来评估同态加密库的性能。其次，我们想通过将使用同态加密的系统与不提供安全性的系统进行比较，来描述保障隐私的额外开销。最后，我们想要提供一个报告生成器，可以直观的表现出全同态加密库的性能。</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-79cbd65ec1a28ae6c78f46871107b11d_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="677" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-79cbd65ec1a28ae6c78f46871107b11d_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-79cbd65ec1a28ae6c78f46871107b11d_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="677" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-79cbd65ec1a28ae6c78f46871107b11d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-79cbd65ec1a28ae6c78f46871107b11d_b.jpg"/><figcaption> 系统架构</figcaption></figure><h2><b>测试流程</b></h2><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-cc69849c8239be276b3fe94c27b4c4dc_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="1157" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic1.zhimg.com/v2-cc69849c8239be276b3fe94c27b4c4dc_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-cc69849c8239be276b3fe94c27b4c4dc_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="1157" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic1.zhimg.com/v2-cc69849c8239be276b3fe94c27b4c4dc_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-cc69849c8239be276b3fe94c27b4c4dc_b.jpg"/><figcaption>生成报告流程</figcaption></figure><p class="ztext-empty-paragraph"><br/></p><p>报表生成器从本地文本读取，该文本包含所有的时间和正确性数据，以及测试的所有参数。自动分析被测全同态加密库(即其输出是否与基线值一致)。对这些数据进行图表、曲线处理。</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-dccfe9365594f55d8a1fefd77fe781b6_b.jpg" data-caption="" data-size="normal" data-rawwidth="716" data-rawheight="1062" class="origin_image zh-lightbox-thumb" width="716" data-original="https://pic3.zhimg.com/v2-dccfe9365594f55d8a1fefd77fe781b6_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-dccfe9365594f55d8a1fefd77fe781b6_b.jpg" data-caption="" data-size="normal" data-rawwidth="716" data-rawheight="1062" class="origin_image zh-lightbox-thumb lazy" width="716" data-original="https://pic3.zhimg.com/v2-dccfe9365594f55d8a1fefd77fe781b6_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-dccfe9365594f55d8a1fefd77fe781b6_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-8ec82207b0cac75945e6ef2f4febff9a_b.jpg" data-caption="" data-size="normal" data-rawwidth="715" data-rawheight="241" class="origin_image zh-lightbox-thumb" width="715" data-original="https://pic3.zhimg.com/v2-8ec82207b0cac75945e6ef2f4febff9a_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-8ec82207b0cac75945e6ef2f4febff9a_b.jpg" data-caption="" data-size="normal" data-rawwidth="715" data-rawheight="241" class="origin_image zh-lightbox-thumb lazy" width="715" data-original="https://pic3.zhimg.com/v2-8ec82207b0cac75945e6ef2f4febff9a_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-8ec82207b0cac75945e6ef2f4febff9a_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><h2><b>系统使用介绍</b></h2><p>系统分为三个菜单栏：使用介绍，基本测试，高级测试。基本测试包括SEAL BFV、SEAL CKKS、HElib测试，高级测试包括SEAL BFV、SEAL CKKS、HElib、HElib海明距离、SEAL CKKS海明距离、逻辑回归测试。</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-51c3e9f5b7da14fe89f62bc018af557e_b.jpg" data-caption="" data-size="normal" data-rawwidth="786" data-rawheight="818" class="origin_image zh-lightbox-thumb" width="786" data-original="https://pic3.zhimg.com/v2-51c3e9f5b7da14fe89f62bc018af557e_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-51c3e9f5b7da14fe89f62bc018af557e_b.jpg" data-caption="" data-size="normal" data-rawwidth="786" data-rawheight="818" class="origin_image zh-lightbox-thumb lazy" width="786" data-original="https://pic3.zhimg.com/v2-51c3e9f5b7da14fe89f62bc018af557e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-51c3e9f5b7da14fe89f62bc018af557e_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-d184fc56f9362b3ba40d1d7755cce3a2_b.jpg" data-caption="" data-size="normal" data-rawwidth="892" data-rawheight="786" class="origin_image zh-lightbox-thumb" width="892" data-original="https://pic3.zhimg.com/v2-d184fc56f9362b3ba40d1d7755cce3a2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-d184fc56f9362b3ba40d1d7755cce3a2_b.jpg" data-caption="" data-size="normal" data-rawwidth="892" data-rawheight="786" class="origin_image zh-lightbox-thumb lazy" width="892" data-original="https://pic3.zhimg.com/v2-d184fc56f9362b3ba40d1d7755cce3a2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-d184fc56f9362b3ba40d1d7755cce3a2_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-8413765f3dd3b9d1ccd61b4a9199da62_b.jpg" data-caption="" data-size="normal" data-rawwidth="889" data-rawheight="712" class="origin_image zh-lightbox-thumb" width="889" data-original="https://pic3.zhimg.com/v2-8413765f3dd3b9d1ccd61b4a9199da62_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-8413765f3dd3b9d1ccd61b4a9199da62_b.jpg" data-caption="" data-size="normal" data-rawwidth="889" data-rawheight="712" class="origin_image zh-lightbox-thumb lazy" width="889" data-original="https://pic3.zhimg.com/v2-8413765f3dd3b9d1ccd61b4a9199da62_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-8413765f3dd3b9d1ccd61b4a9199da62_b.jpg"/></figure><p>系统还能够对测试结果执行自动分析，结论由报告生成器工具自动生成。例如以测试HElib库为例。报告生成器工具自动确定HElib库在测试期间正确率100%：对于所有1582个测试，HElib的输出与明文基线的输出相匹配。另外，HElib的总耗时间与不安全明文基线之间的平均比率约为260。为了更详细地分析HElib和明文基线的总耗用时间，报告生成器创建了下图中的两个图。图中的左图显示了HElib的总运行时间和1582个基线运行时间的直方图。为了易读性，数据被分组为百分位数：图表显示测试中的最快1％（即1582中前16个最快测试中取最快的一个），然后进行下一个1％的测试（即1582中16到32个最快测试中取最快的一个），依此类推。右图显示了HElib与基线之间的比率;换句话说，它是左图上两条曲线之间的商。这些数字表明，全同态加密的开销随着评估的电路变得更深和更复杂而增长。</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-4440addfbef5ebddfd72fd65564bf9c1_b.jpg" data-size="normal" data-rawwidth="1040" data-rawheight="291" class="origin_image zh-lightbox-thumb" width="1040" data-original="https://pic2.zhimg.com/v2-4440addfbef5ebddfd72fd65564bf9c1_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-4440addfbef5ebddfd72fd65564bf9c1_b.jpg" data-size="normal" data-rawwidth="1040" data-rawheight="291" class="origin_image zh-lightbox-thumb lazy" width="1040" data-original="https://pic2.zhimg.com/v2-4440addfbef5ebddfd72fd65564bf9c1_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-4440addfbef5ebddfd72fd65564bf9c1_b.jpg"/><figcaption> HElib和明文基线的总运行时间百分位数（左）和它们的比率（右）</figcaption></figure><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-096ffbb422bee2e277989b82abe59961_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="472" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-096ffbb422bee2e277989b82abe59961_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-096ffbb422bee2e277989b82abe59961_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="472" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-096ffbb422bee2e277989b82abe59961_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-096ffbb422bee2e277989b82abe59961_b.jpg"/><figcaption>密钥生成时间（左）和密文运算时间（右），以秒为单位</figcaption></figure><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-449a3caf21f607d3e5e85d7cae990373_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="431" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic4.zhimg.com/v2-449a3caf21f607d3e5e85d7cae990373_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-449a3caf21f607d3e5e85d7cae990373_b.jpg" data-size="normal" data-rawwidth="1080" data-rawheight="431" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic4.zhimg.com/v2-449a3caf21f607d3e5e85d7cae990373_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-449a3caf21f607d3e5e85d7cae990373_b.jpg"/><figcaption>每个门的密文运算时间，以秒为单位</figcaption></figure><p class="ztext-empty-paragraph"><br/></p><p>本系统可以按照用户设定的参数，实现密钥、公钥的生成，密文计算，明文计算，密文的解密，噪音预算，统计各个步骤的时间。具有友好的使用界面和报告生成界面。该系统具有灵活性，能够将已知的任何全同态加密库加入测试，本系统目前可以提供Seal库中的BFV方案和CKKS方案和HElib库的BGV方案的测试演示，并能够生成详细的数据分析报表，直观准确的给出全同态加密库的各项性能指标，便于非专业客户使用。为全同态加密的实践应用，提供了一个良好的评估测试工具。</p><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MTYzMjMzNA%3D%3D%26mid%3D2247485487%26idx%3D1%26sn%3D7c21e82e7464ce8d9a6aab20b1ced9b9%26chksm%3Dfcdc778ecbabfe987bbfae19c4322aff6e68272ceb26e8251f256077c3ac00eefd6dadf09a64%26token%3D1765294849%26lang%3Dzh_CN%23rd" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-7378fb199722f77e1912d962e77de0bb_180x120.jpg" data-image-width="889" data-image-height="377" class=" wrap external" target="_blank" rel="nofollow noreferrer">格密链科技研发快报：全同态加密测试系统</a><hr/><p><b>文章首发在微信公众号：btc201800</b><br/><b>知识星球ID：28018093</b><br/><br/><b>音频发布在喜马拉雅上“区块链杂谈 (第2季)”</b> <b><u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/Bjq4se" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/Bjq4se</span><span class="invisible"></span></a></u></b><br/><b>解读区块链白皮书</b> <u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/RNU1Q8" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/RNU1Q8</span><span class="invisible"></span></a></u></p>