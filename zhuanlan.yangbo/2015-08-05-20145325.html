<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>无平台语言——Haxe</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/20145325">原文</a></p>
<p>我已经使用<a href="http://haxe.org" data-title="Haxe" class="" data-editable="true">Haxe</a>已经有接近五年了。最早我被Haxe吸引是因为我发现Haxe相比我那时常用的ActionScript和Java，有更多我喜欢的语言特性，比如类型推断、泛型、静态扩展等。</p><p>五年后，Haxe的语言特性更为强大，宏、字符串插值、模式匹配等现代语言特性也陆续支持。</p><p>然而我却逐渐认识到，Haxe真正独特的价值，在于，Haxe是一种无平台语言。在现在地球上还没有其他成熟解决方案能做到。</p><br>Java可以跨操作系统平台。然而，“Java运行时环境”本身就是平台。你可以基于Java虚拟机和Java标准库构建跨操作系统的程序，但是Java程序与操作系统原生程序整合时，非常笨重。虽然Java字节码通过GWT运行在浏览器中，但也同样笨重，会大大增加脚本下载时间。<br><br>.NET框架的问题和Java虚拟机类似。虽然有Unity之类的技术能把托管代码编译成iOS、Android等的原生代码，但这些原生代码仍然基于Unity和.NET的API。哪怕你的程序99%都是原生代码，只要有1%用了托管代码，就必须包含庞大的.NET运行时。<br><br>Lua虽然运行时更轻巧，但本质上和Java虚拟机/.NET框架没有什么区别。仍然是在底层平台上封装一层Lua虚拟机。就算你的lua2js compiler可以直接编译出JavaScript，你仍然需要给这些编译出的JavaScript代码提供Lua标准库。<br><br>Haxe与上述技术不同，在于Haxe本身不提供平台（除了Haxe的C++ target），而是真正生成指定平台上的代码。Haxe生成的代码可以与原生代码无缝编译，根本不需要引入任何额外的运行时或者虚拟机。比如，我把一些公共库（<a href="https://github.com/qifun/json-stream" class="" data-editable="true" data-title="qifun/json-stream">qifun/json-stream</a>、<a href="https://github.com/qifun/haxe-import-csv" class="" data-editable="true" data-title="qifun/haxe-import-csv">qifun/haxe-import-csv</a>）用Haxe实现，然后根据不同平台，分别生成Java代码和C#代码，最后就可以在Scala服务端和Unity客户端中无缝整合。Scala程序员和C#程序员都完全不需要学习Haxe就能使用Haxe开发的中间件。
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
