<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>职分享 | 不容小觑“失败交易信息”！</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/107473468">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-be2fdd2fe3dd056f71ce356ef28b2fa8_b.jpg" alt=""></div><p>今天的文章来自社区小伙伴的分享，将和大家讨论<b>“失败交易信息对高频限价交易延迟套利的价值”。</b>欢迎大家留言讨论或转发分享，即可加入社区！</p><p><b>前言</b></p><p>高频限价交易中的“军备竞赛”-延迟套利对于交易至关重要。在这场竞价速度赛中，传统的方法及数据集，如：众所周知的“限价交易书目数据”，仅仅记录了成功交易信息，企图出价或取消但未成功的失败交易指令则完全被忽略，导致竞价赛的全貌缺失。<b>本篇认为失败的竞价指令信息也至关重要，为量化高频交易的延迟套利及其影响提供了宝贵的历史经验，进而能够为交易市场的决策者们提供依据，帮助制定更有效的交易策略。</b>为了验证此方法论，研究者们采用了伦敦股票交易市场的历史“交易讯息数据”，不仅包含了成功指令信息，也包含了试图但未成功执行的失败指令信息。</p><p><i><b>01</b></i></p><p><b>为何“失败交易信息”是宝贵的历史经验 – 现代限价交易系统构架解读</b></p><p>大多数股民认为“现代交易系统”核心为“配对引擎”，即交易后台会处理一序列买方/卖方“报价”，交易引擎根据“报价”是否低于（买方）/高于（卖方）市价来决定是否成交。然而“交易配对引擎”并不是“交易系统架构”中唯一的因素，且买/卖家也并不直接与“交易配对引擎”进行交易，而是与“网关”直接进行交易的，即：买卖参与双方发送“信息”到“网关”，由“网关”传递信息到“测序仪”，进而传递至“配对引擎”进行序列信息处理及配对；经处理的信息再通过“配对引擎”传递给“分布式系统”，再由“分布式系统”将私有化信息通过“网关”传递给交易参与者，将公有化信息通过“市场信息处理器”上传至公众信息平台。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-1be60cd69140789fcc96f867b035cddf_b.jpg" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="488" class="origin_image zh-lightbox-thumb" width="802" data-original="https://pic4.zhimg.com/v2-1be60cd69140789fcc96f867b035cddf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-1be60cd69140789fcc96f867b035cddf_b.jpg" data-caption="" data-size="normal" data-rawwidth="802" data-rawheight="488" class="origin_image zh-lightbox-thumb lazy" width="802" data-original="https://pic4.zhimg.com/v2-1be60cd69140789fcc96f867b035cddf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-1be60cd69140789fcc96f867b035cddf_b.jpg"/></figure><p>（图一 限价交易系统架构）</p><p class="ztext-empty-paragraph"><br/></p><p>“交易配对引擎”的一个瓶颈在于引擎要在短时间内处理大批量数据（如上百万数据），数据处理能力远超过“配对引擎”，因此需要将一部分数据处理工作量分至交易系统中的其它组件，如“网关”、“测序仪”、“分布式系统”等，因此“延迟”不仅发生在“配对引擎”上，也会发生在“交易系统架构”的各个组件。“网关”会分担一部分“交易配对引擎”的工作量，帮助验证信息完整性，控制风险等；通过“分布式系统”传送的信息，如“未能成功配对”或试图“取消”但未成功因不会影响交易记录，因此不会对公众公开，但其对交易者，及对于量化整个系统的延迟却至关重要。</p><p class="ztext-empty-paragraph"><br/></p><p>因此<b>“失败交易信息”能为“交易观察员”及“量化交易延迟”提供宝贵的历史经验信息。</b></p><p class="ztext-empty-paragraph"><br/></p><p><i><b>02</b></i></p><p><b>量化所需的基石 - 交易信息数据四要素</b></p><p class="ztext-empty-paragraph"><br/></p><p>获取传统限价交易记录中不存在的试图操作但未成功的失败指令数据为研究核心，获取的数据“准确性”及“信息时间戳地点”是量化交易延迟的关键影响因素，应包含以下四个基本要素：</p><p class="ztext-empty-paragraph"><br/></p><p><b>1.交易信息时间准确性及获取时间戳的地点准确性</b></p><p class="ztext-empty-paragraph"><br/></p><p>用于精确量化“延迟”，信息被打上时间戳的精度要求为“100纳秒”，且要保证所有信息在同一个表上被打上时间戳，否则度量标准不一致。</p><p class="ztext-empty-paragraph"><br/></p><p>在交易者自己的交易系统和股票交易系统中有一道“外防火墙”，此“外防火墙”是信息在“交易者”和“交易系统”传递的边界，为打时间的最合理地点。</p><p class="ztext-empty-paragraph"><br/></p><p><b>2.交易信息所包含的内容</b></p><p class="ztext-empty-paragraph"><br/></p><p>一个完整的交易包括两类交易信息：<b>入站信息和出站信息</b>，每类信息应包含：1）“标识符”：用于标识信息的符号和日期、发送信息者的ID、用于记录失败或者取消信息的交易引擎ID；2）时间戳；3）信息类型，如：新的限价指令、取消、取消替换、立即成交或取消；4）价格、成交量、买入/卖出信息；出站信息还应包含“交易执行报告”。</p><p class="ztext-empty-paragraph"><br/></p><p><b>3. 事件分类</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>4.指令数据维护</b></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-252b424d85d59704bc4c063a439b8b9a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="402" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic3.zhimg.com/v2-252b424d85d59704bc4c063a439b8b9a_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-252b424d85d59704bc4c063a439b8b9a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="402" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic3.zhimg.com/v2-252b424d85d59704bc4c063a439b8b9a_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-252b424d85d59704bc4c063a439b8b9a_b.jpg"/></figure><p>（图二 完整的交易数据及交易事件被记录，用于量化对“延迟套利”的影响）</p><p class="ztext-empty-paragraph"><br/></p><p><i><b>03</b></i></p><p><b>量化“高频限价交易的延迟”所用的模型</b></p><p class="ztext-empty-paragraph"><br/></p><p>新型的量化交易模型基于传统的BCS （Budish, Cramton, Shim）连续竞价市场模型（包含了“延迟套利”的定义，和高频交易竞赛的经济学原理），在此基础上运用“交易信息数据”，并进行了扩展。</p><p class="ztext-empty-paragraph"><br/></p><p>为了精确量化“限价交易的延迟套利”及其影响，四个基准边界条件应予以给定：<b>1）多个市场参与者在同一阈值、价格基准等进行交易；2）有些交易者较为活跃；3）有些成功，有些失败；4）事件为同时发生。</b></p><p class="ztext-empty-paragraph"><br/></p><p><i><b>04</b></i></p><p><b>影响“高频限价交易的延迟套利”的因素</b></p><p class="ztext-empty-paragraph"><br/></p><p>影响因素主要有：</p><p class="ztext-empty-paragraph"><br/></p><p><b>1）“延迟套利竞速赛”的频率和时长</b>，如FTSE100的交易频率为每分钟每一个传输符，而FTSE250的交易频率约为每7分钟一个；信息数据中的时长指从第一次交易成功到第一次失败耗时，为79微秒；</p><p class="ztext-empty-paragraph"><br/></p><p><b>2）交易体量：达到一定数量级才能准确量化高频竞价的“延迟套利”</b>，如：在平均FTSE100交易中，基于每日537次竞速赛测出延迟套利为每日0.043秒，即每个交易日有0.0001%的几率；</p><p class="ztext-empty-paragraph"><br/></p><p><b>3）参与交易的相关交易者数量</b>，即：等同或优于市价的报价指令数量，或在限价值的取消指令数量；</p><p class="ztext-empty-paragraph"><br/></p><p><b>4）成功与失败者格局，由模型给出结果</b>（图三），显示出快速交易的公司虽然获胜无法完全量化，但有获胜的可能；而交易速度不迅速的公司则无“延迟套利”可能；</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-c079d9f30b0e3810629c51d2eed090bf_b.jpg" data-caption="" data-size="normal" data-rawwidth="746" data-rawheight="607" class="origin_image zh-lightbox-thumb" width="746" data-original="https://pic4.zhimg.com/v2-c079d9f30b0e3810629c51d2eed090bf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-c079d9f30b0e3810629c51d2eed090bf_b.jpg" data-caption="" data-size="normal" data-rawwidth="746" data-rawheight="607" class="origin_image zh-lightbox-thumb lazy" width="746" data-original="https://pic4.zhimg.com/v2-c079d9f30b0e3810629c51d2eed090bf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-c079d9f30b0e3810629c51d2eed090bf_b.jpg"/></figure><p>（图三 成功与失败交易格局图）</p><p class="ztext-empty-paragraph"><br/></p><p><b>5）每次竞速赛获利（race profits）</b>，即：10秒市场价格中值点和成功报价的差值，也称之为Marked to Market at 10s；</p><p class="ztext-empty-paragraph"><br/></p><p><b>6）“延迟套利总获利”(Latency arbitrage profits)和“延迟套利税”(Latency Arbitrage Tax)，</b>延迟套利税=竞速赛获利/日均交易体量，含义为延迟套利报价赛中的价格有如在整个市场流动性所加的税；“延迟套利总获利”与“交易体量”及“波动性”高度相关，如下图四所示。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-3ab03101220fee2aced15a22e40d7273_b.jpg" data-caption="" data-size="normal" data-rawwidth="872" data-rawheight="460" class="origin_image zh-lightbox-thumb" width="872" data-original="https://pic4.zhimg.com/v2-3ab03101220fee2aced15a22e40d7273_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-3ab03101220fee2aced15a22e40d7273_b.jpg" data-caption="" data-size="normal" data-rawwidth="872" data-rawheight="460" class="origin_image zh-lightbox-thumb lazy" width="872" data-original="https://pic4.zhimg.com/v2-3ab03101220fee2aced15a22e40d7273_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-3ab03101220fee2aced15a22e40d7273_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-6f171eec92f57ac50ac593735bb8e330_b.jpg" data-caption="" data-size="normal" data-rawwidth="888" data-rawheight="465" class="origin_image zh-lightbox-thumb" width="888" data-original="https://pic1.zhimg.com/v2-6f171eec92f57ac50ac593735bb8e330_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-6f171eec92f57ac50ac593735bb8e330_b.jpg" data-caption="" data-size="normal" data-rawwidth="888" data-rawheight="465" class="origin_image zh-lightbox-thumb lazy" width="888" data-original="https://pic1.zhimg.com/v2-6f171eec92f57ac50ac593735bb8e330_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-6f171eec92f57ac50ac593735bb8e330_b.jpg"/></figure><p>图四、左上-延迟套利利润与交易体量的关系；右上-延迟套利利润与波动性的关系；左下-延迟套利税与交易体量的关系（FTSE350为例）；右下-延迟套利税与波动性的关系（FTSE350为例）；</p><p class="ztext-empty-paragraph"><br/></p><p>“延迟套利税”与“市场流动性成本”直接相关，由传统有效价差分解模型得出“延迟套利”对价差有明显影响，如约三分之一的FTSE100的3.62基准点偏差发生在高频限价交易的竞价中；另一种方法将“延迟套利税”从“市场流动性成本”的影响剔除，来观测“市场流动性成本”的变化，从而量化“延迟套利税”与“市场流动性成本”的相关性，研究结果显示若无延迟套利，流动性成本将减少约17%。</p><p class="ztext-empty-paragraph"><br/></p><p><i><b>05</b></i></p><p><b>量化影响因子的作用</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>1. 交易信息数据时长的影响：</b>“延迟套利税”与“时长”正相关，如FTSE 350延迟套利税在50微秒的时长范围内为0.20个基准点，在3毫秒的时长范围内增长为0.81个基准点；</p><p class="ztext-empty-paragraph"><br/></p><p><b>2. 交易指令或多任务指令的影响：</b>如一场竞价赛中若无“取消”指令，所获利润将大不相同；而若竞价赛中同时存在1个/多个“取消”指令加一个“获取”指令，对所获利润无实质影响，再次印证了高频交易员行之有效的策略为快速狙击式交易，而非针对流动性储备，市场流动性主要由无法进行快速高频交易的市场参与者提供；</p><p class="ztext-empty-paragraph"><br/></p><p><b>3. 交易基准变更导致交易成功/失败定义的变更：</b>如试图“报价”指令若被部分执行，则此指令即为成功；若试图“取消”指令下达后，部分交易被取消则视为此“取消指令”为成功；从上述定义中，可看出“成功”的定义取决于“部分”的量化，如10000手报价中成交了100手即视为成功；而如果改变基准线，则原先视为成功的指令将变为失败指令，如10000手报价中成交了9000手才可视为成功。该基准线变更引起的指令“成功”/“失败”的定义变更也会对“延迟套利量化”产生近15% - 50%左右的影响。</p><p class="ztext-empty-paragraph"><br/></p><p><i><b>06</b></i></p><p><b>基于包含失败信息的高频限价交易量化研究的意义</b></p><p class="ztext-empty-paragraph"><br/></p><p>该严谨科学的理论研究最大的贡献在于<b>提供了“高频限价交易”竞价的成功与失败交易全貌图，失败信息数据为量化“延迟套利”提供丰富的历史经验。</b>基于此的方法论和预测模型，<b>给出了多个影响因素、相关性及影响数量级，帮助交易市场决策者制定更为行之有效的决策。</b></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p><b>欢迎大家留言交流！如果您对交易, 对冲基金等有兴趣,请扫描添加文末二维码加入Fintech社区。</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>近期热招:（点击标题，即可了解详情）</b></p><p class="ztext-empty-paragraph"><br/></p><ul><li><b><a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIyMDg1MTY4Mg%3D%3D%26mid%3D2247485143%26idx%3D1%26sn%3D60101e9fd924b427a4380d52bbe9a2cc%26chksm%3D97c4fa5aa0b3734c5b9e9bac3563f6f216fd5624f971a46ae45abca64a594ccb3bcb69a952e3%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">招聘 | 基金经理专场-Global Pay-北京/上海</a></b></li><li><b><a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIyMDg1MTY4Mg%3D%3D%26mid%3D2247485148%26idx%3D1%26sn%3D7abf3ec4b8ae9d1fbe7d40c0f194cd58%26chksm%3D97c4fa51a0b373475c1e43856bf23571debf9bd7931167df832856b8caa7faff4011746f14c1%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">招聘 | C++ Developer-50-100万+奖金-多家对冲基金-北京</a></b><br/></li><li>春季校招| 6家对冲基金-薪资高于BAT-上海<br/></li><li><b><a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIyMDg1MTY4Mg%3D%3D%26mid%3D2247485093%26idx%3D1%26sn%3Db42e3b30a8d552a325ebf9a067dbd6d0%26chksm%3D97c4fa28a0b3733ee74ce2d9ccac3f6273beffac9fab0b2f3339176d648abf520c4647c5aace%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">招聘 | 量化研究-海外市场-Global Pay-上海-领先对冲基金</a></b><br/></li><li><b><a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIyMDg1MTY4Mg%3D%3D%26mid%3D2247485080%26idx%3D1%26sn%3D18d05ea076c8e979df973fd115e79295%26chksm%3D97c4fa15a0b373039bb8c797b2ddac3951e8f6adcbe19b6003d6aa56c0fbde07254596f12be2%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">Hire | Quant Developer-$170K-$300K -New York</a></b></li><li><b><a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIyMDg1MTY4Mg%3D%3D%26mid%3D2247485069%26idx%3D1%26sn%3D54e50326d585024585ac07aa12f3ecec%26chksm%3D97c4fa00a0b37316f9baf2662c168d7e4e97516cea4031e2e6f0b2a29c43c1f3fa108f56b6b1%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">Hire | C++ Developer-HKD 150万-180万/年-香港</a></b></li></ul>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
