<div class="title-image"><img src="https://pic1.zhimg.com/v2-582a24682bccd7ddf4d0bdd6325b96c6_r.jpg" alt=""></div><p><b>本系列与“预测”，“交易策略”，”期权策略“等贴近交易的内容不直接相关。不感兴趣的知有可以右上角了。</b></p><p><b>前言：</b></p><p>最近写那么多东西说闲也是闲，说不闲也是不闲。</p><p>闲是因为最近真的没有什么特别繁重的工作任务，说不闲是因为最近写的这些东西都是一些最近的工作相关能写的出来的且还算有意思的东西（不能写出来的东西更无聊）。</p><p>黑猫的本职工作虽说不是固定收益衍生品，但是固定收益模型当之无愧是Q系的本家，老大哥，帮主等等，平时会不由自主的去学习固定收益的东西。可以说其他资产类别的Q系死绝了固定收益的也不会死，这是因为广义的Q系就是一派偏重production和风险度量分析领域，以研究，拆分，重组，度量资产的收益和风险为主。固定收益产品由于其本身结构复杂有互相之间自带联系的特点，当真是作为Q系遗存下来的灵魂领域所在。</p><p>由于工作越来越偏向于实务，文章的风格也从一开始的：</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/34562207" data-image="https://pic3.zhimg.com/v2-b5ecf8eaaba4995357bb3f78a80ec73e_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Libor Market Model简介</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/34664049" data-image="https://pic3.zhimg.com/v2-b5ecf8eaaba4995357bb3f78a80ec73e_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Libor Market Model 简介2 ——分离波动率函数和校准（一部分）</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/35850285" data-image="https://pic3.zhimg.com/v2-b5ecf8eaaba4995357bb3f78a80ec73e_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Libor Market Model 简介3 ——LMM下的基本利率产品</a><p>到现在的：</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/61908474" data-image="https://pic3.zhimg.com/v2-582a24682bccd7ddf4d0bdd6325b96c6_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Cap/Floor条款</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/63067899" data-image="https://pic3.zhimg.com/v2-582a24682bccd7ddf4d0bdd6325b96c6_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Swaption条款</a><p>之所以一直不碰希腊值这一块，是因为固定收益产品由于结构和其产品目的过于特殊，导致其用的风险度量和其他产品有重大区别，是一块难啃的骨头。也就是现在闲的没事的时候写一些了。</p><hr/><p><b>综述：</b></p><p><b>总的来说，固定收益产品的风险度量之所以特殊是因为：und不是und，vol不是vol。</b></p><p class="ztext-empty-paragraph"><br/></p><p>所谓的Und不是Und，就是不可能像以其他产品一样一直有可交易的Und。</p><p>其一是固定收益产品的Und本身，往往只是一个benchmark而不是一个能随意交易的产品。比如Libor，说是可以作为一个Und，而实际上要真的去交易他，只能通过Cap/Floor抑或是利率远期这些Und是Libor或者可转化为Libor的产品。</p><p>其二是也许Und本身是能交易的，但是人们往往避免交易Und，其中典型的就是swap。如果银行为了对冲卖出的swaption而“买入”swap，这就和他卖出swaption来避免swap过大的现金流的初衷相违背了。</p><p>其三是固定收益产品的Und并不是全期限流通的，而且人们往往也不需要不流通的那些期限。例如银行卖出了5Yx5Y的cap一手，但是比方说市场上5y5y这个tenor的Libor基本不流通，反倒是一些期限短tenor也短的比如6m3mLibor流通性很好。这个时候银行往往不方便也不要需要对冲那些不流通的期限组合。</p><p>综上这些就导致了固定收益产品风险度量的第一个特点：<b>基本不会有特定的Und的度量，且度量一定分期限。</b></p><p class="ztext-empty-paragraph"><br/></p><p>所谓Vol不是Vol，就是几乎所有固收的产品都会受到最原始的短期利率波动率影响，但是分别都有各自的波动率结构。</p><p>首先Vol这个概念本身就是个依存于建模方法的产物，而无论选择何种框架，HJM也好，LMM也好。不同Und的Vol都会有一个独一无二的和短期率vol的构造关系。而因为他们都和短期率发生关系，这就导致了固定收益产品风险度量的第二个特点：<b>固定收益产品的vol默认一动全动的，不管是何种Und。</b></p><p>比如，Libor的波动率变了，而因为我们知道Libor的波动率是有短期率构造成的，那么相应的Swap的波动率也应该发生变化。但由于swap和Libor的结构不同，因此其变化方式和Libor必然不同。</p><p>另外，因为短期率波动率只是一个建模中间过程，其应用体验是非常差的，每次对于不同产品都要重新构造。因此人们并不会直接校准短期率甚至是远期率f(t,T)的波动率，而是会选择其参照物产品的波动率，例如债券，Cap/Floor和Swaption。 由于一动全动的原则，一旦波动率发生改变，所有参照物波动率都会发生改变且除了平移改变以外，他们各自的改变各不相同。</p><p>然而这样建模上实在太困难了，不可能所有产品的波动率都按照框架重构一边，因此对于波动率的处理上，固定收益产品风险度量的第三个特点就是：<b>固定收益产品的的波动率及其度量是分期限，分tenor进行计算的。 </b></p><p>了解这些特点之后，就可以介绍风险度量了</p><p class="ztext-empty-paragraph"><br/></p><p><b>Delta:</b></p><p>根据<b>不会有特定的Und的度量</b>的特点，固收类衍生品不应该有对Und的delta，那么就是剩下“对基准利率”的delta也就是DV01了。而根据<b>度量一定分期限</b>的特点，所有DV01都是一个以term为下标的向量，这个概念比较类似所谓的partial duration（具体可以阅读John Hull有关利率产品那章）。也就是所有DV01的是通过提高某一个期限上利率一个基点所提高的价值计算的：</p><p><img src="https://www.zhihu.com/equation?tex=DV01_T+%3D+%5Cfrac%7BP%28r_T+%2B+%5Cdelta+r_T%29+-+P%28r_T+-+%5Cdelta+r_T%29+%7D%7B2%5Cdelta+t_T%7D" alt="DV01_T = \frac{P(r_T + \delta r_T) - P(r_T - \delta r_T) }{2\delta t_T}" eeimg="1"/> </p><p>那么参照率有几个呢，一般是三种：</p><p>全曲线：提高所有参照利率曲线某一个期限的利率，对应了最基本的DV01。</p><p>Libor曲线：对于一个固定频率（一般是6m)的Libor，提高其某一个期限的利率，对应了度量Libor01</p><p>OIS曲线：仅提高OIS率曲线某一个期限的利率（一般比较短），对应了OISDV01</p><p>这三种利率产品的delta被成为”参照物delta“，他们都是一个N维的向量，N是所选取term的个数，他们之间互相可加。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Gamma01：</b></p><p>同理，对于每一个期限，都会有一个gamma01，也分别对应了三个参照率。</p><p><b>但是利率产品一般不考虑Gamm01而考虑vega，</b>这是因为利率产品的受波动率的影响不光有期限这个维度，还有tenor这个维度。tenor是利率曲线本身不具有（上文的Libor曲线其实具有，但是一般固定了重置频率也就是tenor），但是产品会具有的属性。由于对参照率本身的度量无法体现出tenor的影响，因而不是主要考虑对象。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Vega：</b></p><p><img src="https://www.zhihu.com/equation?tex=%5Ctextbf%7B%E5%9B%BA%E5%AE%9A%E6%94%B6%E7%9B%8AVega%E6%98%AF%E6%9D%A5%E8%87%AA%E6%B7%B1%E6%B8%8A%E7%9A%84%E5%87%9D%E8%A7%86%EF%BC%8C%E6%98%AF%E6%B7%B1%E9%82%83%E7%9A%84%EF%BC%8C%E9%BB%91%E6%9A%97%E7%9A%84%7D" alt="\textbf{固定收益Vega是来自深渊的凝视，是深邃的，黑暗的}" eeimg="1"/> </p><p>这句话很中二，但是黑猫只是想直观的表达一下固定收益产品vega的复杂程度。</p><p>固定收益产品的vega可以说是所有衍生品风险度量中理论最复杂，实现最困难，内容最深广的度量。一个简单固定收益产的<b>全部vega</b>至少需要一个团队<b>专门</b>来实现。黑猫能写出来的，至多算皮毛中的皮毛，甚至连梗概都不敢称，只剩说是略窥一斑。</p><p class="ztext-empty-paragraph"><br/></p><p><i>计算vega要解决的第一个问题，到底什么用什么的波动率？</i></p><p class="ztext-empty-paragraph"><br/></p><p>首先想到的自然是Und的波动率，但是由于<b>固定收益产品的vol默认一动全动的，不管是何种Und</b>的特性，因此单一Und的波动率是不能满足的vega计算的，也就是说，<b>要计算一个产品的vega，就必须联动所有参照物产品</b>。因此要解决的第一个问题变成了：</p><p class="ztext-empty-paragraph"><br/></p><p><i>参照物产品应该选哪些？</i></p><p class="ztext-empty-paragraph"><br/></p><p>一般而言，每个有规模的银行在构建自己的利率曲线时都会有一个参照物篮子，每季度变化。因此，在计算波动率的时候，需要一套方法能覆盖参照物里所有Und的波动率变化，这套变化必须满足一定的框架。</p><p>简单一些的，如果不涉及特定业务，那么参照物篮子就会小。极端一点，假设一个机构除了swaption以外不作任何固定收益产品，那么他们的波动率就会非常简单的香草波动率，不需要涉及任何联动。</p><p>我们假设机构已经完善了所涉及到波动率的所有产品，可以计算vega的。就可以来到第二个问题了：</p><p class="ztext-empty-paragraph"><br/></p><p><i>固定收益产品的Vega是什么？</i></p><p class="ztext-empty-paragraph"><br/></p><p>由于<b>固定收益产品的的波动率及其度量是分期限，分tenor进行计算的</b>， 因此任何定义下的vega都应该是一个二维矩阵，代表着不同term和不同tenor的vega，其中由于产品流动性问题大部分可能是0。</p><p>那么在对于一个期限一个tenor而言什么是vega呢？我们不能再像delta一样只拉高一个点了，因为固定收益不同期限不同产品的波动率，</p><p class="ztext-empty-paragraph"><br/></p><p><i>具有相关性</i></p><p class="ztext-empty-paragraph"><br/></p><p>因此在甚至还没开始定义vega前，就必须在建模的时候解决不同term和tenor之间波动率相关性问题。可以参考一下以前写的</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/34664049" data-image="https://pic3.zhimg.com/v2-b5ecf8eaaba4995357bb3f78a80ec73e_ipico.jpg" data-image-width="1024" data-image-height="1024" class="internal">黑猫Q形态：Libor Market Model 简介2 ——分离波动率函数和校准（一部分）</a><p>这是LMM框架下的波动率相关性建模方法，更具体的技术细节可以参考AP绿第14章。</p><p>解决了相关性问题后才可以开始定义vega。一般而言固定收益的vega有大致这么几种定义方式：</p><p>UndVega： 只平移对应Und自身波动立方（固定收益产品的波动率自带term和tenor两个维度，还有对应的strike，因此每一个产品的波动率都是一个R^3上的几何体）所求得的vega，比如CapVega，SwapVega。</p><p>IRVega：平移所有对应Und波动立方所求得的vega。</p><p>ATMVega：平移所有对应Und波动立方中Strike = Und部分所求得的vega。</p><p>模型Vega：不对曲面进行任何覆盖，单独通过定价模型求出的vega。</p><p>参数Vega：由于对于波动率的建模的过程中，有可能是以参数形式的（比如SABR），则需要专门计算这些波动率参数单独的敏感度。</p><p class="ztext-empty-paragraph"><br/></p><p>关于固定收益产品的vega，这里只能做一个连概述都算不上的窥探，不能说和说不完的东西无穷无尽。这里vega的定义，计算，波动率的构成，每一个子话题都可以专门成为一个课题。写这些的目的只有一个，让读者体会一下收益产品vega的<b>深邃与黑暗。</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>Theta：</b></p><p>固定收益产品的theta也不是省油的灯，但是没有复杂到像vega一样需要大量专业人士单独构建，只是分为很多个部分。这里可以做一个概述：</p><p>产品Theta：衍生品自生的Theta: <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7BP%28t%2B%5Cdelta+t%29+-+P%28t%29%7D%7B%5Cdelta+t%7D" alt="\frac{P(t+\delta t) - P(t)}{\delta t}" eeimg="1"/> </p><p>远期补偿效益：由于不像股票和商品，固定收益Und本身有自己的贴现率，因此衍生品带来的时间上的carry损耗之外，Und自身却可能存在因时间带来的升值（愈来愈贴近FV），因此会有一个远期补偿（正的）。 </p><p>信用Theta： 由于固定收益产品充当贴现率的不只有利率还有信用溢差（credit spread），在给定固定时刻的hazard rate h_t， 可以估算出一天后被信用溢差修正过的曲线，因而算出一个信用Theta。</p><p>其他曲线轮动Theta：利率曲线对于时间有一些其他的轮动轮动效应（上面的信用修正是其一），各种小而不需单独考虑的时间轮动因素可以综合起来用来修正一天后的曲线来求出他们的轮动theta。</p><hr/><p><b>后记：</b></p><p>这篇废话文章当中的任何一个小部分都是可以展开深挖的，日后如果黑猫仍有机会接触和学习了更多的固定收益衍生品知识可以更新。</p><p>由于固定收益领域流通笔数少但都额度都特大，因此production本身和支撑production所需的各种工作，比如风险度量计算和条款都变得比较重要。也正如开头所说的，固定收益产品是金融里一个经久不衰偏重production的领域。光是如何定义度量，就已经有无穷无尽的内容。一个人，甚至一个机构能覆盖到的内容可谓少之又少。</p><p class="ztext-empty-paragraph"><br/></p><p>按照惯例，希望这些”被时代淘汰的虚假内容"能帮助一些从业者和学习者。</p>