<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>谈谈“脱裤”这点事</title>
</head>
<body>
<p><a href="https://mp.weixin.qq.com/s?timestamp=1537914724&amp;src=3&amp;ver=1&amp;signature=R036PtaURK0F3rCExVFrxml40ZzQ0noDFx2G9HXZ5GJcXPvZv8RD9XzJW2ZDuwYuAE7f9brQYoyFZQurQeQwwRFzUpUafXxPbpR9bGWxcw8h493xgl2jLaS*YD8pOPiqZKM32kB2vXvvDex6g-SqtGg15iTfUF-vqrpRPOMQjGA=">原文</a></p>
<div id="js_top_ad_area" class="top_banner"></div><div class="rich_media_inner">

        
        
        <div id="page-content" class="rich_media_area_primary">
          <div class="rich_media_area_primary_inner">
                                    
                        

            <div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">
                    
                    
                    谈谈“脱裤”这点事

                                                                                </h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                            <span class="rich_media_meta rich_media_meta_text">
                                                <span id="js_author_name" class="rich_media_meta_link" data-rewardsn="" data-timestamp="" data-canreward="0">caoz的赞赏</span>
                                            </span>
                                        
                                       
                                                                    
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" id="js_name">
                        caoz的梦呓                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">caoz的梦呓</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">caozsay</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">caoz的心得与分享，只此一家，别无分号。</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text"></em>





                </div>
                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p>别想歪，“脱裤”是一种俗称，其实是拖库，或者说，数据库被黑客整个拖下来。</p><p><br></p><p>其实我在我们易灵微课的信息安全培训课程里提到过github敏感信息上传的风险，很不幸的是，同样的问题，你看，华住会犯了同样的错误，因为数据库密码被传递到了github上，数据被拖库，现在已经在地下黑市流通。想想几亿条开房记录，我还是华住会金会籍呢。要不要瑟瑟发抖呢？</p><p><br></p><p>今天说一下华住会这个脱裤事件暴露的问题，和防脱裤的几个原则。</p><p><br></p><p>1、github信息脱敏</p><p><br></p><p>根据公开的一些截屏信息看，华住会不仅仅是数据库密码被暴露，（还是弱密码），而且连微信的appid 和secret也被暴露，想想黑客要是利用这个在华住会的官方微信公众号里发一条钓鱼信息，这特么的多可怕。</p><p><br></p><p>代码使用github我觉得不是说非要严格禁止，但代码脱敏是非常重要的，关键密码和关键信息是绝对不能放在公开的代码里的。</p><p><br></p><p>2、数据库应禁止外网ip</p><p><br></p><p>数据库应只保留内网端口，如果必须保留外网端口，应通过白名单策略，仅限指定服务器访问。</p><p><br></p><p>3、数据中间层过滤</p><p><br></p><p>对于高安全性系统而言，程序代码应只访问中间层，只能在中间层以许可的逻辑访问数据库，中间层应能过滤一些危险操作，或只设置白名单操作。类似全库拖库的操作，应该是中间层所不能许可的，或者仅限于指定管理备份主机或仅限于最高权限管理账户，而程序是不能使用最高权限账户登录数据库的。</p><p><br></p><p>4、密码严禁明文存储</p><p>不但要加密存储，还要不可逆加密，</p><p>不但要不可逆加密，还要加盐，</p><p>不但要加盐，还要加随机盐。</p><p><br></p><p>cmd5.com 我以前说过，不加盐的不可逆加密秒秒钟被彩虹库撞出来。</p><p>不理解为什么要随机盐的程序员都回去补课去，这个问题必须理解透彻。</p><p><br></p><p>5、敏感信息应混淆存储</p><p><br></p><p>敏感信息必须可逆，不能做不可逆加密，这是没办法的事情。</p><p>但信息混淆还是要做的，不能让黑客那么容易拿到。</p><p><br></p><p>当然，如果代码都公开了，github上都被人拿到了，混淆也是很容易被破解出来的，但，怎么说呢，每一步都是增加黑客的入侵成本，提高黑客拖库门槛不是么。如果代码没公开而只是数据库被拖，那么敏感信息混淆还是很有意义的。</p><p><br></p><p>6、任何企业的程序员入职，都应该有信息安全培训，怎么强调都不过分。</p><p><br></p><p>拖库的可能性，想到哪里写到哪里</p><p><br></p><p>1、这种github密码泄露，惨剧挺多的了已经。</p><p>2、内鬼。</p><p>3、SQL注入，惨剧也极多，而且经久不衰。</p><p>4、服务器被其他原因入侵，连带数据库被拖</p><p>5、研发或运维的个人电脑被入侵，植入木马</p><p>6、备份服务器安全策略不当，或者第三方备份系统出问题，也包括数据分析服务器。很多时候这就是个意识问题，觉得反正不是线上业务，随便跑跑数据。</p><p>7、云穿透，云主机现在太流行了，虽然暂时案例可能没有，风险还是存在的，而且一出问题肯定不小。</p><p>8、授权滥用，比如第三方接口给的权限太高，或者没注意到授权验证逻辑上的风险。</p><p>9、报废服务器处置不当，硬盘被人数据修复什么的，别说异想天开，只要资料有价值，就有人会琢磨这些。有些公司业务关停，二手服务器批量出售，如果处理不当，这个风险还是有的。</p><p>10、基于社工，拿到数据库密码，比如微信上假冒技术总监找运维工程师要到密码。</p><p>11、嗅探侦听，通过sniffer拿到管理员密码入侵服务器。不过现在应该没有管理员用telnet了吧。</p><p>12、钓鱼，比如机房如果安全配置很扯淡，在同机房内搞个服务器，弄个arp欺骗，把管理员骗到蜜罐里，密码轻松到手。</p><p><br></p><p>先想到这些。有其他的欢迎留言补充。</p><p><br></p><p>微信能不能给开留言赞赏，很多次都想给留言者赞赏的。</p><hr><p><br></p><p><a href="http://mp.weixin.qq.com/s?__biz=MzI0MjA1Mjg2Ng==&amp;mid=2649867800&amp;idx=1&amp;sn=08577d98b68bf7da85007e8efdcd8bb0&amp;chksm=f1075c75c670d5630a98ef25ba72b58f9e86276e2b540ca0a2fc7fbf18418f9d644b256a4765&amp;scene=21#wechat_redirect" target="_blank">算法是如何体现价值的</a> 这么好的广告访问量居然不高，对不起广告主么。<br></p><p><br></p><p>题图，朋友圈偷来的，侵删</p><p><img class="" data-copyright="0" data-ratio="0.75" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_jpg/nBKX0s8fer3I4hvLazvFia8XTuiaOrSZ0jZW11icjbq54a6Wz8ias0VMYxfCjHYkqbdoUmNKmtnEiceibDXCxFHR3pQg/640?wx_fmt=jpeg" data-type="jpeg" data-w="720" style=""></p><p><br></p>
                </div>
                <script nonce="377214398" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    (function(){
                        if (navigator.userAgent.indexOf("WindowsWechat") != -1){
                            var link = document.createElement('link');
                            var head = document.getElementsByTagName('head')[0];
                            link.rel = 'stylesheet';
                            link.type = 'text/css';
                            link.href = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/winwx3ec991.css";
                            head.appendChild(link);
                        }
                    })();
                </script>

                
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display:none;"></div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                       
                                                <div class="reward-author" style="display: none;" id="js_reward_author">caoz的赞赏</div>
                                            
                                       

                                        <p class="reward_tips js_reward_wording">感谢您的支持</p>
                                        <p>
                        <a class="reward_button" id="js_reward_link" href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips"><a href="##" id="js_reward_total"></a> 人<span id="js_reward_total_text">赞赏</span></span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                    </div>
                </div>
                                <div class="reward_qrcode_area reward_area tc" id="js_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                                        <p class="reward_tips">感谢您的支持</p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" id="js_reward_qrcode_img"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                                                
                
                            </div>
                                    
                        


                        
            <ul id="js_hotspot_area" class="article_extend_area"></ul>


            
                        <div class="rich_media_tool" id="js_toobar3">

                                            <div id="js_read_area3" class="media_tool_meta tips_global_primary meta_primary" style="display:none;">阅读 <span id="readNum3"></span></div>

                <span style="display:none;" class="media_tool_meta meta_extra meta_praise" id="like3">
                    <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum3"></span>
                </span>

                

            </div>


                        <div class="rich_media_tool" id="js_sg_bar">

                                
            </div>
                      </div>
        </div>

        <div class="rich_media_area_primary sougou" id="sg_tj" style="display:none"></div>


        
        <div class="rich_media_area_extra">
          <div class="rich_media_area_extra_inner">
              
              <div id="js_share_appmsg">
              </div>

              
                            <div class="mpda_bottom_container" id="js_bottom_ad_area"></div>
                            
              <div id="js_iframetest" style="display:none;"></div>
                            
                            
              <div class="rich_media_extra rich_media_extra_discuss" id="js_cmt_container" style="display:none">
                

                
                <div class="discuss_mod" id="js_friend_cmt_area" style="display:none">
                  
                  
                  
                </div>

                                <div class="discuss_mod" id="js_cmt_area" style="display:none">
                </div>
                              </div>
          </div>
        </div>

        
        <div id="js_pc_qr_code" class="qr_code_pc_outer" style="display:none;">
            <div class="qr_code_pc_inner">
                <div class="qr_code_pc">
                    <img id="js_pc_qr_code_img" class="qr_code_pc_img">
                    <p>微信扫一扫<br>关注该公众号</p>
                </div>
            </div>
        </div>
    </div>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
