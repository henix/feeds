<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>TiDB çš„åèŠ±å›­</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/</link>
<description></description>
<language>zh-cn</language>
<lastBuildDate>Fri, 20 Sep 2019 11:14:45 +0800</lastBuildDate>
<item>
<title>å¹¿å·è§ï¼PingCAP Talent Plan ç¬¬å››æœŸå³å°†å¼€å¯</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-19-83232114.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/83232114&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-bf19b99a508a22402bb89d40dc1adc02_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;å¤§å®¶æœŸå¾…å·²ä¹…çš„ç¬¬å››æœŸ PingCAP Talent Plan çº¿ä¸‹åŸ¹è®­è¯¾ç¨‹ï¼Œå°†åœ¨ 10 æœˆ 14 æ—¥äº PingCAP å¹¿å· Office å¼€å¯ï¼è¿™å¯èƒ½æ˜¯ä»Šå¹´æœ€åä¸€æ³¢åˆ†å¸ƒå¼æ•°æ®åº“ã€Œä»å…¥é—¨åˆ°å®æˆ˜å¼€å‘ã€çš„ç³»ç»ŸåŸ¹è®­å“¦ï¼Œé”™è¿‡åªèƒ½ç­‰æ˜å¹´å•¦ï½ &lt;/blockquote&gt;&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒPingCAP Talent Plan æ˜¯æˆ‘ä»¬ä¸º TiDB å¼€æºç¤¾åŒºå°ä¼™ä¼´æä¾›çš„å­¦ä¹ é€šé“ï¼Œ&lt;b&gt;è¯¾ç¨‹å›´ç»•ç€ SQL å¼•æ“ &amp;amp; åˆ†å¸ƒå¼å­˜å‚¨çš„åŸºç¡€çŸ¥è¯†å’Œå‰æ²¿æŠ€æœ¯ï¼ˆåŒ…æ‹¬ Goã€Rust ä¸¤é—¨ç¼–ç¨‹è¯­è¨€ï¼‰è®¾è®¡&lt;/b&gt;ï¼Œçº¿ä¸‹è¯¾ç¨‹åŸ¹è®­æ›´æ³¨é‡é€šè¿‡å®æˆ˜ç»ƒä¹ ï¼Œå¸®åŠ©å­¦å‘˜æå‡å®æ“èƒ½åŠ›ï¼Œç”šè‡³æœ‰èƒ½åŠ›å‚ä¸å·¥ä¸šçº§åˆ†å¸ƒå¼æ•°æ®åº“é¡¹ç›® TiDB çš„å¼€å‘ã€‚&lt;/p&gt;&lt;p&gt;è‡ª 2018 å¹´å¯åŠ¨è‡³ä»Šï¼Œå·²çŸ¥çš„å‚ä¸çº¿ä¸Šè¯¾ç¨‹å­¦ä¹ çš„äººæ•°å·²çªç ´ 200 äººï¼Œè€Œçº¿ä¸‹è¯¾ç¨‹åŸ¹è®­ä¹Ÿå·²æˆåŠŸä¸¾åŠ 3 æœŸï¼Œå…± 30 ä½™åå­¦å‘˜é€šè¿‡çº¿ä¸‹è€ƒæ ¸é¡ºåˆ©ç»“ä¸šï¼Œå…¶ä¸­æœ‰ 8 åå­¦å‘˜æ›´æ˜¯ä»¥å®ä¹ ç”Ÿ/æ ¡æ‹›ç”Ÿçš„èº«ä»½åŠ å…¥äº† PingCAPã€‚å½“ç„¶ä¹Ÿæœ‰ä¸å°‘å­¦å‘˜ç»§ç»­æ´»è·ƒåœ¨ TiDB å¼€æºç¤¾åŒºçš„å…¶ä»–æ´»åŠ¨ä¸­ï¼Œå¹¶å¼€å¯äº† Contributor çš„è¿›é˜¶ä¹‹è·¯ã€‚ &lt;/p&gt;&lt;p&gt;&lt;b&gt;è‡ªç¬¬ä¸‰æœŸçº¿ä¸‹åŸ¹è®­è½å¹•ï¼Œå°±æœ‰å°ä¼™ä¼´æ¥é—®ç¬¬å››æœŸå°†æœ‰å“ªäº›â€œæ–°ç©æ³•â€ï¼Œç°åœ¨è¿™å°±ä¸€å¹¶é€éœ²å•¦ï½è¯·å¾€ä¸‹çœ‹ï¼&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;ç¬¬å››æœŸçº¿ä¸‹è¯¾ç¨‹å®‰æ’&lt;/b&gt;&lt;/h2&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4fa03844208905242cf7a754a3d00e25_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;551&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-4fa03844208905242cf7a754a3d00e25_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4fa03844208905242cf7a754a3d00e25_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;551&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-4fa03844208905242cf7a754a3d00e25_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-4fa03844208905242cf7a754a3d00e25_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;* æ³¨ï¼šçº¿ä¸Šè¯¾ç¨‹è¯¦è§æ–‡æœ«ã€é˜…è¯»åŸæ–‡ã€‘é“¾æ¥ï¼Œé€šè¿‡çº¿ä¸Šè¯¾ç¨‹è€ƒæ ¸ä¸”æˆç»©ä¼˜å¼‚çš„åŒå­¦å°±æœ‰æœºä¼šå‚ä¸çº¿ä¸‹åŸ¹è®­å“¦ï½&lt;/p&gt;&lt;h2&gt;&lt;b&gt;æœ¬æœŸ Talent Plan â€œæ–°ç©æ³•â€&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1. å¢åŠ åœ¨çº¿è§†é¢‘æ•™å­¦å†…å®¹ï¼Œçªç ´å­¦ä¹ æ—¶é—´å’Œåœ°ç‚¹çš„é™åˆ¶&lt;/b&gt;æœ‰ä¸å°‘å‚åŠ çº¿ä¸‹è¯¾ç¨‹çš„å­¦å‘˜åé¦ˆè¯´ï¼Œé™¤äº†ç°åœºæˆè¯¾ä¹‹å¤–ï¼Œä¹Ÿå¸Œæœ›è¯¾ä¸‹èƒ½å¤Ÿæä¾›æ›´å¤šè§†é¢‘èµ„æºæ–¹ä¾¿è¿›è¡ŒçŸ¥è¯†å·©å›ºã€‚æ‰€ä»¥ï¼Œ&lt;b&gt;æœ¬æœŸçº¿ä¸‹è¯¾ç¨‹ä¸­å°†å¢åŠ åœ¨çº¿è§†é¢‘æ•™å­¦çš„å†…å®¹ï¼Œè§†é¢‘å¯ä»¥è¯¾åå›æ”¾ï¼Œåå¤æ¸©ä¹ ã€‚&lt;/b&gt;åç»­æˆ‘ä»¬ä¹Ÿä¼šå®šæœŸé€‰å–éƒ¨åˆ†ä¼˜è´¨çš„è¯¾ç¨‹è§†é¢‘ï¼Œå¼€æ”¾ç»™æ²¡æœ‰å‚ä¸çº¿ä¸‹åŸ¹è®­çš„ç¤¾åŒºå°ä¼™ä¼´ï¼Œè®©æ›´å¤šäººæœ‰æœºä¼šä½“éªŒ Talent Plan çš„å¹²è´§è¯¾ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;2. ä¸ TiDB Hackathon 2019 ç›¸ç»“åˆï¼Œå®ç°ä»ç†è®ºåˆ°å·¥ç¨‹çš„èœ•å˜&lt;/b&gt;10 æœˆ 26 ï½ 27æ—¥ï¼Œæ°é€¢æˆ‘ä»¬ä¸¾åŠ &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489710%26idx%3D1%26sn%3D6cd0480cd7d134de44b0f743684a5289%26chksm%3Deb163fc4dc61b6d2dc1ed81599d8e3c84b9efdf6cc5516ee2e3f08e158da9e2fae1eefd50920%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB Hackathon 2019&lt;/a&gt;&lt;/u&gt;ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†çº¿ä¸‹å®æˆ˜é¢˜ç›®ä¸ Hackathon çš„ä¸»é¢˜ç›¸ç»“åˆï¼Œ&lt;b&gt;å­¦å‘˜ä»¬å¯ä»¥ä½¿ç”¨çº¿ä¸‹å®æˆ˜é¢˜ç›®ç›´æ¥å‚ä¸ Hackathon æ¯”èµ›&lt;/b&gt;ã€‚å­¦å‘˜ä»¬ä¸ä»…èƒ½å¤Ÿé˜¶æ®µæ€§æ£€éªŒè‡ªå·±å­¦ä¹ æˆæœï¼Œè¿˜å¯ä»¥ä¸ä¼—å¤šå¤§å’–å¯¼å¸ˆé›¶è·ç¦»äº¤æµï¼Œè·å¾—æ–°çš„å¯å‘ï¼Œåœ¨ä»£ç ä¸–ç•Œä¸­å®ç°è‡ªæˆ‘èœ•å˜ï¼ˆå¯èƒ½è¿˜ä¼šæ‹¿ä¸ªå¤§å¥–å›å®¶ ^ ^ï¼‰ï¼Œæˆ³ &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489710%26idx%3D1%26sn%3D6cd0480cd7d134de44b0f743684a5289%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/u&gt; äº†è§£æ›´å¤šå…³äº TiDB Hackathon 2019 çš„ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;3. æˆè¯¾åœ°ç‚¹åœ¨æ¯—é‚»ç æ±Ÿçš„å¹¿å· Officeï¼Œå¸¦ä½ ä½“éªŒåˆ†å¸ƒå¼åŠå…¬çš„ç‹¬ç‰¹é­…åŠ›&lt;/b&gt;å‰ä¸‰æœŸå­¦å‘˜ä»¬å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ PingCAP åŒ—äº¬ Office é›†ä¸­å­¦ä¹ ã€‚ä¸è¿‡ï¼Œå½“åŒ—äº¬çš„åæœˆå·²ç»çº¢å¶æ»¡åœ°ï¼Œå¹¶è£¹æŒŸç€ä¸€ä¸ç§‹å†¬äº¤æ¥çš„å¯’æ„æ—¶ï¼Œå¹¿å·åˆ™åˆšåˆšæ•›å»å¤æ—¥çš„ç‚çƒ­ï¼Œèˆ’é€‚å®œäººï¼Œäºæ˜¯æˆ‘ä»¬å°†æœ¬æœŸæˆè¯¾åœ°ç‚¹é€‰åœ¨äº†å¹¿å· Officeï¼Œå­¦å‘˜ä»¬è¿˜å¯ä»¥è¶æ­¤æœºä¼šï¼Œä½“éªŒä¸€ä¸‹â€œPingCAP åˆ†å¸ƒå¼åŠå…¬ Styleâ€ï¼ˆæƒ³è¦æ›´è¿›ä¸€æ­¥äº†è§£å¹¿å· Officeï¼Œå¯ä»¥æˆ³ä»Šæ—¥æ¨é€ç¬¬äºŒæ¡ï¼‰ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d09fff27a6712c972a535a9705e2bd48_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;810&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-d09fff27a6712c972a535a9705e2bd48_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d09fff27a6712c972a535a9705e2bd48_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;810&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-d09fff27a6712c972a535a9705e2bd48_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d09fff27a6712c972a535a9705e2bd48_b.jpg&quot;/&gt;&lt;figcaption&gt;å¹¿å· Office å®æ™¯â¬†ï¸&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;FAQ&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;Qï¼šçº¿ä¸Šè¯¾ç¨‹æ˜¯å¦å¿…é¡»ä¸¥æ ¼éµå¾ªå­¦ä¹ å‘¨è®¡åˆ’ï¼Œåœ¨ä¸€ä¸ªæœˆä¹‹å†…å®Œæˆï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Aï¼šä¸€ä¸ªæœˆçš„å­¦ä¹ æ—¶é•¿æ˜¯æˆ‘ä»¬æ ¹æ®å­¦ä¹ èµ„æ–™ä»¥åŠé¢˜ç›®éš¾æ˜“ç¨‹åº¦ç»™å‡ºçš„å»ºè®®ã€‚è€ƒè™‘åˆ°ç¤¾åŒºå°ä¼™ä¼´å­¦ä¹ æ—¶é—´æ¯”è¾ƒåˆ†æ•£ï¼Œ&lt;b&gt;æˆ‘ä»¬å¹¶æœªå¯¹çº¿ä¸Šè¯¾ç¨‹å­¦ä¹ æ—¶é—´åšå¼ºåˆ¶è¦æ±‚ï¼Œå¤§å®¶å¯ä»¥ç»“åˆè‡ªå·±çš„æ—¶é—´è‡ªç”±å®‰æ’&lt;/b&gt;ã€‚å¦‚æœæ—¶é—´å……è£•èƒ½å¤Ÿåœ¨ä¸€ä¸ªæœˆå†…å®Œæˆé‚£å½“ç„¶å†å¥½ä¸è¿‡å’¯~&lt;/p&gt;&lt;p&gt;&lt;b&gt;Qï¼šçº¿ä¸Šä½œä¸šå®Œæˆåå¦‚ä½•æäº¤ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Aï¼šçº¿ä¸Šä½œä¸šæäº¤é€šé“ï¼ˆts-team@pingcap.comï¼‰æ¯å‘¨å…­ 0:00 å¼€å¯ï¼Œè‡³å‘¨æ—¥ 24:00 å…³é—­ï¼ŒæŒç»­ 48h å¼€æ”¾ã€‚å¤§å®¶å¯é€‰æ‹©åˆ†æ‰¹æ¬¡æäº¤ï¼Œå®Œæˆä¸€ä¸ª Section å°±æäº¤ä¸€ä¸ª Sectionï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å®Œæˆæ‰€æœ‰ Section åé›†ä¸­æäº¤ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;Qï¼šèƒ½å¦åŒæ—¶å­¦ä¹  TiDB å’Œ TiKV ä¸¤ä¸ªæ–¹å‘çš„çº¿ä¸Šè¯¾ç¨‹ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Aï¼šç”±äºçº¿ä¸Šè¯¾ç¨‹å­¦ä¹ æ—¶é—´ä¸åšé™åˆ¶ï¼Œæ‰€ä»¥å¦‚æœä½ çš„æ—¶é—´å’Œç²¾åŠ›å……è¶³ï¼Œæˆ‘ä»¬å½“ç„¶æ¬¢è¿ä½ å¤šå¤šå­¦ä¹ çº¿ä¸Šè¯¾ç¨‹ã€‚ä½†éœ€è¦ç‰¹åˆ«æé†’çš„æ˜¯ï¼š&lt;b&gt;é€šè¿‡äº†çº¿ä¸Šè¯¾ç¨‹è€ƒæ ¸ä¹‹åï¼Œç”±äºä¸¤ä¸ªæ–¹å‘çš„çº¿ä¸‹è¯¾ç¨‹å¹¶è¡Œæˆè¯¾ï¼Œæ‰€ä»¥åŒä¸€æ—¶é—´æ®µåªèƒ½é€‰æ‹©å‚ä¸ä¸€ä¸ªæ–¹å‘çš„çº¿ä¸‹è¯¾ç¨‹ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;Qï¼šå¦‚ä½•å‚ä¸ Talent Plan çº¿ä¸‹è¯¾ç¨‹ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Aï¼š&lt;b&gt;çº¿ä¸‹è¯¾ç¨‹é‡‡ç”¨é‚€è¯·åˆ¶&lt;/b&gt;ï¼Œæ¯å¹´ä¼šå¼€è®¾ 2-3 æœŸï¼Œé™¤ 7-8 æœˆä»½çš„æš‘æœŸç‰¹åˆ«ä¼åˆ’å¤–ï¼Œæ¯å¹´çš„ 4-5 æœˆä»½æˆ– 11-12 æœˆä»½ä¼šå¼€è®¾ 1-2 æœŸã€‚&lt;b&gt;åœ¨çº¿ä¸‹è¯¾ç¨‹å¼€å§‹å‰ 1 å‘¨ï¼Œå®Œæˆæ‰€æœ‰çº¿ä¸Šä½œä¸šä¸”æˆç»©ä¼˜ç§€çš„åŒå­¦å°†ä¼šè¢«é‚€è¯·å‚ä¸çº¿ä¸‹è¯¾ç¨‹ã€‚æ‰€ä»¥åœ¨ 10 æœˆ 8 æ—¥å‰å®Œæˆçº¿ä¸Šè¯¾ç¨‹å­¦ä¹ çš„å°ä¼™ä¼´å°†æœ‰æœºä¼šå‚ä¸ç¬¬å››æœŸçš„çº¿ä¸‹è¯¾ç¨‹å“¦&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;æŸ¥çœ‹çº¿ä¸Šè¯¾ç¨‹ï¼š&lt;/b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//university.pingcap.com/6ee8482c05034a81ba380d40a1570034.shtml%3Fdiliater%3D6YvzZjyL97Z5c4G09GRzLQ%3D%3D&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;university.pingcap.com/&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;6ee8482c05034a81ba380d40a1570034.shtml?diliater=6YvzZjyL97Z5c4G09GRzLQ==&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;b&gt;ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;Qï¼šä» Talent Plan ç»“ä¸šä¹‹åï¼Œæˆ‘è¿˜å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼æ›´è¿›ä¸€æ­¥äº†è§£ TiDBï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Aï¼šTiDB å¼€æºç¤¾åŒºè¿˜æœ‰å¾ˆå¤šæœ‰æ„æ€çš„äº‹æƒ…ç­‰ç€ä½ å»å‘ç°ã€‚ä½ å¯ä»¥å‚åŠ ç¤¾åŒºçš„å…¶ä»–æ´»åŠ¨æå‡æŠ€æœ¯èƒ½åŠ›ï¼Œæ¯”å¦‚ &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489381%26idx%3D1%26sn%3D77bd5b27048bd14a35a8a5e63ba669ca%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;æå‡ TiDB Parser å¯¹ MySQL 8.0 è¯­æ³•çš„å…¼å®¹æ€§&lt;/a&gt;&lt;/u&gt; æˆ– &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489720%26idx%3D1%26sn%3D814c9bb328d00c5ba8443c46c19ff925%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;åŠ©åŠ› TiDB è¡¨è¾¾å¼è®¡ç®—æ€§èƒ½æå‡ 10 å€&lt;/a&gt;&lt;/u&gt; ç­‰ç­‰ï¼›å¦‚æœä½ å–œæ¬¢åˆ†äº«ï¼Œçº¿ä¸Š Paper Readingã€&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//asktug.com&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;asktug.com&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;ã€Infra Meetup ç­‰éƒ½å¯ä»¥æˆä¸ºä½ è¿›è¡ŒæŠ€æœ¯å¸ƒé“çš„å¹³å°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”šè‡³å¯ä»¥é€‰æ‹©åŠ å…¥ PingCAPï¼Œä¸ PingCAP å°ä¼™ä¼´ä¸€èµ·ä¸“æ³¨åœ°æ‰“é€ ä¸€æ¬¾åº”ç”¨å¹¿æ³›çš„ã€å·¥ä¸šçº§å¼€æºæ•°æ®åº“äº§å“ã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬éå¸¸æœŸå¾…ç€å°ä¼™ä¼´ä»¬é€šè¿‡ Talent Plan æå‡ä¸ªäººæŠ€æœ¯èƒ½åŠ›ä¹‹å¤–ï¼Œèƒ½å¤ŸæŒç»­æ´»è·ƒåœ¨ TiDB å¼€æºç¤¾åŒºï¼Œä¸ TiDB ä¸€èµ·å…±åŒæˆé•¿ï½&lt;/p&gt;&lt;p&gt;&lt;b&gt;å»¶å±•é˜…è¯»ï¼šPingCAP Talent Plan èƒŒåçš„æ•…äº‹ &lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489352%26idx%3D1%26sn%3D7fafdf71f32caedea317044fe76e13ad%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;æˆ‘ä»¬æ˜¯å¦‚ä½•è®¾è®¡ Golang &amp;amp; SQL å¼•æ“è¯¾ç¨‹çš„ï¼Ÿ&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489198%26idx%3D1%26sn%3D982b72f123f27b8463275345adecd21a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;æˆ‘ä»¬æ˜¯å¦‚ä½•è®¾è®¡ Rust &amp;amp; åˆ†å¸ƒå¼å­˜å‚¨æ•™ç¨‹çš„ï¼Ÿ&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI3NDIxNTQyOQ%3D%3D%26mid%3D2247489451%26idx%3D2%26sn%3D019d4e74677020c2f1f4a1b6f9a352c9%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¿™é—¨åˆ†å¸ƒå¼ KV å­˜å‚¨ç³»ç»Ÿè¯¾ç¨‹æ•™ä¼šäº†æˆ‘ä»€ä¹ˆï¼Ÿ&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;blockquote&gt;PingCAP Talent Plan æ˜¯ PingCAP ä¸º TiDB å¼€æºç¤¾åŒºå°ä¼™ä¼´æä¾›çš„è¿›é˜¶å¼å­¦ä¹ è®¡åˆ’ã€‚è¯¾ç¨‹è®¾ç½®ä¸Šåˆ†ä¸ºä¸¤ä¸ªæ–¹å‘ï¼Œåˆ†åˆ«æ˜¯é¢å‘ SQL å¼•æ“çš„ TiDB æ–¹å‘å’Œé¢å‘å¤§è§„æ¨¡ã€ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼å­˜å‚¨çš„ TiKV æ–¹å‘ã€‚æ¯ä¸ªæ–¹å‘çš„è¯¾ç¨‹éƒ½åŒ…å«çº¿ä¸Šå’Œçº¿ä¸‹ä¸¤éƒ¨åˆ†ï¼Œçº¿ä¸Šè¯¾ç¨‹ä¾§é‡äºå¯¹åŸºç¡€çŸ¥è¯†çš„è®²è§£ï¼Œå¯¹ç¤¾åŒºæ‰€æœ‰å°ä¼™ä¼´ä»¬å¼€æ”¾ï¼Œæ—¶é—´ä¸Šæ¯”è¾ƒçµæ´»ã€‚çº¿ä¸‹è¯¾ç¨‹åœ¨å¤¯å®åŸºç¡€çŸ¥è¯†çš„åŸºç¡€ä¸Šï¼Œæ³¨é‡å®æ“èƒ½åŠ›çš„åŸ¹å…»ã€‚&lt;br/&gt;å®Œæˆçº¿ä¸Šè¯¾ç¨‹å¹¶é€šè¿‡çº¿ä¸Šè€ƒæ ¸çš„å°ä¼™ä¼´å¯ä»¥è·å¾—çº¿ä¸Šè¯¾ç¨‹ç»“ä¸šè¯ä¹¦ï¼Œè¡¨ç°ä¼˜ç§€çš„è¿˜å°†æœ‰æœºä¼šæ‹¿åˆ° PingCAP æ ¡æ‹›/å®ä¹ å…ç¬”è¯•ç»¿è‰²é€šé“ï¼Œè€Œä¸”æœ‰æœºä¼šå‚ä¸åŠå¹´å†… PingCAP ç»„ç»‡çš„ä»»æ„ä¸€æœŸçº¿ä¸‹è¯¾ç¨‹ï¼›å®Œæˆçº¿ä¸‹è¯¾ç¨‹çš„å°ä¼™ä¼´å¯ä»¥è·å¾—ä¸“å± PingCAP Talent Plan ç»“ä¸šè¯ä¹¦ï¼Œè¡¨ç°ä¼˜ç§€çš„è¿˜å°†æœ‰æœºä¼šæ‹¿åˆ° PingCAP æ ¡æ‹›/å®ä¹ å…é¢è¯•ç»¿è‰²é€šé“/Special Offerã€ PingCAP/TiDB å…¨çƒ Meetup çš„é‚€è¯·å‡½ç­‰ã€‚&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-19-83232114</guid>
<pubDate>Thu, 19 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>ååˆ†é’Ÿæˆä¸º Contributor ç³»åˆ— | åŠ©åŠ› TiDB è¡¨è¾¾å¼è®¡ç®—æ€§èƒ½æå‡ 10 å€</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-17-82815389.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/82815389&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-582f31db4cda79465dc1c28b3dfbd7d7_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;æœ€è¿‘æˆ‘ä»¬æ‰©å±•äº† TiDB è¡¨è¾¾å¼è®¡ç®—æ¡†æ¶ï¼Œå¢åŠ äº†å‘é‡åŒ–è®¡ç®—æ¥å£ï¼ŒåˆæœŸçš„æ€§èƒ½æµ‹è¯•æ˜¾ç¤ºï¼Œå¤šæ•°è¡¨è¾¾å¼è®¡ç®—æ€§èƒ½å¯å¤§å¹…æå‡ï¼Œéƒ¨åˆ†ç”šè‡³å¯æå‡ 1~2 ä¸ªæ•°é‡çº§ã€‚ä¸ºäº†è®©æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½èƒ½å—ç›Šï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ‰€æœ‰å†…å»ºå‡½æ•°å®ç°å‘é‡åŒ–è®¡ç®—ã€‚&lt;/p&gt;&lt;p&gt;TiDB çš„å‘é‡åŒ–è®¡ç®—æ˜¯åœ¨ç»å…¸ Volcano æ¨¡å‹ä¸Šçš„è¿›è¡Œæ”¹è¿›ï¼Œå°½å¯èƒ½åˆ©ç”¨ CPU Cacheï¼ŒSIMD Instructionsï¼ŒPipelineï¼ŒBranch Predicatation ç­‰ç¡¬ä»¶ç‰¹æ€§æå‡è®¡ç®—æ€§èƒ½ï¼ŒåŒæ—¶é™ä½æ‰§è¡Œæ¡†æ¶çš„è¿­ä»£å¼€é”€ï¼Œè¿™é‡Œæä¾›ä¸€äº›å‚è€ƒæ–‡çŒ®ï¼Œä¾›æ„Ÿå…´è¶£çš„åŒå­¦é˜…è¯»å’Œç ”ç©¶ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//cidrdb.org/cidr2005/papers/P19.pdf&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;MonetDB/X100: Hyper-Pipelining Query Execution&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//dare.uva.nl/search%3Fidentifier%3D5ccbb60a-38b8-4eeb-858a-e7735dd37487&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Balancing Vectorized Query Execution with Bandwidth-Optimized Storage&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.nowpublishers.com/article/DownloadSummary/DBS-024&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;The Design and Implementation of Modern Column-Oriented Database Systems&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æè¿°ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;å¦‚ä½•åœ¨è®¡ç®—æ¡†æ¶ä¸‹å®ç°æŸä¸ªå‡½æ•°çš„å‘é‡åŒ–è®¡ç®—ï¼›&lt;/li&gt;&lt;li&gt;å¦‚ä½•åœ¨æµ‹è¯•æ¡†æ¶ä¸‹åšæ­£ç¡®æ€§å’Œæ€§èƒ½æµ‹è¯•ï¼›&lt;/li&gt;&lt;li&gt;å¦‚ä½•å‚ä¸è¿›æ¥æˆä¸º TiDB Contributorã€‚&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;è¡¨è¾¾å¼å‘é‡åŒ–&lt;/h2&gt;&lt;h3&gt;1. å¦‚ä½•è®¿é—®å’Œä¿®æ”¹ä¸€ä¸ªå‘é‡&lt;/h3&gt;&lt;p&gt;åœ¨ TiDB ä¸­ï¼Œæ•°æ®æŒ‰åˆ—åœ¨å†…å­˜ä¸­è¿ç»­å­˜åœ¨ Column å†…ï¼ŒColumn è¯¦ç»†ä»‹ç»è¯·çœ‹ï¼š&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-source-code-reading-10/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB æºç é˜…è¯»ç³»åˆ—æ–‡ç« ï¼ˆåï¼‰Chunk å’Œæ‰§è¡Œæ¡†æ¶ç®€ä»‹&lt;/a&gt;ã€‚æœ¬æ–‡æ‰€æŒ‡çš„å‘é‡ï¼Œå…¶æ•°æ®æ­£æ˜¯å­˜å‚¨åœ¨ Column ä¸­ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æŠŠæ•°æ®ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;å®šé•¿ç±»å‹ï¼š&lt;code&gt;Int64&lt;/code&gt;ã€&lt;code&gt;Uint64&lt;/code&gt;ã€&lt;code&gt;Float32&lt;/code&gt;ã€&lt;code&gt;Float64&lt;/code&gt;ã€&lt;code&gt;Decimal&lt;/code&gt;ã€&lt;code&gt;Time&lt;/code&gt;ã€&lt;code&gt;Duration&lt;/code&gt;ï¼›&lt;/li&gt;&lt;li&gt;å˜é•¿ç±»å‹ï¼š&lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;Bytes&lt;/code&gt;ã€&lt;code&gt;JSON&lt;/code&gt;ã€&lt;code&gt;Set&lt;/code&gt;ã€&lt;code&gt;Enum&lt;/code&gt;ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;å®šé•¿ç±»å‹å’Œå˜é•¿ç±»å‹æ•°æ®åœ¨ Column ä¸­æœ‰ä¸åŒçš„ç»„ç»‡æ–¹å¼ï¼Œè¿™ä½¿å¾—ä»–ä»¬æœ‰å¦‚ä¸‹çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;å®šé•¿ç±»å‹çš„ Column å¯ä»¥éšæœºè¯»å†™ä»»æ„å…ƒç´ ï¼›&lt;/li&gt;&lt;li&gt;å˜é•¿ç±»å‹çš„ Column å¯ä»¥éšæœºè¯»ï¼Œä½†æ›´æ”¹ä¸­é—´æŸå…ƒç´ åï¼Œå¯èƒ½éœ€è¦ç§»åŠ¨è¯¥å…ƒç´ åç»­æ‰€æœ‰å…ƒç´ ï¼Œå¯¼è‡´éšæœºå†™æ€§èƒ½å¾ˆå·®ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;å¯¹äºå®šé•¿ç±»å‹ï¼ˆå¦‚ &lt;code&gt;int64&lt;/code&gt;ï¼‰ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—æ—¶ä¼šå°†å…¶è½¬æˆ Golang Sliceï¼ˆå¦‚ &lt;code&gt;[]int64&lt;/code&gt;ï¼‰ï¼Œç„¶åç›´æ¥è¯»å†™è¿™ä¸ª Sliceã€‚ç›¸æ¯”äºè°ƒç”¨ Column çš„æ¥å£ï¼Œéœ€è¦çš„ CPU æŒ‡ä»¤æ›´å°‘ï¼Œæ€§èƒ½æ›´å¥½ã€‚åŒæ—¶ï¼Œè½¬æ¢åçš„ Slice ä»ç„¶å¼•ç”¨ç€ Column ä¸­çš„å†…å­˜ï¼Œä¿®æ”¹åä¸ç”¨å°†æ•°æ®ä» Slice æ‹·è´åˆ° Column ä¸­ï¼Œå¼€é”€é™åˆ°äº†æœ€ä½ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºå˜é•¿ç±»å‹ï¼Œå…ƒç´ é•¿åº¦ä¸å›ºå®šï¼Œä¸”ä¸ºäº†ä¿è¯å…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨ Slice çš„æ–¹å¼éšæœºè¯»å†™ã€‚æˆ‘ä»¬è§„å®šå˜é•¿ç±»å‹æ•°æ®ä»¥è¿½åŠ å†™ï¼ˆ&lt;code&gt;append&lt;/code&gt;ï¼‰çš„æ–¹å¼æ›´æ–°ï¼Œç”¨ Column çš„ &lt;code&gt;Get()&lt;/code&gt; æ¥å£è¿›è¡Œè¯»å–ã€‚&lt;/p&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œå˜é•¿å’Œå®šé•¿ç±»å‹çš„è¯»å†™æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;å®šé•¿ç±»å‹ï¼ˆä»¥ &lt;code&gt;int64&lt;/code&gt; ä¸ºä¾‹)&lt;br/&gt;a. &lt;code&gt;ResizeInt64s(size, isNull)&lt;/code&gt;ï¼šé¢„åˆ†é… size ä¸ªå…ƒç´ çš„ç©ºé—´ï¼Œå¹¶æŠŠæ‰€æœ‰ä½ç½®çš„ &lt;code&gt;null&lt;/code&gt; æ ‡è®°éƒ½è®¾ç½®ä¸º &lt;code&gt;isNull&lt;/code&gt;ï¼›&lt;br/&gt;b. &lt;code&gt;Int64s()&lt;/code&gt;ï¼šè¿”å›ä¸€ä¸ª &lt;code&gt;[]int64&lt;/code&gt; çš„ Sliceï¼Œç”¨äºç›´æ¥è¯»å†™æ•°æ®ï¼›&lt;br/&gt;c. &lt;code&gt;SetNull(rowID, isNull)&lt;/code&gt;ï¼šæ ‡è®°ç¬¬ &lt;code&gt;rowID&lt;/code&gt; è¡Œä¸º &lt;code&gt;isNull&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;å˜é•¿ç±»å‹ï¼ˆä»¥ &lt;code&gt;string&lt;/code&gt; ä¸ºä¾‹ï¼‰&lt;br/&gt;a. &lt;code&gt;ReserveString(size)&lt;/code&gt;ï¼šé¢„ä¼° size ä¸ªå…ƒç´ çš„ç©ºé—´ï¼Œå¹¶é¢„å…ˆåˆ†é…å†…å­˜ï¼›&lt;br/&gt;b. &lt;code&gt;AppendString(string)&lt;/code&gt;: è¿½åŠ ä¸€ä¸ª string åˆ°å‘é‡æœ«å°¾ï¼›&lt;br/&gt;c. &lt;code&gt;AppendNull()&lt;/code&gt;ï¼šè¿½åŠ ä¸€ä¸ª &lt;code&gt;null&lt;/code&gt; åˆ°å‘é‡æœ«å°¾ï¼›&lt;br/&gt;d. &lt;code&gt;GetString(rowID)&lt;/code&gt;ï¼šè¯»å–ä¸‹æ ‡ä¸º &lt;code&gt;rowID&lt;/code&gt; çš„ string æ•°æ®ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;å½“ç„¶è¿˜æœ‰äº›å…¶ä»–çš„æ–¹æ³•å¦‚ &lt;code&gt;IsNull(rowID)&lt;/code&gt;ï¼Œ&lt;code&gt;MergeNulls(cols)&lt;/code&gt; ç­‰ï¼Œå°±äº¤ç»™å¤§å®¶è‡ªå·±å»æ¢ç´¢äº†ï¼Œåé¢ä¼šæœ‰è¿™äº›æ–¹æ³•çš„ä½¿ç”¨ä¾‹å­ã€‚&lt;/p&gt;&lt;h3&gt;2. è¡¨è¾¾å¼å‘é‡åŒ–è®¡ç®—æ¡†æ¶&lt;/h3&gt;&lt;p&gt;å‘é‡åŒ–çš„è®¡ç®—æ¥å£å¤§æ¦‚å¦‚ä¸‹ï¼ˆ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/blob/master/expression/builtin.go%23L340&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;å®Œæ•´çš„å®šä¹‰åœ¨è¿™é‡Œ&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;vectorized() bool
vecEvalXType(input *Chunk, result *Column) error&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;XType&lt;/code&gt; å¯èƒ½è¡¨ç¤º &lt;code&gt;Int&lt;/code&gt;, &lt;code&gt;String&lt;/code&gt; ç­‰ï¼Œä¸åŒçš„å‡½æ•°éœ€è¦å®ç°ä¸åŒçš„æ¥å£ï¼›&lt;/li&gt;&lt;li&gt;&lt;code&gt;input&lt;/code&gt; è¡¨ç¤ºè¾“å…¥æ•°æ®ï¼Œç±»å‹ä¸º &lt;code&gt;*Chunk&lt;/code&gt;ï¼›&lt;/li&gt;&lt;li&gt;&lt;code&gt;result&lt;/code&gt; ç”¨æ¥å­˜æ”¾ç»“æœæ•°æ®ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å¤–éƒ¨æ‰§è¡Œç®—å­ï¼ˆå¦‚ Projectionï¼ŒSelection ç­‰ç®—å­ï¼‰ï¼Œåœ¨è°ƒç”¨è¡¨è¾¾å¼æ¥å£è¿›è¡Œè®¡ç®—å‰ï¼Œä¼šé€šè¿‡ &lt;code&gt;vectorized()&lt;/code&gt; æ¥åˆ¤æ–­æ­¤è¡¨è¾¾å¼æ˜¯å¦æ”¯æŒå‘é‡åŒ–è®¡ç®—ï¼Œå¦‚æœæ”¯æŒï¼Œåˆ™è°ƒç”¨å‘é‡åŒ–æ¥å£ï¼Œå¦åˆ™å°±èµ°è¡Œå¼æ¥å£ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºä»»æ„è¡¨è¾¾å¼ï¼Œåªæœ‰å½“å…¶ä¸­æ‰€æœ‰å‡½æ•°éƒ½æ”¯æŒå‘é‡åŒ–åï¼Œæ‰è®¤ä¸ºè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æ”¯æŒå‘é‡åŒ–çš„ã€‚&lt;/p&gt;&lt;p&gt;æ¯”å¦‚ &lt;code&gt;(2+6)*3&lt;/code&gt;ï¼Œåªæœ‰å½“ &lt;code&gt;MultiplyInt&lt;/code&gt; å’Œ &lt;code&gt;PlusInt&lt;/code&gt; å‡½æ•°éƒ½å‘é‡åŒ–åï¼Œå®ƒæ‰èƒ½è¢«å‘é‡åŒ–æ‰§è¡Œã€‚&lt;/p&gt;&lt;h2&gt;ä¸ºå‡½æ•°å®ç°å‘é‡åŒ–æ¥å£&lt;/h2&gt;&lt;p&gt;è¦å®ç°å‡½æ•°å‘é‡åŒ–ï¼Œè¿˜éœ€è¦ä¸ºå…¶å®ç° &lt;code&gt;vecEvalXType()&lt;/code&gt; å’Œ &lt;code&gt;vectorized()&lt;/code&gt; æ¥å£ã€‚&lt;/p&gt;&lt;ul&gt;&lt;li&gt;åœ¨ &lt;code&gt;vectorized()&lt;/code&gt; æ¥å£ä¸­è¿”å› &lt;code&gt;true&lt;/code&gt; ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°å·²ç»å®ç°å‘é‡åŒ–è®¡ç®—ï¼›&lt;/li&gt;&lt;li&gt;åœ¨ &lt;code&gt;vecEvalXType()&lt;/code&gt; å®ç°æ­¤å‡½æ•°çš„è®¡ç®—é€»è¾‘ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;b&gt;å°šæœªå‘é‡åŒ–çš„å‡½æ•°åœ¨&lt;/b&gt; &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/issues/12058&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;issue/12058&lt;/a&gt;&lt;/b&gt; &lt;b&gt;ä¸­ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦åŠ å…¥æˆ‘ä»¬ä¸€èµ·å®Œæˆè¿™é¡¹å®å¤§çš„å·¥ç¨‹ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å‘é‡åŒ–ä»£ç éœ€æ”¾åˆ°ä»¥ &lt;code&gt;_vec.go&lt;/code&gt; ç»“å°¾çš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¿˜æ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶ï¼Œæ¬¢è¿æ–°å»ºä¸€ä¸ªï¼Œæ³¨æ„åœ¨æ–‡ä»¶å¤´éƒ¨åŠ ä¸Š licence è¯´æ˜ã€‚&lt;/p&gt;&lt;p&gt;è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/12012&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PR/12012&lt;/a&gt;ï¼Œä»¥ &lt;code&gt;builtinLog10Sig&lt;/code&gt; ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;è¿™ä¸ªå‡½æ•°åœ¨ &lt;code&gt;expression/builtin_math.go&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œåˆ™å‘é‡åŒ–å®ç°éœ€æ”¾åˆ°æ–‡ä»¶ &lt;code&gt;expression/builtin_math_vec.go&lt;/code&gt; ä¸­ï¼›&lt;/li&gt;&lt;li&gt;&lt;code&gt;builtinLog10Sig&lt;/code&gt; åŸå§‹çš„éå‘é‡åŒ–è®¡ç®—æ¥å£ä¸º &lt;code&gt;evalReal()&lt;/code&gt;ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸ºå…¶å®ç°å¯¹åº”çš„å‘é‡åŒ–æ¥å£ä¸º &lt;code&gt;vecEvalReal()&lt;/code&gt;ï¼›&lt;/li&gt;&lt;li&gt;å®ç°å®Œæˆåè¯·æ ¹æ®åç»­çš„è¯´æ˜æ·»åŠ æµ‹è¯•ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;ä¸‹é¢ä¸ºå¤§å®¶ä»‹ç»åœ¨å®ç°å‘é‡åŒ–è®¡ç®—è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;h3&gt;1. å¦‚ä½•è·å–å’Œé‡Šæ”¾ä¸­é—´ç»“æœå‘é‡&lt;/h3&gt;&lt;p&gt;å­˜å‚¨è¡¨è¾¾å¼è®¡ç®—ä¸­é—´ç»“æœçš„å‘é‡å¯é€šè¿‡è¡¨è¾¾å¼å†…éƒ¨å¯¹è±¡ &lt;code&gt;bufAllocator&lt;/code&gt; çš„ &lt;code&gt;get()&lt;/code&gt; å’Œ &lt;code&gt;put()&lt;/code&gt; æ¥è·å–å’Œé‡Šæ”¾ï¼Œå‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/12014&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PR/12014&lt;/a&gt;ï¼Œä»¥ &lt;code&gt;builtinRepeatSig&lt;/code&gt; çš„å‘é‡åŒ–å®ç°ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;buf2, err := b.bufAllocator.get(types.ETInt, n)
if err != nil {
    return err
}
defer b.bufAllocator.put(buf2) // æ³¨æ„é‡Šæ”¾ä¹‹å‰ç”³è¯·çš„å†…å­˜&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;2. å¦‚ä½•æ›´æ–°å®šé•¿ç±»å‹çš„ç»“æœ&lt;/h3&gt;&lt;p&gt;å¦‚å‰æ–‡æ‰€è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ &lt;code&gt;ResizeXType()&lt;/code&gt; å’Œ &lt;code&gt;XTypes()&lt;/code&gt; æ¥åˆå§‹åŒ–å’Œè·å–ç”¨äºå­˜å‚¨å®šé•¿ç±»å‹æ•°æ®çš„ Golang Sliceï¼Œç›´æ¥è¯»å†™è¿™ä¸ª Slice æ¥å®Œæˆæ•°æ®æ“ä½œï¼Œå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;SetNull()&lt;/code&gt; æ¥è®¾ç½®æŸä¸ªå…ƒç´ ä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚ä»£ç å‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/12012&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PR/12012&lt;/a&gt;ï¼Œä»¥ &lt;code&gt;builtinLog10Sig&lt;/code&gt; çš„å‘é‡åŒ–å®ç°ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;f64s := result.Float64s()
for i := 0; i &amp;lt; n; i++ {
    if isNull {
        result.SetNull(i, true)
    } else {
        f64s[i] = math.Log10(f64s[i])
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;3. å¦‚ä½•æ›´æ–°å˜é•¿ç±»å‹çš„ç»“æœ&lt;/h3&gt;&lt;p&gt;å¦‚å‰æ–‡æ‰€è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ &lt;code&gt;ReserveXType()&lt;/code&gt; æ¥ä¸ºå˜é•¿ç±»å‹é¢„åˆ†é…ä¸€æ®µå†…å­˜ï¼ˆé™ä½ Golang runtime.growslice() çš„å¼€é”€ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;AppendXType()&lt;/code&gt; æ¥è¿½åŠ ä¸€ä¸ªå˜é•¿ç±»å‹çš„å…ƒç´ ï¼Œä½¿ç”¨ &lt;code&gt;GetXType()&lt;/code&gt; æ¥è¯»å–ä¸€ä¸ªå˜é•¿ç±»å‹çš„å…ƒç´ ã€‚ä»£ç å‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/12014&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PR/12014&lt;/a&gt;ï¼Œä»¥ &lt;code&gt;builtinRepeatSig&lt;/code&gt; çš„å‘é‡åŒ–å®ç°ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;result.ReserveString(n)
...
for i := 0; i &amp;lt; n; i++ {
    str := buf.GetString(i)
    if isNull {
        result.AppendNull()
    } else {
    result.AppendString(strings.Repeat(str, int(num)))
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;4. å¦‚ä½•å¤„ç† Error&lt;/h3&gt;&lt;p&gt;æ‰€æœ‰å— SQL Mode æ§åˆ¶çš„ Errorï¼Œéƒ½åˆ©ç”¨å¯¹åº”çš„é”™è¯¯å¤„ç†å‡½æ•°åœ¨å‡½æ•°å†…å°±åœ°å¤„ç†ã€‚éƒ¨åˆ† Error å¯èƒ½ä¼šè¢«è½¬æ¢æˆ Warn è€Œä¸éœ€è¦ç«‹å³æŠ›å‡ºã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¸ªæ¯”è¾ƒæ‚ï¼Œéœ€è¦æŸ¥çœ‹å¯¹åº”çš„éå‘é‡åŒ–æ¥å£äº†è§£å…·ä½“è¡Œä¸ºã€‚ä»£ç å‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/12042&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PR/12042&lt;/a&gt;ï¼Œä»¥ &lt;code&gt;builtinCastIntAsDurationSig&lt;/code&gt; çš„å‘é‡åŒ–å®ç°ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;for i := 0; i &amp;lt; n; i++ {
    ...
    dur, err := types.NumberToDuration(i64s[i], int8(b.tp.Decimal))
    if err != nil {
       if types.ErrOverflow.Equal(err) {
          err = b.ctx.GetSessionVars().StmtCtx.HandleOverflow(err, err) // å°±åœ°åˆ©ç”¨å¯¹åº”å¤„ç†å‡½æ•°å¤„ç†é”™è¯¯
       }
       if err != nil { // å¦‚æœå¤„ç†ä¸æ‰å°±æŠ›å‡º
          return err
       }
       result.SetNull(i, true)
       continue
    }
    ...
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;5. å¦‚ä½•æ·»åŠ æµ‹è¯•&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åšäº†ä¸€ä¸ªç®€æ˜“çš„æµ‹è¯•æ¡†æ¶ï¼Œå¯é¿å…å¤§å®¶æµ‹è¯•æ—¶åšä¸€äº›é‡å¤å·¥ä½œã€‚&lt;/p&gt;&lt;p&gt;è¯¥æµ‹è¯•æ¡†æ¶çš„ä»£ç åœ¨ &lt;code&gt;expression/bench_test.go&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œè¢«å®ç°åœ¨ &lt;code&gt;testVectorizedBuiltinFunc&lt;/code&gt; å’Œ &lt;code&gt;benchmarkVectorizedBuiltinFunc&lt;/code&gt; ä¸¤ä¸ªå‡½æ•°ä¸­ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ª &lt;code&gt;builtin_XX_vec.go&lt;/code&gt; æ–‡ä»¶å¢åŠ äº† &lt;code&gt;builtin_XX_vec_test.go&lt;/code&gt; æµ‹è¯•æ–‡ä»¶ã€‚å½“æˆ‘ä»¬ä¸ºä¸€ä¸ªå‡½æ•°å®ç°å‘é‡åŒ–åï¼Œéœ€è¦åœ¨å¯¹åº”æµ‹è¯•æ–‡ä»¶å†…çš„ &lt;code&gt;vecBuiltinXXCases&lt;/code&gt; å˜é‡ä¸­ï¼Œå¢åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæµ‹è¯• caseã€‚ä¸‹é¢æˆ‘ä»¬ä¸º log10 æ·»åŠ ä¸€ä¸ªæµ‹è¯• caseï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;var vecBuiltinMathCases = map[string][]vecExprBenchCase {
    ast.Log10: {
        {types.ETReal, []types.EvalType{types.ETReal}, nil},
    },
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œä¸Šé¢ç»“æ„ä½“ä¸­çš„ä¸‰ä¸ªå­—æ®µåˆ†åˆ«è¡¨ç¤º:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;è¯¥å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼›&lt;/li&gt;&lt;li&gt;è¯¥å‡½æ•°æ‰€æœ‰å‚æ•°çš„ç±»å‹ï¼›&lt;/li&gt;&lt;li&gt;æ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰çš„æ•°æ®ç”Ÿæˆæ–¹æ³•ï¼ˆdataGenerï¼‰ï¼Œ&lt;code&gt;nil&lt;/code&gt; è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„éšæœºç”Ÿæˆæ–¹æ³•ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;å¯¹äºæŸäº›å¤æ‚çš„å‡½æ•°ï¼Œä½ å¯è‡ªå·±å®ç° dataGener æ¥ç”Ÿæˆæ•°æ®ã€‚ç›®å‰æˆ‘ä»¬å·²ç»å®ç°äº†å‡ ä¸ªç®€å•çš„ dataGenerï¼Œä»£ç åœ¨ &lt;code&gt;expression/bench_test.go&lt;/code&gt; ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p&gt;æ·»åŠ å¥½ case åï¼Œåœ¨ expression ç›®å½•ä¸‹è¿è¡Œæµ‹è¯•æŒ‡ä»¤ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;# åŠŸèƒ½æµ‹è¯•
GO111MODULE=on go test -check.f TestVectorizedBuiltinMathFunc

# æ€§èƒ½æµ‹è¯•
go test -v -benchmem -bench=BenchmarkVectorizedBuiltinMathFunc -run=BenchmarkVectorizedBuiltinMathFunc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä½ çš„ PR Description ä¸­ï¼Œè¯·æŠŠæ€§èƒ½æµ‹è¯•ç»“æœé™„ä¸Šã€‚ä¸åŒé…ç½®çš„æœºå™¨ï¼Œæ€§èƒ½æµ‹è¯•ç»“æœå¯èƒ½ä¸åŒï¼Œæˆ‘ä»¬å¯¹æœºå™¨é…ç½®æ— ä»»ä½•è¦æ±‚ï¼Œä½ åªéœ€åœ¨ PR ä¸­å¸¦ä¸Šä½ æœ¬åœ°æœºå™¨çš„æµ‹è¯•ç»“æœï¼Œè®©æˆ‘ä»¬å¯¹å‘é‡åŒ–å‰åçš„æ€§èƒ½æœ‰ä¸€ä¸ªå¯¹æ¯”å³å¯ã€‚&lt;/p&gt;&lt;h2&gt;å¦‚ä½•æˆä¸º Contributor&lt;/h2&gt;&lt;p&gt;&lt;b&gt;ä¸ºäº†æ¨è¿›è¡¨è¾¾å¼å‘é‡åŒ–è®¡ç®—ï¼Œæˆ‘ä»¬æ­£å¼æˆç«‹ Vectorized Expression Working Groupï¼Œå…¶å…·ä½“çš„ç›®æ ‡å’Œåˆ¶åº¦è¯¦è§&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/community/blob/master/working-groups/wg-vec-expr.md&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚ä¸æ­¤å¯¹åº”ï¼Œæˆ‘ä»¬åœ¨&lt;/b&gt; &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/tidbslack/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB Community Slack&lt;/a&gt;&lt;/b&gt; &lt;b&gt;ä¸­åˆ›å»ºäº†&lt;/b&gt; &lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//app.slack.com/client/TH91JCS4W/CMRD79DRR&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;wg-vec-expr channel&lt;/a&gt;&lt;/b&gt; &lt;b&gt;ä¾›å¤§å®¶äº¤æµè®¨è®ºï¼Œä¸è®¾é—¨æ§›ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦åŠ å…¥ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä½•æˆä¸º Contributorï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;åœ¨æ­¤ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/issues/12058&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;issue&lt;/a&gt; å†…é€‰æ‹©æ„Ÿå…´è¶£çš„å‡½æ•°å¹¶å‘Šè¯‰å¤§å®¶ä½ ä¼šå®Œæˆå®ƒï¼›&lt;/li&gt;&lt;li&gt;ä¸ºè¯¥å‡½æ•°å®ç° &lt;code&gt;vecEvalXType()&lt;/code&gt; å’Œ &lt;code&gt;vectorized()&lt;/code&gt; çš„æ–¹æ³•ï¼›&lt;/li&gt;&lt;li&gt;åœ¨å‘é‡åŒ–æµ‹è¯•æ¡†æ¶å†…æ·»åŠ å¯¹è¯¥å‡½æ•°çš„æµ‹è¯•ï¼›&lt;/li&gt;&lt;li&gt;è¿è¡Œ &lt;code&gt;make dev&lt;/code&gt;ï¼Œä¿è¯æ‰€æœ‰ test éƒ½èƒ½é€šè¿‡ï¼›&lt;/li&gt;&lt;li&gt;å‘èµ· Pull Request å¹¶å®Œæˆ merge åˆ°ä¸»åˆ†æ”¯ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;å¦‚æœè´¡çŒ®çªå‡ºï¼Œå¯èƒ½è¢«æåä¸º reviewerï¼Œreviewer çš„ä»‹ç»è¯·çœ‹ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/community/blob/master/CONTRIBUTING.md%23reviewer&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œä¹Ÿæ¬¢è¿åˆ° wg-vec-expr channel ä¸­æé—®å’Œè®¨è®ºã€‚&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-17-82815389</guid>
<pubDate>Tue, 17 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>è·¨è¶Šã€çˆ†å‘ï¼Œæ‰€è§ã€Œå¯æå‡ã€ä¹‹å¤„ï¼Œçš†æ˜¯ä½ çš„ç«æŠ€åœº | TiDB Hackathon 2019 å¯åŠ¨</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-15-82263579.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/82263579&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ac90f82e4787e10516ecf46ae044fedc_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;TiDB ç¤¾åŒºæœ‰ä¸€ä¸ªä¿¡å¿µæ˜¯ï¼šæˆ‘ä»¬ä»ä¸ç»™è‡ªå·±è®¾é™ï¼Œçªç ´&amp;amp;æå‡æ‰æ˜¯ä¸€ç›´è¿½æ±‚çš„å¸¸æ€ã€‚åœ¨ &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/community-cn/hackathon2018/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;å»å¹´ä¸¾åŠçš„ TiDB é»‘å®¢é©¬æ‹‰æ¾&lt;/a&gt;&lt;/u&gt; ä¸Šï¼Œè¯ç”Ÿäº†å¾ˆå¤šå…¼å…·æƒ³è±¡åŠ›å’Œå®ç”¨æ€§çš„ TiDB ç”Ÿæ€å·¥å…·ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¹¶ä¸æ»¡è¶³äºæ­¤ï¼Œ&lt;b&gt;10 æœˆ 26 - 27 æ—¥ï¼ŒTiDB  Hackathon 2019 é‡ç£…å›å½’ï¼æœ¬å±Šä¸»é¢˜è¾ƒå»å¹´æ›´åŠ å¹¿æ³›&lt;/b&gt;ï¼š&lt;/p&gt;&lt;p&gt;&lt;b&gt;IMPROVE Â· è·ƒ ç•Œ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;æœ¬å±Šæ¯”èµ›å°†å¼±åŒ–åœ°åŸŸé™åˆ¶&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ä¸‰åœ°è”åŠ¨&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å¥–é‡‘ä¾ç„¶ä¸°åš&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;ä½†å¥½ç‚¹å­æ— ä»·&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å¤§å’–å¯¼å¸ˆå·¡åœºå¸¦æ•™&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;10 åˆ†é’Ÿé›¶è·ç¦»äº¤æµå¯èƒ½èƒœè¿‡åŸ‹å¤´è‹¦æ€ 1 ä¸ªæœˆ&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å•¤é…’ Pizza ä¸çœ å¤œ&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;æœŸå¾…å„è·¯å¤§ç¥é›†ç»“ï¼Œäº«å—ä»£ç ä¸–ç•Œä¸­çš„æè‡´è‡ªç”±&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å†²æ’ è·¨è¶Š çˆ†å‘&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;è®© TiDB æ¥ä¸€æ¬¡ç®€å•ç²—æš´ã€çªç ´å¸¸è§„çš„ã€Œè·ƒç•Œã€å§ï¼&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;é€‰é¢˜æ–¹å‘&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;å‚èµ›é€‰æ‰‹å¯ä»¥ä¸º TiDB æ€§èƒ½ã€æ˜“ç”¨æ€§ã€ç¨³å®šæ€§ã€åŠŸèƒ½ç­‰å„æ–¹é¢åšå‡ºæå‡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å›´ç»• TiDB ç”Ÿæ€åšä¸€äº›å‘¨è¾¹å·¥å…·æå‡æ•ˆç‡ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;Key Visualizer for TiKV&lt;/b&gt;&lt;br/&gt;å¯è§†åŒ–çš„ KV çš„è¯Šæ–­å·¥å…·ï¼Œåšåˆ°å¯¹é›†ç¾¤çš„çƒ­ç‚¹ï¼Œè®¿é—®æ¨¡å¼ä¸€ç›®äº†ç„¶ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;åŸºäºå†å²çš„æŸ¥è¯¢ä¼˜åŒ–&lt;/b&gt;&lt;br/&gt;è®© TiDB çš„ SQL ä¼˜åŒ–å™¨èƒ½é€šè¿‡ç¨³æ€çš„æŸ¥è¯¢å†å²ç”Ÿæˆç¨³å®šçš„æ‰§è¡Œè®¡åˆ’ï¼Œé˜²æ­¢æ‰§è¡Œè®¡åˆ’è·³å˜ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;Follower Read ä¸ MVCC çš„ç»“åˆ&lt;/b&gt;&lt;br/&gt;è®© TiDB çš„å¤šå‰¯æœ¬èƒ½å¤Ÿæ‰¿æ‹…è¯»æµé‡ï¼Œ æå‡æ•´ä½“çš„ååã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;TiDB Playground&lt;/b&gt;&lt;br/&gt;ç±»ä¼¼ Go Playground (&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//play.golang.org&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;play.golang.org&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;) çš„æ‰€è§å³æ‰€å¾—çš„äº¤äº’å¼ TiDB Web ä½“éªŒå·¥å…·ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;æ›´æœŸå¾…ä½ èƒ½å¤Ÿæå‡ºæ–°ç‚¹å­&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;å¥–é¡¹è®¾ç½®&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;æœ¬å±Š Hackathon çš„å¥–é‡‘ä¾ç„¶éå¸¸ã€Œå®åœ¨ã€ï¼š&lt;/p&gt;&lt;p&gt;ğŸ…&lt;b&gt;ä¸€ç­‰å¥–ï¼ˆ1 æ”¯é˜Ÿä¼ï¼‰ï¼š Â¥ 60,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ğŸ¥ˆ&lt;b&gt;äºŒç­‰å¥–ï¼ˆ2 æ”¯é˜Ÿä¼ï¼‰ï¼šæ¯é˜Ÿ Â¥ 30,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ğŸ¥‰&lt;b&gt;ä¸‰ç­‰å¥–ï¼ˆ3 æ”¯é˜Ÿä¼ï¼‰ï¼šæ¯é˜Ÿ Â¥ 10,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å¦è®¾æœ€ä½³è´¡çŒ®å¥–ã€æœ€ä½³åˆ›æ„å¥–ã€æœ€å…·æ½œåŠ›å¥–ï¼Œå°†æœ‰ TiDB å‘¨è¾¹ç¤¼å“å¥–åŠ±ã€‚&lt;/p&gt;&lt;h2&gt;&lt;b&gt;å­¦ä¹ èµ„æ–™&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;ç”±äºå¤§å®¶æ™®éåæ˜  TiDB æºç ä¸Šæ‰‹éš¾åº¦æœ‰ç‚¹é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›ã€Œå­¦ä¹ èµ„æ–™ã€ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®ä¸ªäººåŸºç¡€å’Œé€‰é¢˜æ–¹å‘çµæ´»é€‰æ‹©ã€‚&lt;/p&gt;&lt;p&gt;Hackathon ä¸“é¡¹å­¦ä¹ æ–‡æ¡£æ±‡æ€»äº† TiDB æ ¸å¿ƒå›¢é˜Ÿå‡ºå“çš„æ•°åç¯‡ç²¾é€‰æŠ€æœ¯è¯¦è§£æ–‡ç« ï¼Œå¸®åŠ©å¤§å®¶è½»æ¾æŒæ¡ TiDB å„æ ¸å¿ƒç»„ä»¶çš„åŸç†åŠåŠŸèƒ½ï¼Œæ–‡æ¡£é“¾æ¥ï¼š&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/presentations/blob/master/hackathon-2019/reference-document-of-hackathon-2019.md&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-2e73d3d3251663decc70dfbbe5be5f6a_ipico.jpg&quot; data-image-width=&quot;283&quot; data-image-height=&quot;283&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;pingcap/presentations&lt;/a&gt;&lt;p&gt;å¦å¤–ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å‚è€ƒ PingCAP University ä¸°å¯Œçš„è§†é¢‘æ•™ç¨‹ï¼Œç½‘ç«™é“¾æ¥ï¼š&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//university.pingcap.com/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-0f1b58d10b1c02e158081b6141adfb4d_ipico.jpg&quot; data-image-width=&quot;217&quot; data-image-height=&quot;264&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PingCAP University&lt;/a&gt;&lt;h2&gt;&lt;b&gt;æŠ¥åå‚èµ›&lt;/b&gt;&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;æ¯”èµ›æ—¶é—´ï¼š2019 å¹´ 10 æœˆ 26 ï½ 27 æ—¥&lt;/li&gt;&lt;li&gt;æ¯”èµ›åœ°ç‚¹ï¼šPingCAP åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å· Office&lt;/li&gt;&lt;li&gt;ç»„é˜Ÿè§„åˆ™ï¼š1ï½4 äººæˆé˜Ÿï¼Œé€‰æ‹©ä¸€åœ°å‚èµ›&lt;/li&gt;&lt;li&gt;æŠ¥åæ—¶é—´ï¼šå³æ—¥èµ·è‡³ 10 æœˆ 23 æ—¥&lt;/li&gt;&lt;li&gt;æŠ¥åå®¡æ ¸ï¼š5 ä¸ªå·¥ä½œæ—¥å†…åé¦ˆå®¡æ ¸ç»“æœ&lt;/li&gt;&lt;li&gt;æŠ¥ååœ°å€ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//nc9hsk15y2xczuor.mikecrm.com/PiwBPaL&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB Hackathon é‡ç£…å›å½’ï¼&lt;/a&gt;&lt;p&gt;* æœ¬æ¬¡å¤§èµ›è¯šæ‹›å¿—æ„¿è€…å‚ä¸æ´»åŠ¨ç°åœºæ”¯æŒã€‚å¦‚æœä½ æƒ³è¿‘è·ç¦»æ¥è§¦æŠ€æœ¯å¤§å’–ï¼Œä½“éªŒå¤§èµ›æ°›å›´ï¼Œé‚£å°±è”ç³» TiDB Robotï¼ˆå¾®ä¿¡å·ï¼štidbaiï¼‰æŠ¥åå§ï½å¿—æ„¿è€…ä¹Ÿå¯ä»¥è·å¾—æ´»åŠ¨å®šåˆ¶çºªå¿µå“å“¦ï¼&lt;/p&gt;&lt;p&gt;&lt;b&gt;åˆä½œä¼™ä¼´&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;äº‘è®¡ç®—åŸºç¡€è®¾æ–½æ”¯æŒï¼š&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;702&quot; data-rawheight=&quot;132&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;702&quot; data-original=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;702&quot; data-rawheight=&quot;132&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;702&quot; data-original=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;ç¤¾åŒºæ”¯æŒï¼š&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;246&quot; data-rawheight=&quot;80&quot; class=&quot;content_image&quot; width=&quot;246&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;246&quot; data-rawheight=&quot;80&quot; class=&quot;content_image lazy&quot; width=&quot;246&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;338&quot; data-rawheight=&quot;80&quot; class=&quot;content_image&quot; width=&quot;338&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;338&quot; data-rawheight=&quot;80&quot; class=&quot;content_image lazy&quot; width=&quot;338&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;è¿›å…¥æ´»åŠ¨å®˜ç½‘äº†è§£æ›´å¤šä¿¡æ¯ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/community-cn/hackathon2019/%3Futm_source%3Dwechat%26utm_medium%3Dpingcap%26utm_campaign%3Dpingcap%2520190911&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt; | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-15-82263579</guid>
<pubDate>Sun, 15 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>ä»ä½¿ç”¨è€…åˆ°å¼€å‘è€…ï¼ŒçŸ¥ä¹å‚ä¸ TiDB ç¤¾åŒºèƒŒåçš„æ•…äº‹</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-12-82318701.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/82318701&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c0d2f4bfe8a576e111a55da7e3a0a816_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;b&gt;ä½œè€…ä»‹ç»&lt;/b&gt;ï¼šå­™æ™“å…‰ï¼ŒçŸ¥ä¹æŠ€æœ¯å¹³å°å›¢é˜Ÿè´Ÿè´£äººï¼Œè´Ÿè´£å»ºè®¾çŸ¥ä¹åœ¨çº¿å’Œç¦»çº¿çš„åŸºç¡€è®¾æ–½å¹³å°ï¼Œä¸ºä¸šåŠ¡å¼€å‘æä¾›ç»Ÿä¸€çš„åŸºç¡€è®¾æ–½ã€‚æ›¾å¤šå¹´ä»äº‹ç§æœ‰äº‘ç›¸å…³äº§å“å¼€å‘å·¥ä½œï¼Œå…³æ³¨äº‘åŸç”ŸæŠ€æœ¯ï¼ŒTiKV é¡¹ç›® Committerã€‚&lt;/blockquote&gt;&lt;p&gt;å…³æ³¨ TiDB çš„æœ‹å‹ä»¬å¯èƒ½å‘ç°ç»§ Follower Read åœ¨ TiKV ç«¯çš„ PR åˆå¹¶åï¼ŒTiDB ç«¯ç›¸å…³çš„ PR ä¹Ÿäºè¿‘æœŸå®Œæˆäº†åˆ°ä¸»å¹²çš„åˆå¹¶å·¥ä½œã€‚å¦‚æœåæœŸçš„ç¨³å®šæ€§æµ‹è¯•ä¸€åˆ‡æ­£å¸¸ï¼Œç›¸å…³åŠŸèƒ½åº”è¯¥ä¼šéš TiDB 3.1 å‘å¸ƒã€‚Follower Read åŠŸèƒ½æœ¬èº«ä»ä»£ç é‡ä¸Šçœ‹å¹¶ä¸å¤§ï¼Œä½†è¿™ä¸ªåŠŸèƒ½çš„æ„ä¹‰å°¤å…¶æ˜¯å¯¹äº’è”ç½‘ç±»å‹ä¸šåŠ¡æ¥è¯´æ˜¯éå¸¸å¤§çš„ã€‚&lt;/p&gt;&lt;p&gt;å‰æ®µæ—¶é—´ PingCAP CTO é»„ä¸œæ—­å·²ç»å†™äº† &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/follower-read-the-new-features-of-tidb/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ä¸€ç¯‡æ–‡ç« &lt;/a&gt;ï¼Œä»åŸç†è§’åº¦å¯¹ Follower Read åšäº†éå¸¸é€å½»çš„ä»‹ç»å’Œåˆ†æã€‚ä»Šå¤©æˆ‘æƒ³ä»éæŠ€æœ¯çš„è§’åº¦ä»‹ç» Follower Read åŠŸèƒ½çš„è½åœ°è¿‡ç¨‹ï¼Œå¹¶ä» Contributor çš„è§†è§’è·Ÿå¤§å®¶èŠä¸€èŠä¸ªäººå‚ä¸ TiDB å¼€å‘è¿‡ç¨‹ä¸­çš„ä½“éªŒå’Œæ„Ÿå—ã€‚æœ€åç«™åœ¨çŸ¥ä¹æŠ€æœ¯å¹³å°å›¢é˜Ÿçš„è§’åº¦ï¼ŒèŠä¸€ä¸‹æˆ‘ä»¬æœªæ¥åœ¨ç§¯æå‚ä¸å¼€æºé¡¹ç›®ï¼Œå…±åŒå»ºè®¾ç¤¾åŒºçš„æ„¿æœ›å’Œå†³å¿ƒã€‚&lt;/p&gt;&lt;h2&gt;Follower Read èƒŒåçš„æ•…äº‹&lt;/h2&gt;&lt;p&gt;Follower Read çš„å®ç°æ€è·¯åœ¨ PingCAP å·¥ç¨‹å¸ˆå¤§è„‘é‡Œåº”è¯¥å·²ç»å­˜åœ¨å¾ˆä¹…äº†ï¼Œä½†å‡ºäºå„ç§åŸå› è¿™ä¸ªç‰¹æ€§çš„ä¼˜å…ˆçº§ä¸€ç›´ä¸å¤Ÿé«˜ï¼Œå¹¶æ²¡æœ‰èƒ½æ’åˆ°å¼€å‘è®¡åˆ’ä¸­ã€‚å¹´ä¸­çš„æ—¶å€™æˆ‘ä»¬å¼€å§‹å°è¯•åœ¨çŸ¥ä¹æ›´å¹¿æ³›çš„ä¸šåŠ¡ä¸­å¼•å…¥ TiDBï¼Œåœ¨ç°åº¦è¿‡ç¨‹ä¸­æˆ‘ä»¬é‡åˆ°äº†æŸäº›ç‰¹å®šå·¥ä½œè´Ÿè½½ä¸‹ TiDB è¡¨ç°ä¸å¤Ÿç†æƒ³çš„é—®é¢˜ã€‚ç›®å‰çœ‹æ¥ TiDB è¯»å†™æ“ä½œéƒ½äº¤ç»™ Leader å®Œæˆï¼Œæ˜¯æˆ‘ä»¬ç›®å‰åœ¨ç‰¹å®šè´Ÿè½½ä¸‹é‡åˆ°ååé—®é¢˜çš„ç“¶é¢ˆç‚¹ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ç†æ¸…æ€è·¯åï¼Œæˆ‘ä»¬åŒ PingCAP çš„å·¥ç¨‹å¸ˆåšäº†å‡ æ¬¡äº¤æµå¹¶è¾¾æˆä¸€è‡´ï¼Œå†³å®šé€šè¿‡ Follower Read çš„æ–¹å¼æ¥è§£å†³æˆ‘ä»¬ä¸šåŠ¡åœºæ™¯ä¸­æç«¯çƒ­ç‚¹æ•°æ®è®¿é—®çš„ååé—®é¢˜ã€‚åœ¨å®é™…éœ€æ±‚çš„é©±åŠ¨ä¸‹ï¼Œ PingCAP åŒå­¦å°† Follower Read ç›¸å…³ç‰¹æ€§çš„ä¼˜å…ˆçº§æé«˜ï¼Œå¿«é€Ÿç¡®å®šäº†ç›¸å…³åŠŸèƒ½çš„æŠ€æœ¯æ–¹æ¡ˆå¹¶å¯åŠ¨äº† TiKV ç«¯çš„å¼€å‘å·¥ä½œã€‚ä½œä¸º Follower Read åŠŸèƒ½çš„éœ€æ±‚æ–¹ï¼ŒçŸ¥ä¹è´Ÿè´£è¿™ä¸ªéœ€æ±‚åœ¨ TiDB ä¸Šçš„è½åœ°å·¥ä½œã€‚&lt;/p&gt;&lt;p&gt;PingCAP å·¥ç¨‹å¸ˆç”¨äº†å¤§çº¦ä¸¤å‘¨çš„æ—¶é—´å®Œæˆäº† &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tikv/tikv/pull/5051&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiKV å±‚ Follower Read æ•´ä¸ªåŠŸèƒ½çš„å¼€å‘æµ‹è¯•&lt;/a&gt;ï¼Œå¹¶å°†å…¶åˆå¹¶åˆ° master åˆ†æ”¯ä¸­ï¼Œéšåæˆ‘ä»¬å¼€å§‹äº† &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb/pull/11347&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB ä¾§ç›¸åº”åŠŸèƒ½çš„å¼€å‘&lt;/a&gt;ï¼Œåœ¨ PingCAP å°ä¼™ä¼´ä»¬çš„å¸®åŠ©ä¸‹æœ€ç»ˆå®Œæˆäº†ç›¸åº”åŠŸèƒ½åˆ° master åˆ†æ”¯çš„åˆå¹¶ã€‚ä½œä¸ºçŸ¥ä¹å’Œ PingCAP ä¸¤å®¶å…¬å¸ç¬¬ä¸€æ¬¡è”åˆå¼€å‘çš„æˆæœï¼Œè¿™ä¸ªåŠŸèƒ½çš„è½åœ°å¯¹åŒæ–¹éƒ½æœ‰ç€é‡å¤§çš„æ„ä¹‰ã€‚&lt;/p&gt;&lt;h2&gt;ä» Contributor åˆ° Committer&lt;/h2&gt;&lt;p&gt;åœ¨ä»¥çŸ¥ä¹æŠ€æœ¯å¹³å°å›¢é˜Ÿæˆå‘˜çš„èº«ä»½å‚ä¸ TiDB è´¡çŒ®ä¹‹å‰ï¼Œä¸ªäººæ›¾ç»åœ¨è¿‡å»çš„ä¸€å¹´é‡Œä»¥ç”¨æˆ·çš„èº«ä»½ä¸º TiKV &amp;amp; TiDB åšè¿‡ä¸€äº›å°å‹çš„è´¡çŒ®ã€‚æ¥ä¸‹æ¥æˆ‘å°±ä»ä¸ªäººè§’åº¦èŠä¸€ä¸‹ä» Contributor åˆ° Committer çš„æˆé•¿è¿‡ç¨‹å’Œå…¶ä¸­çš„ä½“éªŒã€‚&lt;/p&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡ä¸º PingCAP æ——ä¸‹é¡¹ç›®æäº¤ PR å¹¶æˆä¸º Contributor å‘ç”Ÿåœ¨å¤§çº¦ä¸€å¹´å‰ï¼Œæˆ‘åœ¨ä¸ºå†…éƒ¨å¼€å‘çš„ä¸šåŠ¡ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„å­˜å‚¨åç«¯æ—¶ï¼Œå°è¯•ç»™ TiKV å¢åŠ äº†ä¸€äº›æ‰¹é‡æ“ä½œæ¥å£ã€‚PR æå‡ºåï¼ŒPingCAP é¦–å¸­æ¶æ„å¸ˆå”åˆ˜å¾ˆå¿«å°±è·Ÿæˆ‘å»ºç«‹äº†è”ç³»ï¼Œåœ¨éšåçš„äº¤æµä¸­å¸®åŠ©æˆ‘å¿«é€Ÿå®Œå–„ PR å¹¶æœ€ç»ˆåˆå¹¶åˆ° TiKV çš„ä¸»å¹²ä¸­ã€‚&lt;/p&gt;&lt;p&gt;è™½ç„¶ä»¥å¾€ä»¥é›¶æ•£çš„æ–¹å¼ç»™å¾ˆå¤šå¼€æºé¡¹ç›®æäº¤è¿‡ Patchï¼Œä½†è¿™æ¬¡çš„ä½“éªŒæ˜¯å®Œå…¨ä¸åŒçš„ï¼ŒPingCAP å’Œç¤¾åŒºä¼™ä¼´ä»¬çƒ­å¿ƒçš„å¸®åŠ©å’Œé¼“åŠ±è®©æˆ‘åˆ‡èº«æ„Ÿå—åˆ°äº†æ´»è·ƒçš„å¼€æºç¤¾åŒºæ‰€å…·æœ‰çš„ç‹¬ç‰¹é­…åŠ›ã€‚éšåå‡ºäºä¸ªäººå…´è¶£ï¼Œæˆ‘åœ¨ TiDB ç›¸å…³çš„é¡¹ç›®ä¸­åˆé™†é™†ç»­ç»­åšäº†ä¸€äº›ç®€å•çš„è´¡çŒ®ï¼Œæœ€ç»ˆå¾—åˆ°å¤§å®¶çš„è®¤å¯æˆä¸º TiKV é¡¹ç›®çš„ Committer ä¹‹ä¸€ã€‚&lt;/p&gt;&lt;h2&gt;æ‹¥æŠ±å¼€æº&lt;/h2&gt;&lt;p&gt;å›è¿‡å¤´æ¥çœ‹è¿™æ®µæ—¶é—´çš„æˆé•¿å’Œæ”¶è·éƒ½æ˜¯å·¨å¤§çš„ï¼Œä¸ä½†å­¦ä¹ åˆ°äº†å¦‚ä½•åŒå¼€æºç¤¾åŒºä¼—å¤šä¼˜ç§€çš„è´¡çŒ®è€…æ›´åŠ é«˜æ•ˆçš„äº¤æµï¼Œå¹¶ä¸”å¯¹å¼€æºçš„ä»·å€¼ç†å¿µå’Œå¼€æºåœ¨åŸºç¡€è½¯ä»¶é¢†åŸŸçš„é‡å¤§æ„ä¹‰æœ‰äº†æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚&lt;/p&gt;&lt;p&gt;è¿‘æœŸéšç€åœ¨å…¬å¸æ‰€åœ¨å›¢é˜Ÿçš„è½¬æ¢ï¼Œæˆ‘ä¸ªäººå¼€å§‹æ›´å¤šçš„å…³æ³¨åœ¨çº¿å’Œç¦»çº¿çš„åŸºç¡€è®¾æ–½åœ¨çŸ¥ä¹çš„æ¼”è¿›ã€‚çŸ¥ä¹ä¸€ç›´ä»¥æ¥éƒ½é¼“åŠ±æ‹¥æŠ±å¼€æºï¼Œå¹¶åŸºäºå¤§é‡å¼€æºç»„ä»¶æ­å»ºäº†çŸ¥ä¹çš„æŠ€æœ¯æ¶æ„ï¼Œå¾—ç›Šäºå¼€æºçš„åŠ›é‡ï¼ŒçŸ¥ä¹çš„å†…éƒ¨å¹³å°ä¸€ç›´éƒ½ç´§éšç€è¡Œä¸šæŠ€æœ¯å‘å±•çš„æ½®æµã€‚ä»å‰æˆ‘ä»¬æ›´å¤šæ˜¯ç«™åœ¨ä½¿ç”¨è€…çš„è§’åº¦ä»å¼€æºç¤¾åŒºæ±²å–å…»åˆ†ï¼Œéšç€çŸ¥ä¹æŠ€æœ¯æ¶æ„å’Œå†…éƒ¨å·¥ç¨‹èƒ½åŠ›çš„æˆé•¿ï¼Œæœªæ¥æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä»¥æ›´åŠ ç§¯æä¸»åŠ¨çš„çŠ¶æ€å‚ä¸å¼€æºé¡¹ç›®ï¼Œå›é¦ˆç¤¾åŒºã€‚Follower Read æ˜¯çŸ¥ä¹ç¬¬ä¸€æ¬¡ä»¥ Contributor èº«ä»½å‚ä¸ TiDB ç¤¾åŒºå»ºè®¾ï¼Œæœªæ¥æˆ‘ä»¬ä¼šå‚ä¸æ›´å¤šçš„æŠ€æœ¯ç¤¾åŒºçš„å»ºè®¾ä¸ºå¼€æºç¤¾åŒºçš„å‘å±•è´¡çŒ®æˆ‘ä»¬çš„åŠ›é‡ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;åŸæ–‡é˜…è¯»ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/zhihu-the-story-of-contributing-to-tidb-community/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ä»ä½¿ç”¨è€…åˆ°å¼€å‘è€…ï¼ŒçŸ¥ä¹å‚ä¸ TiDB ç¤¾åŒºèƒŒåçš„æ•…äº‹ | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-12-82318701</guid>
<pubDate>Thu, 12 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>è·¨è¶Šã€çˆ†å‘ï¼Œæ‰€è§ã€Œå¯æå‡ã€ä¹‹å¤„ï¼Œçš†æ˜¯ä½ çš„ç«æŠ€åœº | TiDB Hackathon 2019 å¯åŠ¨</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-12-82263579.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/82263579&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ac90f82e4787e10516ecf46ae044fedc_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;TiDB ç¤¾åŒºæœ‰ä¸€ä¸ªä¿¡å¿µæ˜¯ï¼šæˆ‘ä»¬ä»ä¸ç»™è‡ªå·±è®¾é™ï¼Œçªç ´&amp;amp;æå‡æ‰æ˜¯ä¸€ç›´è¿½æ±‚çš„å¸¸æ€ã€‚åœ¨ &lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/community-cn/hackathon2018/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;å»å¹´ä¸¾åŠçš„ TiDB é»‘å®¢é©¬æ‹‰æ¾&lt;/a&gt;&lt;/u&gt; ä¸Šï¼Œè¯ç”Ÿäº†å¾ˆå¤šå…¼å…·æƒ³è±¡åŠ›å’Œå®ç”¨æ€§çš„ TiDB ç”Ÿæ€å·¥å…·ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¹¶ä¸æ»¡è¶³äºæ­¤ï¼Œ&lt;b&gt;10 æœˆ 26 - 27 æ—¥ï¼ŒTiDB  Hackathon 2019 é‡ç£…å›å½’ï¼æœ¬å±Šä¸»é¢˜è¾ƒå»å¹´æ›´åŠ å¹¿æ³›&lt;/b&gt;ï¼š&lt;/p&gt;&lt;p&gt;&lt;b&gt;IMPROVE Â· è·ƒ ç•Œ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;æœ¬å±Šæ¯”èµ›å°†å¼±åŒ–åœ°åŸŸé™åˆ¶&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ä¸‰åœ°è”åŠ¨&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å¥–é‡‘ä¾ç„¶ä¸°åš&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;ä½†å¥½ç‚¹å­æ— ä»·&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å¤§å’–å¯¼å¸ˆå·¡åœºå¸¦æ•™&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;10 åˆ†é’Ÿé›¶è·ç¦»äº¤æµå¯èƒ½èƒœè¿‡åŸ‹å¤´è‹¦æ€ 1 ä¸ªæœˆ&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å•¤é…’ Pizza ä¸çœ å¤œ&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;æœŸå¾…å„è·¯å¤§ç¥é›†ç»“ï¼Œäº«å—ä»£ç ä¸–ç•Œä¸­çš„æè‡´è‡ªç”±&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;å†²æ’ è·¨è¶Š çˆ†å‘&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;i&gt;è®© TiDB æ¥ä¸€æ¬¡ç®€å•ç²—æš´ã€çªç ´å¸¸è§„çš„ã€Œè·ƒç•Œã€å§ï¼&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;é€‰é¢˜æ–¹å‘&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;å‚èµ›é€‰æ‰‹å¯ä»¥ä¸º TiDB æ€§èƒ½ã€æ˜“ç”¨æ€§ã€ç¨³å®šæ€§ã€åŠŸèƒ½ç­‰å„æ–¹é¢åšå‡ºæå‡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å›´ç»• TiDB ç”Ÿæ€åšä¸€äº›å‘¨è¾¹å·¥å…·æå‡æ•ˆç‡ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;Key Visualizer for TiKV&lt;/b&gt;&lt;br/&gt;å¯è§†åŒ–çš„ KV çš„è¯Šæ–­å·¥å…·ï¼Œåšåˆ°å¯¹é›†ç¾¤çš„çƒ­ç‚¹ï¼Œè®¿é—®æ¨¡å¼ä¸€ç›®äº†ç„¶ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;åŸºäºå†å²çš„æŸ¥è¯¢ä¼˜åŒ–&lt;/b&gt;&lt;br/&gt;è®© TiDB çš„ SQL ä¼˜åŒ–å™¨èƒ½é€šè¿‡ç¨³æ€çš„æŸ¥è¯¢å†å²ç”Ÿæˆç¨³å®šçš„æ‰§è¡Œè®¡åˆ’ï¼Œé˜²æ­¢æ‰§è¡Œè®¡åˆ’è·³å˜ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;Follower Read ä¸ MVCC çš„ç»“åˆ&lt;/b&gt;&lt;br/&gt;è®© TiDB çš„å¤šå‰¯æœ¬èƒ½å¤Ÿæ‰¿æ‹…è¯»æµé‡ï¼Œ æå‡æ•´ä½“çš„ååã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;TiDB Playground&lt;/b&gt;&lt;br/&gt;ç±»ä¼¼ Go Playground (&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//play.golang.org&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;play.golang.org&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;) çš„æ‰€è§å³æ‰€å¾—çš„äº¤äº’å¼ TiDB Web ä½“éªŒå·¥å…·ã€‚&lt;/li&gt;&lt;li&gt;&lt;b&gt;æ›´æœŸå¾…ä½ èƒ½å¤Ÿæå‡ºæ–°ç‚¹å­&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;å¥–é¡¹è®¾ç½®&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;æœ¬å±Š Hackathon çš„å¥–é‡‘ä¾ç„¶éå¸¸ã€Œå®åœ¨ã€ï¼š&lt;/p&gt;&lt;p&gt;ğŸ…&lt;b&gt;ä¸€ç­‰å¥–ï¼ˆ1 æ”¯é˜Ÿä¼ï¼‰ï¼š Â¥ 60,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ğŸ¥ˆ&lt;b&gt;äºŒç­‰å¥–ï¼ˆ2 æ”¯é˜Ÿä¼ï¼‰ï¼šæ¯é˜Ÿ Â¥ 30,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ğŸ¥‰&lt;b&gt;ä¸‰ç­‰å¥–ï¼ˆ3 æ”¯é˜Ÿä¼ï¼‰ï¼šæ¯é˜Ÿ Â¥ 10,000 ç°é‡‘å¥–åŠ±&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å¦è®¾æœ€ä½³è´¡çŒ®å¥–ã€æœ€ä½³åˆ›æ„å¥–ã€æœ€å…·æ½œåŠ›å¥–ï¼Œå°†æœ‰ TiDB å‘¨è¾¹ç¤¼å“å¥–åŠ±ã€‚&lt;/p&gt;&lt;h2&gt;&lt;b&gt;å­¦ä¹ èµ„æ–™&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;ç”±äºå¤§å®¶æ™®éåæ˜  TiDB æºç ä¸Šæ‰‹éš¾åº¦æœ‰ç‚¹é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›ã€Œå­¦ä¹ èµ„æ–™ã€ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®ä¸ªäººåŸºç¡€å’Œé€‰é¢˜æ–¹å‘çµæ´»é€‰æ‹©ã€‚&lt;/p&gt;&lt;p&gt;Hackathon ä¸“é¡¹å­¦ä¹ æ–‡æ¡£æ±‡æ€»äº† TiDB æ ¸å¿ƒå›¢é˜Ÿå‡ºå“çš„æ•°åç¯‡ç²¾é€‰æŠ€æœ¯è¯¦è§£æ–‡ç« ï¼Œå¸®åŠ©å¤§å®¶è½»æ¾æŒæ¡ TiDB å„æ ¸å¿ƒç»„ä»¶çš„åŸç†åŠåŠŸèƒ½ï¼Œæ–‡æ¡£é“¾æ¥ï¼š&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/presentations/blob/master/hackathon-2019/reference-document-of-hackathon-2019.md&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-2e73d3d3251663decc70dfbbe5be5f6a_ipico.jpg&quot; data-image-width=&quot;283&quot; data-image-height=&quot;283&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;pingcap/presentations&lt;/a&gt;&lt;p&gt;å¦å¤–ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å‚è€ƒ PingCAP University ä¸°å¯Œçš„è§†é¢‘æ•™ç¨‹ï¼Œç½‘ç«™é“¾æ¥ï¼š&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//university.pingcap.com/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-0f1b58d10b1c02e158081b6141adfb4d_ipico.jpg&quot; data-image-width=&quot;217&quot; data-image-height=&quot;264&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PingCAP University&lt;/a&gt;&lt;h2&gt;&lt;b&gt;æŠ¥åå‚èµ›&lt;/b&gt;&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;æ¯”èµ›æ—¶é—´ï¼š2019 å¹´ 10 æœˆ 26 ï½ 27 æ—¥&lt;/li&gt;&lt;li&gt;æ¯”èµ›åœ°ç‚¹ï¼šPingCAP åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å· Office&lt;/li&gt;&lt;li&gt;ç»„é˜Ÿè§„åˆ™ï¼š1ï½4 äººæˆé˜Ÿï¼Œé€‰æ‹©ä¸€åœ°å‚èµ›&lt;/li&gt;&lt;li&gt;æŠ¥åæ—¶é—´ï¼šå³æ—¥èµ·è‡³ 10 æœˆ 23 æ—¥&lt;/li&gt;&lt;li&gt;æŠ¥åå®¡æ ¸ï¼š5 ä¸ªå·¥ä½œæ—¥å†…åé¦ˆå®¡æ ¸ç»“æœ&lt;/li&gt;&lt;li&gt;æŠ¥ååœ°å€ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//nc9hsk15y2xczuor.mikecrm.com/PiwBPaL&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB Hackathon é‡ç£…å›å½’ï¼&lt;/a&gt;&lt;p&gt;* æœ¬æ¬¡å¤§èµ›è¯šæ‹›å¿—æ„¿è€…å‚ä¸æ´»åŠ¨ç°åœºæ”¯æŒã€‚å¦‚æœä½ æƒ³è¿‘è·ç¦»æ¥è§¦æŠ€æœ¯å¤§å’–ï¼Œä½“éªŒå¤§èµ›æ°›å›´ï¼Œé‚£å°±è”ç³» TiDB Robotï¼ˆå¾®ä¿¡å·ï¼štidbaiï¼‰æŠ¥åå§ï½å¿—æ„¿è€…ä¹Ÿå¯ä»¥è·å¾—æ´»åŠ¨å®šåˆ¶çºªå¿µå“å“¦ï¼&lt;/p&gt;&lt;p&gt;&lt;b&gt;åˆä½œä¼™ä¼´&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;äº‘è®¡ç®—åŸºç¡€è®¾æ–½æ”¯æŒï¼š&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;702&quot; data-rawheight=&quot;132&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;702&quot; data-original=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;702&quot; data-rawheight=&quot;132&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;702&quot; data-original=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-f3b19d0182e62a1277d4cec811e2b0be_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;ç¤¾åŒºæ”¯æŒï¼š&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;246&quot; data-rawheight=&quot;80&quot; class=&quot;content_image&quot; width=&quot;246&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;246&quot; data-rawheight=&quot;80&quot; class=&quot;content_image lazy&quot; width=&quot;246&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-37c5b1a93f8b18320dce027e0c5fbaf5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;338&quot; data-rawheight=&quot;80&quot; class=&quot;content_image&quot; width=&quot;338&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;338&quot; data-rawheight=&quot;80&quot; class=&quot;content_image lazy&quot; width=&quot;338&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3e28c353b74f7059b4066fe735bdd299_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;è¿›å…¥æ´»åŠ¨å®˜ç½‘äº†è§£æ›´å¤šä¿¡æ¯ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/community-cn/hackathon2019/%3Futm_source%3Dwechat%26utm_medium%3Dpingcap%26utm_campaign%3Dpingcap%2520190911&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt; | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-12-82263579</guid>
<pubDate>Thu, 12 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>å¦‚ä½•é«˜æ•ˆåˆ©ç”¨ Grafana ç›‘æ§åˆ†æ TiDB æŒ‡æ ‡</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-10-81926744.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81926744&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-e4100a49788fc94b31574d46f7d52994_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;b&gt;ä½œè€…ä»‹ç»&lt;/b&gt;ï¼šæå¤ï¼ŒPingCAP äº’è”ç½‘æ¶æ„å¸ˆï¼ŒTUG Ambassadorï¼Œå‰ç¾å›¢ã€å»å“ªå„¿æ•°æ®åº“ä¸“å®¶ã€‚&lt;/blockquote&gt;&lt;h2&gt;ä¸€ã€æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ TiDB Ansible éƒ¨ç½² TiDB é›†ç¾¤ï¼Œä¼šåŒæ—¶éƒ¨ç½²ä¸€å¥— Grafana + Prometheus çš„ç›‘æ§å¹³å°ï¼Œè¿™å¥—ç›‘æ§ç”¨æ¥æ”¶é›†å’Œå±•ç¤º TiDB é›†ç¾¤å„ä¸ªç»„ä»¶å’Œæœºå™¨çš„ metric ä¿¡æ¯ï¼Œè¿™äº› metric ä¿¡æ¯éå¸¸ä¸°å¯Œï¼Œå¯ä»¥å¸®åŠ©ä½¿ç”¨è€…åˆ†æ TiDB é›†ç¾¤çš„çŠ¶æ€ä»¥åŠ Trouble shootingã€‚éšç€ä½¿ç”¨ç»éªŒçš„å¢å¤šï¼Œæˆ‘ä»¬ç§¯ç´¯äº†ä¸€äº›ç›‘æ§ä½¿ç”¨ä¸Šçš„æŠ€å·§ï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;&lt;h2&gt;äºŒã€ç›‘æ§æ¶æ„&lt;/h2&gt;&lt;p&gt;Prometheus æ˜¯ä¸€ä¸ªæ‹¥æœ‰å¤šç»´åº¦æ•°æ®æ¨¡å‹çš„ã€çµæ´»çš„æŸ¥è¯¢è¯­å¥çš„æ—¶åºæ•°æ®åº“ã€‚Grafana æ˜¯ä¸€ä¸ªå¼€æºçš„ metric åˆ†æåŠå¯è§†åŒ–ç³»ç»Ÿã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-616f81b79759b78472302897dc5496d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;477&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-616f81b79759b78472302897dc5496d5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-616f81b79759b78472302897dc5496d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;477&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-616f81b79759b78472302897dc5496d5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-616f81b79759b78472302897dc5496d5_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 1 TiDB ç›‘æ§æ•´ä½“æ¶æ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä» TiDB 2.1.3 ç‰ˆæœ¬å¼€å§‹ï¼Œç›‘æ§é‡‡ç”¨ pull çš„æ–¹å¼ï¼Œè€Œä¹‹å‰é‡‡ç”¨çš„æ˜¯ push çš„æ–¹å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è°ƒæ•´ï¼Œå®ƒè§£å†³äº†å‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ä¹‹å‰å¦‚æœ Prometheus éœ€è¦è¿ç§»ï¼Œéœ€è¦é‡å¯æ•´ä¸ªé›†ç¾¤ï¼Œå› ä¸ºç»„ä»¶è¦è°ƒæ•´ push çš„ç›®æ ‡åœ°å€ã€‚&lt;/li&gt;&lt;li&gt;ç°åœ¨å¯ä»¥éƒ¨ç½² 2 å¥— Prometheusï¼Œé˜²æ­¢ç›‘æ§çš„å•ç‚¹ï¼Œå› ä¸º pull çš„ source ç«¯æ˜¯å¯ä»¥å¤šä¸ªã€‚&lt;/li&gt;&lt;li&gt;å»æ‰äº† &lt;code&gt;PushGateWay&lt;/code&gt; è¿™ä¸ªå•ç‚¹ç»„ä»¶ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;ä¸‰ã€ç›‘æ§æ•°æ®çš„æ¥æºä¸å±•ç¤º&lt;/h2&gt;&lt;p&gt;TiDB çš„ 3 ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆTiDBï¼ŒTiKVï¼ŒPDï¼‰å¯ä»¥é€šè¿‡ http æ¥å£æ¥è·å– metric æ•°æ®ï¼Œè¿™äº›æŒ‡æ ‡éƒ½æ˜¯ä»ç¨‹åºä»£ç ä¸­ç»Ÿè®¡ä¸Šä¼ çš„ï¼Œç«¯å£å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-37e946a6aec6e8b28d1c3e282fc9e24b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;404&quot; data-rawheight=&quot;278&quot; class=&quot;content_image&quot; width=&quot;404&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-37e946a6aec6e8b28d1c3e282fc9e24b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;404&quot; data-rawheight=&quot;278&quot; class=&quot;content_image lazy&quot; width=&quot;404&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-37e946a6aec6e8b28d1c3e282fc9e24b_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ç”¨ tidb-server ä¸¾ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡ http æ¥å£ï¼Œçœ‹ä¸€ä¸ª statement QPS çš„ metricï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;# å¯ä»¥çœ‹åˆ°å®æ—¶ qps çš„æ•°æ®ï¼ŒåŒºåˆ†ä¸åŒçš„ typeï¼Œvalue æ˜¯ counter ç±»å‹çš„ç´¯è®¡å€¼ï¼ˆç§‘å­¦è®¡æ•°æ³•ï¼‰

curl http://__tidb_ip__:10080/metrics |grep tidb_executor_statement_total
tidb_executor_statement_total{type=&amp;#34;Delete&amp;#34;} 520197
tidb_executor_statement_total{type=&amp;#34;Explain&amp;#34;} 1
tidb_executor_statement_total{type=&amp;#34;Insert&amp;#34;} 7.20799402e+08
tidb_executor_statement_total{type=&amp;#34;Select&amp;#34;} 2.64983586e+08
tidb_executor_statement_total{type=&amp;#34;Set&amp;#34;} 2.399075e+06
tidb_executor_statement_total{type=&amp;#34;Show&amp;#34;} 500531
tidb_executor_statement_total{type=&amp;#34;Use&amp;#34;} 466016&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªæ•°æ®ä¼šåœ¨ Prometheus å­˜å‚¨ä¸‹æ¥ï¼Œç„¶ååœ¨ Grafana å±•ç¤ºï¼Œæˆ‘ä»¬åœ¨é¢æ¿ä¸Šç‚¹å‡»å³é”®ä¼šå‡ºç° &lt;code&gt;Edit&lt;/code&gt; æŒ‰é’®ï¼ˆæˆ–ç›´æ¥æŒ‰ eï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-33f500dfc1a3b3076bf5f0a9ea826110_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;775&quot; data-rawheight=&quot;277&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;775&quot; data-original=&quot;https://pic1.zhimg.com/v2-33f500dfc1a3b3076bf5f0a9ea826110_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-33f500dfc1a3b3076bf5f0a9ea826110_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;775&quot; data-rawheight=&quot;277&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;775&quot; data-original=&quot;https://pic1.zhimg.com/v2-33f500dfc1a3b3076bf5f0a9ea826110_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-33f500dfc1a3b3076bf5f0a9ea826110_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 2 metric é¢æ¿çš„ç¼–è¾‘å…¥å£&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨ &lt;code&gt;Metric&lt;/code&gt; é¢æ¿ä¸Šï¼Œçœ‹åˆ°åˆ©ç”¨è¯¥ metric çš„ query è¡¨è¾¾å¼ã€‚&lt;/p&gt;&lt;p&gt;é¢æ¿ä¸Šä¸€äº›ç»†èŠ‚çš„å«ä¹‰ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;code&gt;rate[1m]&lt;/code&gt;ï¼šè¡¨ç¤º 1 åˆ†é’Ÿçš„å¢é•¿é€Ÿç‡ï¼Œåªèƒ½ç”¨äº counter ç±»å‹çš„æ•°æ®ã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;sum&lt;/code&gt;ï¼šè¡¨ç¤º value æ±‚å’Œã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;by type&lt;/code&gt;ï¼šè¡¨ç¤ºå°†æ±‚å’Œåçš„æ•°æ®æŒ‰ metric çš„åŸå§‹å€¼ä¸­çš„ type è¿›è¡Œåˆ†ç»„ã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;Legend format&lt;/code&gt;ï¼šè¡¨ç¤ºæŒ‡æ ‡åç§°çš„æ ¼å¼ã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;Resolution&lt;/code&gt;ï¼šé»˜è®¤æ‰“ç‚¹æ­¥é•¿æ˜¯ 15sï¼Œ&lt;code&gt;Resolution&lt;/code&gt; è¡¨ç¤ºæ˜¯å¦åˆ†è§£ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-da973f7abee4f9ba71861fbcc13136ba_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;362&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-da973f7abee4f9ba71861fbcc13136ba_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-da973f7abee4f9ba71861fbcc13136ba_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;362&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-da973f7abee4f9ba71861fbcc13136ba_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-da973f7abee4f9ba71861fbcc13136ba_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 3 metric é¢æ¿ä¸­çš„è¡¨è¾¾å¼&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Prometheus æ”¯æŒå¾ˆå¤šè¡¨è¾¾å¼ä¸å‡½æ•°ï¼Œæ›´å¤šè¡¨è¾¾å¼è¯·å‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//prometheus.io/docs/prometheus/latest/querying&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;å®˜ç½‘é¡µé¢&lt;/a&gt;ã€‚&lt;/p&gt;&lt;h2&gt;å››ã€Grafana ä½¿ç”¨æŠ€å·§&lt;/h2&gt;&lt;h3&gt;æŠ€å·§ 1ï¼šæŸ¥çœ‹æ‰€æœ‰ç»´åº¦å¹¶ç¼–è¾‘è¡¨è¾¾å¼&lt;/h3&gt;&lt;p&gt;å¦‚ä¸Šä¸€å°èŠ‚çš„ä¾‹å­ï¼Œæ˜¯æŒ‰ç…§ type è¿›è¡Œåˆ†ç»„ï¼Œæ˜¯å¦è¿˜èƒ½ç”¨å…¶ä»–ç»´åº¦åˆ†ç»„ï¼Ÿå¦‚ä½•èƒ½å¿«é€Ÿå¾—çŸ¥è¿˜æœ‰å“ªäº›ç»´åº¦å‘¢ï¼Ÿè¿™é‡Œæ¨èçš„æŠ€å·§æ˜¯ï¼Œåœ¨ query çš„è¡¨è¾¾å¼ä¸Šåªç”¨æŒ‡æ ‡åç§°ï¼Œä¸åšä»»ä½•è®¡ç®—ï¼Œformat ä¹Ÿç•™ç©ºï¼Œè¿™æ ·å°±èƒ½æ˜¾ç¤ºå‡ºåŸå§‹çš„ metric æ•°æ®ï¼Œæ¯”å¦‚ä¸‹å›¾èƒ½çœ‹åˆ°æœ‰ 3 ä¸ªç»´åº¦ï¼ˆ&lt;code&gt;instance&lt;/code&gt;ã€&lt;code&gt;job&lt;/code&gt;ã€&lt;code&gt;type&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3a653ca29fa35cc58954c6c0df28cb19_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;383&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-3a653ca29fa35cc58954c6c0df28cb19_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3a653ca29fa35cc58954c6c0df28cb19_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;383&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-3a653ca29fa35cc58954c6c0df28cb19_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3a653ca29fa35cc58954c6c0df28cb19_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 4 ç¼–è¾‘è¡¨è¾¾å¼å¹¶æŸ¥çœ‹æ‰€æœ‰ç»´åº¦&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¾—åˆ° &lt;code&gt;instance&lt;/code&gt; è¿™ä¸ªç»´åº¦åï¼Œæˆ‘ä»¬è°ƒæ•´è¡¨è¾¾å¼ï¼Œåœ¨åŸæœ‰çš„ type åé¢åŠ ä¸Š &lt;code&gt;instance&lt;/code&gt; è¿™ä¸ªç»´åº¦ï¼Œè°ƒæ•´ &lt;code&gt;legend format&lt;/code&gt; æ ¼å¼å¢åŠ  &lt;code&gt;{{instance}}&lt;/code&gt;ï¼Œå°±å¯ä»¥çœ‹åˆ°æ¯ä¸ª tidb-server ä¸Šæ‰§è¡Œçš„ä¸åŒç±»å‹ SQL çš„ QPS äº†ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8b5983eb4b274ded704ff7c6046def28_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-8b5983eb4b274ded704ff7c6046def28_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8b5983eb4b274ded704ff7c6046def28_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-8b5983eb4b274ded704ff7c6046def28_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-8b5983eb4b274ded704ff7c6046def28_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 5 ç»™è¡¨è¾¾å¼å¢åŠ ä¸€ä¸ª instance ç»´åº¦&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;æŠ€å·§ 2ï¼šè°ƒæ•´ Y è½´æ ‡å°ºçš„è®¡ç®—æ–¹å¼&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ä»¥ &lt;code&gt;query duration&lt;/code&gt; æŒ‡æ ‡ä¸ºä¾‹ï¼Œé»˜è®¤çš„æ¯”ä¾‹å°ºé‡‡ç”¨ 2 çš„å¯¹æ•°è®¡ç®—ï¼Œæ˜¾ç¤ºä¸Šä¼šå°†å·®è·ç¼©å°ã€‚ä¸ºäº†è§‚å¯Ÿæ˜æ˜¾çš„å˜åŒ–ï¼Œå¯ä»¥å°†æ¯”ä¾‹å°ºæ”¹ä¸ºçº¿æ€§ï¼Œé€šè¿‡ä¸‹é¢ä¸¤å¼ å›¾ï¼Œå¯ä»¥çœ‹åˆ°æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜æ˜¾çš„å‘ç°é‚£ä¸ªæ—¶åˆ»æœ‰ä¸ª SQL è¿è¡Œè¾ƒæ…¢ã€‚&lt;/p&gt;&lt;p&gt;å½“ç„¶ä¹Ÿä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½é€‚åˆç”¨çº¿æ€§ï¼Œæ¯”å¦‚è§‚å¯Ÿ 1 ä¸ªæœˆçš„æ€§èƒ½è¶‹åŠ¿ï¼Œç”¨çº¿æ€§å¯èƒ½å°±ä¼šæœ‰å¾ˆå¤šå™ªç‚¹ï¼Œä¸å¥½è§‚å¯Ÿã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-df520f520f79db64159cb77b2a2221fc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-df520f520f79db64159cb77b2a2221fc_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-df520f520f79db64159cb77b2a2221fc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-df520f520f79db64159cb77b2a2221fc_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-df520f520f79db64159cb77b2a2221fc_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 6 æ ‡å°ºé»˜è®¤çš„æ¯”ä¾‹å°ºä¸º 2 çš„å¯¹æ•°&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a6ff65cb955876d2f8c1bc80e0895fc1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-a6ff65cb955876d2f8c1bc80e0895fc1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a6ff65cb955876d2f8c1bc80e0895fc1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-a6ff65cb955876d2f8c1bc80e0895fc1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a6ff65cb955876d2f8c1bc80e0895fc1_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 7 è°ƒæ•´æ ‡å°ºçš„æ¯”ä¾‹å°ºä¸ºçº¿æ€§&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote&gt;æç¤ºï¼šæˆ‘ä»¬å¯ä»¥ç»“åˆæŠ€å·§ 1ï¼Œå‘ç°è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª &lt;code&gt;sql_type&lt;/code&gt; çš„ç»´åº¦ï¼Œå¯ä»¥ç«‹åˆ»åˆ†æå‡ºæ˜¯ select æ…¢è¿˜æ˜¯ update æ…¢ï¼Œå¹¶ä¸”å¯ä»¥åˆ†æå‡ºæ˜¯åœ¨å“ªä¸ª instance ä¸Šæ…¢ã€‚&lt;/blockquote&gt;&lt;h3&gt;æŠ€å·§ 3ï¼šè°ƒæ•´ Y è½´åŸºçº¿ï¼Œæ”¾å¤§å˜åŒ–&lt;/h3&gt;&lt;p&gt;æœ‰ä¸€ç§æƒ…å†µï¼šå·²ç»ç”¨äº†çº¿æ€§æ˜¾ç¤ºï¼Œè¿˜æ˜¯çœ‹ä¸å‡ºå˜åŒ–è¶‹åŠ¿ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬åœ¨æ‰©å®¹åæƒ³è§‚å¯Ÿ &lt;code&gt;Store size&lt;/code&gt; çš„å®æ—¶å˜åŒ–æ•ˆæœï¼Œç”±äºåŸºæ•°è¾ƒå¤§ï¼Œå¾®å¼±çš„å˜åŒ–è§‚å¯Ÿä¸åˆ°ã€‚ è¿™æ—¶æˆ‘ä»¬å¯ä»¥å°† Y è½´æœ€å°å€¼ä» &lt;code&gt;0&lt;/code&gt; æ”¹ä¸º &lt;code&gt;auto&lt;/code&gt;ï¼Œå°†ä¸Šéƒ¨æ”¾å¤§ï¼Œè§‚å¯Ÿä¸‹é¢ä¸¤å¼ å›¾çš„åŒºåˆ«ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ•°æ®å·²å¼€å§‹è¿ç§»äº†ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;404&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;404&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 8 åŸºçº¿é»˜è®¤ä¸º 0&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;404&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;404&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-fe201607cff04b0c89b720c961f115f4_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 9 è°ƒæ•´åŸºçº¿ä¸º auto&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;æŠ€å·§ 4ï¼šæ ‡å°ºè”åŠ¨&lt;/h3&gt;&lt;p&gt;åœ¨ Setting é¢æ¿ä¸­ï¼Œæœ‰ &lt;code&gt;Graph Tooltip&lt;/code&gt; çš„è®¾ç½®ï¼Œé»˜è®¤ä½¿ç”¨ &lt;code&gt;Default&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-65fcf7b366bb88bf67e7aebd49abbb5c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;216&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-65fcf7b366bb88bf67e7aebd49abbb5c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-65fcf7b366bb88bf67e7aebd49abbb5c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;216&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-65fcf7b366bb88bf67e7aebd49abbb5c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-65fcf7b366bb88bf67e7aebd49abbb5c_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 10 å›¾å½¢å±•ç¤ºå·¥å…·&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬è°ƒæ•´ä¸º &lt;code&gt;Shared crosshair&lt;/code&gt; å’Œ &lt;code&gt;Shared Tooltip&lt;/code&gt; åˆ†åˆ«è¯•ä¸€ä¸‹æ•ˆæœï¼š å¯ä»¥çœ‹åˆ°æ ‡å°ºå¯ä»¥è”åŠ¨å±•ç¤ºäº†ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜æ—¶ï¼Œç¡®è®¤ 2 ä¸ªæŒ‡æ ‡çš„å…³è”æ€§ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ed30406174113b1df75cff2054f10c8b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;158&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-ed30406174113b1df75cff2054f10c8b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ed30406174113b1df75cff2054f10c8b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;158&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-ed30406174113b1df75cff2054f10c8b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-ed30406174113b1df75cff2054f10c8b_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 11 è°ƒæ•´å›¾å½¢å±•ç¤ºå·¥å…·ä¸º Shared crosshair&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c8abcc11f617a38e37039ed2b2819a8c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;162&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-c8abcc11f617a38e37039ed2b2819a8c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c8abcc11f617a38e37039ed2b2819a8c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;162&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-c8abcc11f617a38e37039ed2b2819a8c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c8abcc11f617a38e37039ed2b2819a8c_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 12 è°ƒæ•´å›¾å½¢å±•ç¤ºå·¥å…·ä¸º Shared Tooltip&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;æŠ€å·§ 5ï¼šè°ƒæ•´è¿‡æ»¤é¡¹&lt;/h3&gt;&lt;p&gt;PD çš„ Dashboardï¼Œåªå±•ç¤ºå½“å‰ leader çš„ metric ä¿¡æ¯ï¼Œæœ‰æ—¶å€™ä¼šæƒ³çœ‹ä¸€ä¸‹å†å²ä¸Š pd-leader å½“æ—¶çš„çŠ¶å†µï¼Œä½†æ˜¯ instance ä¸‹æ‹‰åˆ—è¡¨ä¸­ä¸å­˜åœ¨è¿™ä¸ªæˆå‘˜äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¾“å…¥ &lt;code&gt;ip:2379&lt;/code&gt; æ¥çœ‹åˆ°å½“æ—¶çš„æ•°æ®ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d8cb9782a722bd11359e2628f93c8b6_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;243&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5d8cb9782a722bd11359e2628f93c8b6_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d8cb9782a722bd11359e2628f93c8b6_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;243&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5d8cb9782a722bd11359e2628f93c8b6_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5d8cb9782a722bd11359e2628f93c8b6_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 13 æ‰‹åŠ¨è¾“å…¥å¹¶æŸ¥çœ‹ metric&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;æŠ€å·§ 6ï¼šå·§ç”¨ &lt;code&gt;Avg&lt;/code&gt; å‡½æ•°&lt;/h3&gt;&lt;p&gt;é€šå¸¸é»˜è®¤å›¾ä¾‹ä¸­åªæœ‰ &lt;code&gt;Max&lt;/code&gt; å’Œ &lt;code&gt;Current&lt;/code&gt;ï¼Œä½†æœ‰æ—¶æŒ‡æ ‡æ³¢åŠ¨è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ  &lt;code&gt;Avg&lt;/code&gt; ç­‰å…¶ä»–æ±‡æ€»å‡½æ•°çš„å›¾ä¾‹ï¼Œå¯ä»¥çœ‹ä¸€æ®µæ—¶é—´çš„æ•´ä½“è¶‹åŠ¿ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 14 å¢åŠ  Avg ç­‰æ±‡æ€»å‡½æ•°&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 15 å¢åŠ  Avg å‡½æ•°&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;æŠ€å·§ 7ï¼šä½¿ç”¨ Prometheus çš„ API æ¥å£è·å¾—è¡¨è¾¾å¼çš„ç»“æœ&lt;/h3&gt;&lt;p&gt;Grafana é€šè¿‡ Prometheus çš„æ¥å£è·å–æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¯¥æ¥å£è·å–æ•°æ®ï¼Œè¿™ä¸ªç”¨æ³•å¯ä»¥æ‰©æ•£å‡ºå¾ˆå¤šåŠŸèƒ½ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;è‡ªåŠ¨åŒ–å¹³å°è·å–é›†ç¾¤è§„æ¨¡ã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;&lt;li&gt;å¯¹è¡¨è¾¾å¼ç¨åŠ æ”¹åŠ¨ç»™æŠ¥è¡¨æä¾›æ•°æ®ï¼Œå¦‚ç»Ÿè®¡æ¯å¤©çš„ QPS æ€»é‡ã€æ¯å¤©çš„ QPS å³°å€¼ã€æ¯å¤©å“åº”æ—¶é—´çš„æ±‡æ€»ã€‚&lt;/li&gt;&lt;li&gt;å°†é‡è¦çš„æŒ‡æ ‡è¿›è¡Œå®šæœŸå¥åº·å·¡æ£€ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-539a6f80ef6aa6930762a2a36d9df3d5_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 16 Prometheus çš„ API æ¥å£&lt;/figcaption&gt;&lt;/figure&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;curl -u user:pass &amp;#39;http://__grafana_ip__:3000/api/datasources/proxy/1/api/v1/query_range?query=sum(tikv_engine_size_bytes%7Binstancexxxxxxxxx20181%22%7D)%20by%20(instance)&amp;amp;start=1565879269&amp;amp;end=1565882869&amp;amp;step=30&amp;#39; |python -m json.tool
{
    &amp;#34;data&amp;#34;: {
        &amp;#34;result&amp;#34;: [
            {
                &amp;#34;metric&amp;#34;: {
                    &amp;#34;instance&amp;#34;: &amp;#34;xxxxxxxxxx:20181&amp;#34;
                },
                &amp;#34;values&amp;#34;: [
                    [
                        1565879269,
                        &amp;#34;1006046235280&amp;#34;
                    ],
                    [
                        1565879299,
                        &amp;#34;1006057877794&amp;#34;
                    ],
                    [
                        1565879329,
                        &amp;#34;1006021550039&amp;#34;
                    ],
                    [
                        1565879359,
                        &amp;#34;1006021550039&amp;#34;
                    ],
                    [
                        1565882869,
                        &amp;#34;1006132630123&amp;#34;
                    ]
                ]
            }
        ],
        &amp;#34;resultType&amp;#34;: &amp;#34;matrix&amp;#34;
    },
    &amp;#34;status&amp;#34;: &amp;#34;success&amp;#34;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;äº”ã€æ€»ç»“&lt;/h2&gt;&lt;p&gt;Grafana + Prometheus æ˜¯ä¸€å¥—éå¸¸å¼ºå¤§çš„ç»„åˆï¼Œç”¨å¥½ä»–ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„åˆ†æèŠ‚çœå¾ˆå¤šæ—¶é—´ï¼Œæé«˜æ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¢åŠ å‘ç°é—®é¢˜çš„å¯èƒ½æ€§ã€‚åœ¨è¿ç»´ TiDB é›†ç¾¤æ—¶ï¼Œå°¤å…¶æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œè¿™å¥—å·¥å…·èƒ½æ´¾ä¸Šå¤§ç”¨åœºã€‚è¿™é‡ŒæŠ›ç –å¼•ç‰ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶ä¹Ÿèƒ½æä¾›ä¸€äº›æŠ€å·§ï¼Œä¸€èµ·å…±åŒå­¦ä¹ ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;åŸæ–‡é˜…è¯»ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/use-grafana-to-monitor-and-analyze-tidb-metrics/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;å¦‚ä½•é«˜æ•ˆåˆ©ç”¨ Grafana ç›‘æ§åˆ†æ TiDB æŒ‡æ ‡ | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-10-81926744</guid>
<pubDate>Tue, 10 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>ä¸€ä½“åŒ–æ•°æ®åŒæ­¥å¹³å° DM 1.0 GA å‘å¸ƒ</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-06-81484498.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81484498&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d1432cfde0c525a5e57f6869c8f2efa0_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;DMï¼ˆTiDB Data Migrationï¼‰æ˜¯ç”± PingCAP å¼€å‘çš„ä¸€ä½“åŒ–æ•°æ®åŒæ­¥å¹³å°ï¼Œæ”¯æŒä» MySQL æˆ– MariaDB åˆ° TiDB çš„å…¨é‡æ•°æ®è¿ç§»å’Œå¢é‡æ•°æ®åŒæ­¥ã€‚æ— è®ºæ˜¯ä» MySQL å‘ TiDB è¿›è¡Œå¹³æ»‘æ•°æ®è¿ç§»è¿˜æ˜¯ç”¨ TiDB ä½œä¸ºå¤šä¸ª MySQL å®ä¾‹çš„æ•°æ®æ±‡æ€»åº“ï¼Œéƒ½å¯ä»¥é€šè¿‡ DM æ¥å®ç°ã€‚DM åœ¨ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/community-cn/devcon2019/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB DevCon 2019&lt;/a&gt; ä¸Šæ­£å¼å¼€æºï¼Œç»è¿‡åŠå¹´å¤šæ—¶é—´åœ¨å¤§é‡ç”¨æˆ·ã€å¼€å‘è€…çš„æ”¯æŒå’Œåé¦ˆä¸‹ï¼Œå…¶åŠŸèƒ½å’Œç¨³å®šæ€§è¶Šæ¥è¶Šå®Œå–„ã€‚åœ¨ä»Šå¤©ï¼Œæˆ‘ä»¬å®£å¸ƒ DM 1.0 GA æ­£å¼å‘å¸ƒã€‚&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-3310efac36f9ac42b54dd0b3fc664f36_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;464&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-3310efac36f9ac42b54dd0b3fc664f36_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-3310efac36f9ac42b54dd0b3fc664f36_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;464&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-3310efac36f9ac42b54dd0b3fc664f36_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-3310efac36f9ac42b54dd0b3fc664f36_b.jpg&quot;/&gt;&lt;figcaption&gt;DM Architecture&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;æ ¸å¿ƒç‰¹æ€§&lt;/b&gt;&lt;/h2&gt;&lt;h3&gt;ä¸€ä½“åŒ–æ•°æ®åŒæ­¥&lt;/h3&gt;&lt;p&gt;åœ¨è¿›è¡Œä¸Šä¸‹æ¸¸æ•°æ®åŒæ­¥çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦å…ˆè¿›è¡Œå…¨é‡æ•°æ®å¤åˆ¶ï¼Œå†è¿›è¡Œå¢é‡æ•°æ®åŒæ­¥ã€‚DM åŒæ­¥ä»»åŠ¡æ”¯æŒé…ç½®å¤šä¸ªä¸Šæ¸¸ MySQL/MariaDB å®ä¾‹ï¼Œå¹¶ä¸”åŒæ—¶æ‰§è¡Œå…¨é‡è¿ç§»å’Œå¢é‡åŒæ­¥ï¼Œå¯ä»¥ç®€å•ç¨³å®šåœ°æ»¡è¶³ç”¨æˆ·è¿ç§»æ•°æ®çš„åœºæ™¯ã€‚&lt;/p&gt;&lt;h3&gt;åŒæ­¥è§„åˆ™å¯é…ç½®&lt;/h3&gt;&lt;p&gt;DM æä¾›äº†åŒ…æ‹¬åº“è¡¨è·¯ç”±ï¼ˆTable routingï¼‰ã€é»‘ç™½åå•ï¼ˆBlack &amp;amp; white table listsï¼‰ã€binlog è¿‡æ»¤ï¼ˆBinlog event filterï¼‰åœ¨å†…ä¸°å¯Œçš„æ•°æ®åŒæ­¥è§„åˆ™ï¼Œæ”¯æŒåœ¨æ•°æ®åŒæ­¥ä¸­è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚&lt;/p&gt;&lt;h3&gt;åˆ†åº“åˆ†è¡¨è‡ªåŠ¨åˆå¹¶&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ MySQL æ”¯æ’‘å¤§é‡æ•°æ®æ—¶ï¼Œç»å¸¸ä¼šé€‰æ‹©ä½¿ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹æ¡ˆã€‚ä½†å½“å°†æ•°æ®åŒæ­¥åˆ° TiDB åï¼Œé€šå¸¸å¸Œæœ›é€»è¾‘ä¸Šè¿›è¡Œåˆåº“åˆè¡¨ã€‚DM é’ˆå¯¹åˆåº“åˆè¡¨çš„åŒæ­¥åœºæ™¯ï¼Œæä¾›äº†å¼ºå¤§çš„åˆ†åº“åˆ†è¡¨è‡ªåŠ¨åˆå¹¶æœºåˆ¶ï¼Œèƒ½å¤Ÿåè°ƒä¸Šæ¸¸å„åˆ†ç‰‡ä¹‹é—´çš„ DDL åŒæ­¥ï¼Œä¿è¯æ•°æ®åŒæ­¥çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;&lt;h3&gt;å¼‚å¸¸ä»»åŠ¡è‡ªåŠ¨æ¢å¤&lt;/h3&gt;&lt;p&gt;åœ¨æ•°æ®åŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼Œä¸Šæ¸¸ã€ä¸‹æ¸¸ã€DM è‡ªèº«çš„é—®é¢˜éƒ½æœ‰å¯èƒ½å¯¼è‡´åŒæ­¥ä»»åŠ¡çš„ä¸­æ–­ã€‚DM é’ˆå¯¹å¸¸è§çš„å¼‚å¸¸åŒæ­¥åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹ç›¸å…³æœåŠ¡çŠ¶æ€å¹¶è‡ªåŠ¨å°è¯•æ¢å¤å¤§éƒ¨åˆ†çš„å¼‚å¸¸åŒæ­¥ä»»åŠ¡ï¼Œä½¿å¾—åŒæ­¥ä»»åŠ¡çš„è¿è¡Œæ›´åŠ ç¨³å®šå¯é ã€‚&lt;/p&gt;&lt;h2&gt;æ›´å¤šèµ„æ–™&lt;/h2&gt;&lt;p&gt;å¤§å®¶å¯ä»¥å‚è€ƒ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/tools/data-migration/deploy/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;DM ä½¿ç”¨æ–‡æ¡£&lt;/a&gt; æ¥éƒ¨ç½²å¹¶ä½“éªŒã€‚æƒ³æ·±å…¥äº†è§£ DM ç›¸å…³å®ç°åŸç†çš„åŒå­¦ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/dm&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;DM æºä»£ç &lt;/a&gt; ä»¥åŠé…å¥—çš„ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/%23DM-%25E6%25BA%2590%25E7%25A0%2581%25E9%2598%2585%25E8%25AF%25BB&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;DM æºç é˜…è¯»ç³»åˆ—&lt;/a&gt; æ–‡ç« ã€‚å¦‚æœæœ‰ç›¸å…³çš„é—®é¢˜ï¼Œæ¬¢è¿åœ¨ Github ä¸Šæ issue æˆ–è€…æ˜¯åœ¨ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//asktug.com/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;AskTUG é—®ç­”ç¤¾åŒº&lt;/a&gt; ä¸­è®¨è®ºã€‚&lt;/p&gt;&lt;h2&gt;ä¸‹ä¸€æ­¥è®¡åˆ’&lt;/h2&gt;&lt;p&gt;æœ€åå†æ¬¡æ„Ÿè°¢å„ä½ç”¨æˆ·ã€å¼€å‘è€…å¯¹ DM æä¾›çš„æ”¯æŒå’Œå¸®åŠ©ã€‚åœ¨ DM 1.0 GA å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬ä¼šæŒç»­æ‰“ç£¨ä¼˜åŒ– DMï¼Œåœ¨æ¥ä¸‹æ¥çš„ç‰ˆæœ¬ä¸­ï¼Œæä¾› DM ç»„ä»¶é«˜å¯ç”¨ã€ä¼˜åŒ–åˆ†åº“åˆ†è¡¨åˆå¹¶æœºåˆ¶ã€æ”¯æŒåŒæ­¥è¿‡ç¨‹åœ¨çº¿æ ¡éªŒç­‰æ–°ç‰¹æ€§ï¼Œå‘æ›´åŠ å®Œå–„çš„æ•°æ®åŒæ­¥å¹³å°æ–¹å‘æŒç»­æ¼”è¿›ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;é˜…è¯»åŸæ–‡ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/dm-1.0-ga/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ä¸€ä½“åŒ–æ•°æ®åŒæ­¥å¹³å° DM 1.0 GA å‘å¸ƒ | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-06-81484498</guid>
<pubDate>Fri, 06 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>TiDB é«˜å¹¶å‘å†™å…¥å¸¸è§çƒ­ç‚¹é—®é¢˜åŠè§„é¿æ–¹æ³•</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-05-81316899.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81316899&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-5a65bfef70bec5133d0bcee6e23ccfab_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;ä½œè€…ï¼šå§šç»´&lt;/p&gt;&lt;p&gt;æœ¬æ–‡é€šè¿‡é˜è¿°ä¸€ä¸ªé«˜å¹¶å‘æ‰¹é‡å†™å…¥æ•°æ®åˆ° TiDB çš„å…¸å‹åœºæ™¯ä¸­ï¼ŒTiDB ä¸­å¸¸è§çš„é—®é¢˜ï¼Œç»™å‡ºä¸€ä¸ªä¸šåŠ¡çš„æœ€ä½³å®è·µï¼Œé¿å…ä¸šåŠ¡åœ¨å¼€å‘çš„æ—¶å€™é™·å…¥ TiDB ä½¿ç”¨çš„ â€œåæ¨¡å¼â€ã€‚&lt;/p&gt;&lt;h2&gt;é¢å‘çš„å¯¹è±¡&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ä¸»è¦é¢å‘å¯¹ TiDB æœ‰ä¸€å®šäº†è§£çš„è¯»è€…ï¼Œè¯»è€…åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œæ¨èå…ˆé˜…è¯»è®²è§£ TiDB åŸç†çš„ä¸‰ç¯‡æ–‡ç« ï¼ˆ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-internal-1&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è®²å­˜å‚¨&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-internal-2&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¯´è®¡ç®—&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-internal-3&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è°ˆè°ƒåº¦&lt;/a&gt;ï¼‰ï¼Œä»¥åŠ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-best-practice/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB Best Practice&lt;/a&gt;ã€‚&lt;/p&gt;&lt;h2&gt;åœºæ™¯&lt;/h2&gt;&lt;p&gt;é«˜å¹¶å‘æ‰¹é‡æ’å…¥åœºæ™¯ï¼Œé€šå¸¸å­˜åœ¨äºä¸šåŠ¡ç³»ç»Ÿä¸­çš„æ‰¹é‡ä»»åŠ¡ä¸­ï¼Œä¾‹å¦‚æ¸…ç®—ä»¥åŠç»“ç®—ç­‰ä¸šåŠ¡ã€‚å®ƒå­˜åœ¨ä»¥ä¸‹æ˜¾è‘—çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;æ•°æ®é‡å¤§&lt;/li&gt;&lt;li&gt;éœ€è¦çŸ­æ—¶é—´å†…å°†å†å²æ•°æ®å…¥åº“&lt;/li&gt;&lt;li&gt;éœ€è¦çŸ­æ—¶é—´å†…è¯»å–å¤§é‡æ•°æ®&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;è¿™å°±å¯¹ TiDB æå‡ºäº†ä¸€äº›æŒ‘æˆ˜ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;å†™å…¥/è¯»å–èƒ½åŠ›æ˜¯å¦å¯ä»¥çº¿æ€§æ°´å¹³æ‰©å±•&lt;/li&gt;&lt;li&gt;æ•°æ®åœ¨æŒç»­å¤§å¹¶å‘å†™å…¥ï¼Œæ€§èƒ½æ˜¯å¦ç¨³å®šä¸è¡°å‡&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å¯¹äºåˆ†å¸ƒå¼æ•°æ®åº“æ¥è¯´ï¼Œé™¤äº†æœ¬èº«çš„åŸºç¡€æ€§èƒ½ä¹‹å¤–ï¼Œæœ€é‡è¦çš„å°±æ˜¯å……åˆ†åˆ©ç”¨æ‰€æœ‰èŠ‚ç‚¹èƒ½åŠ›ï¼Œé¿å…å‡ºç°å•ä¸ªèŠ‚ç‚¹æˆä¸ºç“¶é¢ˆã€‚&lt;/p&gt;&lt;h2&gt;TiDB æ•°æ®åˆ†å¸ƒåŸç†&lt;/h2&gt;&lt;p&gt;å¦‚æœè¦è§£å†³ä»¥ä¸ŠæŒ‘æˆ˜ï¼Œéœ€è¦ä» TiDB æ•°æ®åˆ‡åˆ†ä»¥åŠè°ƒåº¦çš„åŸç†å¼€å§‹è®²èµ·ã€‚è¿™é‡Œåªæ˜¯ä½œç®€å•çš„è¯´æ˜ï¼Œè¯¦ç»†è¯·å¤§å®¶å‚è§ï¼š&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-internal-3/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¯´è°ƒåº¦&lt;/a&gt;ã€‚&lt;/p&gt;&lt;p&gt;TiDB å¯¹äºæ•°æ®çš„åˆ‡åˆ†ï¼ŒæŒ‰ Region ä¸ºå•ä½ï¼Œä¸€ä¸ª Region æœ‰å¤§å°é™åˆ¶ï¼ˆé»˜è®¤ 96Mï¼‰ã€‚ Region çš„åˆ‡åˆ†æ–¹å¼æ˜¯èŒƒå›´åˆ‡åˆ†ã€‚æ¯ä¸ª Region ä¼šæœ‰å¤šå‰¯æœ¬ï¼Œæ¯ä¸€ç»„å‰¯æœ¬ï¼Œç§°ä¸ºä¸€ä¸ª Raft-Groupã€‚ç”± Leader è´Ÿè´£æ‰§è¡Œè¿™å—æ•°æ®çš„è¯» &amp;amp; å†™ï¼ˆå½“ç„¶ TiDB å³å°†æ”¯æŒ &lt;a href=&quot;https://zhuanlan.zhihu.com/p/78164196&quot; class=&quot;internal&quot;&gt;Follower-Read&lt;/a&gt;ï¼‰ã€‚Leader ä¼šè‡ªåŠ¨åœ°è¢« PD ç»„ä»¶å‡åŒ€è°ƒåº¦åœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Šï¼Œç”¨ä»¥å‡åˆ†è¯»å†™å‹åŠ›ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6e34614a0e4eab501275f7cb20b08cde_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;420&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-6e34614a0e4eab501275f7cb20b08cde_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6e34614a0e4eab501275f7cb20b08cde_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;420&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-6e34614a0e4eab501275f7cb20b08cde_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-6e34614a0e4eab501275f7cb20b08cde_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 1 TiDB æ•°æ®æ¦‚è§ˆ&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;åªè¦ä¸šåŠ¡çš„å†™å…¥æ²¡æœ‰ AUTO_INCREMENT çš„ä¸»é”®æˆ–è€…å•è°ƒé€’å¢çš„ç´¢å¼•ï¼ˆä¹Ÿå³æ²¡æœ‰ä¸šåŠ¡ä¸Šçš„å†™å…¥çƒ­ç‚¹ï¼Œæ›´å¤šç»†èŠ‚å‚è§ &lt;a href=&quot;https://zhuanlan.zhihu.com/p/25574778&quot; class=&quot;internal&quot;&gt;TiDB æ­£ç¡®ä½¿ç”¨æ–¹å¼&lt;/a&gt;ï¼‰ã€‚ä»åŸç†ä¸Šæ¥è¯´ï¼ŒTiDB ä¾é è¿™ä¸ªæ¶æ„ï¼Œæ˜¯å¯ä»¥çº¿æ€§æ‰©å±•è¯»å†™èƒ½åŠ›ï¼Œå¹¶ä¸”å¯ä»¥å……åˆ†åˆ©ç”¨åˆ†å¸ƒå¼çš„èµ„æºçš„ã€‚è¿™ä¸€ç‚¹ä¸Š TiDB å°¤å…¶é€‚åˆé«˜å¹¶å‘æ‰¹é‡å†™å…¥åœºæ™¯çš„ä¸šåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;ä½†æ˜¯è½¯ä»¶ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰é“¶å¼¹ã€‚å…·ä½“çš„äº‹æƒ…è¿˜éœ€è¦å…·ä½“åˆ†æã€‚æˆ‘ä»¬æ¥ä¸‹æ¥å°±é€šè¿‡ä¸€äº›ç®€å•çš„è´Ÿè½½æ¥æ¢è®¨ TiDB åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œéœ€è¦å¦‚ä½•è¢«æ­£ç¡®çš„ä½¿ç”¨ï¼Œæ‰èƒ½è¾¾åˆ°æ­¤åœºæ™¯ç†è®ºä¸Šçš„æœ€ä½³æ€§èƒ½ã€‚&lt;/p&gt;&lt;h2&gt;ç®€å•çš„ä¾‹å­&lt;/h2&gt;&lt;p&gt;æœ‰ä¸€å¼ ç®€å•çš„è¡¨ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;CREATE TABLE IF NOT EXISTS TEST_HOTSPOT(
      id                   BIGINT PRIMARY KEY,
      age                INT,
      user_name  VARCHAR(32),
      email 	 VARCHAR(128)
)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªè¡¨ç»“æ„éå¸¸ç®€å•ï¼Œé™¤äº† id ä¸ºä¸»é”®ä»¥å¤–ï¼Œæ²¡æœ‰é¢å¤–çš„äºŒçº§ç´¢å¼•ã€‚å†™å…¥çš„è¯­å¥å¦‚ä¸‹ï¼Œid é€šè¿‡éšæœºæ•°ç¦»æ•£ç”Ÿæˆï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;INSERT INTO TEST_HOTSPOT(id, age, user_name, email) values(%v, %v, &amp;#39;%v&amp;#39;, &amp;#39;%v&amp;#39;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è´Ÿè½½æ˜¯çŸ­æ—¶é—´å†…å¯†é›†åœ°æ‰§è¡Œä»¥ä¸Šå†™å…¥è¯­å¥ã€‚&lt;/p&gt;&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¼¼ä¹å·²ç»ç¬¦åˆäº†æˆ‘ä»¬ä¸Šè¿°æåˆ°çš„ TiDB æœ€ä½³å®è·µäº†ï¼Œä¸šåŠ¡ä¸Šæ²¡æœ‰çƒ­ç‚¹äº§ç”Ÿï¼Œåªè¦æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„æœºå™¨ï¼Œå°±å¯ä»¥å……åˆ†åˆ©ç”¨ TiDB çš„åˆ†å¸ƒå¼èƒ½åŠ›äº†ã€‚è¦éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®éªŒç¯å¢ƒä¸­è¯•ä¸€è¯•ï¼ˆå®éªŒç¯å¢ƒéƒ¨ç½²æ‹“æ‰‘æ˜¯ 2 ä¸ª TiDB èŠ‚ç‚¹ï¼Œ3 ä¸ª PD èŠ‚ç‚¹ï¼Œ6 ä¸ª TiKV èŠ‚ç‚¹ï¼Œè¯·å¤§å®¶å¿½ç•¥ QPSï¼Œè¿™é‡Œçš„æµ‹è¯•åªæ˜¯ä¸ºäº†é˜è¿°åŸç†ï¼Œå¹¶é benchmarkï¼‰ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5814fbfb2eb2cd1d91a37cf258b073ea_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;300&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5814fbfb2eb2cd1d91a37cf258b073ea_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5814fbfb2eb2cd1d91a37cf258b073ea_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;300&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5814fbfb2eb2cd1d91a37cf258b073ea_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5814fbfb2eb2cd1d91a37cf258b073ea_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 2 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…å‘èµ·äº† â€œå¯†é›†â€ çš„å†™å…¥ï¼ŒTiDB æ”¶åˆ°çš„è¯·æ±‚æ˜¯ 3K QPSã€‚å¦‚æœæ²¡æœ‰æ„å¤–çš„è¯ï¼Œå‹åŠ›åº”è¯¥å‡æ‘Šç»™ 6 ä¸ª TiKV èŠ‚ç‚¹ã€‚ä½†æ˜¯ä» TiKV èŠ‚ç‚¹çš„ CPU ä½¿ç”¨æƒ…å†µä¸Šçœ‹ï¼Œå­˜åœ¨æ˜æ˜¾çš„å†™å…¥å€¾æ–œï¼ˆtikv - 3 èŠ‚ç‚¹æ˜¯å†™å…¥çƒ­ç‚¹ï¼‰ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a069a631ce5d24b794c058ab58741cd9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;377&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-a069a631ce5d24b794c058ab58741cd9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a069a631ce5d24b794c058ab58741cd9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;377&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-a069a631ce5d24b794c058ab58741cd9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a069a631ce5d24b794c058ab58741cd9_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 3 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8c4d20dbd53b82c1d16982b7daf02b7b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;350&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-8c4d20dbd53b82c1d16982b7daf02b7b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8c4d20dbd53b82c1d16982b7daf02b7b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;350&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-8c4d20dbd53b82c1d16982b7daf02b7b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-8c4d20dbd53b82c1d16982b7daf02b7b_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 4 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/key-monitoring-metrics/tikv-dashboard/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Raft store CPU&lt;/a&gt; ä»£è¡¨ raftstore çº¿ç¨‹çš„ CPU ä½¿ç”¨ç‡ï¼Œé€šå¸¸ä»£è¡¨ç€å†™å…¥çš„è´Ÿè½½ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ tikv-3 æ˜¯ raft çš„ leaderï¼Œtikv-0 è·Ÿ tikv-1 æ˜¯ raft çš„ followerï¼Œå…¶ä»–çš„ tikv èŠ‚ç‚¹çš„è´Ÿè½½å‡ ä¹ä¸ºç©ºã€‚&lt;/p&gt;&lt;p&gt;ä» PD çš„ç›‘æ§ä¸­ä¹Ÿå¯ä»¥å°è¯è¿™ä¸€ç‚¹ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b3e752ea92204cec3a3d6a013132c12e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;664&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-b3e752ea92204cec3a3d6a013132c12e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b3e752ea92204cec3a3d6a013132c12e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;664&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-b3e752ea92204cec3a3d6a013132c12e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-b3e752ea92204cec3a3d6a013132c12e_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 5 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;åç›´è§‰çš„åŸå› &lt;/p&gt;&lt;p&gt;ä¸Šé¢è¿™ä¸ªç°è±¡æ˜¯æœ‰ä¸€äº›è¿åç›´è§‰çš„ï¼Œé€ æˆè¿™ä¸ªç°è±¡çš„åŸå› æ˜¯ï¼šåˆšåˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œè¿™ä¸ªè¡¨åœ¨ TiKV åªä¼šå¯¹åº”ä¸ºä¸€ä¸ª Regionï¼ŒèŒƒå›´æ˜¯:&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;[CommonPrefix + TableID, CommonPrefix + TableID + 1)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äºåœ¨çŸ­æ—¶é—´å†…çš„å¤§é‡å†™å…¥ï¼Œå®ƒä¼šæŒç»­å†™å…¥åˆ°åŒä¸€ä¸ª Regionã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-9226f136204e8c622c853ab9076f855a_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1204&quot; data-rawheight=&quot;510&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1204&quot; data-original=&quot;https://pic3.zhimg.com/v2-9226f136204e8c622c853ab9076f855a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-9226f136204e8c622c853ab9076f855a_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1204&quot; data-rawheight=&quot;510&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1204&quot; data-original=&quot;https://pic3.zhimg.com/v2-9226f136204e8c622c853ab9076f855a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-9226f136204e8c622c853ab9076f855a_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 6 TiKV Region åˆ†è£‚æµç¨‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾ç®€å•æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼ŒæŒç»­å†™å…¥ï¼ŒTiKV ä¼šå°† Region åˆ‡åˆ†ã€‚ä½†æ˜¯ç”±äºæ˜¯ç”±åŸ Leader æ‰€åœ¨çš„ Store é¦–å…ˆå‘èµ·é€‰ä¸¾ï¼Œæ‰€ä»¥å¤§æ¦‚ç‡ä¸‹æ—§çš„ Store ä¼šæˆä¸ºæ–°åˆ‡åˆ†å¥½çš„ä¸¤ä¸ª Region çš„ Leaderã€‚å¯¹äºæ–°åˆ‡åˆ†å¥½çš„ Region 2ï¼Œ3ã€‚ä¹Ÿä¼šé‡å¤ä¹‹å‰å‘ç”Ÿåœ¨ Region 1 ä¸Šçš„äº‹æƒ…ã€‚ä¹Ÿå°±æ˜¯å‹åŠ›ä¼šå¯†é›†åœ°é›†ä¸­åœ¨ TiKV-Node 1 ä¸­ã€‚&lt;/p&gt;&lt;p&gt;åœ¨æŒç»­å†™å…¥çš„è¿‡ç¨‹ä¸­ï¼Œ PD èƒ½å‘ç° Node 1 ä¸­äº§ç”Ÿäº†çƒ­ç‚¹ï¼Œå®ƒå°±ä¼šå°† Leader å‡åˆ†åˆ°å…¶ä»–çš„ Node ä¸Šã€‚å¦‚æœ TiKV çš„èŠ‚ç‚¹æ•°èƒ½å¤šäºå‰¯æœ¬æ•°çš„è¯ï¼Œè¿˜ä¼šå‘ç”Ÿ Region çš„è¿ç§»ï¼Œå°½é‡å¾€ç©ºé—²çš„ Node ä¸Šè¿ç§»ï¼Œè¿™ä¸¤ä¸ªæ“ä½œåœ¨æ’å…¥è¿‡ç¨‹ï¼Œåœ¨ PD ç›‘æ§ä¸­ä¹Ÿå¯ä»¥å°è¯ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c3536017902bb5e3cf8b8a253642c1bc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;339&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-c3536017902bb5e3cf8b8a253642c1bc_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c3536017902bb5e3cf8b8a253642c1bc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;339&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-c3536017902bb5e3cf8b8a253642c1bc_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c3536017902bb5e3cf8b8a253642c1bc_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 7 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;åœ¨æŒç»­å†™å…¥ä¸€æ®µæ—¶é—´ä»¥åï¼Œæ•´ä¸ªé›†ç¾¤ä¼šè¢« PD è‡ªåŠ¨åœ°è°ƒåº¦æˆä¸€ä¸ªå‹åŠ›å‡åŒ€çš„çŠ¶æ€ï¼Œåˆ°é‚£ä¸ªæ—¶å€™æ‰ä¼šçœŸæ­£åˆ©ç”¨æ•´ä¸ªé›†ç¾¤çš„èƒ½åŠ›ã€‚å¯¹äºå¤§å¤šæ•°æƒ…å†µæ¥è¯´ï¼Œè¿™ä¸ªæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™ä¸ªé˜¶æ®µå±äºè¡¨ Region çš„é¢„çƒ­é˜¶æ®µã€‚&lt;/p&gt;&lt;p&gt;ä½†æ˜¯å¯¹äºé«˜å¹¶å‘æ‰¹é‡å¯†é›†å†™å…¥åœºæ™¯æ¥è¯´ï¼Œè¿™ä¸ªå´æ˜¯åº”è¯¥é¿å…çš„ã€‚&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬èƒ½å¦è·³è¿‡è¿™ä¸ªé¢„çƒ­çš„è¿‡ç¨‹ï¼Œç›´æ¥å°† Region åˆ‡åˆ†ä¸ºé¢„æœŸçš„æ•°é‡ï¼Œæå‰è°ƒåº¦åˆ°é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹ä¸­å‘¢ï¼Ÿ&lt;/p&gt;&lt;h2&gt;è§£å†³æ–¹æ³•&lt;/h2&gt;&lt;p&gt;TiDB åœ¨ v3.0.x ç‰ˆæœ¬ä»¥åŠ v2.1.13 ä»¥åçš„ç‰ˆæœ¬æ”¯æŒäº†ä¸€ä¸ªæ–°ç‰¹æ€§å«åš &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/sql/statements/split-region/%23split-region-%25E4%25BD%25BF%25E7%2594%25A8%25E6%2596%2587%25E6%25A1%25A3&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Split Region&lt;/a&gt;ã€‚è¿™ä¸ªç‰¹æ€§æä¾›äº†æ–°çš„è¯­æ³•ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;SPLIT TABLE table_name [INDEX index_name] BETWEEN (lower_value) AND (upper_value) REGIONS region_num

SPLIT TABLE table_name [INDEX index_name] BY (value_list) [, (value_list)]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯»è€…å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä½• TiDB ä¸è‡ªåŠ¨å°†è¿™ä¸ªåˆ‡åˆ†åŠ¨ä½œæå‰å®Œæˆï¼Ÿå¤§å®¶å…ˆçœ‹ä¸€ä¸‹ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4c8a53ac065f89083b3dbcfc9f1de694_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1156&quot; data-rawheight=&quot;685&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1156&quot; data-original=&quot;https://pic1.zhimg.com/v2-4c8a53ac065f89083b3dbcfc9f1de694_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4c8a53ac065f89083b3dbcfc9f1de694_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1156&quot; data-rawheight=&quot;685&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1156&quot; data-original=&quot;https://pic1.zhimg.com/v2-4c8a53ac065f89083b3dbcfc9f1de694_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-4c8a53ac065f89083b3dbcfc9f1de694_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 8 Table Region Range&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä»å›¾ 8 å¯ä»¥çŸ¥é“ï¼ŒTable è¡Œæ•°æ® key çš„ç¼–ç ä¹‹ä¸­ï¼Œè¡Œæ•°æ®å”¯ä¸€å¯å˜çš„æ˜¯è¡Œ ID ï¼ˆrowIDï¼‰ã€‚åœ¨ TiDB ä¸­ rowID æ˜¯ä¸€ä¸ª Int64 æ•´å½¢ã€‚é‚£ä¹ˆæ˜¯å¦æˆ‘ä»¬å°† Int64 æ•´å½¢èŒƒå›´å‡åŒ€åˆ‡åˆ†æˆæˆ‘ä»¬è¦çš„ä»½æ•°ï¼Œç„¶åå‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹å°±å¯ä»¥è§£å†³é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;ç­”æ¡ˆæ˜¯ä¸ä¸€å®šï¼Œéœ€è¦çœ‹æƒ…å†µï¼Œå¦‚æœè¡Œ id çš„å†™å…¥æ˜¯å®Œå…¨ç¦»æ•£çš„ï¼Œé‚£ä¹ˆä¸Šè¿°æ–¹å¼æ˜¯å¯è¡Œçš„ã€‚ä½†æ˜¯å¦‚æœè¡Œ id æˆ–è€…ç´¢å¼•æ˜¯æœ‰å›ºå®šçš„èŒƒå›´æˆ–è€…å‰ç¼€çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘åªåœ¨ [2000w, 5000w) çš„èŒƒå›´å†…ç¦»æ•£æ’å…¥ï¼Œè¿™ç§å†™å…¥ä¾ç„¶æ˜¯åœ¨ä¸šåŠ¡ä¸Šæ²¡æœ‰çƒ­ç‚¹çš„ï¼Œä½†æ˜¯å¦‚æœæŒ‰ä¸Šé¢çš„æ–¹å¼åˆ‡åˆ†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨å¼€å§‹ä¹Ÿè¿˜æ˜¯åªå†™å…¥åˆ°æŸä¸ª Regionã€‚&lt;/p&gt;&lt;p&gt;ä½œä¸ºé€šç”¨çš„æ•°æ®åº“ï¼ŒTiDB å¹¶ä¸å¯¹æ•°æ®çš„åˆ†å¸ƒä½œå‡è®¾ï¼Œæ‰€ä»¥å¼€å§‹åªç”¨ä¸€ä¸ª Region æ¥è¡¨è¾¾ä¸€ä¸ªè¡¨ï¼Œç­‰åˆ°çœŸå®æ•°æ®æ’å…¥è¿›æ¥ä»¥åï¼ŒTiDB è‡ªåŠ¨åœ°æ ¹æ®è¿™ä¸ªæ•°æ®çš„åˆ†å¸ƒæ¥ä½œåˆ‡åˆ†ã€‚è¿™ç§æ–¹å¼æ˜¯è¾ƒé€šç”¨çš„ã€‚&lt;/p&gt;&lt;p&gt;æ‰€ä»¥ TiDB æä¾›äº† Split Region è¯­æ³•ï¼Œæ¥ä¸“é—¨é’ˆå¯¹çŸ­æ—¶æ‰¹é‡å†™å…¥åœºæ™¯ä½œä¼˜åŒ–ï¼Œä¸‹é¢æˆ‘ä»¬å°è¯•åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ç”¨ä»¥ä¸‹è¯­å¥æå‰åˆ‡æ•£ Regionï¼Œå†çœ‹çœ‹è´Ÿè½½æƒ…å†µã€‚&lt;/p&gt;&lt;p&gt;ç”±äºæµ‹è¯•çš„å†™å…¥æ˜¯åœ¨æ­£æ•°èŒƒå›´å†…å®Œå…¨ç¦»æ•£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹è¯­å¥ï¼Œåœ¨ Int64 ç©ºé—´å†…æå‰å°†è¡¨åˆ‡æ•£ä¸º 128 ä¸ª Regionï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;SPLIT TABLE TEST_HOTSPOT BETWEEN (0) AND (9223372036854775807) REGIONS 128;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ‡åˆ†å®Œæˆä»¥åï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;SHOW TABLE test_hotspot REGIONS;&lt;/code&gt; è¯­å¥æŸ¥çœ‹æ‰“æ•£çš„æƒ…å†µï¼Œå¦‚æœ SCATTERING åˆ—å€¼å…¨éƒ¨ä¸º 0ï¼Œä»£è¡¨è°ƒåº¦æˆåŠŸã€‚&lt;/p&gt;&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/pingcap/tidb-ansible/blob/dabf60baba5e740a4bee9faf95e77563d8084be1/scripts/table-regions.py&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;table-regions.py&lt;/a&gt; è„šæœ¬ï¼ŒæŸ¥çœ‹ Region çš„åˆ†å¸ƒï¼Œå·²ç»æ¯”è¾ƒå‡åŒ€äº†ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;[root@172.16.4.4 scripts]# python table-regions.py --host 172.16.4.3 --port 31453 test test_hotspot
[RECORD - test.test_hotspot] - Leaders Distribution:
  total leader count: 127
  store: 1, num_leaders: 21, percentage: 16.54%
  store: 4, num_leaders: 20, percentage: 15.75%
  store: 6, num_leaders: 21, percentage: 16.54%
  store: 46, num_leaders: 21, percentage: 16.54%
  store: 82, num_leaders: 23, percentage: 18.11%
  store: 62, num_leaders: 21, percentage: 16.54%&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å†é‡æ–°è¿è¡Œæ’å…¥è´Ÿè½½ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-daf6296de25b31b28798ba2186018eb9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;379&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-daf6296de25b31b28798ba2186018eb9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-daf6296de25b31b28798ba2186018eb9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;379&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-daf6296de25b31b28798ba2186018eb9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-daf6296de25b31b28798ba2186018eb9_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 9 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-bf3e8ca5cdbdf1cc204e77dccfcf5686_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;343&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-bf3e8ca5cdbdf1cc204e77dccfcf5686_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-bf3e8ca5cdbdf1cc204e77dccfcf5686_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;343&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-bf3e8ca5cdbdf1cc204e77dccfcf5686_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-bf3e8ca5cdbdf1cc204e77dccfcf5686_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 10 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-65312d15b81fbe0636bc526c21b03079_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;339&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-65312d15b81fbe0636bc526c21b03079_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-65312d15b81fbe0636bc526c21b03079_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;339&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-65312d15b81fbe0636bc526c21b03079_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-65312d15b81fbe0636bc526c21b03079_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 11 ç›‘æ§æˆªå›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°å·²ç»æ¶ˆé™¤äº†æ˜æ˜¾çš„çƒ­ç‚¹é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;p&gt;å½“ç„¶ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹äº†ä¸€ä¸ªç®€å•çš„è¡¨ï¼Œè¿˜æœ‰ç´¢å¼•çƒ­ç‚¹çš„é—®é¢˜ã€‚å¦‚ä½•é¢„å…ˆåˆ‡æ•£ç´¢å¼•ç›¸å…³çš„ Regionï¼Ÿ&lt;/p&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜å¯ä»¥ç•™ç»™è¯»è€…ï¼Œé€šè¿‡ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/sql/statements/split-region/%23split-region-%25E4%25BD%25BF%25E7%2594%25A8%25E6%2596%2587%25E6%25A1%25A3&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Split Region æ–‡æ¡£&lt;/a&gt; å¯ä»¥è·å¾—æ›´å¤šçš„ä¿¡æ¯ã€‚&lt;/p&gt;&lt;h3&gt;æ›´å¤æ‚ä¸€äº›çš„æƒ…å†µ&lt;/h3&gt;&lt;p&gt;å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–è€…ä¸»é”®ä¸æ˜¯ int ç±»å‹ï¼Œç”¨æˆ·ä¹Ÿä¸æƒ³è‡ªå·±ç”Ÿæˆä¸€ä¸ªéšæœºåˆ†å¸ƒçš„ä¸»é”® IDï¼ŒTiDB å†…éƒ¨ä¼šæœ‰ä¸€ä¸ªéšå¼çš„ _tidb_rowid åˆ—ä½œä¸ºè¡Œ idã€‚åœ¨ä¸ä½¿ç”¨ SHARD_ROW_ID_BITS çš„æƒ…å†µä¸‹ï¼Œ_tidb_rowid åˆ—çš„å€¼åŸºæœ¬ä¸Šä¹Ÿæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ­¤æ—¶ä¹Ÿä¼šæœ‰å†™çƒ­ç‚¹å­˜åœ¨ã€‚ï¼ˆæŸ¥çœ‹ä»€ä¹ˆæ˜¯ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/configuration/tidb-server/tidb-specific-variables/%23shard-row-id-bits&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;SHARD_ROW_ID_BITS&lt;/a&gt;ï¼‰&lt;/p&gt;&lt;p&gt;è¦é¿å…ç”± _tidb_rowid å¸¦æ¥çš„å†™å…¥çƒ­ç‚¹é—®é¢˜ï¼Œå¯ä»¥åœ¨å»ºè¡¨æ—¶ï¼Œä½¿ç”¨ SHARD_ROW_ID_BITS  å’Œ PRE_SPLIT_REGIONS è¿™ä¸¤ä¸ªå»ºè¡¨ optionï¼ˆæŸ¥çœ‹ä»€ä¹ˆæ˜¯ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/sql/statements/split-region/%23pre-split-regions&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;PRE_SPLIT_REGIONS&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;SHARD_ROW_ID_BITS ç”¨æ¥æŠŠ _tidb_rowid åˆ—ç”Ÿæˆçš„è¡Œ ID éšæœºæ‰“æ•£ï¼Œpre_split_regions ç”¨æ¥åœ¨å»ºå®Œè¡¨åå°±é¢„å…ˆ split regionã€‚æ³¨æ„ï¼špre_split_regions å¿…é¡»å°äºç­‰äº shard_row_id_bitsã€‚&lt;/p&gt;&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;create table t (a int, b int) shard_row_id_bits = 4 pre_split_regions=Â·3;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;SHARD_ROW_ID_BITS = 4 è¡¨ç¤º tidb_rowid çš„å€¼ä¼šéšæœºåˆ†å¸ƒæˆ 16 ï¼ˆ16=2^4ï¼‰ ä¸ªèŒƒå›´åŒºé—´ã€‚&lt;/li&gt;&lt;li&gt;pre_split_regions=3 è¡¨ç¤ºå»ºå®Œè¡¨åæå‰ split å‡º 8 (2^3) ä¸ª regionã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;åœ¨è¡¨ t å¼€å§‹å†™å…¥åï¼Œæ•°æ®å†™å…¥åˆ°æå‰ split å¥½çš„ 8 ä¸ª region ä¸­ï¼Œè¿™æ ·ä¹Ÿé¿å…äº†åˆšå¼€å§‹å»ºè¡¨å®Œåå› ä¸ºåªæœ‰ä¸€ä¸ª region è€Œå­˜åœ¨çš„å†™çƒ­ç‚¹é—®é¢˜ã€‚&lt;/p&gt;&lt;h2&gt;å‚æ•°é…ç½®&lt;/h2&gt;&lt;h3&gt;å…³é—­ TiDB çš„ Latch æœºåˆ¶&lt;/h3&gt;&lt;p&gt;TiDB 2.1 ç‰ˆæœ¬ä¸­åœ¨ SQL å±‚å¼•å…¥äº† &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/reference/configuration/tidb-server/configuration-file/%23txn-local-latches&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;latch æœºåˆ¶&lt;/a&gt;ï¼Œç”¨äºåœ¨å†™å…¥å†²çªæ¯”è¾ƒé¢‘ç¹çš„åœºæ™¯ä¸­æå‰å‘ç°äº‹åŠ¡å†²çªï¼Œå‡å°‘ TiDB è·Ÿ TiKV äº‹åŠ¡æäº¤æ—¶å†™å†™å†²çªå¯¼è‡´çš„é‡è¯•ã€‚å¯¹äºè·‘æ‰¹åœºæ™¯ï¼Œé€šå¸¸æ˜¯å­˜é‡æ•°æ®ï¼Œæ‰€ä»¥å¹¶ä¸å­˜åœ¨äº‹åŠ¡çš„å†™å…¥å†²çªã€‚å¯ä»¥æŠŠ TiDB çš„ latch å…³é—­ï¼Œä»¥å‡å°‘ç»†å°å†…å­˜å¯¹è±¡çš„åˆ†é…ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;[txn-local-latches]
enabled = false&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;é˜…è¯»åŸæ–‡ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tidb-in-high-concurrency-scenarios/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB é«˜å¹¶å‘å†™å…¥å¸¸è§çƒ­ç‚¹é—®é¢˜åŠè§„é¿æ–¹æ³• | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-05-81316899</guid>
<pubDate>Thu, 05 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>TiKV æºç è§£æç³»åˆ—æ–‡ç« ï¼ˆåä¸‰ï¼‰MVCC æ•°æ®è¯»å–</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-03-81003380.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81003380&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a1a34bbb226599454f1da2b4db6b6a1f_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;ä½œè€…ï¼šæ–½é—»è½©&lt;/p&gt;&lt;p&gt;åœ¨ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tikv-source-code-reading-12/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ã€ŠTiKV æºç è§£æç³»åˆ—æ–‡ç« ï¼ˆåäºŒï¼‰åˆ†å¸ƒå¼äº‹åŠ¡ã€‹&lt;/a&gt; ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨æ»¡è¶³äº‹åŠ¡ç‰¹æ€§çš„è¦æ±‚ä¸‹è¿›è¡Œæ•°æ®å†™å…¥ã€‚æœ¬æ–‡å°†ä»‹ç»æ•°æ®è¯»å–çš„æµç¨‹ã€‚ç”±äºé¡ºåºæ‰«ï¼ˆForward Scanï¼‰æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§ï¼Œå› æ­¤æœ¬æ–‡åªä»‹ç»é¡ºåºæ‰«çš„æµç¨‹ï¼Œè€Œä¸ä¼šä»‹ç»ç‚¹æŸ¥æˆ–é€†åºæ‰«ã€‚ç‚¹æŸ¥æ˜¯é¡ºåºæ‰«çš„ç®€åŒ–ï¼Œç›¸ä¿¡è¯»è€…ç†è§£äº†é¡ºåºæ‰«çš„æµç¨‹åèƒ½è‡ªå·±æƒ³å‡ºç‚¹æŸ¥çš„å®ç°ï¼Œè€Œé€†åºæ‰«ä¸é¡ºåºæ‰«ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äºä»åå‘å‰æ‰«ï¼Œç¨å¤æ‚ä¸€äº›ï¼Œç›¸ä¿¡å¤§å®¶åœ¨é˜…è¯»æœ¬æ–‡åï¼Œä¹Ÿèƒ½è‡ªå·±å¯¹ç…§ç€ä»£ç è¯»æ‡‚é€†åºæ‰«çš„å®ç°ã€‚&lt;/p&gt;&lt;h2&gt;æ•°æ®æ ¼å¼&lt;/h2&gt;&lt;p&gt;é¦–å…ˆå›å¿†ä¸€ä¸‹äº‹åŠ¡å†™å…¥å®Œæˆåï¼Œ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//tikv.org/docs/deep-dive/distributed-transaction/percolator/%23percolator-in-tikv&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;åœ¨ RocksDB å±‚é¢å­˜å‚¨çš„å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„æ•°æ®&lt;/a&gt;ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a95f9dd035625e599e3f00839dbd1e9b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1396&quot; data-rawheight=&quot;354&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1396&quot; data-original=&quot;https://pic4.zhimg.com/v2-a95f9dd035625e599e3f00839dbd1e9b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a95f9dd035625e599e3f00839dbd1e9b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1396&quot; data-rawheight=&quot;354&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1396&quot; data-original=&quot;https://pic4.zhimg.com/v2-a95f9dd035625e599e3f00839dbd1e9b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a95f9dd035625e599e3f00839dbd1e9b_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ä¸ºäº†æ¶ˆé™¤æ­§ä¹‰ï¼Œçº¦å®š User Key (&lt;code&gt;user_key&lt;/code&gt;) æŒ‡ TiKV Clientï¼ˆå¦‚ TiDBï¼‰æ‰€å†™å…¥çš„æˆ–æ‰€è¦è¯»å–çš„ Keyï¼ŒUser Value (&lt;code&gt;user_value&lt;/code&gt;) æŒ‡ User Key å¯¹åº”çš„ Valueã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;lock_info&lt;/code&gt; åŒ…å« lock typeã€primary keyã€timestampã€ttl ç­‰ä¿¡æ¯ï¼Œè§ &lt;code&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tikv/tikv/blob/1924a32376b7823c3faa0795f53e836e65eb9ff0/src/storage/mvcc/lock.rs&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;src/storage/mvcc/lock.rs&lt;/a&gt;&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;&lt;code&gt;write_info&lt;/code&gt; åŒ…å« write typeã€start_ts ç­‰ä¿¡æ¯ï¼Œè§ &lt;code&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tikv/tikv/blob/1924a32376b7823c3faa0795f53e836e65eb9ff0/src/storage/mvcc/write.rs&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;src/storage/mvcc/write.rs&lt;/a&gt;&lt;/code&gt;ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;äº‹åŠ¡æ ·ä¾‹&lt;/h2&gt;&lt;p&gt;ä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ä»£ç ï¼Œæˆ‘ä»¬å‡è®¾ TiKV Client ä¹‹å‰è¿›è¡Œäº†ä¸‹é¢è¿™äº›äº‹åŠ¡ï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-51c7549d4bbbe51407b41adf09d7736f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1360&quot; data-rawheight=&quot;408&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1360&quot; data-original=&quot;https://pic4.zhimg.com/v2-51c7549d4bbbe51407b41adf09d7736f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-51c7549d4bbbe51407b41adf09d7736f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1360&quot; data-rawheight=&quot;408&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1360&quot; data-original=&quot;https://pic4.zhimg.com/v2-51c7549d4bbbe51407b41adf09d7736f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-51c7549d4bbbe51407b41adf09d7736f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;blockquote&gt;æ³¨æ„ï¼ŒTiDB å‘ TiKV å†™å…¥çš„ Keyï¼ˆåŠä¸Šé¢çš„ user_keyï¼‰å¹¶ä¸ä¼šé•¿æˆ fooã€abcã€box è¿™æ ·ï¼Œè€Œå¤§éƒ¨åˆ†ä¼šæ˜¯ &lt;code&gt;tXXXXXXXX_rXXXXXXXX&lt;/code&gt; æˆ– &lt;code&gt;tXXXXXXXX_iXXXXXXXX&lt;/code&gt; çš„æ ¼å¼ã€‚ä½† Key çš„æ ¼å¼å¹¶ä¸å½±å“ TiKV çš„é€»è¾‘å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä»…é‡‡ç”¨ç®€åŒ–çš„ Key ä½œä¸ºæ ·ä¾‹ã€‚Value åŒç†ã€‚&lt;/blockquote&gt;&lt;p&gt;æ¯ä¸ªäº‹åŠ¡ Prewrite å¹¶ Commit å®Œæ¯•åï¼Œè½åˆ° RocksDB ä¸Šçš„æ•°æ®ç±»ä¼¼äºè¿™æ ·ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;äº‹åŠ¡ #1ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-72e76792375417a1196220e4e559b8f5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1222&quot; data-rawheight=&quot;264&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1222&quot; data-original=&quot;https://pic2.zhimg.com/v2-72e76792375417a1196220e4e559b8f5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-72e76792375417a1196220e4e559b8f5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1222&quot; data-rawheight=&quot;264&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1222&quot; data-original=&quot;https://pic2.zhimg.com/v2-72e76792375417a1196220e4e559b8f5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-72e76792375417a1196220e4e559b8f5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;äº‹åŠ¡ #2ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4f029017dbec4dec7f9004440c2baea6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1210&quot; data-rawheight=&quot;258&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1210&quot; data-original=&quot;https://pic3.zhimg.com/v2-4f029017dbec4dec7f9004440c2baea6_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4f029017dbec4dec7f9004440c2baea6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1210&quot; data-rawheight=&quot;258&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1210&quot; data-original=&quot;https://pic3.zhimg.com/v2-4f029017dbec4dec7f9004440c2baea6_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-4f029017dbec4dec7f9004440c2baea6_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;äº‹åŠ¡ #3&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8dbf8dd1a3b8c86200cf1519b689a2b4_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1246&quot; data-rawheight=&quot;188&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1246&quot; data-original=&quot;https://pic1.zhimg.com/v2-8dbf8dd1a3b8c86200cf1519b689a2b4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8dbf8dd1a3b8c86200cf1519b689a2b4_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1246&quot; data-rawheight=&quot;188&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1246&quot; data-original=&quot;https://pic1.zhimg.com/v2-8dbf8dd1a3b8c86200cf1519b689a2b4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-8dbf8dd1a3b8c86200cf1519b689a2b4_b.png&quot;/&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;äº‹åŠ¡ #4ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-c29c81cd77ed7833c7723ff2fefd877f_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1236&quot; data-rawheight=&quot;178&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1236&quot; data-original=&quot;https://pic4.zhimg.com/v2-c29c81cd77ed7833c7723ff2fefd877f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-c29c81cd77ed7833c7723ff2fefd877f_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1236&quot; data-rawheight=&quot;178&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1236&quot; data-original=&quot;https://pic4.zhimg.com/v2-c29c81cd77ed7833c7723ff2fefd877f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-c29c81cd77ed7833c7723ff2fefd877f_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å®é™…åœ¨ RocksDB ä¸­å­˜å‚¨çš„æ•°æ®ä¸ä¸Šé¢è¡¨æ ¼é‡Œå†™çš„ç•¥å¾®ä¸ä¸€æ ·ï¼Œä¸»è¦åŒºåˆ«æœ‰ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;TiKV Raft å±‚ä¼šä¿®æ”¹å®é™…å†™å…¥ RocksDB çš„ Keyï¼ˆä¾‹å¦‚å¢åŠ å‰ç¼€ &lt;code&gt;z&lt;/code&gt;ï¼‰ä»¥ä¾¿è¿›è¡Œæ•°æ®åŒºåˆ†ã€‚å¯¹äº MVCC å’Œäº‹åŠ¡æ¥è¯´è¿™ä¸ªæ“ä½œæ˜¯é€æ˜çš„ï¼Œå› æ­¤æˆ‘ä»¬å…ˆå¿½ç•¥è¿™ä¸ªã€‚&lt;/li&gt;&lt;li&gt;User Key ä¼šè¢«æŒ‰ç…§ Memory Comparable Encoding æ–¹å¼è¿›è¡Œç¼–ç ï¼Œç¼–ç ç®—æ³•æ˜¯ä»¥ 8 å­—èŠ‚ä¸ºå•ä½è¿›è¡Œ Paddingã€‚è¿™ä¸ªæ“ä½œç¡®ä¿äº†æˆ‘ä»¬åœ¨ User Key åé¢è¿½åŠ  &lt;code&gt;start_ts&lt;/code&gt; æˆ– &lt;code&gt;commit_ts&lt;/code&gt; ä¹‹åå®é™…å†™å…¥çš„ Key èƒ½ä¿æŒä¸ User Key å…·æœ‰ç›¸åŒçš„é¡ºåºã€‚&lt;br/&gt;ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ä¾æ¬¡å†™å…¥ &lt;code&gt;abc&lt;/code&gt;ã€&lt;code&gt;abc\x00..\x00&lt;/code&gt; ä¸¤ä¸ª User Keyï¼Œåœ¨ä¸è¿›è¡Œ Padding çš„æƒ…å†µä¸‹ï¼š&lt;/li&gt;&lt;/ol&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3508c16ac241da50500cb049f5d51bb5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1106&quot; data-rawheight=&quot;254&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1106&quot; data-original=&quot;https://pic2.zhimg.com/v2-3508c16ac241da50500cb049f5d51bb5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3508c16ac241da50500cb049f5d51bb5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1106&quot; data-rawheight=&quot;254&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1106&quot; data-original=&quot;https://pic2.zhimg.com/v2-3508c16ac241da50500cb049f5d51bb5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3508c16ac241da50500cb049f5d51bb5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;ol&gt;&lt;li&gt;å¯è§ï¼ŒUser Key é¡ºåºæ˜¯ &lt;code&gt;abc &amp;lt; abc\x00..\x00&lt;/code&gt;ï¼Œä½†å†™å…¥çš„ Key é¡ºåºå´æ˜¯ &lt;code&gt;abc\x00\x00..\x05 &amp;gt; abc\x00\x00..\x00\x00\x00..\x10&lt;/code&gt;ã€‚æ˜¾ç„¶ï¼Œåœ¨è¿™ä¹‹åï¼Œæˆ‘ä»¬è‹¥æƒ³è¦æœ‰åºåœ°æ‰«æ•°æ®å°±ä¼šé¢ä¸´å·¨å¤§çš„æŒ‘æˆ˜ã€‚å› æ­¤éœ€è¦å¯¹ User Key è¿›è¡Œç¼–ç ï¼š&lt;br/&gt;Example 1:&lt;br/&gt;User Key:      abc Encoded:       abc\x00\x00\x00\x00\x00\xFA                ^^^                    ^^^^                Key                    Pad=5                   ^^^^^^^^^^^^^^^^^^^^                   Padding&lt;br/&gt;Example 2:&lt;br/&gt;User Key:      abc\x00\x00\x00\x00\x00\x00\x00\x00 Encoded[0..9]: abc\x00\x00\x00\x00\x00\xFF                ^^^^^^^^^^^^^^^^^^^^^^^                Key[0..8]                                       ^^^^                                       Pad=0 Encoded[9..]:  \x00\x00\x00\x00\x00\x00\x00\x00\xFA                ^^^^^^^^^^^^                    ^^^^                Key[8..11]                      Pad=5                            ^^^^^^^^^^^^^^^^^^^^                            Padding&lt;br/&gt;ç¼–ç åçš„ Key æ— è®ºåé¢å†è¿½åŠ ä»€ä¹ˆ 8 å­—èŠ‚çš„ Timestampï¼Œéƒ½èƒ½ä¿æŒåŸæ¥çš„é¡ºåºã€‚&lt;/li&gt;&lt;li&gt;TiKV åœ¨ Key ä¸­å­˜å‚¨çš„ Timestampï¼ˆæ— è®ºæ˜¯ &lt;code&gt;start_ts&lt;/code&gt; è¿˜æ˜¯ &lt;code&gt;commit_ts&lt;/code&gt;ï¼‰éƒ½æ˜¯ Timestamp å–ååçš„ç»“æœï¼Œå…¶ç›®çš„æ˜¯è®©è¾ƒæ–°çš„æ•°æ®ï¼ˆå³ Timestamp æ¯”è¾ƒå¤§çš„æ•°æ®ï¼‰æ’åˆ—åœ¨è¾ƒè€çš„æ•°æ®ï¼ˆå³ Timestamp æ¯”è¾ƒå°çš„æ•°æ®ï¼‰å‰é¢ã€‚æ‰«æ•°æ®çš„æµç¨‹åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ä¼˜åŒ–æ€§èƒ½ï¼Œç»§ç»­é˜…è¯»æœ¬æ–‡å¯ä»¥æœ‰æ‰€æ„Ÿå—ã€‚åé¢æœ¬æ–‡ä¸­å…³äºæ—¶é—´æˆ³çš„éƒ¨åˆ†å°†å†™ä½œ &lt;code&gt;{!ts}&lt;/code&gt; æ¥åæ˜ è¿™ä¸ªå–åæ“ä½œã€‚&lt;/li&gt;&lt;li&gt;TiKV å¯¹è¾ƒå°ï¼ˆ&amp;lt;= 64 å­—èŠ‚ï¼‰çš„ User Value ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œä¸å­˜å‚¨åœ¨ Default CF ä¸­ï¼Œè€Œæ˜¯ç›´æ¥å†…åµŒåœ¨ Lock Info æˆ– Write Info ä¸­ï¼Œä»è€ŒåŠ å¿«è¿™ç±» User Key çš„æ‰«çš„æ•ˆç‡åŠå†™å…¥æ•ˆç‡ã€‚æˆ‘ä»¬è¿™ä¸ªç¤ºä¾‹å…ˆæš‚ä¸”å¿½ç•¥è¿™ä¸ªä¼˜åŒ–ï¼Œå°±å½“æˆ User Value éƒ½å¾ˆé•¿æ²¡æœ‰è¿›è¡Œå†…åµŒã€‚&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;é¡ºåºæ‰«&lt;/h2&gt;&lt;p&gt;é¡ºåºæ‰«çš„ä»£ç ä½äº &lt;code&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tikv/tikv/blob/1924a32376b7823c3faa0795f53e836e65eb9ff0/src/storage/mvcc/reader/scanner/forward.rs&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;src/storage/mvcc/reader/scanner/forward.rs&lt;/a&gt;&lt;/code&gt;ã€‚é¡ºåºæ‰«çš„å®šä¹‰æ˜¯ç»™å®š &lt;code&gt;scan_ts&lt;/code&gt;ã€å¯é€‰çš„ä¸‹ç•Œ &lt;code&gt;lower_bound&lt;/code&gt; ä¸å¯é€‰çš„ä¸Šç•Œ &lt;code&gt;upper_bound&lt;/code&gt;ï¼Œéœ€è¦ä¾æ¬¡çŸ¥é“åœ¨ &lt;code&gt;[lower_bound, upper_bound)&lt;/code&gt; èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³ &lt;code&gt;scan_ts&lt;/code&gt;ï¼ˆå³æœ€æ–° &lt;code&gt;commit_ts &amp;lt;= scan_ts&lt;/code&gt;ï¼‰çš„æ•°æ®ã€‚æ‰«çš„è¿‡ç¨‹ä¸­å¯ä»¥éšæ—¶ä¸­æ­¢ï¼Œä¸éœ€è¦æ‰«å‡ºèŒƒå›´å†…æ‰€æœ‰æ•°æ®ã€‚&lt;/p&gt;&lt;p&gt;ä»¥ã€Œäº‹åŠ¡æ ·ä¾‹ã€ä¸ºä¾‹ï¼Œå‡è®¾å…¶æ‰€æœ‰äº‹åŠ¡éƒ½ Commit åï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;scan_ts = 0x00 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt; å¯ä¾æ¬¡æ‰«å‡ºï¼š(ç©º)ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x05 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt; å¯ä¾æ¬¡æ‰«å‡ºï¼š&lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ã€&lt;code&gt;foo =&amp;gt; foo_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x12 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt;ï¼Œå¯ä¾æ¬¡æ‰«å‡º &lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ã€&lt;code&gt;foo =&amp;gt; foo_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x15 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt; å¯ä¾æ¬¡æ‰«å‡ºï¼š&lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ã€&lt;code&gt;box =&amp;gt; box_value&lt;/code&gt;ã€&lt;code&gt;foo =&amp;gt; foo_value2&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x35 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt; å¯ä¾æ¬¡æ‰«å‡ºï¼š&lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ã€&lt;code&gt;foo =&amp;gt; foo_value2&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x05 é¡ºåºæ‰« &lt;code&gt;[c, +âˆ)&lt;/code&gt; å¯ä¾æ¬¡æ‰«å‡ºï¼š&lt;code&gt;foo =&amp;gt; foo_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å‡è®¾ã€Œäº‹åŠ¡æ ·ä¾‹ã€ä¸­äº‹åŠ¡ #1 å·² Commit è€Œäº‹åŠ¡ #2 å·² Prewrite æœª Commitï¼Œæ­¤æ—¶ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;scan_ts = 0x05 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt;ï¼Œå¯ä¾æ¬¡æ‰«å‡ºï¼š&lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ã€&lt;code&gt;foo =&amp;gt; foo_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;scan_ts = 0x12 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt;ï¼Œä¼šå…ˆæ‰«å‡º &lt;code&gt;bar =&amp;gt; bar_value&lt;/code&gt;ï¼Œè‹¥è¿˜è¦ç»§ç»­æ‰«åº”å½“è¿”å› &lt;code&gt;box&lt;/code&gt; çš„é”å†²çªã€‚TiDB æ‹¿åˆ°è¿™ä¸ªé”™è¯¯åä¼šç­‰é”ã€æ¸…é”å¹¶é‡è¯•ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;é¡ºåºæ‰«æµç¨‹&lt;/h2&gt;&lt;p&gt;æ ¹æ®ä¸Šé¢æ‰€è¯´çš„é¡ºåºæ‰«å®šä¹‰åŠä¾‹å­ï¼Œåœ¨ä¸è€ƒè™‘é”å†²çªçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æƒ³å‡ºä¸€ä¸ªæœ€ç®€å•çš„å®ç°æ€è·¯å°±æ˜¯ä¸æ–­å°† Write CF çš„ Cursor ä» &lt;code&gt;lower_bound&lt;/code&gt; å¾€åç§»åŠ¨ï¼Œå¯¹äºå„ä¸ª User Key è·³è¿‡å®ƒ &lt;code&gt;commit_ts &amp;gt; scan_ts&lt;/code&gt; çš„ç‰ˆæœ¬ï¼Œé‡‡çº³ç¬¬ä¸€ä¸ª &lt;code&gt;commit_ts &amp;lt;= scan_ts&lt;/code&gt; çš„ç‰ˆæœ¬ï¼Œæ ¹æ®ç‰ˆæœ¬ Write Info ä» Default CF ä¸­è·å– Valueï¼Œå³å¯ç»„æˆè¿”å›ç»™ä¸Šå±‚çš„ KV å¯¹ã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¸ªæ€è·¯å¾ˆç®€å•ï¼Œä½†æ— æ³•å¤„ç†é”å†²çªã€‚åœ¨æœ‰é”å†²çªçš„æƒ…å†µä¸‹ï¼Œé¡ºåºæ‰«åªåº”å½“å¯¹æ‰«åˆ°çš„æ•°æ®å¤„ç†é”å†²çªï¼Œæ²¡æ‰«åˆ°çš„æ•°æ®å³ä½¿æœ‰é”ï¼Œä¹Ÿä¸åº”è¯¥å½±å“æ— å†²çªæ•°æ®çš„æ­£å¸¸æ‰«ï¼ˆä¾‹å¦‚ç”¨æˆ·çš„ SQL ä¸­æœ‰ limitï¼‰ã€‚ç”±äºä¸åŒ User Keyï¼ˆåŠåŒä¸€ä¸ª User Key çš„ä¸åŒç‰ˆæœ¬ï¼‰éƒ½å¯èƒ½åŒæ—¶æ•£è½åœ¨ Write CF ä¸ Lock CF ä¸­ï¼Œå› æ­¤ &lt;b&gt;TiKV çš„æ€è·¯ç±»ä¼¼äºå½’å¹¶æ’åº&lt;/b&gt;ï¼šåŒæ—¶ç§»åŠ¨ Write CF Cursor ä¸ Lock CF Cursorï¼Œåœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­è¿™ä¸¤ä¸ª Cursor å¯èƒ½å¯¹åº”äº†ä¸åŒçš„ User Keyï¼Œè¾ƒå°çš„é‚£ä¸ªå°±æ˜¯è¦ä¼˜å…ˆå¤„ç†çš„ User Keyã€‚å¦‚æœè¿™ä¸ª User Key æ˜¯ Lock CF ä¸­çš„ï¼Œè¯´æ˜å¯èƒ½é‡åˆ°äº†é”å†²çªï¼Œéœ€è¦è¿”å›å¤±è´¥æˆ–å¿½ç•¥ã€‚å¦‚æœè¿™ä¸ª User Key æ˜¯ Write CF ä¸­çš„ï¼Œè¯´æ˜æœ‰å¤šç‰ˆæœ¬å¯ä»¥ä¾›è¯»å–ï¼Œéœ€è¦æ‰¾åˆ°æœ€è¿‘çš„ä¸€ä¸ªæ»¡è¶³ &lt;code&gt;scan_ts&lt;/code&gt; è¦æ±‚çš„ç‰ˆæœ¬ä¿¡æ¯ Write Infoï¼Œæ ¹æ®å…¶å†…éƒ¨è®°è½½çš„ &lt;code&gt;start_ts&lt;/code&gt; å†ä» Default CF ä¸­è·å– Valueï¼Œä»è€Œç»„æˆ KV å¯¹è¿”å›ç»™ä¸Šå±‚ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8b372947f4dda0ecdae470d4e51dd068_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;483&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-8b372947f4dda0ecdae470d4e51dd068_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-8b372947f4dda0ecdae470d4e51dd068_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;483&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-8b372947f4dda0ecdae470d4e51dd068_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-8b372947f4dda0ecdae470d4e51dd068_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 1 TiKV æ‰«æ•°æ®ç®—æ³•ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å•æ¬¡è¿­ä»£çš„å…·ä½“æµç¨‹ä¸ºï¼š&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 1.&lt;/h3&gt;&lt;p&gt;é¦–æ¬¡è¿­ä»£ï¼šå°† Lock åŠ Write CF Cursor Seek åˆ° &lt;code&gt;lower_bound&lt;/code&gt; å¤„ã€‚æ­¤æ—¶å®ƒä»¬å„è‡ªæŒ‡å‘äº†ç¬¬ä¸€ä¸ª &lt;code&gt;&amp;gt;= lower_bound&lt;/code&gt; çš„ Keyã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;if !self.is_started {
    if self.cfg.lower_bound.is_some() {
        self.write_cursor.seek(
            self.cfg.lower_bound.as_ref().unwrap(),
            ...,
        )?;
        self.lock_cursor.seek(
            self.cfg.lower_bound.as_ref().unwrap(),
            ...,
        )?;
    } else {
        self.write_cursor.seek_to_first(...);
        self.lock_cursor.seek_to_first(...);
    }
    self.is_started = true;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;æ­¥éª¤ 2.&lt;/h3&gt;&lt;p&gt;Lock Cursor å’Œ Write Cursor åˆ†åˆ«æŒ‡å‘çš„ Key å¯èƒ½å¯¹åº”ä¸åŒçš„ User Keyï¼ˆä¹Ÿå¯èƒ½æŒ‡å‘ç©ºï¼Œä»£è¡¨è¯¥ CF å·²æ²¡æœ‰æ›´å¤šæ•°æ®ï¼‰ã€‚æ¯”è¾ƒ Lock Cursor ä¸ Write Cursor å¯å¾—å‡ºç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Keyï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;let w_key = if self.write_cursor.valid()? {
    Some(self.write_cursor.key(...))
} else {
    None
};
let l_key = if self.lock_cursor.valid()? {
    Some(self.lock_cursor.key(...))
} else {
    None
};

match (w_key, l_key) { ... }&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;åˆ†æ”¯ 2.1.&lt;/h3&gt;&lt;p&gt;Write Cursor æŒ‡å‘ç©ºï¼ŒLock Cursor æŒ‡å‘ç©ºï¼šè¯´æ˜ä¸¤ä¸ª CF éƒ½æ‰«å®Œäº†ï¼Œè¯¥ç›´æ¥ç»“æŸäº†ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b986b7452d388672540ca834b3a7a0eb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-b986b7452d388672540ca834b3a7a0eb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b986b7452d388672540ca834b3a7a0eb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic4.zhimg.com/v2-b986b7452d388672540ca834b3a7a0eb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-b986b7452d388672540ca834b3a7a0eb_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 2 è¿›å…¥æœ¬åˆ†æ”¯çš„ä¸€ç§æƒ…å†µï¼Œè‹¥ Seek çš„æ˜¯ eï¼Œåˆ™å¤„äº Write Cursor å’Œ Lock Cursor éƒ½æŒ‡å‘ç©ºçš„çŠ¶æ€&lt;/figcaption&gt;&lt;/figure&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;(current_user_key_slice, has_write, has_lock) = match (w_key, l_key) {
    (None, None) =&amp;gt; {
        // Both cursors yield `None`: we know that there is nothing remaining.
        return Ok(None);
    }
    ...
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;åˆ†æ”¯ 2.2.&lt;/h3&gt;&lt;p&gt;Write Cursor æŒ‡å‘æŸä¸ªå€¼ &lt;code&gt;w_key&lt;/code&gt;ï¼ŒLock Cursor æŒ‡å‘ç©ºï¼šè¯´æ˜å­˜åœ¨ä¸€ä¸ª &lt;code&gt;User Key = w_key&lt;/code&gt; çš„ Write Infoï¼Œä¸”æ²¡æœ‰ä»»ä½• &lt;code&gt;&amp;gt;= Start Key&lt;/code&gt; çš„ Lock Infoã€‚&lt;code&gt;w_key&lt;/code&gt; å³ä¸ºç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Keyã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;(current_user_key_slice, has_write, has_lock) = match (w_key, l_key) {
    ...
    (Some(k), None) =&amp;gt; {
        // Write cursor yields something but lock cursor yields `None`:
        // We need to further step write cursor to our desired version
        (Key::truncate_ts_for(k)?, true, false)
    }
    ...
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;åˆ†æ”¯ 2.3.&lt;/h3&gt;&lt;p&gt;Write Cursor æŒ‡å‘ç©ºï¼ŒLock Cursor æŒ‡å‘æŸä¸ªå€¼ &lt;code&gt;l_key&lt;/code&gt;ï¼šè¯´æ˜å­˜åœ¨ä¸€ä¸ª &lt;code&gt;User Key = l_key&lt;/code&gt; çš„ Lock Infoã€‚&lt;code&gt;l_key&lt;/code&gt; å³æ˜¯ç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Keyã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;(current_user_key_slice, has_write, has_lock) = match (w_key, l_key) {
    ...
    (None, Some(k)) =&amp;gt; {
        // Write cursor yields `None` but lock cursor yields something:
        // In RC, it means we got nothing.
        // In SI, we need to check if the lock will cause conflict.
        (k, false, true)
    }
    ...
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;åˆ†æ”¯ 2.4.&lt;/h3&gt;&lt;p&gt;Write Cursor æŒ‡å‘æŸä¸ªå€¼ &lt;code&gt;w_key&lt;/code&gt;ï¼ŒLock Cursor æŒ‡å‘æŸä¸ªå€¼ &lt;code&gt;l_key&lt;/code&gt;ï¼šè¯´æ˜å­˜åœ¨ä¸€ä¸ª &lt;code&gt;User Key = l_key&lt;/code&gt; çš„ Lock Infoã€å­˜åœ¨ä¸€ä¸ª &lt;code&gt;User Key = w_key&lt;/code&gt; çš„ Write Infoã€‚&lt;code&gt;l_key&lt;/code&gt; ä¸ &lt;code&gt;w_key&lt;/code&gt; ä¸­å°çš„é‚£ä¸ªæ˜¯ç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Keyã€‚&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5a2de2c5380c8841f81334a7e2852df2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5a2de2c5380c8841f81334a7e2852df2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5a2de2c5380c8841f81334a7e2852df2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-5a2de2c5380c8841f81334a7e2852df2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5a2de2c5380c8841f81334a7e2852df2_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 3 è¿›å…¥æœ¬åˆ†æ”¯çš„ä¸€ç§æƒ…å†µï¼Œè‹¥ Seek çš„æ˜¯ aï¼Œåˆ™å¤„äº Write Cursor å’Œ Lock Cursor éƒ½æŒ‡å‘æŸä¸ªå€¼çš„çŠ¶æ€&lt;/figcaption&gt;&lt;/figure&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;(current_user_key_slice, has_write, has_lock) = match (w_key, l_key) {
    ...
    (Some(wk), Some(lk)) =&amp;gt; {
        let write_user_key = Key::truncate_ts_for(wk)?;
        match write_user_key.cmp(lk) {
            Ordering::Less =&amp;gt; {
                // Write cursor user key &amp;lt; lock cursor, it means the lock of the
                // current key that write cursor is pointing to does not exist.
                (write_user_key, true, false)
            }
            Ordering::Greater =&amp;gt; {
                // Write cursor user key &amp;gt; lock cursor, it means we got a lock of a
                // key that does not have a write. In SI, we need to check if the
                // lock will cause conflict.
                (lk, false, true)
            }
            Ordering::Equal =&amp;gt; {
                // Write cursor user key == lock cursor, it means the lock of the
                // current key that write cursor is pointing to *exists*.
                (lk, true, true)
            }
        }
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;æ­¥éª¤ 3.&lt;/h3&gt;&lt;p&gt;å¦‚æœåœ¨æ­¥éª¤ 2 ä¸­ï¼Œç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Key æ¥è‡ªäº Lockï¼Œåˆ™ï¼š&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 3.1.&lt;/h3&gt;&lt;p&gt;æ£€æŸ¥ Lock Info æ˜¯å¦æœ‰æ•ˆï¼Œä¾‹å¦‚éœ€è¦å¿½ç•¥ &lt;code&gt;start_ts &amp;gt; scan_ts&lt;/code&gt; çš„ lockã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;let lock = {
    let lock_value = self.lock_cursor.value(...);
    Lock::parse(lock_value)?
};
match super::util::check_lock(&amp;amp;current_user_key, self.cfg.ts, &amp;amp;lock)? {
    CheckLockResult::NotLocked =&amp;gt; {}
    CheckLockResult::Locked(e) =&amp;gt; result = Err(e),
    CheckLockResult::Ignored(ts) =&amp;gt; get_ts = ts,
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;æˆ‘ä»¬ä¸€èˆ¬ä»¥å½“å‰çš„æ—¶é—´æ„é€  scan_tsï¼Œä¸ºä»€ä¹ˆå®é™…çœ‹åˆ°çš„ä¼¼ä¹æ˜¯â€œæœªæ¥â€çš„ lockï¼ŸåŸå› æ˜¯è¿™ä¸ªè¯»è¯·æ±‚å¯èƒ½æ¥è‡ªäºä¸€ä¸ªæ—©æœŸå¼€å§‹çš„äº‹åŠ¡ï¼Œæˆ–è¿™ä¸ªè¯·æ±‚è¢«ç½‘ç»œé˜»å¡äº†ä¸€ä¼šå„¿ï¼Œæˆ–è€…æˆ‘ä»¬æ­£åœ¨&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/docs-cn/v3.0/how-to/get-started/read-historical-data/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;è¯»å–å†å²æ•°æ®&lt;/a&gt;ã€‚&lt;/blockquote&gt;&lt;h3&gt;æ­¥éª¤ 3.2.&lt;/h3&gt;&lt;p&gt;å°† Lock Cursor å¾€åç§»åŠ¨ä¸€ä¸ª Keyï¼Œä»¥ä¾¿ä¸‹æ¬¡è¿­ä»£å¯ä»¥ç›´æ¥ä»æ–°çš„ Lock ç»§ç»­ã€‚æ­¤æ—¶ Lock Cursor æŒ‡å‘ä¸‹ä¸€ä¸ª Lockï¼ˆä¹Ÿå¯èƒ½æŒ‡å‘ç©ºï¼‰ã€‚&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 3.3.&lt;/h3&gt;&lt;p&gt;åœ¨ 3.1 æ­¥éª¤ä¸­æ£€æŸ¥ä¸‹æ¥æœ‰æ•ˆçš„è¯æŠ¥é”™è¿”å›è¿™ä¸ª Lockï¼ŒTiDB åç»­éœ€è¦è¿›è¡Œæ¸…é”æ“ä½œã€‚&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 4.&lt;/h3&gt;&lt;p&gt;å¦‚æœåœ¨æ­¥éª¤ 2 ä¸­ï¼Œç¬¬ä¸€ä¸ªé‡åˆ°çš„ User Key æ¥è‡ªäº Writeï¼š&lt;/p&gt;&lt;blockquote&gt;æ³¨ï¼šLock Cursor ä¸ Write Cursor å¯èƒ½ä¸€èµ·æŒ‡å‘äº†åŒä¸€ä¸ª User Key çš„ä¸åŒç‰ˆæœ¬ã€‚ç”±äºæˆ‘ä»¬åªæƒ³å¿½ç•¥é”å¯¹åº”çš„ç‰ˆæœ¬è€Œä¸æ˜¯æƒ³å¿½ç•¥è¿™æ•´ä¸ª User Keyï¼Œå› æ­¤æ­¤æ—¶æ­¥éª¤ 3 å’Œæ­¥éª¤ 4 éƒ½ä¼šè¢«æ‰§è¡Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;br/&gt;&lt;/blockquote&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-002f317c5d057af90587d5a122350f8c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-002f317c5d057af90587d5a122350f8c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-002f317c5d057af90587d5a122350f8c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-002f317c5d057af90587d5a122350f8c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-002f317c5d057af90587d5a122350f8c_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 4 ä¸€ç§ User Cursor å’Œ Lock Cursor å…·æœ‰ç›¸åŒ User Key çš„æƒ…å†µï¼ŒSeek çš„æ˜¯ c&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;èµ°åˆ°äº†ç›®å‰è¿™ä¸€æ­¥ï¼Œè¯´æ˜æˆ‘ä»¬éœ€è¦ä» Write Info ä¸­è¯»å– User Key æ»¡è¶³ &lt;code&gt;scan_ts&lt;/code&gt; çš„è®°å½•ã€‚éœ€è¦æ³¨æ„ï¼Œæ­¤æ—¶ User Key å¯èƒ½æ˜¯å­˜åœ¨ Lock çš„ï¼Œä½†å·²è¢«åˆ¤å®šä¸ºåº”å½“å¿½ç•¥ã€‚&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 4.1.&lt;/h3&gt;&lt;p&gt;å°† Write Cursor Seek åˆ° &lt;code&gt;{w_key}{!scan_ts}&lt;/code&gt; å¤„ï¼ˆæ³¨ï¼šå‚è§ã€Œäº‹åŠ¡æ ·ä¾‹ã€ä¸­åŒºåˆ« 3ï¼Œæ—¶é—´æˆ³å­˜å‚¨æ—¶å–äº†åï¼Œå› æ­¤è¿™é‡ŒåŠæœ¬æ–‡å…¶ä½™éƒ¨åˆ†éƒ½ä»¥ &lt;code&gt;!&lt;/code&gt; æ ‡è®°å–åæ“ä½œï¼‰ã€‚å¦‚æœç‰ˆæœ¬æ•°å¾ˆå°‘ï¼ˆåŒæ—¶è¿™ä¹Ÿç¬¦åˆç»å¤§å¤šæ•°åœºæ™¯ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªè¦ Seek çš„ Key å¾ˆå¯èƒ½éå¸¸é è¿‘å½“å‰ä½ç½®ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ä¸ºäº†é¿å…è¾ƒå¤§çš„ Seek å¼€é”€ï¼ŒTiKV é‡‡å–å…ˆ &lt;code&gt;next&lt;/code&gt; è‹¥å¹²æ¬¡å† &lt;code&gt;seek&lt;/code&gt; çš„ç­–ç•¥ï¼š&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// Try to iterate to `${user_key}_${ts}`. We first `next()` for a few times,
// and if we have not reached where we want, we use `seek()`.

// Whether we have *not* reached where we want by `next()`.
let mut needs_seek = true;

for i in 0..SEEK_BOUND {
    if i &amp;gt; 0 {
        self.write_cursor.next(...);
        if !self.write_cursor.valid()? {
            // Key space ended.
            return Ok(None);
        }
    }
    {
        let current_key = self.write_cursor.key(...);
        if !Key::is_user_key_eq(current_key, user_key.as_encoded().as_slice()) {
            // Meet another key.
            *met_next_user_key = true;
            return Ok(None);
        }
        if Key::decode_ts_from(current_key)? &amp;lt;= ts {
            // Founded, don&amp;#39;t need to seek again.
            needs_seek = false;
            break;
        }
    }
}
// If we have not found `${user_key}_${ts}` in a few `next()`, directly `seek()`.
if needs_seek {
    // `user_key` must have reserved space here, so its clone has reserved space too. So no
    // reallocation happens in `append_ts`.
    self.write_cursor
        .seek(&amp;amp;user_key.clone().append_ts(ts), ...)?;
    if !self.write_cursor.valid()? {
        // Key space ended.
        return Ok(None);
    }
    let current_key = self.write_cursor.key(...);
    if !Key::is_user_key_eq(current_key, user_key.as_encoded().as_slice()) {
        // Meet another key.
        *met_next_user_key = true;
        return Ok(None);
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;æ­¥éª¤ 4.2.&lt;/h3&gt;&lt;p&gt;&lt;code&gt;w_key&lt;/code&gt; å¯èƒ½æ²¡æœ‰ä»»ä½• &lt;code&gt;commit_ts &amp;lt;= scan_ts&lt;/code&gt; çš„è®°å½•ï¼Œå› æ­¤ Seek &lt;code&gt;{w_key}{!scan_ts}&lt;/code&gt; æ—¶å¯èƒ½ç›´æ¥è¶Šè¿‡äº†å½“å‰ User Key è¿›å…¥ä¸‹ä¸€ä¸ª &lt;code&gt;w_key&lt;/code&gt;ï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­ä¸€ä¸‹ç°åœ¨ Write Cursor å¯¹åº”çš„ User Key æ˜¯å¦ä»ç„¶æ˜¯ &lt;code&gt;w_key&lt;/code&gt;ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œè¯´æ˜è¿™æ˜¯æˆ‘ä»¬æ‰¾åˆ°çš„æœ€å¤§ç¬¦åˆ &lt;code&gt;scan_ts&lt;/code&gt; çš„ç‰ˆæœ¬ï¼ˆWrite Infoï¼‰äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¾æ®è¯¥ç‰ˆæœ¬ç›´æ¥ç¡®å®šæ•°æ®å†…å®¹ã€‚è‹¥ç‰ˆæœ¬ä¸­åŒ…å«çš„ç±»å‹æ˜¯ &lt;code&gt;DELETE&lt;/code&gt;ï¼Œè¯´æ˜åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸‹ &lt;code&gt;w_key&lt;/code&gt; æˆ–è€…è¯´ User Key å·²è¢«åˆ é™¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å½“åšå®ƒä¸å­˜åœ¨ï¼›å¦åˆ™å¦‚æœç±»å‹æ˜¯ &lt;code&gt;PUT&lt;/code&gt;ï¼Œå°±å¯ä»¥æŒ‰ç…§ç‰ˆæœ¬ä¸­å­˜å‚¨çš„ &lt;code&gt;start_ts&lt;/code&gt; åœ¨ Default CF ä¸­ç›´æ¥å–å¾— User Valueï¼šGet &lt;code&gt;{w_key}{!start_ts}&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œå¦‚æœè¿™ä¸€æ­¥ Seek åˆ°äº†ä¸‹ä¸€ä¸ª &lt;code&gt;w_key&lt;/code&gt;ï¼Œæˆ‘ä»¬å°±ä¸èƒ½é‡‡ä¿¡è¿™ä¸ªæ–°çš„ &lt;code&gt;w_key&lt;/code&gt;ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œå›åˆ°æ­¥éª¤ 2ï¼Œå› ä¸ºè¿™ä¸ªæ–°çš„ &lt;code&gt;w_key&lt;/code&gt; å¯èƒ½æ¯” &lt;code&gt;l_key&lt;/code&gt; å¤§äº†ï¼Œéœ€è¦å…ˆé‡æ–°çœ‹ä¸€ä¸‹ &lt;code&gt;l_key&lt;/code&gt; çš„æƒ…å†µã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;// Now we must have reached the first key &amp;gt;= `${user_key}_${ts}`. However, we may
// meet `Lock` or `Rollback`. In this case, more versions needs to be looked up.
loop {
    let write = Write::parse(self.write_cursor.value(...))?;
    self.statistics.write.processed += 1;

    match write.write_type {
        WriteType::Put =&amp;gt; return Ok(Some(self.load_data_by_write(write, user_key)?)),
        WriteType::Delete =&amp;gt; return Ok(None),
        WriteType::Lock | WriteType::Rollback =&amp;gt; {
            // Continue iterate next `write`.
        }
    }

    ...
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;æ­¥éª¤ 4.3.&lt;/h3&gt;&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬å·²ç»çŸ¥é“äº† &lt;code&gt;w_key&lt;/code&gt;ï¼ˆå³ User Keyï¼‰ç¬¦åˆ &lt;code&gt;scan_ts&lt;/code&gt; ç‰ˆæœ¬è¦æ±‚çš„ Valueã€‚ä¸ºäº†èƒ½å…è®¸åç»­è¿›ä¸€æ­¥è¿­ä»£åˆ°ä¸‹ä¸€ä¸ª &lt;code&gt;w_key&lt;/code&gt;ï¼Œæˆ‘ä»¬éœ€è¦ç§»åŠ¨ Write Cursor è·³è¿‡å½“å‰ &lt;code&gt;w_key&lt;/code&gt; å‰©ä½™æ‰€æœ‰ç‰ˆæœ¬ã€‚è·³è¿‡çš„æ–¹æ³•æ˜¯ Seek &lt;code&gt;{w_key}{\xFF..\xFF}&lt;/code&gt;ï¼Œæ­¤æ—¶ Write Cursor æŒ‡å‘ç¬¬ä¸€ä¸ª &lt;code&gt;&amp;gt;= {w_key}{\xFF..\xFF}&lt;/code&gt; çš„ Keyï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ª &lt;code&gt;w_key&lt;/code&gt;ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;fn move_write_cursor_to_next_user_key(&amp;amp;mut self, current_user_key: &amp;amp;Key) -&amp;gt; Result&amp;lt;()&amp;gt; {
    for i in 0..SEEK_BOUND {
        if i &amp;gt; 0 {
            self.write_cursor.next(...);
        }
        if !self.write_cursor.valid()? {
            // Key space ended. We are done here.
            return Ok(());
        }
        {
            let current_key = self.write_cursor.key(...);
            if !Key::is_user_key_eq(current_key, current_user_key.as_encoded().as_slice()) {
                // Found another user key. We are done here.
                return Ok(());
            }
        }
    }
    // We have not found another user key for now, so we directly `seek()`.
    // After that, we must pointing to another key, or out of bound.
    // `current_user_key` must have reserved space here, so its clone has reserved space too.
    // So no reallocation happens in `append_ts`.
    self.write_cursor.internal_seek(
        &amp;amp;current_user_key.clone().append_ts(0),
        ...,
    )?;
    Ok(())
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;æ­¥éª¤ 4.4.&lt;/h3&gt;&lt;p&gt;ä¾æ®ä¹‹å‰å–å¾—çš„ User Value è¿”å› (User Key, User Value)ã€‚&lt;/p&gt;&lt;h3&gt;æ­¥éª¤ 5.&lt;/h3&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰æ‰«åˆ°å€¼ï¼Œå›åˆ° 2ã€‚&lt;/p&gt;&lt;h2&gt;æ ·ä¾‹è§£é‡Š&lt;/h2&gt;&lt;p&gt;ä¸Šé¢çš„æ­¥éª¤å¯èƒ½è¿‡äºæ¯ç‡¥ï¼Œæ¥ä¸‹æ¥ç»“åˆã€Œäº‹åŠ¡æ ·ä¾‹ã€çœ‹ä¸€ä¸‹æµç¨‹ã€‚å‡è®¾ç°åœ¨æ ·ä¾‹ä¸­çš„äº‹åŠ¡ #1 å·²é€’äº¤è€Œäº‹åŠ¡ #2 prewrite å®Œæ¯•ä½†è¿˜æ²¡ commitï¼Œåˆ™è¿™å‡ ä¸ªæ ·ä¾‹äº‹åŠ¡åœ¨ RocksDB å­˜å‚¨çš„æ•°æ®ç±»ä¼¼äºå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-e16a5456727e6c6164aca87a73cebcea_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;224&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-e16a5456727e6c6164aca87a73cebcea_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-e16a5456727e6c6164aca87a73cebcea_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;224&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-e16a5456727e6c6164aca87a73cebcea_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-e16a5456727e6c6164aca87a73cebcea_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 5 æ ·ä¾‹äº‹åŠ¡åœ¨ RocksDB çš„å­˜å‚¨æ•°æ®&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ç°åœ¨å°è¯•ä»¥ scan_ts = 0x05 é¡ºåºæ‰« &lt;code&gt;[-âˆ, +âˆ)&lt;/code&gt;ã€‚&lt;/p&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 1ï¼šé¦–æ¬¡è¿­ä»£ï¼šå°† Lock åŠ Write CF Cursor Seek åˆ° &lt;code&gt;lower_bound&lt;/code&gt; å¤„ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 6 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 2ï¼šå¯¹æ¯” Lock Cursor ä¸ Write Cursorï¼Œè¿›å…¥åˆ†æ”¯ 2.4ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œåˆ†æ”¯ 2.4ï¼šWrite Cursor æŒ‡å‘ &lt;code&gt;bar&lt;/code&gt;ï¼ŒLock Cursor æŒ‡å‘ &lt;code&gt;box&lt;/code&gt;ï¼ŒUser Key ä¸º &lt;code&gt;bar&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 3ï¼šUser Key = bar ä¸æ¥è‡ªäº Lockï¼Œè·³è¿‡ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4ï¼šUser Key = bar æ¥è‡ªäº Writeï¼Œç»§ç»­ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.1ï¼šSeek &lt;code&gt;{w_key}{!scan_ts}&lt;/code&gt;ï¼Œå³ Seek &lt;code&gt;bar......\xFF\xFF..\xFA&lt;/code&gt;ã€‚Write Cursor ä»ç„¶æ˜¯å½“å‰ä½ç½®ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-ba546e4ff3e8b1ce72cf1769c4bababd_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 7 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.2ï¼šæ­¤æ—¶ Write Key æŒ‡å‘ bar ä¸ User Key ç›¸åŒï¼Œå› æ­¤ä¾æ® &lt;code&gt;PUT (start_ts=1)&lt;/code&gt; ä» Default CF ä¸­è·å–åˆ° &lt;code&gt;value = bar_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.3ï¼šç§»åŠ¨ Write Cursor è·³è¿‡å½“å‰ &lt;code&gt;bar&lt;/code&gt; å‰©ä½™æ‰€æœ‰ç‰ˆæœ¬ï¼Œå³ Seek &lt;code&gt;bar......\xFF\xFF..\xFF&lt;/code&gt;ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 8 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.4ï¼šå¯¹å¤–è¿”å› Key Value å¯¹ &lt;code&gt;(bar, bar_value)&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;è‹¥å¤–éƒ¨åªéœ€è¦ 1 ä¸ª KV å¯¹ï¼ˆä¾‹å¦‚ limit = 1ï¼‰ï¼Œæ­¤æ—¶å°±å¯ä»¥åœæ­¢äº†ï¼Œè‹¥å¤–éƒ¨è¿˜è¦ç»§ç»­è·å–æ›´å¤š KV å¯¹ï¼Œåˆ™é‡æ–°å¼€å§‹æ‰§è¡Œæ­¥éª¤ 1ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 1ï¼šä¸æ˜¯é¦–æ¬¡è¿­ä»£ï¼Œè·³è¿‡ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 2ï¼šå¯¹æ¯” Lock Cursor ä¸ Write Cursorï¼Œè¿›å…¥åˆ†æ”¯ 2.4ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œåˆ†æ”¯ 2.4ï¼šWrite Cursor æŒ‡å‘ &lt;code&gt;foo&lt;/code&gt;ï¼ŒLock Cursor æŒ‡å‘ &lt;code&gt;box&lt;/code&gt;ï¼ŒUser Key ä¸º &lt;code&gt;box&lt;/code&gt;ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-f775386aa759a47092d1e4bb5e7ea358_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 9 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 3ï¼šUser Key = box æ¥è‡ªäº Lockï¼Œç»§ç»­ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 3.1ï¼šæ£€æŸ¥ Lock Infoã€‚Lock çš„ ts ä¸º 0x11ï¼Œ&lt;code&gt;scan_ts&lt;/code&gt; ä¸º 0x05ï¼Œå¿½ç•¥è¿™ä¸ª Lock ä¸è¿”å›é”å†²çªé”™è¯¯ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 3.2ï¼šå°† Lock Cursor å¾€åç§»åŠ¨ä¸€ä¸ª Keyã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 10 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4ï¼šUser Key = box ä¸æ¥è‡ªäº Writeï¼Œè·³è¿‡ï¼Œå›åˆ°æ­¥éª¤ 2ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 2ï¼šå¯¹æ¯” Lock Cursor ä¸ Write Cursorï¼Œè¿›å…¥åˆ†æ”¯ 2.4ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œåˆ†æ”¯ 2.4ï¼šWrite Cursor æŒ‡å‘ &lt;code&gt;foo&lt;/code&gt;ï¼ŒLock Cursor æŒ‡å‘ &lt;code&gt;foo&lt;/code&gt;ï¼ŒUser Key ä¸º &lt;code&gt;foo&lt;/code&gt;ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-6adc28ac1e095e0eb0e4e9855b6955f8_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 11 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 3ï¼šUser Key = foo æ¥è‡ªäº Lockï¼Œç»§ç»­ã€‚ä¸ä¹‹å‰ç±»ä¼¼ï¼Œé”è¢«å¿½ç•¥ï¼Œä¸” Lock Cursor å¾€åç§»åŠ¨ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-556e3a8901aa429b3de5813ffa188ff2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-556e3a8901aa429b3de5813ffa188ff2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-556e3a8901aa429b3de5813ffa188ff2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;187&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic3.zhimg.com/v2-556e3a8901aa429b3de5813ffa188ff2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-556e3a8901aa429b3de5813ffa188ff2_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 12 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4ï¼šUser Key = foo åŒæ ·æ¥è‡ªäº Writeï¼Œç»§ç»­ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.1ï¼šSeek &lt;code&gt;{w_key}{!scan_ts}&lt;/code&gt;ï¼Œå³ Seek &lt;code&gt;foo......\xFF\xFF..\xFA&lt;/code&gt;ã€‚Write Cursor ä»ç„¶æ˜¯å½“å‰ä½ç½®ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.2ï¼šæ­¤æ—¶ Write Key æŒ‡å‘ foo ä¸ User Key ç›¸åŒï¼Œå› æ­¤ä¾æ® &lt;code&gt;PUT (start_ts=1)&lt;/code&gt; ä» Default CF ä¸­è·å–åˆ° &lt;code&gt;value = foo_value&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.3ï¼šç§»åŠ¨ Write Cursor è·³è¿‡å½“å‰ &lt;code&gt;foo&lt;/code&gt; å‰©ä½™æ‰€æœ‰ç‰ˆæœ¬ï¼Œå³ Seek &lt;code&gt;foo......\xFF\xFF..\xFF&lt;/code&gt;ï¼š&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;214&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;214&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 13 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 4.4ï¼šå¯¹å¤–è¿”å› Key Value å¯¹ &lt;code&gt;(foo, foo_value)&lt;/code&gt;ã€‚&lt;/li&gt;&lt;li&gt;è‹¥å¤–éƒ¨é€‰æ‹©ç»§ç»­æ‰«ï¼Œåˆ™ç»§ç»­å›åˆ°æ­¥éª¤ 1ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 1ï¼šä¸æ˜¯é¦–æ¬¡è¿­ä»£ï¼Œè·³è¿‡ã€‚&lt;/li&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 2ï¼šå¯¹æ¯” Lock Cursor ä¸ Write Cursorï¼Œè¿›å…¥åˆ†æ”¯ 2.1ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;214&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;214&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-27a2386e7e6ee8c6b5ed410ca90d0735_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 14 æ‰§è¡Œå®Œæ¯•åå„ä¸ª Cursor ä½ç½®ç¤ºæ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul&gt;&lt;li&gt;æ‰§è¡Œæ­¥éª¤ 2.1ï¼šWrite Cursor å’Œ Lock Cursor éƒ½æŒ‡å‘ç©ºï¼Œæ²¡æœ‰æ›´å¤šæ•°æ®äº†ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ MVCC é¡ºåºæ‰«æ•°æ®ä»£ç çš„è§£æï¼Œç‚¹æŸ¥å’Œé€†åºæ‰«æµç¨‹ä¸å…¶ç±»ä¼¼ï¼Œå¹¶ä¸”ä»£ç æ³¨é‡Šå¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯ä»¥è‡ªä¸»é˜…è¯»ç†è§£ã€‚ä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»æ‚²è§‚äº‹åŠ¡çš„ä»£ç å®ç°ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;åŸæ–‡é˜…è¯»ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/tikv-source-code-reading-13/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiKV æºç è§£æç³»åˆ—æ–‡ç« ï¼ˆåä¸‰ï¼‰MVCC æ•°æ®è¯»å– | PingCAP&lt;/a&gt;&lt;p&gt;&lt;b&gt;æ›´å¤š TiKV æºç é˜…è¯»ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pingcap.com/blog-cn/%23TiKV-%25E6%25BA%2590%25E7%25A0%2581%25E8%25A7%25A3%25E6%259E%2590&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-60ab5bd867c2434d70c957a02a2169e1_ipico.jpg&quot; data-image-width=&quot;1200&quot; data-image-height=&quot;1200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Blog-cns | PingCAP&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-03-81003380</guid>
<pubDate>Tue, 03 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>TiDB çš„ Golang å®è·µ</title>
<link>https://henix.github.io/feeds/zhuanlan.newsql/2019-09-03-80916775.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80916775&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ad8fc1b0163796825168ca8e307f9ebe_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;ä½œè€…ï¼šå§šç»´&lt;/p&gt;&lt;p&gt;&lt;i&gt;æœ¬æ–‡è½¬è½½è‡ªå…¬ä¼—å·  Goä¸­å›½ã€‚&lt;/i&gt;&lt;/p&gt;&lt;p&gt;ä»Šå¤©è®²ä¸€ä¸‹ Go åœ¨æˆ‘ä»¬ TiDB çš„åº”ç”¨ã€‚æˆ‘å…ˆè‡ªæˆ‘ä»‹ç»ä¸€ä¸‹ï¼Œæˆ‘ 2012 å¹´è‡ªå·±åˆ›ä¸šåšåŸºç¡€æ¶æ„æ–¹å‘çš„åˆ›ä¸šï¼Œä½†æ˜¯æ²¡æœ‰åšèµ·æ¥ï¼Œç„¶åå»äº† 360 åŸºç¡€æ¶æ„ç»„æ MySQL çš„å¼€æºä¸­é—´ä»¶ã€‚åæ¥è§‰å¾—ä¸­é—´ä»¶è¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸€ä¸ªä¼šå—åˆ°é™åˆ¶çš„æ–¹æ¡ˆï¼Œäºæ˜¯æˆ‘ä»¬å°±å¼€å§‹æ¢ç´¢å¯èƒ½éœ€è¦åƒ NewSQL çš„ä¸œè¥¿ã€‚å†åæ¥å‘ç° TiDB ä¹Ÿåœ¨åšåŒæ ·çš„äº‹æƒ…ï¼Œæ‰€ä»¥å°±åŠ å…¥äº† TiDBã€‚æˆ‘ä»Šå¤©ä¸»è¦è®² TiDB ä»æµ‹è¯•åˆ°ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6c4b7f05dab14597c0ee088b35b25a46_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-6c4b7f05dab14597c0ee088b35b25a46_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6c4b7f05dab14597c0ee088b35b25a46_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-6c4b7f05dab14597c0ee088b35b25a46_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-6c4b7f05dab14597c0ee088b35b25a46_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 1&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¤§å®¶çŸ¥é“åšæ•°æ®åº“éå¸¸éš¾ï¼Œåšå•æœºæ•°æ®åº“å°±å·²ç»å¾ˆè‰°éš¾äº†å¦‚æœåšä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œè€Œä¸”æ˜¯å¸¦ SQLã€å¸¦äº‹åŠ¡çš„æ•°æ®åº“ï¼Œæ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚å¯¹äºæˆ‘æ¥è¯´åœ¨åš TiDB çš„è¿‡ç¨‹ä¸­è§‰å¾—æœ€éš¾çš„ä¸€ç‚¹ï¼Œå°±æ˜¯æ€ä¹ˆç¡®ä¿æˆ‘ä»¬å†™çš„ä»£ç æ˜¯å¯¹çš„ã€‚æˆ‘ä»¬åœ¨å†…éƒ¨å°†æµ‹è¯•åˆ†å¾ˆå¤šå—ï¼Œä¸€ä¸ªæ˜¯æœ€ç®€å•çš„å•å…ƒæµ‹è¯•ï¼Œè¿˜æœ‰é›†æˆæµ‹è¯•ï¼Œéƒ½æ˜¯æŒç»­åœ¨è·‘ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬åœ¨ Github æäº¤ä¸€ä¸ªä»£ç å°±ä¼šè·‘æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œæ¯å¤©å’Œæ¯ä¸ªæ˜ŸæœŸè·‘çš„æµ‹è¯•é‡ä¸ä¸€æ ·ï¼Œé™¤äº†è¿™äº›æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå«è–›å®šè°”çš„æµ‹è¯•å¹³å°å¾…ä¼šæˆ‘ä¼šç»™å¤§å®¶ä»‹ç»ä¸€ä¸ª Failpoint çš„æµ‹è¯•æ¡†æ¶ï¼Œæœ€åä¼šè®²è®²æˆ‘ä»¬æ€ä¹ˆåš TiDB å†…å­˜ä¸Šçš„ä¼˜åŒ–ï¼Œæ¼”è®²çš„è¿‡ç¨‹å°±åƒåšè½¯ä»¶çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å…ˆæŠŠäº‹æƒ…åšæ­£ç¡®ï¼Œå†æŠŠäº‹æƒ…åšå¿«ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æ˜¯ä¸€ä¸ª toB çš„å…¬å¸ã€‚toB å…¬å¸è·Ÿäº’è”ç½‘å…¬å¸ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬çš„è¯•é”™æˆæœ¬å¾ˆé«˜ï¼Œæˆ‘ä»¬ä¸èƒ½åƒé‚£äº›äº’è”ç½‘å…¬å¸ä¸€æ ·ä¸Šçº¿ä¹‹åï¼Œè®©å®¢æˆ·ç»™æµ‹æˆ–è€…æœ‰ç°åº¦ç­–ç•¥ã€‚æˆ‘ä»¬ä¸èƒ½åšè¿™äº›äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬å†…éƒ¨åšäº†å¾ˆå¤šæµ‹è¯•ç›¸å…³çš„äº‹æƒ…ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d3d8c4f604fd87630f3cb94cc68c32d4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-d3d8c4f604fd87630f3cb94cc68c32d4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d3d8c4f604fd87630f3cb94cc68c32d4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-d3d8c4f604fd87630f3cb94cc68c32d4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d3d8c4f604fd87630f3cb94cc68c32d4_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 2&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿™ä¸ªæ˜¯æˆ‘ä»¬ä¸»è¦çš„äº§å“æ¦‚è§ˆã€‚TiDB å¯ä»¥è®¤ä¸ºæ˜¯ SQL çš„å¼•æ“ï¼Œå¯ä»¥å‘ç»™å­˜å‚¨ï¼Œå­˜å‚¨åˆ†ä¸¤å—ï¼Œä¸€ä¸ªæ˜¯ TiFlashï¼Œä¸€ä¸ªæ˜¯ TiKVï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„è¡Œå­˜å’Œåˆ—å­˜ã€‚PD æ˜¯åšæ•°æ®è°ƒåº¦çš„éƒ¨åˆ†ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼ŒGo ç”¨åœ¨é™¤äº†å­˜å‚¨å¤–çš„æ‰€æœ‰ç»„ä»¶ï¼ŒåŒ…æ‹¬ PDã€TiDB ã€Binlogã€è¿˜æœ‰å‘¨è¾¹çš„ k8sã€è–›å®šè°”ç­‰ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-324df32a157fef298c908a1d7c7ddb34_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-324df32a157fef298c908a1d7c7ddb34_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-324df32a157fef298c908a1d7c7ddb34_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-324df32a157fef298c908a1d7c7ddb34_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-324df32a157fef298c908a1d7c7ddb34_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 3&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ç»™å¤§å®¶è®²ä¸€ä¸‹ TiDB çš„ SQL Layer æ¶æ„ã€‚é¦–å…ˆä»å·¦è¾¹çœ‹è¿‡æ¥æ˜¯ä¸€ä¸ª SQLï¼Œå®ƒå…ˆè§£æåè®®ï¼Œæ‹¿å‡ºæ¥ SQL ä»¥åè¿›è¡Œ Parseï¼Œè§£ææˆä¸€ä¸ªä¸€ä¸ªçš„ AST æ ‘ï¼Œç„¶åè¿›è¡Œæ”¹å†™ï¼Œæ”¹å†™å˜æˆæˆ‘ä»¬å†…éƒ¨è¡¨ç¤ºçš„ä¸€ä¸ª Logical Plan çš„æ ‘å½¢ç»“æ„ã€‚ç„¶åæˆ‘ä»¬ä¼šåšä¸¤ä¸ªäº‹æƒ…ï¼Œå…ˆå¯¹è¿™ä¸ªæ ‘åšä¸€ä¸ªé€»è¾‘çš„ä¼˜åŒ–ï¼Œé€»è¾‘ä¼˜åŒ–å°±æ˜¯å¯¹å®ƒåšå…³ç³»ä»£æ•°ä¸Šçš„ç­‰ä»·è½¬åŒ–ï¼Œè¿™é‡Œè¿˜ä¸æ¶‰åŠèµ°å“ªä¸ªæ‰§è¡Œè·¯å¾„ã€‚ä¹‹ååˆ°äº†ç‰©ç†ä¼˜åŒ–ï¼Œç‰©ç†ä¼˜åŒ–å°±ä¼šæ‰¾å‡ºæ¯”è¾ƒä¼˜çš„è·¯å¾„ï¼Œæ¯”å¦‚æ˜¯å¦èµ°ç´¢å¼•ï¼Œæ˜¯å¦ç›´æ¥æ‰«è¡¨ç­‰ç­‰ï¼Œè¿™é‡Œä¼šé€šè¿‡ç»Ÿè®¡ä¿¡æ¯é‡Œé¢çš„æ¦‚è¦ä¿¡æ¯æ¥è®¡ç®—å‡ºä¸€ä¸ªä»£ä»·ï¼Œæ¥é€‰æ‹©è·¯å¾„ï¼Œä¹‹åä¸‹é¢å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ‰§è¡Œå™¨ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›åˆ«çš„æ¨¡å—ã€‚è¿™ä¸ª SQL Layer æ˜¯éå¸¸å¤æ‚çš„ä¸œè¥¿ï¼Œè¦å®ç°æ•´ä¸ª SQL çš„é€»è¾‘æœ‰å¾ˆå¤šç»„åˆã€‚é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæµ‹è¯•è¿™ä¸ªå¤æ‚çš„ä¸œè¥¿å‘¢ï¼Ÿ&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-99150b5c8770fb3aba4bd45b060cde71_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-99150b5c8770fb3aba4bd45b060cde71_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-99150b5c8770fb3aba4bd45b060cde71_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-99150b5c8770fb3aba4bd45b060cde71_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-99150b5c8770fb3aba4bd45b060cde71_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 4&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œé¢é‡åˆ°çš„ä¸€äº›æµ‹è¯•é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½å‡ºç°åœ¨æ‰€æœ‰çš„æ¨¡å—ï¼Œä¸æ­¢æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„æ¨¡å—ï¼Œå®ƒæœ‰å¯èƒ½é‡åˆ°ç£ç›˜åäº†ã€å†…æ ¸çš„ Bugã€ç½‘ç»œæ–­äº†ã€CPU æœ‰é—®é¢˜ã€åŒ…æ‹¬æ—¶é’Ÿæœ‰é—®é¢˜ç­‰æˆ‘ä»¬éƒ½é‡åˆ°è¿‡ï¼›è½¯ä»¶å±‚é¢çš„é—®é¢˜å°±æ›´å¤šäº†ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±å†™ä»£ç çš„ Bugã€åè®®æ ˆå‡ºç°  Bug ç­‰ã€‚æˆ‘ä»¬æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7c89abc50f1086408038c296e2597bd1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-7c89abc50f1086408038c296e2597bd1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7c89abc50f1086408038c296e2597bd1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-7c89abc50f1086408038c296e2597bd1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-7c89abc50f1086408038c296e2597bd1_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 5&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬ä¼šå¼•å…¥ä¸€ä¸ªéšæœºçš„é”™è¯¯æ³¨å…¥çš„æ¡†æ¶ï¼Œå®ƒå«åš Schrodingerï¼ˆè–›å®šè°”å¹³å°ï¼‰ï¼Œå®ƒæ˜¯å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥é€‰ç°åœ¨è¦ç»„å»ºçš„é›†ç¾¤ï¼Œæ¯”å¦‚è¯´é€‰å¤šå°‘ä¸ª CPUã€å¤šå°‘ä¸ªå†…å­˜ã€è¿è¡Œå‡ ä¸ª TiDB èŠ‚ç‚¹ã€å‡ ä¸ª PD èŠ‚ç‚¹ï¼Œå®ƒä¼šå¸®æˆ‘æŠŠé…ç½®çš„é›†ç¾¤æ‹‰èµ·æ¥ï¼Œæˆ‘ä»¬è·‘è¿™äº›æµ‹è¯•çš„è¿‡ç¨‹ä¸­ä¼šæ³¨å…¥ä¸€äº›éšæœºçš„é”™è¯¯ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªå¹³å°å‘ç°äº†éå¸¸å¤šä¹‹å‰è‡ªå·±æµ‹è¯•æ—¶æ²¡æœ‰æ„è¯†åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b505d3aa873b2df409477b5160e05a91_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-b505d3aa873b2df409477b5160e05a91_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b505d3aa873b2df409477b5160e05a91_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-b505d3aa873b2df409477b5160e05a91_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-b505d3aa873b2df409477b5160e05a91_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 6&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„ç•Œé¢ï¼Œæˆ‘ä»¬é€šè¿‡ Create new box å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæµ‹è¯•ï¼Œä¸€æ—¦å‡ºé—®é¢˜å°±ä¼šæ±‡æŠ¥å›é¦ˆç»™æˆ‘ä»¬ï¼Œæœ‰éå¸¸éå¸¸å¤šçš„æµ‹è¯•ï¼ŒSchrodinger æ˜¯ä¸€ä¸ªå¯ä»¥éšæœºæ³¨å…¥é”™è¯¯çš„å¹³å°ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯ä¸èƒ½é¢„çŸ¥çš„ï¼ŒSchrodinger å¾ˆå¤šæ—¶å€™ä¼šå¸®æˆ‘ä»¬å®Œæˆéšæœºæµ‹è¯•ã€‚é‚£ä¹ˆå¯¹äºä¸€äº›ç¡®å®šæ€§çš„æµ‹è¯•æ–¹æ¡ˆè¯¥å¦‚ä½•æ³¨å…¥å‘¢ï¼Ÿ&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-93fcf97778df14a13fecc73e3bac0758_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-93fcf97778df14a13fecc73e3bac0758_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-93fcf97778df14a13fecc73e3bac0758_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-93fcf97778df14a13fecc73e3bac0758_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-93fcf97778df14a13fecc73e3bac0758_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 7&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬åœ¨ Go é‡Œé¢æ³¨å…¥ä¸€äº›åŸ‹ç‚¹ã€‚Failpoint æ˜¯æŒ‡æ¯”å¦‚è¯´ä¸€ä¸ªæ­£å¸¸å‡½æ•°æ­£å¸¸è¿”å›æ˜¯ä¸‹é¢è¿™ä¸ª Default å­—ç¬¦ä¸²ï¼Œé‚£æˆ‘ä»¬æ³¨å…¥ä¸€ä¸ª Failpointã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ³¨é‡Šï¼Œæœ€åä¼šæœ‰ä¸€ä¸ª Return SomeFuncStringDefault çš„è¯­å¥ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒæ¿€æ´»ï¼Œä»–åœ¨å‡½æ•°è¿›æ¥å°±ä¼šè¿”å›è¿™ä¸ªå€¼ã€‚æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å…³é”®è·¯å¾„æ³¨å…¥ä»»æ„é”™è¯¯ï¼ŒåŒ…æ‹¬å¯ä»¥éšæœºè§¦å‘ï¼Œæœ‰æ¦‚ç‡æ€§çš„è§¦å‘è¿™ä¸ªäº‹æƒ…éƒ½å¯ä»¥åšåˆ°ã€‚ä¸ºä»€ä¹ˆè¦æœ‰è¿™æ ·ä¸€ä¸ª Failpoint çš„ä¸œè¥¿å‘¢ï¼Ÿå°±æ˜¯å› ä¸ºæœ‰ä¸€äº›æˆ‘ä»¬å·²ç»ç¡®è®¤è¿‡ä¼šè§¦å‘æŸäº›é—®é¢˜çš„åœºæ™¯ï¼Œæ¯”å¦‚è¯´åœ¨å®¢æˆ·é‚£é‡Œæˆ–è€…åœ¨è–›å®šè°”æˆ‘ä»¬åœ¨è‡ªå·±å·¥ä½œä¸­é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»æŸ¥æ˜é—®é¢˜ï¼Œå°±éœ€è¦æŠŠå®ƒåŠ å…¥ç¡®å®šæ€§æµ‹è¯•ä¸­ï¼Œä¿è¯æˆ‘ä»¬ä»¥åæ”¹åŠ¨ä¸ä¼šå†å‡ºç°è¿™ä¸ªé—®é¢˜ï¼ˆå›å½’æµ‹è¯•ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å€ŸåŠ©äº Failpointã€‚åŸå› ä¸€æ–¹é¢å°±æ˜¯å› ä¸ºéšæœºæ€§çš„é—®é¢˜å¾ˆéš¾é‡ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨è¿™ç§æ–¹æ³•é‡ç°ï¼Œå¦ä¸€æ–¹é¢æ˜¯æˆ‘ä»¬è‡ªå·±æƒ³å‡ºæ¥çš„é—®é¢˜ä¸èƒ½é€šè¿‡è–›å®šè°”å¹³å°å»éšæœºæ³¨å…¥ï¼Œæ‰€ä»¥ã€‚Failpoint æ˜¯è–›å®šè°”æµ‹è¯•çš„ä¸€ä¸ªè¡¥å……ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-658b56e8ece0c1aa2b98ba2956c24061_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-658b56e8ece0c1aa2b98ba2956c24061_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-658b56e8ece0c1aa2b98ba2956c24061_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-658b56e8ece0c1aa2b98ba2956c24061_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-658b56e8ece0c1aa2b98ba2956c24061_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 8&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬ä¹‹å‰å¾ˆæ—©çš„æ—¶å€™ç”¨ Go æ³¨å…¥ï¼Œæˆ‘ä»¬å°±æ˜¯ç”¨ ETCD Gofail æ³¨å…¥ã€‚å¤§å®¶æœ‰ç”¨è¿‡å—ï¼ŸFailpoint æ˜¯  FreeBSD é‡Œé¢æœ€æ—©ç”¨çš„ä¸œè¥¿ï¼Œå®ƒæ˜¯ç”¨ C å†™çš„ã€‚Gofail å°±æ˜¯æŠŠå®ƒç§»æ¤åˆ° Go é‡Œé¢ï¼Œå®ƒæ˜¯ä»¥æ³¨é‡Šçš„å½¢å¼å‡ºç°çš„ï¼Œè§¦å‘ä»¥åï¼Œä¼šå˜æˆçœŸæ­£çš„ä»£ç ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6f09a81cdb876fd18ad2c380ba4966c4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-6f09a81cdb876fd18ad2c380ba4966c4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6f09a81cdb876fd18ad2c380ba4966c4_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-6f09a81cdb876fd18ad2c380ba4966c4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-6f09a81cdb876fd18ad2c380ba4966c4_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 9&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¿™æ˜¯åœ¨ TiDB é‡Œçš„ä¸€æ®µä»£ç ã€‚æ¯”å¦‚è¯´äº‹åŠ¡æäº¤çš„æ—¶å€™æˆ‘ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¿™é‡Œæ³¨å…¥ä¸€ä¸ª errorï¼Œçœ‹çœ‹è¿™ä¸ªç³»ç»Ÿæ˜¯ä¸æ˜¯è·‘å¯¹äº†ã€‚å¤§å®¶çœ‹ä¸€ä¸‹ Gofail å…¶å®å†™å‡ºæ¥æ˜¯ä¸å¤ªå¯è¯»çš„ã€‚å¦‚æœå˜æˆä¸‹é¢è¿™æ ·å‘¢ï¼Ÿåæ­£æˆ‘ä¼°è®¡æ²¡ä¸ª 10 åˆ†é’Ÿçœ‹ä¸æ‡‚å†™çš„æ˜¯ä»€ä¹ˆæ„æ€ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-408745f5047513880279a93d09fc6111_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-408745f5047513880279a93d09fc6111_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-408745f5047513880279a93d09fc6111_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-408745f5047513880279a93d09fc6111_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-408745f5047513880279a93d09fc6111_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 10&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±æƒ³ Gofail æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿé¦–å…ˆ Gofail åªèƒ½æœ‰ä¸€ç§å†™æ³•ï¼Œé™æ€åˆ†æçš„å·¥å…·åƒ IDE æ˜¯æ²¡åŠæ³•åˆ†æä»£ç ï¼Œå› ä¸ºå®ƒå¹¶ä¸è®¤ä¸ºä½ è¿™ä¸ªæ˜¯ä»£ç ï¼Œå› ä¸ºå®ƒåœ¨æ¿€æ´»ä»¥å‰åªæ˜¯ä¸€æ®µæ³¨é‡Šã€‚è¿˜æœ‰é€šå¸¸å†™ Gofailï¼Œå†™å®Œä¹‹åæ³¨é‡Šï¼Œè¦å†å›æ¥æ”¹æ³¨é‡Šï¼Œæµ‹è¯•ä¸€ä¸‹å†æ”¹å›å»ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸å¤ªæ–¹ä¾¿ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å› ä¸º Gofail æ˜¯å…¨å±€çš„æµ‹è¯•ï¼Œå¦‚æœæ³¨å…¥äº† Failpointï¼Œæ‰€æœ‰çš„ä»£ç ç›´æ¥åˆ°è¿™é‡Œï¼Œéƒ½æœ‰å¯èƒ½è¢«å®ƒè§¦å‘ï¼Œè¿™ä¸ªå¯èƒ½ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œå› ä¸ºæˆ‘å¦‚æœè¦çš„æ˜¯ä¸€ä¸ªå¹¶å‘æµ‹è¯•ï¼Œå°±è¦è‡ªå·±æŠŠæ¡çŠ¶æ€ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6a742de6e1176b6d7fa40493ca44b7f1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-6a742de6e1176b6d7fa40493ca44b7f1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6a742de6e1176b6d7fa40493ca44b7f1_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-6a742de6e1176b6d7fa40493ca44b7f1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-6a742de6e1176b6d7fa40493ca44b7f1_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 11&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¦‚æœä½ ä¸å°å¿ƒæ”¹å˜è¿™ä¸ªä»£ç ï¼Œåˆæƒ³å˜å›æ³¨é‡Šï¼Œåœ¨ä½ çŸ¥é“æ”¹åŠ¨å†å²çš„æƒ…å†µä¸‹å¯ä»¥å›é€€å›å»ï¼Œå¦‚æœä¸çŸ¥é“æ”¹åŠ¨å†å²å°±ä¼šå¾ˆéº»çƒ¦ï¼Œåªèƒ½è°ƒå–ä»¥å‰çš„ä»£ç å‡ºæ¥ï¼Œå…¶å®éå¸¸éº»çƒ¦ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå« Failpoint çš„ä¸œè¥¿ï¼Œç°åœ¨å·²ç»å¼€æºäº† ã€‚&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥è®²è®² PingCAP çš„ Failpoint æ€ä¹ˆåšã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9c238f02d09e2044925dc30d0654d5d8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-9c238f02d09e2044925dc30d0654d5d8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9c238f02d09e2044925dc30d0654d5d8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-9c238f02d09e2044925dc30d0654d5d8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-9c238f02d09e2044925dc30d0654d5d8_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 12&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;TiKV æ˜¯ç”¨ Rust å†™çš„ï¼Œç”¨ Rust å†™ Failpoint å¾ˆå®¹æ˜“ï¼Œå› ä¸º Rust é‡Œé¢æœ‰å®ï¼Œé¢„ç¼–è¯‘é˜¶æ®µæ‰“å¼€å…³é—­ FailPoint å¾ˆæ–¹ä¾¿ã€‚åœ¨ Go é‡Œé¢æ²¡æœ‰å®ï¼Œä¹Ÿæ²¡æœ‰ç¼–è¯‘å™¨çš„æ’ä»¶ï¼Œå¦‚æœç”¨ Build Flags ä¸å¤ªä¼˜é›…ä¹Ÿä¸å¥½å†™ã€‚é¦–å…ˆè¯´è¯´ æˆ‘ä»¬è®¾è®¡ Failpoint çš„ä¸€äº›åŸåˆ™ï¼šFailpoint è‚¯å®šä¸èƒ½å½±å“æˆ‘ä»¬çš„æ­£å¸¸ä»£ç ï¼Œè¿™æ˜¯æœ€é‡è¦çš„åŸåˆ™ï¼Œè¿˜æœ‰å°±æ˜¯å¸Œæœ›è¿™ä¸ªä»£ç å¯ä»¥çœ‹èµ·æ¥åƒæ­£å¸¸çš„ä»£ç ï¼Œåƒä¸€ä¸ª Rust å®çš„å½¢å¼å­˜åœ¨ï¼ŒGo é‡Œé¢æ˜¯æ²¡æœ‰å®çš„ï¼Œå¤§å®¶çœ‹ä¸€ä¸‹ä¸‹è¾¹çš„è¿™æ®µä»£ç ï¼Œå°±æ˜¯æœ€ç®€å•çš„ Failpoint æ³¨å…¥é”™è¯¯çš„ä»£ç ï¼Œé¦–å…ˆå·¦è¾¹æ˜¯ Failpoint.nameï¼Œä»–ä¼šå‘Šè¯‰æˆ‘ä»¬è¦è§¦å‘å“ªä¸€ä¸ª Failpointï¼Œè¿™é‡Œä»¥åŒ…çš„å½¢å¼å‡ºç°ï¼Œå°±æ¯”è¾ƒå®¹æ˜“éš”ç¦»å‡½æ•°çš„å‘½åç©ºé—´ã€‚ä½†æ˜¯ä¸Šé¢çš„ä»£ç æ˜¯æ²¡æœ‰åŠæ³•ç»™ä½ çœŸçš„æ³¨å…¥ä¸€æ®µä»£ç çš„ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-16561ded38638690997b8cdb52a72fc2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-16561ded38638690997b8cdb52a72fc2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-16561ded38638690997b8cdb52a72fc2_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-16561ded38638690997b8cdb52a72fc2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-16561ded38638690997b8cdb52a72fc2_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 13&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘å…ˆè®²æ€ä¹ˆå˜æˆä¸‹é¢çš„å½¢å¼ï¼Œä¸‹é¢æ˜¯è½¬æ¢ä¹‹åçš„å½¢å¼ï¼Œå®ƒä¼šåˆ¤æ–­ä½ çš„ Failpoint æ˜¯ä¸æ˜¯è¦å¼€å¯ï¼Œå¦‚æœå¼€å¯å°±ç›´æ¥è½¬ç§»åˆ°ä¸‹é¢å»ã€‚æˆ‘ä»¬ä¼šè§£æ Go çš„ä»£ç æ–‡ä»¶ï¼Œç„¶å parseï¼Œä¼šå¾—åˆ°ä¸€å † AST çš„ç»“æ„ï¼Œæœ€åæ‹¿åˆ° callexprï¼Œæˆ‘ä»¬é€šè¿‡ parse å¯ä»¥æ”¹å†™å·¦è¾¹ IF çš„ Statementã€‚æˆ‘ä»¬æ”¹é€ è¿‡çš„ AST æ ‘ï¼Œå†å†™å›æ–‡ä»¶è¿›è¡Œå¤å†™ï¼Œå°±å˜æˆä¸‹é¢çš„å½¢å¼ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8518964ecfc18c190184db905248fa9f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-8518964ecfc18c190184db905248fa9f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8518964ecfc18c190184db905248fa9f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-8518964ecfc18c190184db905248fa9f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-8518964ecfc18c190184db905248fa9f_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 14&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬æ³¨å…¥çš„å‡½æ•°å…¶å®æ˜¯ä¸€ä¸ªæ ‡è®° ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ Parse çš„æ—¶å€™è®¤è¯†å®ƒã€‚&lt;/p&gt;&lt;p&gt;è‡³äºè¿™é‡Œé¢ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ Breakï¼Œè€Œæ˜¯è¦ç”¨ failpoint.Break() çš„æ ‡è®°å‡½æ•°ï¼Œæ˜¯å› ä¸ºå¦‚æœç›´æ¥åœ¨ä»£ç é‡Œé¢å†™ä¸€ä¸ª Breakï¼Œä¼šå˜æˆ Break å¤–éƒ¨çš„ä»£ç ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ ‡è®°å‡½æ•°åšã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 15&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿˜æœ‰åˆšåˆšè¯´åˆ°äº†ï¼Œæˆ‘ä»¬åšçš„å¹¶è¡Œæµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡ Contextï¼Œå¯ä»¥å¯¹ä¹‹å‰çš„ Context è¿›è¡Œ Hookï¼Œæˆ‘ä»¬åœ¨é‡Œé¢å†™ä¸€äº›åˆ¤æ–­æ¡ä»¶ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬åªå…è®¸æŸä¸€äº› Context è§¦å‘ï¼Œå°±ä¸ä¼šè¢«å…¶ä»–çš„ test case è§¦å‘æ‰ï¼Œç„¶åæŠŠæ­£å¸¸ Context ä¼ è¿›å»ï¼Œå°±å¯ä»¥è¿›è¡Œå¹¶å‘æµ‹è¯•ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c9bb712b19bf76172c96e39ccec2a418_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-c9bb712b19bf76172c96e39ccec2a418_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c9bb712b19bf76172c96e39ccec2a418_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-c9bb712b19bf76172c96e39ccec2a418_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c9bb712b19bf76172c96e39ccec2a418_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 16&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å·¦è¾¹æˆ‘ä»¬æŠŠæ‰€æœ‰åˆ—åœ¨é‡Œé¢ï¼Œå¦‚æœå†™ä¸€ä¸ª Failpointï¼Œå¤§æ¦‚æ˜¯å·¦è¾¹è¿™æ ·çš„å½¢å¼ï¼Œå³è¾¹å°±æ˜¯å˜å‡ºæ¥ä¹‹åçš„ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢è¿˜æœ‰ä¸€ä¸ª labelï¼Œå¦‚æœä¸è¿™æ ·å†™ï¼Œå°±ä¼šè¢«å¤–éƒ¨ä»£ç è¯†åˆ«æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æ ‡è®°å‡½æ•°åšè¿™ä¸ªäº‹æƒ…ã€‚Failpoint åˆšæ‰è¯´äº†ï¼Œæ³¨å…¥æ˜¯è§£æ Call Exprï¼Œæ‰€ä»¥å¯ä»¥è®©è¢«å‡½æ•°è°ƒç”¨çš„åœ°æ–¹éƒ½æ³¨å…¥ã€‚å½“ç„¶ä¸åªæ˜¯è¿™äº›åœ°æ–¹ï¼Œæˆ‘ä»¬ test cases é‡Œé¢å†™äº†éå¸¸å¤šçš„ Contextï¼Œå¤§å®¶æ°¸è¿œä¸ä¼šè§‰å¾—æ³¨å…¥çš„åœ°æ–¹æˆ‘ä»¬ä¹Ÿæ³¨å…¥äº†ã€‚åƒè¿™æ ·ï¼Œæ•´ä¸ªä»£ç å°±ä¼šæ¯”è¾ƒå¯è¯»ä¸€ç‚¹ï¼Œå› ä¸ºé¦–å…ˆ IDE å¯ä»¥è¯†åˆ«ï¼ŒåŒ…æ‹¬è¯­æ³•é”™è¯¯å¯ä»¥ç›´æ¥è¢« IDE æ£€æµ‹ã€‚ä¹‹å‰å†™ Gofail ä¸æ–¹ä¾¿ï¼Œå¯¼è‡´å¤§å®¶ä¸æ„¿æ„å»æ³¨å…¥æ›´å¤šï¼Œç°åœ¨æ¯”è¾ƒæ–¹ä¾¿å¯èƒ½å¤§å®¶å°±æ›´æ„¿æ„åšè¿™ä¸ªäº‹æƒ…äº†ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7e8a6598f3a834bf28579cc38ae52c29_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-7e8a6598f3a834bf28579cc38ae52c29_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7e8a6598f3a834bf28579cc38ae52c29_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-7e8a6598f3a834bf28579cc38ae52c29_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-7e8a6598f3a834bf28579cc38ae52c29_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 17&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-b32425616243e55f32f0d573c61e4aeb_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 18&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æ³¨å…¥ä¸€ä¸ªå‡½æ•°ï¼Œä¼šä¸ä¼šå¯¹æœ€ç»ˆçš„æ€§èƒ½æœ‰å½±å“ï¼Ÿåˆšåˆšåˆ—å‡ºæ¥çš„ Maker å‡½æ•°ï¼Œå®ƒå…¶å®æ˜¯ç©ºå‡½æ•°ï¼Œæˆ‘ä»¬å³è¾¹ä¸€ä¸ªå‚æ•°ï¼Œè¿›å»çš„æ—¶å€™å…¨æ˜¯ç©ºçš„ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œï¼Œæ­£å¸¸æƒ…å†µä¸‹å°±æ˜¯ä¸ºäº†è®©æˆ‘ä»¬ Parse è®¤è¯†ï¼Œæ‰¾åˆ°å¹¶æ ‡è®°è¿™ä¸ªä¸œè¥¿ï¼Œæ”¹å†™äº†è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ã€‚é€šè¿‡çœ‹æ±‡ç¼–ä¹Ÿä¼šå‘ç°è¿™ä¸ªç©ºå‡½æ•°ä¹‹åè¢«ç›´æ¥æ¶ˆé™¤ã€‚æ ¹æœ¬åŸå› è¿˜æ˜¯ Go æ²¡æœ‰å®ï¼Œæˆ‘ä»¬å¦‚æœç”¨ C æ¥å†™è¿™ä¸ªä¸œè¥¿ï¼Œå®å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ï¼ŒGo çš„è¯æˆ‘ä»¬åªèƒ½åŠªåŠ›å†™å¾—æ›´ä¼˜é›…ä¸€äº›ã€‚åˆ°æ­¤ï¼Œæˆ‘æŠŠ Failpoint è®²å®Œäº†ï¼Œæ¨èå¤§å®¶è¯•ç”¨ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥è®²ä¸€è®²ï¼Œæˆ‘ä»¬å†…éƒ¨æ€ä¹ˆæ£€æµ‹ Goroutine æ³„éœ²ï¼ŒGoroutine æ³„éœ²ä¸å¤ªå¸¸è§ï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°ï¼Œçº¿ä¸Šä¼šå‡ºç°å¾ˆå¤§çš„äº‹æ•…ï¼Œè€Œä¸”ä¸å¤ªå¥½æŸ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™å°½é‡æ—©å‘ç°é—®é¢˜ï¼Œä¸è®©é—®é¢˜å¾€ä¸Šå±‚å‘å±•ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fcc2c87c19d8c4293f1e5d41f410548c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-fcc2c87c19d8c4293f1e5d41f410548c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-fcc2c87c19d8c4293f1e5d41f410548c_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-fcc2c87c19d8c4293f1e5d41f410548c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-fcc2c87c19d8c4293f1e5d41f410548c_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 19&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä»€ä¹ˆæ ·æƒ…å†µä¼šå¯¼è‡´ Goroutine leakï¼Ÿ&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b40800d0b1ac35fc5053cb91bd00e235_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-b40800d0b1ac35fc5053cb91bd00e235_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b40800d0b1ac35fc5053cb91bd00e235_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-b40800d0b1ac35fc5053cb91bd00e235_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-b40800d0b1ac35fc5053cb91bd00e235_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 20&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä¸­é—´çš„ Go æˆ‘ä»¬å¯åŠ¨äº† Goroutineï¼Œä»–ä¼šè¯» channelï¼Œè¿™ä¸ª channel ä¸ä¼šè¢« Closeï¼Œå…¶å®ä¸æ˜¯ä¸ä¼šè¢« Closeï¼Œè€Œæ˜¯è¢«å¿˜è®° Closeï¼Œæˆ–è€…æ°¸è¿œä¸ä¼šæœ‰æ•°æ®è¿›æ¥äº†ï¼Œå®ƒè¦ä»åˆ«çš„åœ°æ–¹è¯»æ•°æ®ï¼ŒæŒ‰ç†è¯´æˆ‘ä»¬ä»£ç è¯»å®Œäº†åº”è¯¥ Close æ‰ï¼Œé‚£ä¸ªæ—¶å€™å°±ä¼šé€€å‡ºï¼Œæ­£å¸¸é€»è¾‘æ˜¯è¿™æ ·ã€‚ä½†æ˜¯å› ä¸ºä»£ç å†™å¾—æœ‰ç–æ¼ï¼Œå¿˜è®° Close çš„è¯ Goroutine å°±ä¼šæ³„éœ²æ‰ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡ Runtime çš„å‡½æ•°æ‹¿åˆ°ç°åœ¨æ­£åœ¨è·‘çš„æ ˆï¼Œæˆ‘ä»¬è®¤ä¸º Routine  è·‘çš„æ˜¯æ­£å¸¸çš„å°±æ»¤æ‰ã€‚Testing ä¹‹å‰è¿™ä¸ª T ä¹‹å‰æŠŠä¹‹å‰æ­£åœ¨è·‘çš„ Routine å…¨éƒ¨è®°èµ·æ¥ï¼ŒæŒ‰ç†è¯´è·‘å®Œäº† Test Cases å°±åº”è¯¥æŠŠ Routine å…¨éƒ¨å›æ”¶ã€‚ä½ è·‘ä¸‹æ¥ï¼Œå¦‚æœå†è°ƒç”¨ Runtime.stackï¼Œå‘ç°ä¹‹å‰å‡ºç°äº†æ–°çš„ Routineï¼Œè¿™å¤§æ¦‚æ˜¯è¢«æ³„éœ²çš„ Routineï¼Œé‚£å°±ä¸è®©å®ƒè¿‡æˆ‘ä»¬çš„ CIï¼Œ PR ä¸èƒ½åˆå¹¶ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d9ba235e41d74c5634ca5d68606dfde0_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-d9ba235e41d74c5634ca5d68606dfde0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d9ba235e41d74c5634ca5d68606dfde0_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-d9ba235e41d74c5634ca5d68606dfde0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d9ba235e41d74c5634ca5d68606dfde0_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 21&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘è®²åˆ°æˆ‘ä»¬ç”¨äº†ä¸€äº›æµ‹è¯•çš„æ–¹æ³•ï¼Œå…¶å®æˆ‘ä»¬åˆ†å¸ƒå¼æ•°æ®åº“åœ¨å®¢æˆ·é‚£è¾¹è¿˜æ˜¯ä¼šé‡åˆ°ä¸€äº›å°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸€äº›å…¼å®¹æ€§çš„é—®é¢˜ã€‚æˆ‘ä»¬åªèƒ½ä»¥æ›´å¤šçš„æµ‹è¯•çš„ç±»å‹æŠŠè¿™äº›é—®é¢˜è§„é¿æ‰ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡æˆ‘ä»¬åªèƒ½å¾€è¿™ä¸ªæ–¹å‘åŠªåŠ›ï¼Œæ¯•ç«Ÿæ€»ä¼šæœ‰ä¸€äº›é—®é¢˜è¢«å¿½ç•¥ã€‚å‘ç°æ–°çš„é—®é¢˜ï¼Œä¸€å®šè¦åŠ ä¸Šç›¸åº”çš„æµ‹è¯•ï¼Œè¿™æ ·å°±ä¼šè®©è¿™äº›é—®é¢˜è¶Šæ¥è¶Šå°‘ã€‚å…¶å®æˆ‘ä»¬åœ¨ 2.1 ä¹‹åï¼Œåœ¨ 3.0 å‘å¸ƒä¹‹å‰ï¼Œæˆ‘ä»¬åšäº†å¤§é‡è¿™æ ·çš„äº‹æƒ…ï¼Œæˆ‘ä»¬èŠ±éå¸¸å¤šçš„æ—¶é—´åœ¨æµ‹è¯•ä¸Šé¢ï¼ŒåŒ…æ‹¬æ„å»ºè–›å®šè°”å¹³å°ï¼ŒåŒ…æ‹¬å†…éƒ¨ CI çš„å¹³å°ï¼Œæˆ‘ä»¬èŠ±è´¹äº†å¾ˆå¤šæœºå™¨èµ„æºã€äººåŠ›åšè¿™ä¸ªäº‹æƒ…ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ab155c43d0214ccfea46290b75d3dde9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-ab155c43d0214ccfea46290b75d3dde9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-ab155c43d0214ccfea46290b75d3dde9_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic2.zhimg.com/v2-ab155c43d0214ccfea46290b75d3dde9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-ab155c43d0214ccfea46290b75d3dde9_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 22&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¾€ä¸‹è®²ï¼Œæˆ‘ä»¬åšå®Œäº†è¿™äº›ç¨³å®šçŠ¶æ€åæ‰ä¼šè€ƒè™‘åšæˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–çš„ç‚¹ã€‚è¿™é‡Œè®²ä¸€ä¸‹æˆ‘ä»¬ 2.0 é‡Œé¢å¸¦è¿›æ¥çš„ä¸€ä¸ªå¤§çš„ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-e571afe32470614e90ec55fe6f6770cc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-e571afe32470614e90ec55fe6f6770cc_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-e571afe32470614e90ec55fe6f6770cc_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-e571afe32470614e90ec55fe6f6770cc_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-e571afe32470614e90ec55fe6f6770cc_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 23&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹è¿™ç§è¡¨æ ¼ï¼Œæœ‰å››åˆ—ï¼Œæ¯ä¸€åˆ—éƒ½æœ‰ä¸åŒçš„ç±»å‹ï¼Œé€»è¾‘ä¸Šè¡¨ç°å¦‚æœä¸‰è¡Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬æƒ³è±¡å¦‚æœåœ¨ Golang å¯ä»¥è¡¨è¾¾ä¸€è¡Œä¸€è¡Œå—ï¼Ÿæ€ä¹ˆç”¨ä¸€ä¸ªæ•°æ®æ¶æ„è¡¨ç¤ºè¿™ä¸€è¡Œï¼Œè¿™ä¸ªé‡Œé¢æœ‰å„ç§ç±»å‹çš„ã€‚ä»¥å‰æˆ‘ä»¬çš„è¡¨è¾¾æ–¹å¼æ˜¯è¿™æ ·çš„ï¼ˆå›¾ 23ï¼‰ï¼Œæˆ‘ä»¬ä¸€åˆ—å°±æ˜¯ Datum çš„ç»“æ„ä½“ï¼Œè¿™é‡ŒåŒ…å«äº†ä¸€ä¸ª Kï¼Œ K å°±æ˜¯è¡¨ç¤ºä»€ä¹ˆç±»å‹ï¼Œå¯¹äºä¸åŒç±»å‹ï¼Œæ¯”å¦‚æ˜¯ Uint8 å°±å¯ä»¥ç”¨ç¬¬ä¸€ä¸ª fieldï¼Œå¦‚æœæ˜¯ uint16 å°±ç”¨ç¬¬äºŒä¸ª fieldï¼Œå¦‚æœæ˜¯å…¶å®ƒå¤æ‚ç±»å‹å°±æ˜¯ä¸‹é¢çš„é‚£ä¸ªã€‚è¿™æ˜¯æœ€æ—©æƒ³åˆ°çš„ä¼˜åŒ–äº†ï¼Œå› ä¸ºå¦‚æœç›´æ¥è¡¨è¾¾è¿™ä¹ˆå¤šç±»å‹å¾ˆç®€å•ï¼Œæœ€ç®€å•å°±æ˜¯ç”¨ Interface{}ï¼Œä½†æ˜¯ interface{}  æ€§èƒ½ä¸ä¼šå¤ªå¥½ã€‚è¿™ä¸ª Datum æœ‰ä»€ä¹ˆä¸å¥½çš„åœ°æ–¹å‘¢ï¼Ÿæˆ‘ä»¬åˆšåˆšçœ‹åˆ°è¿™ä¸ªé‡Œé¢ç”¨äº†å¾ˆå¤šçš„æ— è°“çš„ç©ºé—´å¼€é”€ï¼Œæ¯”å¦‚è¿™æ˜¯ä¸€ä¸ªå­—èŠ‚çš„æ•´æ•°ï¼Œä½†æ˜¯éœ€è¦ç”¨ Datum è¡¨ç¤ºçš„è¯éœ€è¦å‡ åä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªå…¶å®æ˜¯éå¸¸å¤§çš„æµªè´¹ã€‚è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒä¸å¥½å°±æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯ä¸€ä¸ªå¤åˆç±»å‹ï¼Œæ˜¯è¦æ‹¿åˆ°å¤åˆç±»å‹ï¼Œéœ€è¦åœ¨ Datum é‡Œé¢è¦å»åš Type Assertionã€‚è¿˜æœ‰å¦‚æœå¯¹ä¸€åˆ—åšè®¡ç®—ï¼Œæ¯æ¬¡å»æ‹¿éƒ½æ˜¯è·³æ•°ç»„æ‹¿ï¼Œå¯¹äº CPU Cache Miss å½±å“æ¯”è¾ƒä¸¥é‡ï¼Œè¿™ä¸ªå¯¹äº CPU ä¹Ÿä¸å¤ªå‹å¥½ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-9ebc4ab2b42781f263d39c87f905e11f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-9ebc4ab2b42781f263d39c87f905e11f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-9ebc4ab2b42781f263d39c87f905e11f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-9ebc4ab2b42781f263d39c87f905e11f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-9ebc4ab2b42781f263d39c87f905e11f_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 24&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æˆ‘ä»¬æ•°æ®åº“è®¡ç®—å½“ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯ä»¥åˆ—è®¡ç®—çš„ï¼Œåˆ—ä¸åˆ—ä¹‹é—´çš„è®¡ç®—å¯ä»¥é€šè¿‡ç±»ä¼¼äºå¹¶è¡Œçš„æ–¹å¼ç®—å‡ºæ¥ä¸€èµ·è¾“å‡ºã€‚é‚£æˆ‘ä»¬ä»£ç æ€ä¹ˆä¼˜åŒ–è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0929ba6582a812883f811c2a4283cd60_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-0929ba6582a812883f811c2a4283cd60_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0929ba6582a812883f811c2a4283cd60_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-0929ba6582a812883f811c2a4283cd60_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-0929ba6582a812883f811c2a4283cd60_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 25&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹å«åš Apache Arrow å†…å­˜è¡¨è¾¾çš„ä¸€ç§æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼ï¼Œå³è¾¹æ˜¯ä¸€ä¸ªæ¦‚è§ˆå›¾ï¼ˆå›¾ 25ï¼‰ï¼Œæœ‰ä¸€ä¸ªé•¿åº¦æ ‡è¯†ä¼šå‘Šè¯‰æˆ‘ä»¬ç°åœ¨ Arrow é‡Œé¢ä¼šæœ‰å‡ ä¸ªå…ƒç´ ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä¾‹å­æœ‰å››ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥é‡å°±æ˜¯ 4ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªå«åš NULL bitmapï¼Œç”¨æ¥æŒ‡ç¤ºå“ªä¸ªä½ç½®æ˜¯ NULLï¼Œä¸»è¦æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ã€‚æœ€åæ˜¯ä»¥äºŒè¿›åˆ¶æ•°ç»„æ¥ä¿å­˜ä¸‹é¢çš„å€¼ï¼Œè¿™ä¸ªåº”ç”¨åœ¨å¾ˆå¤š AP çš„æ•°æ®åº“æ ¼å¼é‡Œã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-f3c69212174888a777662d6ecdcbfb0b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-f3c69212174888a777662d6ecdcbfb0b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-f3c69212174888a777662d6ecdcbfb0b_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-f3c69212174888a777662d6ecdcbfb0b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-f3c69212174888a777662d6ecdcbfb0b_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 26&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·ä¸ªè¡¨è¾¾æ˜¯æ¯”è¾ƒç´§å‡‘çš„å†…å­˜è¡¨è¾¾ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä»¥ Arrow çš„å†…å­˜è¡¨è¾¾å˜æˆæˆ‘ä»¬ Golang çš„ä»£ç ï¼Ÿåœ¨ TiDB é‡Œæˆ‘ä»¬å« Chunkï¼ŒChunk ä¼šæœ‰ä¸€ç»„çš„ Column çš„æ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€åˆ—ã€‚å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼ˆå›¾ 26ï¼‰ï¼Œæˆ‘æ ‡å‡ºæ¥é¢œè‰²ä¸€èµ·çš„ï¼Œå°±ä¼šæ˜¯ä¸€åˆ—ä¸€èµ·æ”¾åœ¨ Column é‡Œé¢ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªé‡Œé¢ä¼šä¿å­˜è¿™ä¸€å—å†…å­˜é‡Œé¢ A é‚£ä¸€åˆ—æ‰€æœ‰çš„ 1234 æ”¾åœ¨ Data é‡Œé¢ã€‚å¦‚æœæ˜¯ç­‰é•¿çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ Offsets è¿™ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬ä¸ç”¨å®ƒï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´ã€‚B é‚£ä¸€åˆ—åˆæ˜¯ä¸€ä¸ª Cloumn çš„å¯¹è±¡ï¼Œè¿™æ ·ç»„èµ·æ¥å°±å¯ä»¥æ„æˆå†…å­˜çš„è¡¨è¾¾ã€‚Chunk å°±æ˜¯ä¸€å—çš„æ„æ€ï¼Œè¡¨è¾¾è¿™ä¸€æ•´å—çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä½†å®é™…ä¸‹é¢æ˜¯ä¸€åˆ—ä¸€åˆ—è¿™ä¹ˆå­˜çš„ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-71e294a9d6aef39cd5de81abb18b0b20_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-71e294a9d6aef39cd5de81abb18b0b20_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-71e294a9d6aef39cd5de81abb18b0b20_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-71e294a9d6aef39cd5de81abb18b0b20_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-71e294a9d6aef39cd5de81abb18b0b20_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 27&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¤§å®¶å¯èƒ½ä¼šé—®ä½ è¿™ä¸ªæ•°æ®åº“é‡Œé¢å¦‚æœæœ‰ä¸Šäº¿è¡Œæ•°æ®æ€ä¹ˆå­˜æ”¾ï¼Ÿæˆ‘ä»¬ Chunk å¹¶ä¸æ˜¯æŠŠæ‰€æœ‰çš„æ•°æ®æ”¾åœ¨é‡Œé¢ï¼Œä»–ä¼šè®¾ç½®ä¸€ä¸ª Sizeï¼Œæ¯”å¦‚ä¸€ä¸ªChunk æœ€å¤šåªæ”¾ 100 è¡Œï¼Œå®ƒæ˜¯å¯ä»¥è°ƒ Size çš„ã€‚å¤§å®¶éƒ½çŸ¥é“ï¼ŒGo å¯¹æ€§èƒ½æœ€å¤§çš„æ€æ‰‹å°±æ˜¯ä¸æ–­çš„ç”³è¯·æŒ‡é’ˆï¼Œè¿™ä¼šé€ æˆéå¸¸å¤§çš„å½±å“ï¼Œå¤§å®¶å†™ä»£ç çš„æ—¶å€™ä¼šå®¹æ˜“å¿½ç•¥è¿™ä¸ªé—®é¢˜ã€‚ä½†å¦‚æœå†™æ•°æ®åº“çš„è¯ï¼Œè¿™ä¸ªé—®é¢˜ä¼šå¾ˆæ˜æ˜¾ï¼Œå¦‚æœé‡‡ç”¨è¿™ç§æ–¹å¼å°±å¯ä»¥åœ¨è¿™æ ·çš„åœºæ™¯ä¸‹ä¼šæœ‰å¾ˆå¤§çš„æ€§èƒ½æå‡ã€ä¹Ÿå¯ä»¥èŠ‚çœéå¸¸å¤šçš„æ—¶é—´ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-818a23d5bbc13f7de39e84d517b1bb00_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-818a23d5bbc13f7de39e84d517b1bb00_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-818a23d5bbc13f7de39e84d517b1bb00_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic1.zhimg.com/v2-818a23d5bbc13f7de39e84d517b1bb00_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-818a23d5bbc13f7de39e84d517b1bb00_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 28&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä½¿ç”¨åœ¨äºŒè¿›åˆ¶çš„æ•°ç»„è¡¨è¾¾è¡¨ç¤ºè¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯¹äºå¤æ‚çš„ç»“æ„ä¸ç”¨åƒåˆšæ‰é‚£æ ·å¿…é¡» type assertion å‡ºæ¥ï¼Œå¯¹äºäºŒè¿›åˆ¶çš„æ•°æ®ç›´æ¥ç”¨ Unsafe å°±å¯ä»¥ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§„çš„æ“ä½œï¼Œæˆ‘ä»¬ä¸€æ®µäºŒè¿›åˆ¶æ•°ç»„å¯ä»¥å˜æˆä»»ä½•ç±»å‹ï¼Œå¦‚æœåœ¨ Go é‡Œé¢åšçš„è¯å¯ä»¥ç”¨ Unsafe åšè¿™ä¸ªäº‹æƒ…ï¼Œè¿™æ ·å¯¹äºæˆ‘ä»¬æ•ˆç‡æœ‰å¾ˆå¤§çš„æå‡ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-bc42a0a59b79684077ff1cc0e1e611d7_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-bc42a0a59b79684077ff1cc0e1e611d7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-bc42a0a59b79684077ff1cc0e1e611d7_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic4.zhimg.com/v2-bc42a0a59b79684077ff1cc0e1e611d7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-bc42a0a59b79684077ff1cc0e1e611d7_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 29&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå€¼å¾—è®²çš„æ˜¯å‘é‡åŒ–æ‰§è¡Œï¼Œä»¥å‰æˆ‘ä»¬çš„è¡¨è¾¾ï¼ˆå›¾ 28ï¼‰æ˜¯è¿™æ ·ä¸€è¡Œä¸€è¡Œçš„è¿‡å»ï¼Œå¦‚æœæˆ‘è¦åš A+C çš„åœºæ™¯ï¼Œä»¥å‰çš„æƒ…å†µæˆ‘å°±å¿…é¡»å¾—ä» Data æ•°ç»„æ‹¿ A å†æ‹¿ Cï¼Œç®—å®Œä»¥ååˆè¦åˆ°ä¸‹ä¸€è¡Œæ‹¿ A è¿™ä¸€åˆ—çš„æ•°æ®ï¼Œå†å¾€ä¸‹è·³ï¼Œè¿™æ ·æ¥å›åˆ‡æ¢å¥½å¤šä¸ªæ•°ç»„ï¼Œå¦‚æœè¿™ä¸ªæ•°ç»„éå¸¸é•¿çš„è¯ï¼ŒCPU æœ‰å¯èƒ½ä¼šæŠŠä½ æ•´ä¸ªæ•°ç»„å…ˆå¼„åˆ° Cache é‡Œé¢ï¼Œåˆšåˆšçš„è¡Œä¸ºå°±æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¼€é”€ï¼Œè€Œä¸”æ²¡åŠæ³•å¹¶è¡Œèµ·æ¥ã€‚å¦‚æœæˆ‘ä»¬åšæˆåˆšåˆšè¯´åˆ° Chunk çš„æ–¹å¼ä¸€åˆ—ä¸€åˆ—å­˜ï¼Œå¦‚æœç®— A+Cï¼Œæˆ‘åœ¨åˆæœŸå¼„ä¸€ä¸ªæ•°ç»„ A+C æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘å¯¹è¿™ä¸€ä¸ªæ•°ç»„ä¸€æ¬¡æ€§æ‰«è¿‡å»ï¼ŒæŠŠæ‰€æœ‰ç»“æœç®—å‡ºæ¥ï¼Œæ”¾åˆ°åˆšåˆšè¯´çš„ç»“æœæ•°ç»„é‡Œé¢ï¼Œæœ€ç»ˆçš„ç»“æœå°±å‡ºæ¥äº†ã€‚è¿™ä¸ªå°±æ˜¯å‘é‡åŒ–æ‰§è¡Œæœ€åŸºæœ¬çš„æ¦‚å¿µã€‚&lt;/p&gt;&lt;p&gt;åœ¨ TiDB é‡Œé¢ä¹Ÿåšäº†è¿™ä¸ªäº‹æƒ…ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ TiKV æ¨¡å—ä¹Ÿæ”¯æŒå‘é‡åŒ–æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æˆ‘ä»¬ TiDB çš„ä¸€æ®µä»£ç ï¼ˆå›¾ 29ï¼‰ï¼Œè¿™é‡Œçš„å‘é‡åŒ–æ‰§è¡Œæ˜¯ï¼šé€šå¸¸è®¡ç®—éƒ½æ˜¯ä¸€åˆ—ä¸€åˆ—æ¥åšï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¾“å…¥è¿›æ¥å¤§å®¶å¯ä»¥çœ‹åˆ°ä¸€åˆ—ï¼Œå®ƒæœ‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ¯ä¸ª NEXT æ˜¯æ”¹äº†ä¸‹æ ‡ï¼Œä½†æ˜¯éƒ½æ˜¯è®¿é—®åŒä¸€ä¸ªæ•°ç»„ï¼Œå¤§å®¶çœ‹è¿™ä¸ªå›¾å°±ä¼šæ¯”è¾ƒç›´è§‚ã€‚æˆ‘ä»Šå¤©åˆ†äº«çš„è·Ÿä»£ç ç›¸å…³æˆ–è€…æ˜¯å®è·µç›¸å…³çš„å°±è¿™ä¹ˆå¤šã€‚ä½†æ˜¯æˆ‘è¿˜æƒ³è·Ÿå¤§å®¶åˆ†äº«çš„å°±æ˜¯æˆ‘ä»¬åšæ•°æ®åº“çš„è¿‡ç¨‹ä¸­æˆ–è€…åšè½¯ä»¶çš„æ—¶å€™è·Ÿäº’è”ç½‘ä¸å¤ªä¸€æ ·çš„åœ°æ–¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦åˆ°çš„ä¸€äº›ç»éªŒæ•™è®­ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-37f7701df133c18a0d4b74fc24fe01fa_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-37f7701df133c18a0d4b74fc24fe01fa_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-37f7701df133c18a0d4b74fc24fe01fa_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;904&quot; data-rawheight=&quot;508&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;904&quot; data-original=&quot;https://pic3.zhimg.com/v2-37f7701df133c18a0d4b74fc24fe01fa_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-37f7701df133c18a0d4b74fc24fe01fa_b.jpg&quot;/&gt;&lt;figcaption&gt;å›¾ 30&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ç¬¬ä¸€æ¡è¦è¯´çš„å°±æ˜¯æˆ‘ä»¬åšäº‹æƒ…ä¹‹å‰å…ˆè®©äº‹æƒ…åšå¯¹ï¼Œå†è€ƒè™‘ä¼˜åŒ–æ€§èƒ½ã€‚å¤§å®¶çŸ¥é“æ€§èƒ½ä¼˜åŒ–ä¸€å®šä¼šç”¨æ¯”è¾ƒ Cheek çš„æ–¹å¼ï¼Œä½ è¦æ˜¯ç›´æ¥è·Ÿå†…å­˜æ‰“äº¤é“ï¼Œæˆ–è€…è·Ÿæ“ä½œç³»ç»Ÿæ‰“äº¤é“ï¼Œä¸€æ—¦æŠŠæ“ä½œç³»ç»Ÿä¿¡æ¯å¼•è¿›ä»£ç é‡Œé¢ï¼Œä¸€å®šä¼šè€¦åˆä½ çš„ä»£ç ï¼Œæˆ–è€…è®©ä½ çš„ä»£ç æ¯”è¾ƒå¤æ‚ã€‚è¿™æ ·è‚¯å®šä¸åˆ©äºä½ ä»£ç çš„ç¨³å®šæ€§æˆ–è€…æµ‹è¯•çš„ç¨³å®šæ€§ï¼Œåˆšå¼€å§‹æ˜¯ä¸å¥½åšçš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½ä»å‘¨è¾¹ä¸€äº›å„ç§è®¾æ–½è¡¥å…¨äº†ï¼Œæ‰èƒ½è€ƒè™‘åšå˜æ›´ï¼Œå› ä¸ºåªæœ‰åšå˜æ›´æ‰æœ‰ä¿¡å¿ƒè¯´ï¼Œè¿™ä¸ªå˜æ›´æœ‰ä¸€ä¸ªå›å½’æµ‹è¯•ï¼Œä¸ä¼šå¯¼è‡´ä¹‹å‰çš„ä»£ç å¤±è´¥æ‰ã€‚æˆ‘åªæ˜¯ä¸¾ Chunk æ¯”è¾ƒå°çš„æ˜æ˜¾çš„ä¾‹å­ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¾‹å­æ²¡æœ‰åˆ†äº«ã€‚&lt;br/&gt;&lt;/p&gt;&lt;p&gt;è¿˜æœ‰åœ¨è¿™ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šå‘ç°å¾ˆå¤šæˆ‘ä»¬è®¤ä¸ºä¸ç¬¦åˆé¢„æœŸçš„ç°è±¡ï¼Œå¦‚æœä¸ä»”ç»†è°ƒæŸ¥è¿™ä¸ªç°è±¡ï¼Œå¾ˆå¤šæ—¶å€™ä¼šè¢«å¿½ç•¥æ‰ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å‡ºç° Errorï¼Œåœ¨è–›å®šè°”å¹³å°ä¼šç›´æ¥æŠŠ Error å‘åˆ°é‚®ç®±ï¼Œä¼šå¼ºåˆ¶ä½ çœ‹ Errorï¼Œå¿…é¡»æŠŠè¿™ä¸ªäº‹æƒ…è°ƒæŸ¥æ¸…æ¥šä¸”æœ‰ä¸€ä¸ªè¯´æ³•ï¼Œæ‰å¯ä»¥ç»§ç»­è¿è¡Œèµ·æ¥ã€‚è¿™ç§å·¥ä½œæµç¨‹ç¨‹åœ¨è¿‡å»ä¸€ä¸¤å¹´è®©æˆ‘ä»¬å‘ç°éå¸¸å¤šéšå«åœ¨æˆ‘ä»¬ä»£ç é‡Œé¢é•¿è¾¾å‡ å¹´çš„ Bugï¼Œå®ƒçš„ç°è±¡è¡¨ç°å‡ºæ¥å¾ˆåƒæ˜¯æ­£å¸¸çš„ç½‘ç»œæ•…éšœï¼Œå› ä¸ºå¤§å®¶è®¤ä¸ºå‡ºç°ç½‘ç»œæ•…éšœæˆ–è€…å­˜å‚¨æ•…éšœå¾ˆå¸¸è§ï¼Œé€šå¸¸è¿™ç§æŠ¥é”™å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œä½†æ˜¯å¯èƒ½æ˜¯éšå«å¾ˆå¤§çš„é—®é¢˜ï¼Œå®é™…ä¸Šå¾ˆå¯èƒ½æ˜¯ä»£ç  Bug å¯¼è‡´çš„ã€‚&lt;/p&gt;&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªæ•™è®­æ˜¯æµ‹è¯•æ˜¯å®è·µæ€§çš„ä¸œè¥¿ï¼Œæ€ä¹ˆæ ·çš„æµ‹è¯•æ‰æ˜¯ç¬¦åˆè¿™ä¸ªç³»ç»Ÿçš„ã€‚ç°åœ¨å¤–éƒ¨ä¹Ÿæœ‰å¾ˆå¤šç†è®ºï¼ŒåŒ…æ‹¬ Chaos ç­‰æ–¹æ³•ï¼Œéƒ½éœ€è¦å¯¹ä½ çš„ç³»ç»Ÿåšä¸€ä¸ªæ·±å…¥äº†è§£ä¹‹ååšä¸€ä¸ªå®šåˆ¶åŒ–ã€‚å°±åƒä½ ä¼šæƒ³åˆ°è¦æ³¨å…¥ä¸€äº›éšæœºçš„é”™è¯¯ï¼Œä½ ä¹Ÿå¯èƒ½ä¼šè€ƒè™‘åˆ°å‡çº§è¿™ä¸€å—ä¹Ÿè¦æœ‰æµ‹è¯•ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€äº›å®¢æˆ·ä¼šé‡åˆ°å¯èƒ½å‡çº§ä¹‹å‰æ²¡æœ‰é—®é¢˜ä½†å‡çº§ä¹‹åä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºå‡çº§æ˜¯ä¸€ä¸ªæ”¹åŠ¨å¼çš„è¡Œä¸ºï¼Œæ‰€ä»¥å‡çº§çš„æ—¶å€™ä¹Ÿè¦åšä¸€äº›ç›¸åº”çš„æµ‹è¯•ï¼Œä¿è¯å‡çº§ä¹‹åæ—§æ•°æ®åœ¨æ–°çš„é›†ç¾¤ä¸Šèƒ½ä¸èƒ½è·‘å¥½ã€‚å…¼å®¹æ€§æµ‹è¯•æ˜¯ä¸ªå¾ˆå¤§çš„è¯é¢˜ï¼ŒåŒ…æ‹¬æ€§èƒ½æ˜¯å¦å›é€€ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p&gt;è¿˜æœ‰å‹æµ‹å’Œå¹¶è¡Œæµ‹è¯•ï¼Œè¿™ä¸€æ–¹é¢æœ‰å¾ˆå¤šé—®é¢˜æ˜¯å‡ºç°åœ¨è¾¹ç•Œæ¡ä»¶çš„ï¼Œä½ çš„æ•´ä¸ªç³»ç»Ÿæ— è®ºå“ªä¸€ä¸ªæ¨¡å—ï¼Œåœ¨å‡ºç°èƒ½åŠ›åˆ°äº†ä¸€ä¸ªè¾¹ç•Œçš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰æƒ³åˆ°ï¼Œå¯¹æ¯ä¸€æ¨¡å—åŠ å‹ï¼Œæ¥çœ‹å®ƒçš„è¡Œä¸ºå¯¹ä¸å¯¹ã€‚&lt;/p&gt;&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªæˆ‘è§‰å¾—ä¹Ÿå¾ˆé‡è¦çš„ä¸€ä¸ªæµ‹è¯•çš„ç±»å‹å«åšç¨³å®šæ€§æµ‹è¯•ã€‚ç¨³å®šæ€§æµ‹è¯•çš„æ„æ€å°±æ˜¯è¯´ä½ çš„é›†ç¾¤ä»é›¶å¼€å§‹ä¸šåŠ¡æ­£å¸¸çš„å†™æ˜¯ä¸æ–­æ‰©å¼ åˆ°å‡ ç™¾ T ç”šè‡³åˆ° PB çº§ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¿è¯å†™å…¥çš„å»¶è¿Ÿæˆ–è€…è¯»å–çš„å»¶è¿Ÿä¸ä¼šå› ä¸ºæ‰©å¼ è€Œå¯¼è‡´å¾ˆæ˜æ˜¾çš„ä¸‹é™ã€‚è¿˜æœ‰ä¸€ä¸ªæ–¹é¢æ˜¯ç³»ç»Ÿæœ¬èº«é›†ç¾¤å®¹é‡æ¯”è¾ƒç¨³å®šï¼Œä½†æ˜¯ä¸»è¦çš„æ˜¯ workload æ˜¯è¯»ï¼Œåªè¦æµé‡ä¸ä¸Šæ¶¨æˆ‘ä»¬å¿…é¡»ä¿è¯è¯»æ˜¯ç¨³å®šï¼Œè¿™å°±æ˜¯ç¨³å®šæ€§æµ‹è¯•ã€‚&lt;/p&gt;&lt;p&gt;å› ä¸ºæˆ‘ä»¬çš„æ•°æ®åº“æ˜¯ä»¥ç»Ÿè®¡ä¿¡æ¯ä½œä»£ä»·ä¼°ç®—çš„ï¼Œæ‰§è¡Œè®¡åˆ’æœ‰å¯èƒ½éšç€é›†ç¾¤çš„è¿è¡Œå‘ç”Ÿä¸€äº›æ”¹å˜ï¼Œè¿™äº›æ”¹å˜ä¼šä¸ä¼šå¯¼è‡´å®¢æˆ·ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿè¦åŠ ä¸€äº›æµ‹è¯•ã€‚&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Q&amp;amp;A&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæ‚¨å¥½ï¼Œé—®ä¸€ä¸‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¦‚ä½•ç›‘æ§è¿™ä¸ªæ–¹é¢ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šé€šå¸¸ä¸ä¼šå…³æ³¨è¿™ä¸ªäº‹æƒ…ï¼Œé€šå¸¸å…³æ³¨çš„æ˜¯å†…å­˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šå†…å­˜æ³„éœ²ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šå¯ä»¥ç®—æ˜¯ Goroutine æ³„éœ²ã€‚ç­‰ä½ å‘ç°çš„æ—¶å€™å·²ç»æ³„éœ²å¾ˆå¤šäº†ã€‚ä¸¤ä¸ªæŒ‡æ ‡ï¼šä¸€ä¸ªæ˜¯æ•°é‡ï¼Œä¸€ä¸ªæ˜¯å†…å­˜å¤§å°ã€‚æ•°é‡å¯èƒ½æ˜¯å¯¹çš„ï¼Œå¦‚æœè´Ÿè½½ç‰¹åˆ«å¤šï¼Œroutine æ•°é‡å½“ç„¶å¤šã€‚ä½ çš„å†…å­˜æ­£å¸¸æƒ…å†µä¸‹ä¼šä¸€ç›´ä¸Šï¼Œä½†æ˜¯ä¸ä¼šå†ä¸‹æ¥äº†ï¼Œè¿™ä¸ªè‚¯å®šæ˜¯ä¸€ç§ç±»å‹çš„æ³„éœ²ï¼Œå½“ç„¶å†…å­˜ä¹Ÿå¯èƒ½æ³„éœ²ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæ£€æŸ¥ goroutine æ³„éœ²æ£€æŸ¥å¾—å‡†å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬ CI æ˜¯æŒç»­è·‘çš„ï¼Œæ¯ä¸€ä¸ªä¿®æ”¹éƒ½ä¼šè·‘ CIï¼Œè¢«å®ƒè·‘å‡ºæ¥çš„æ¦‚ç‡å¾ˆå¤§ï¼Œä¸€æ—¦å‡ºç°è¿™ä¸ªé—®é¢˜ä¸€å®šä¼šæŸ¥ï¼Œå¿…é¡»ç¡®è®¤æˆ‘è¿™ä¸ªåˆ°åº•æ˜¯ test case å¯¼è‡´è¯¯åˆ¤æ–­è¿˜æ˜¯è¯´æ˜¯çœŸçš„æ³„éœ²ã€‚å¦‚æœæ˜¯è¯¯åˆ¤æ–­è¦ä¿®æ”¹ test caseï¼Œå¦‚æœæ³„éœ²å¿…é¡»æŠŠ routine å›æ”¶ï¼Œä¸èƒ½ä¸å›æ”¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå’±ä»¬æ•°æ®åº“æ˜¯åˆ†å¸ƒå¼æ•°æ®åº“å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šå¯¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šåˆ†å¸ƒå¼æ•°æ®åº“ä¸åŒçš„æ•°æ®åº“ä¹‹é—´ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼Œå¦‚ä½•åŒæ­¥åˆ°åˆ«çš„æ•°æ®åº“ä¸­å‘¢ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»Šå¤©æ²¡æœ‰è¿‡å¤šäºä»‹ç» TiDBï¼Œæˆ‘ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹ TiDB çš„æ¶æ„ï¼Œæ•°æ®å­˜å‚¨å…¶å®æ˜¯å­˜åœ¨ TiKV çš„ï¼Œæ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œæ˜¯æœ‰çŠ¶æ€çš„ï¼Œå®ƒçš„æ•°æ®åƒåˆšåˆšä½ è¯´çš„ï¼Œå†™åˆ°ä¸€ä¸ª Aï¼Œå¹¶ä¸ä¼šå¤åˆ¶æ‰€æœ‰çš„å­˜å‚¨èŠ‚ç‚¹ï¼Œå®ƒæ˜¯å­˜å‚¨åœ¨æˆ‘ä»¬å«åš Region çš„é€»è¾‘å•ä½ä¸Šï¼Œå°±æ˜¯å†™åˆ° Region ä¸Šé¢å»äº†ï¼Œå†ç”± Raft åè®®æ¥å¤åˆ¶åˆ°ä¸åŒçš„å‰¯æœ¬ä¸­ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šä½ ä»¬è¿™ä¸ª A æ˜¯ç”¨ Raft åè®®çš„ï¼Œç”¨æ²¡æœ‰ç”¨åˆ†å¸ƒå¼é”ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬æ€è·¯çš„å®ç°æ˜¯ä¸€ä¸ªä¹è§‚çš„å®ç°ï¼Œæ˜¯ä¸¤ä¸ªé˜¶æ®µæäº¤çš„å®ç°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªé”ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰è®¤ä¸ºçš„ç­‰å¾…é”ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šå…³äºæµ‹è¯•çš„é—®é¢˜ã€‚ä¸€ä¸ªæ˜¯ Failpoint å¾ˆæœ‰æ„æ€ï¼Œæ‰“ç®—è¯•ä¸€è¯•ï¼Œæœ‰æ²¡æœ‰å»ºè®®ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹åŠ ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½åŠ äº†ï¼Œæˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®å¯¹ä»£ç ä¾µå…¥è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæ‰€ä»¥æƒ³é—®æœ‰æ²¡æœ‰å»ºè®®ï¼Ÿç¬¬äºŒä¸ªä½ ä»¬å¹³å°æœ‰æ²¡æœ‰å¯¹äºä¸åŒçš„é…ç½®éšæœºäº§ç”Ÿä¸åŒé…ç½®çš„ç»„åˆï¼Œç„¶åæå–åšä¸€äº› test caseã€‚æœ€ç®€å•çš„è¿™ä¸ªå¯ä»¥å¼€æºæˆ‘ä»¬ç”¨å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šè¿™ä¸ªéšæœºæœ‰æ­£åœ¨åšã€‚åˆšåˆšä½ è¯´çš„ Failpoint æ€ä¹ˆæ³¨å…¥å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ TiDB é‡Œé¢çš„æµ‹è¯•ä»£ç ï¼Œå¾ˆå®¹æ˜“æœåˆ°ï¼Œæœå…³é”®è¯å°±æ˜¯ Failpointï¼Œå°±èƒ½æœåˆ°æˆ‘ä»¬æ³¨å…¥æ‰€æœ‰çš„ä»£ç ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ª PRï¼Œæ˜¯æŠŠæˆ‘ä»¬çš„ Gofail æ›¿æ¢äº† Failpointã€‚å¯¹äºä»£ç çš„ä¾µå…¥æˆ‘æ˜¯è¿™ä¹ˆç†è§£ï¼Œæˆ‘å®æ„¿å¤šå†™ä¸€ç‚¹çš„ä»£ç ï¼Œä¹Ÿä¸æ„¿æ„ä»£ç çœŸçš„åœ¨å®¢æˆ·é‚£é‡Œç»™æˆ‘å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å®æ„¿æ˜¯è¿™æ ·ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šå…³äºé‚£ä½åŒå­¦é—®è¿‡ï¼Œæ—¢ç„¶ä½ æœ‰ Rutï¼Œä½ æ€ä¹ˆå†™ï¼Œä½ å…³æ³¨æ˜¯ UT çº§åˆ«è¿˜æ˜¯ Integrationï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬ç”¨äº† Gofailï¼Œå®ƒå¯ä»¥é€šè¿‡ HTTP æ¥å£è§¦å‘ï¼Œåœ¨é›†æˆæµ‹è¯•ä¹Ÿå¯ä»¥è°ƒ API è§¦å‘ Failpointã€‚æµ‹è¯•ä¹‹å‰å¯ä»¥å…ˆè°ƒ HTTP æ¥å£ï¼Œå®ƒæ˜¯æ¯”è¾ƒå®Œæ•´çš„ï¼Œä¹Ÿå¯ä»¥åšé›†æˆæµ‹è¯•ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šè¿™ä¸ªå¤±è´¥ç»“æœæ˜¯äº‹å…ˆæ‰‹åŠ¨å†™æ˜¯å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šå°±æ˜¯ä½ çš„æ–¹æ¡ˆæœ¬èº«æ˜¯çŸ¥é“çš„ã€‚é¢„æœŸå°±æ˜¯å†™ test case çŸ¥é“ä½ çš„ case ä¼šå¤±è´¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šå…³äºæœ‰å¯èƒ½æœ¬èº«ä»£ç æœ‰é—®é¢˜æœ‰æ€ç´¢ï¼Œä½†æ˜¯å¾ˆå¸¸è§æ˜¯æµ‹è¯•é‡Œé¢æœ‰é—®é¢˜ï¼Œè¿™ç§æ¯”è¾ƒä¸å®¹æ˜“å¤ç°ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘æ²¡æœ‰ä»”ç»†æƒ³è¿‡è¿™ä¸ªã€‚æˆ‘æ²¡å¤ªå¬æ‡‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹æ•°æ®è¡¨é‚£ä¸€åˆ—æ•°æ®åªæœ‰ ABCD å•å­—ç¬¦ï¼Œçªç„¶ä¿®æ”¹æŸä¸€åˆ—æŸä¸€è¡Œæ•°æ®ï¼Œå­—ç¬¦é•¿äº†ï¼ŒæŠŠ A æ”¹æˆ ABCï¼Œå˜æˆå­—ä¸²ä½ è¿™ä¸ª Chunk è¦å˜å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬ Chunk åªæ˜¯è¯»è¦ç”¨ï¼Œä¿®æ”¹çš„æ—¶å€™å…¶å®ä¸èµ° Chunk ã€‚ä¿®æ”¹ç›´æ¥èµ° KV æ¥å£ï¼Œä¸ä¼šèµ° Chunkã€‚Chunk æ˜¯å› ä¸ºæœ‰å‡½æ•°è®¡ç®—çš„æ—¶å€™ç”¨åˆ° Chunkï¼Œæ‹¿æ•°æ®éœ€è¦å¤§é‡çš„å†…å­˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™çš„æ—¶å€™ä¸éœ€è¦åšè¿™ä¸ªã€‚æˆ‘ä»¬å†™çš„è¯ç›´æ¥å°±æ˜¯ KVã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šè¿™ä¸ªå»¶ä¼¸ä¸‹å»ï¼Œæˆ‘ä¸€è¾¹æ”¹äº†ï¼Œç›¸å½“äºé‡æ–°ç”Ÿæˆä¸€ä»½ Chunkï¼Œä½ è¿™é‡Œæ”¹ä¸æ˜¯ç›´æ¥å†™è¿™ä¸€ä¸ªè¡¨ï¼Œæ˜¯å†™ KVï¼ŒKV å†™å®Œäº†è¦é‡æ–°å‡ºæ•°æ®ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šè¿˜æ˜¯è·Ÿä¸Šé¢ä¸€æ ·ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹åˆ—æ•°æ®çš„è¯ï¼ŒChunk è¿™ä¸ªç»“æ„å…¶å®å¹¶ä¸å¤ªé€‚åˆ&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæˆ‘æƒ³äº†è§£ä¸€ä¸‹ TiDB è®¡ç®—æ–¹æ³•çš„é—®é¢˜ï¼ŒPD å¤„ç†ä¸€ä¸ªå¤æ‚çš„æ•°æ®æŸ¥è¯¢çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰é›†ç¾¤è®¡ç®—çš„èƒ½åŠ›ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šPD ä¸ºä»€ä¹ˆè¦å¤„ç†å¤æ‚è®¡ç®—å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæˆ‘ä¸æ˜¯ç‰¹åˆ«äº†è§£ï¼Œæˆ‘ä¹‹å‰å°è±¡ä¸­ PD æ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„æŸ¥è¯¢ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæŸ¥è¯¢æ˜¯ TiDB åšçš„ã€‚ä½ ç»§ç»­è¯´ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæˆ‘å°±æ˜¯æƒ³äº†è§£ TiDB åœ¨å¤„ç†ä¸€ä¸ªéå¸¸å¤æ‚çš„æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šåˆ©ç”¨å¤šå°é›†ç¾¤çš„è®¡ç®—èƒ½åŠ›å—ï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬çš„è®¡ç®—æ˜¯å¯ä»¥ä¸‹æ¨åˆ°å­˜å‚¨èŠ‚ç‚¹å»çš„ï¼Œå¦å¤–ç›®å‰æˆ‘ä»¬æœ‰ä¸€ä¸ªå¼•æ“å«åš TiFlashï¼Œå®ƒå¯ä»¥å¤„ç†æ›´å¤æ‚çš„ AP æŸ¥è¯¢ï¼Œç›®å‰ TiDB çš„è®¡ç®—è¿˜æ˜¯æ²¡æœ‰èµ° MPP æ¶æ„ï¼Œè¿˜æ˜¯åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šè®¡ç®—ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæˆ‘æƒ³å†é—®å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œ TiDB æ˜¯å¦æœ‰åŒæ­¥ MySQL çš„æ–¹æ¡ˆï¼Ÿ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬ Binlog ç»„ä»¶ä¼šæŠŠä¿®æ”¹éƒ½åå‡ºæ¥ï¼Œæ ¼å¼ä¸æ˜¯ MySQL çš„æ ¼å¼ï¼Œ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªä¿®æ”¹ï¼Œç»™å†™å…¥åˆ°ä¸‹æ¸¸ MySQL&lt;/p&gt;&lt;p&gt;&lt;b&gt;æé—®ï¼šæ„æ€æ˜¯è‡ªå·±è§£æ binlog?&lt;/b&gt;&lt;/p&gt;&lt;p&gt;å§šç»´ï¼šæˆ‘ä»¬å·²ç»æœ‰å·¥å…·äº†ï¼Œå¯ä»¥åšè¿™ä¸ªäº‹æƒ…ã€‚&lt;/p&gt;&lt;p&gt;&lt;i&gt;æœ¬æ–‡æ ¹æ®å§šç»´è€å¸ˆåœ¨ GopherChina 2019 å¤§ä¼šä¸Šçš„æ¼”è®²æ•´ç†ã€‚&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;&lt;b&gt;åŸæ–‡é˜…è¯»ï¼š&lt;/b&gt;&lt;/i&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/pU866x5iYQEIBRWigu95Ag%3Fscene%3D25%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-1642b6b901f264e54dd0c94f9054ef0d_180x120.jpg&quot; data-image-width=&quot;904&quot; data-image-height=&quot;384&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TiDB çš„ Golang å®è·µ&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>ZoeyZhai</author>
<guid isPermaLink="false">2019-09-03-80916775</guid>
<pubDate>Tue, 03 Sep 2019 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
