<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>论如何优雅地复制期权之OBPI策略</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/21646736">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/bf765f155bfdd2a26924a3f407a3eb40_r.jpg" alt=""></div><p>在机器学习、数据挖掘大行其道的今天，我再在这里给大家分享六、七年前股指期货刚推出时国内比较火爆的策略似乎是比较LOWBEE的一件事，一开始我也是拒绝的，但是拒绝并不代表拒绝成功，正如我抗议，抗议无效一样。如果把机器学习比作阳春白雪，我这种只能称为下里巴人了。但能够玩转阳春白雪的人毕竟是少数，所以让我们继续沿着革命的道路前进。不过想到上次<a href="https://zhuanlan.zhihu.com/p/21404073" data-title="ARMA+GARCH交易策略在沪深300指数上的运用" class="">ARMA+GARCH交易策略在沪深300指数上的运用</a>这篇文章铩羽而归，内心其实是有点小忐忑的，会不会再一次折戟沉沙，毕竟大家喜欢，才能体现科普文章的价值。</p>在正式介绍OBPI(Option Based Portfolio Insurance)之前，其实本来是有必要介绍一些与之相关的概念的，比如CPPI(Constant Proportion Portfolio Insurance), TIPP(Time Invariant Portfolio Protection)以及Constant Mix，考虑到社区其实已经存在相关文章了，这里就不再赘述了，但是觉得依然有必要将之前自己写过的这方面的策略做一个简单地列示，以方便大家更好地比较，能够更清楚地理解其中的关系，避免混淆。<p><a href="https://www.ricequant.com/community/topic/1121/" data-title="资产组合不同动态调整方法的简单对比---基于CPPI vs. TIPP vs. Constant Mix" class="" data-editable="true">资产组合不同动态调整方法的简单对比---基于CPPI vs. TIPP vs. Constant Mix</a><br></p><p>言归正传，我们先来看看OBPI策略是个何方神圣。OBPI，即基于期权的组合保险策略，其最初由Leland &amp; Rubinstein (1976)提出，核心思想是将传统资产与普通期权结合起来以达到一个有限的风险组合暴露度，规避大盘的下行风险，同时又能够一定程度上获取大盘上涨时带来的回报。</p><p>OBPI设计初衷由于是涉及到期权交易的，故其原始的构建方式主要有两种：</p><p><b>一、风险资产 + 看跌期权</b></p><p><b>二、无风险资产 + 看涨期权</b></p><p>方法一主要是通过持有分散化的风险组合来获取大盘上涨时的收益，同时通过持有相应的看跌期权来避免大盘下跌时导致的泥沙俱下的惨烈场景，使得初始资产维持在一定水平之上。方法二则是利用无风险资产——一般是国债来维持最低的资产水平，其值等价于未来的期望资产水平贴现到当前的值，然后将初始金额减去贴现值后得到的金额购买相应的看涨期权以参与到大盘上涨时带来的收益。原理都是很简单的，并不难理解。</p><p>但是这么一个保本策略如果直接应用在我国资本市场，就会有一点水土不服了，具体原因也不难理解，归纳大致如下：</p><p>1. 我国期权市场目前才刚刚起步，15年2月9号才开始上市第一个期权产品——上证50ETF期权，其覆盖的标的范围有限，并不能很好地对冲大部分的组合风险。因此不能找到恰好完全对应的期权标的是最大的问题。</p><p>2. 其次，期权的门槛进入较高，初级投资者基本是无法参与到期权交易的，因此初级投资者想要通过期权来构建自己的保本策略就会受到一定程度的影响。当然这个理由有点牵强附会。</p><p>那既然我们无法直接通过期权交易来实施我们的保本计划，那就只好另辟蹊径了。但别担心，总会有聪明的人士为我们想出办法。所以接下来我要介绍的就是如何通过<b>动态调整</b>风险资产和无风险资产的持仓来复制看涨期权，从而达到方法二的效果。其收益图因此可以表示为：</p><img src="https://pic3.zhimg.com/667ac4c97c6255c902468747b7d53e29_r.png" data-rawwidth="844" data-rawheight="549"><p>在开始实施期权复制之前，我们首先要理解我们为什么能够那样做？支撑我们那样做的理由是什么？</p><p>为此我们回头看看OBPI的初始构建方式，以其第一种方法举例，其是风险资产加上看跌期权的组合，那么这两种资产的特性是什么呢？风险资产一般我们用股票替代，当然使用期货也是可以的，但是它们都有一个共同特点，就是其是线性产品，因而其delta值始终为1，而期权是非线性产品，其delta值居于-1到1之间，其中的看跌期权的delta值在（-1, 0）之间，因此OBPI策略的初衷便是通过正值delta与负值delta产品的相互组合构造出一个自己期望的delta头寸。如果是为了完全对冲掉股票价格微小波动带来的风险，那么便可以直接构建零delta组合，即delta中性。举例来说，如果你持有100股<a href="https://www.ricequant.com/community/category/4/%E7%AD%96%E7%95%A5-%E7%A0%94%E7%A9%B6" data-title="Ricequant" class="" data-editable="true">Ricequant</a>股票，那么你便有100个delta的风险暴露。如果你想股票下跌时，能避免自己的财产也相应发生损失，则可以买入Ricequant的看跌期权，锁定下行风险。这个时候如果看跌期权的delta值是-0.5，则你可以买入2份看跌期权，一份期权对应一百股标的股票，此时便能够基本完全消除股票价格上涨和下降带来的风险，因为此时组合达到了暂时的delta中性，但是由于股价是不断更新的，delta值从而也是不断变化的，所以需要不断地动态调整头寸。</p><p>那么问题来了，delta到底是个什么鬼？为什么它对我们组合的构建影响这么大？那这里偷个懒，关于delta的基本知识大家就请自行Google了，社区里也有很多介绍Greeks的，毕竟系统地学习一下希腊字母还是很有必要的。补充一句，这里我只考虑了一阶delta值，如果要更严格地对冲风险，其实二阶gamma值也是需要考虑的，但此处为了简洁，就不再赘述了。</p><p>明白了OBPI主要是通过改变组合delta值来实现风险管理后，我们便可以通过动态调整组合delta值来复制期权的效果了。这里我们以最简单的股票指数+国债的形式来说明，虽然众多大券商机构在2010年股指期货推出时已经纷纷尝试了使用股指期货作为风险资产来代替股票动态复制期权。与股票相比，由于股指期货采用保证金进行杠杆交易，因此和股票相比，相同市值的风险资产条件下，股指期货占用的资金更少，能够使用结余下来的资金进行绝对收益投资，进一步放大收益。</p><p><b>动态复制原理</b></p><p>我们这里以方案二为例进行粗略的推导：</p><equation>V_{t} = ZC * e^{rt} + \lambda *C_{t}
         </equation><br><equation>V_{t} = ZC * e^{rt} + \lambda * [V_{t} *N(d_1)*S_{t}-N(d_2)*ZC * e^{rt} ]  </equation><br><equation>V_{t} = [\lambda * V_{t} *N(d_1)]*S_{t} + [1 - \lambda * N(d_2)]*ZC * e^{rt} 
</equation><equation>d_1=\frac{ln\frac{V_t}{ZC*e^{rt}} +0.5*\sigma^2*(T-t)}{\sigma*\sqrt{(T-t)} } </equation><equation>d_2=d_1-\sigma*\sqrt{T-t} </equation><p><equation>\lambda=max\left\{ \frac{V-ZC}{C} ,0 \right\} =max\left\{ \frac{V-ZC}{V*N(d_1)-ZC*N(d_2)}  ,0\right\} </equation>——参与率<br></p><p><equation>[V_{t} *N(d_1)*S_{t}-N(d_2)*ZC * e^{rt} ]  </equation>——看涨期权的复制组合<br></p><p>关于各个字母代表的含义，这里简单地列举一下：</p><p><equation>V</equation>是投资组合的价值，<equation>S</equation>代表分散化的风险资产组合，<equation>T</equation>代表投资组合存续期，<equation>\sigma
</equation>代表风险资产的隐含波动率，<equation>ZC</equation>代表零息债，<equation>N(\bullet )</equation>代表累计概率，<equation>\lambda
</equation>代表参与率。</p><p>关于期权复制的具体推导过程，详见<b>Financial Calculus—Baxter&amp;Rennie(2000) Cambridge University Press， Cambridge</b>。在该书Black-Scholes Model一节，详细说明了如何利用股票和债券复制期权，因为涉及到测度转化，随机微分方程等随机过程的知识，这里就跳过了，有兴趣的同学欢迎深挖。最后安利一下，这本书可是比肩John-Hull那本Bible的.</p><p>在介绍完这些核心原理之后，我们来看看期权复制过程有什么特点。</p><p>1. 如果从纯理论角度出发，动态复制的成本应该是恰好等于购买相应期权的权利金支出的。但如果交易越频繁,尽管复制效果较好,但成本也会越高。当临近到期时,如果标的资产价格处于执行价格附近,此时期权的gamma值较大,delta值受到标的资产价格变动较为敏感,如果此时标的资产价格在执行价附近反复震荡,那么我们的策略调整头寸的交易量也会‘非常可观’,将会使得复制成本急剧上升，这一点是需要注意的。</p><p>2. 参与率与波动率关系密切：参与率是期权的份数，而波动率与期权费正相关，因此在保本比率既定的情况下，参与率与波动率负相关。具体的公式表示，这里就不再列举，因为很简单。</p><p>3. 风险资产的占比随着市场的走强而上升，随着市场的走弱而降低，同时也随着保本比率的降低而增加，也是追涨杀跌的主。</p><p>为了大家能够更好地理解其内在逻辑，我在Ricequant上分享了一个研究板块的内容，其大致是OBPI策略思想的具体实现形式，若有兴趣，欢迎大家猛戳：<a href="https://www.ricequant.com/community/topic/1443/" data-title="基于期权复制的保本策略——OBPI" class="" data-editable="true">基于期权复制的保本策略——OBPI</a>，如果有什么不合理的地方，也烦请批评指正！</p><p>废话了这么多，我们现在来看看实际中的该保本策略的效果到底如何。为了查看在不同时期的市场表现，这里依然将市场分为三种类型：牛市、熊市以及震荡市。保本比率设为95%。回测效果如下：<br></p><p><b>一、大牛市</b></p><p><img src="https://pic1.zhimg.com/1b209440c476b3c161677f72813f7b35_r.png" data-rawwidth="2736" data-rawheight="1572"><b>二、大熊市</b></p><br><img src="https://pic3.zhimg.com/f3561895b7f4c9ed42605fbbfd7878e0_r.png" data-rawwidth="2736" data-rawheight="1572"><b>三、震荡市</b><p><b><img src="https://pic1.zhimg.com/bec8c8fa7aeb0ed698959e3a73e84f7b_r.png" data-rawwidth="2736" data-rawheight="1572">观察回测结果，不难发现：</b></p><p><b>1. 大牛市中保本策略是大幅跑输市场的，但是风险资产的投资比重也是不断上升的，分享了一部分市场走强带来的收益，但其回撤真是小得让人嫉妒。</b></p><p><b>2. 大熊市中OBPI保本策略是能够打败市场的，但是其也小幅亏损了，由于保本比率设置为95%，所以其亏损幅度也是满足要求的。并且在股灾2.0期间，风险资产的占比接近于0，基本完全持有国债了，所以其表现还是可圈可点的。</b></p><p><b>3. 震荡市中，保本策略小幅盈利，虽然跑输了大盘，但是走的比较平稳，风险资产与无风险资产的仓位一直都保持得比较稳定。<br></b><br>说明一下，这里的交易频率是每日调仓，风险资产的波动率以及无风险利率都是直接设为了一个常数，在不同时期没有做相应更改，这些参数其实都是有进一步优化的空间的。最后的最后，如果有时间，下次会加上使用股指期货作为风险资产的研究，希望能够将OBPI策略的动态复制这一课题做得更加具体、更加完善一些。具体回测请戳：<a href="https://www.ricequant.com/community/topic/1443/" class="" data-title="莫名戳中笑点:)" data-editable="true">莫名戳中笑点:)</a></p><p>最后给大家提供一个学以致用的好机会：<a href="https://www.ricequant.com/contests" data-editable="true" data-title="百万实盘大奖赛，等你来战！">百万实盘大奖赛，等你来战！</a></p><p>谢谢大家的阅读，如有错误，烦请指正！&gt;_&lt;</p><p>你知道嘛，你点赞的姿势好性感！</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
