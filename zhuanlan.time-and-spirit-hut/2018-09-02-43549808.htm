<div class="title-image"><img src="https://pic4.zhimg.com/v2-10c6913d0bc44f08fed6d57e31af7e30_r.jpg" alt=""></div><blockquote>前言：<br>从2018年开始，我每天会花1个小时关注Rust社区动态，并且在<a href="https://link.zhihu.com/?target=http%3A//rust.cc">http://rust.cc</a>论坛、<a href="https://link.zhihu.com/?target=https%3A//t.me/rust_daily_news">tg channel</a>、GitHub都开通了Rust每日新闻，分享我每天的见闻，偶尔也夹杂了一些个人的观点。半年过去了，Rust每日新闻已经成为了Rust社区群大家每天必看的内容。今天突然想到，在这个知乎专栏里，每周精选几篇Rust社区中的动态，和大家分享。分享的内容就不按时间排序了。<br><i>2018-09-02</i></blockquote><h2><b>官方新闻</b></h2><p><b>嵌入式工作组第10期报告</b></p><p>简要：</p><ul><li>嵌入式工作组开辟了新的Blog，可以RSS订阅</li><li>Nightly Rust已切换到lld用于Cortex-M的链接器</li><li>对cortex-m，cortex-m-rt和cortex-m-quickstart进行了更新</li><li>已支持aarch64-unknown-none！现在可以为64位ARM体系结构编写裸机Rust代码</li><li>embedded-hal生态系统库又有一些新的release库</li></ul><p><a href="https://rust-embedded.github.io/blog/2018-08-28-newsletter-10/">https://rust-embedded.github.io/blog/2018-08-28-newsletter-10/</a></p><p><br></p><p><b>Unsafe 代码导读会议总结</b></p><p>该会议是非技术性的，主要是讨论工作组进展</p><p>看来要提上日程了</p><p><a href="https://github.com/rust-rfcs/unsafe-code-guidelines/blob/master/meeting-notes/20180308.md">rust-rfcs/unsafe-code-guidelines</a></p><hr><h2><b>社区新闻</b></h2><p><b>Tokio已经开始支持async/await了</b></p><p>基于Rust Nightly版可用，目前仍为实验性支持，不过是个很好的开始</p><p><a href="https://tokio.rs/blog/2018-08-async-await/">https://tokio.rs/blog/2018-08-async-await/</a></p><p><br></p><p><b>Firefox的应用服务使用Rust和Kotlin</b></p><p><a href="https://github.com/mozilla/application-services">mozilla/application-services</a></p><p><br></p><p><b>亚马逊AWS对Rust的好评</b></p><p>亚马逊是RustConf 2018的金牌赞助商，来自多个AWS团队的成员参加了该会议。包括EC2 Nitro，CloudWatch和Amazon Linux。亚马逊已经在多个地方使用了Rust。</p><p>AWS推荐了一个Rust SDK ：  <a href="https://rusoto.org/">https://rusoto.org/</a></p><p>不出意外，AWS也会是RustConf 2019的金牌赞助商</p><p><a href="https://aws.amazon.com/blogs/opensource/rustconf-2018/">Rust Expands its Reach at RustConf 2018 | Amazon Web Services</a> </p><p>更多相关：</p><p>aws lambda api 和Rust的完整Demo</p><p><a href="https://github.com/richardanaya/aws-lambda-api-rust">richardanaya/aws-lambda-api-rust</a></p><p>顺便附上一个aws-lambda的Rust crate，其中包含了很多crate，可以将Rust中编写的程序直接作为AWS Lambda中的函数运行。</p><p>上面demo中基本调用该crate</p><p><a href="https://github.com/srijs/rust-aws-lambda">srijs/rust-aws-lambda</a></p><blockquote>感谢 @黑化的齿轮  补充<br>&gt;  前因： <a href="https://so-wh.at/entry/2018/01/21/173709">AWS Lambda Go without Go - so what</a><br>&gt;这个日本人最早研究了下aws lambda的go协议，然后搞出了纯rust的poc</blockquote><p><br></p><p><br></p><p><b>「国产软件之光」TiKV 进入了CNCF</b></p><p>今天，云原生计算基金会（CNCF）接受了TiKV进入CNCF Sandbox， 用于早期和持续发展的云原生项目。TiKV是一个由国内PingCAP公司开源的分布式事务键值数据库，基于Rust实现，由Raft（通过etcd）提供支持，并受到Google Spanner设计的启发，提供简化的调度和自动平衡，而不依赖于任何分布式文件系统。</p><p><a href="https://www.cncf.io/blog/2018/08/28/cncf-to-host-tikv-in-the-sandbox/">https://www.cncf.io/blog/2018/08/28/cncf-to-host-tikv-in-the-sandbox/</a></p><p><br></p><p><b>crates.io有大量crates名字被占用</b></p><p>这些crates的在同一时间被创建，并且描述完全相同，并且留有“WIP. Contact me if you want to use this name!”的消息。</p><p>这都是什么鬼？ 占这玩意能挣钱吗？</p><p><a href="https://www.reddit.com/r/rust/comments/9aaanw/cargo_crate_name_reservation_spam/">https://www.reddit.com/r/rust/comments/9aaanw/cargo_crate_name_reservation_spam/</a></p><p><br></p><p><b>Gitpod - GitHub的在线IDE支持Rust</b></p><p>Gitpod是一个在线IDE，可以从任何GitHub页面启动。 只需在任何GitHub-URL前加上“https：<a href="https://gitpod.io/#%E2%80%9D%EF%BC%8C%E6%88%96%E4%BD%BF%E7%94%A8%E6%88%91%E4%BB%AC%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E5%90%8D%E4%B8%BAGitHub%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%8C%89%E9%92%AE%E3%80%82">//gitpod.io#”，或使用我们的浏览器扩展为GitHub页面添加一个按钮。</a></p><p><a href="https://medium.com/gitpod/gitpod-gitpod-online-ide-for-github-6296b907a886">https://medium.com/gitpod/gitpod-gitpod-online-ide-for-github-6296b907a886</a></p><p><br></p><p><b>Go 2 草案发布</b></p><p>看了下，主要是增强了三方面：</p><ul><li>错误处理</li><li>错误值</li><li>泛型</li></ul><p><br></p><p>大致翻看了一下，看来Go 2的设计也是深受Rust的影响。</p><p>1. 错误处理方面，</p><p>引入了 handle err {}来简化之前的 if err !=nil {}之类的写法。这个受到Rust Result错误处理的启发，这样的好处就是可以把错误处理和业务逻辑区分开来</p><p><br></p><p>2. 错误值， 主要是增强错误检查和错误格式化。 </p><p>草案中加入了下面两个接口</p><code lang="go">package errors

type Wrapper interface {
  Unwrap() error
}

package errors

type Formatter interface {
  Format(p Printer) (next error)
}</code><p>通过实现此接口，可以自定义错误类型和错误格式。不由得想到了Rust里的Error trait。</p><p>3. 泛型</p><p>Go2泛型也是深受Rust影响，比如草案中的代码</p><code lang="go">
contract Equal(t T) {
  t == t
}

type Set(type T Equal) []T</code><p><br></p><p>contract声明了一种泛型约束，上面Equal表示，必须输入相等的类型。在Set 里使用 T Equal，表示对Set这个泛型进行Equal约束。</p><p>这让我想起了Rust的trait bound。</p><blockquote><b><i>有的人可能会说，怎么什么都往Rust上面扯呢？ 这个没办法啊，谁让草案里提到那么多Rust呢？</i></b></blockquote><p>更多细节： <a href="https://go.googlesource.com/proposal/+/master/design/go2draft.md">https://go.googlesource.com/proposal/+/master/design/go2draft.md</a> </p><p><br></p><p><b>有人给Flatbuffer提交了Rust绑定的PR</b></p><p>Flatbuffer是Google出品的高效跨平台序列化库，适用于游戏和其他内存受限的应用程序。</p><p><a href="https://github.com/google/flatbuffers/pull/4898">Port FlatBuffers to Rust by rw · Pull Request #4898 · google/flatbuffers</a></p><p><br></p><p><b>Xi-Editor的2号贡献者将离开Google</b></p><p>raphlinus是Xi-Editor的2号贡献者，在Google工作了11个年头，现在决定开启新的旅程，计划做一个音乐合成游戏？？？</p><p>但他还会继续在Xi-Editor中投入精力。</p><blockquote>可不要造谣说「Xi-Editor的主力开发都走了，要凉了」之类的话（之前有人造谣过Redox，还四处传播）</blockquote><p><a href="https://raphlinus.github.io/personal/2018/08/28/a-new-adventure.html">https://raphlinus.github.io/personal/2018/08/28/a-new-adventure.html</a> </p><p><a href="https://github.com/google/xi-editor">google/xi-editor</a></p><p><br></p><p><b>TrustNote Rust SDK 0.3发布</b></p><p>TrustNote是开源stackful协程库May的作者黄旭东供职的区块链公司，感兴趣的也可以关注下</p><p><a href="https://medium.com/trustnote/trustnote-rust-sdk-v0-3-0-is-released-b2ea72d68d0f">https://medium.com/trustnote/trustnote-rust-sdk-v0-3-0-is-released-b2ea72d68d0f</a></p><p><br></p><p><b>经过东东（黄旭东）亲自证实，这个TrustNode区块链项目，其所在团队已经被裁员。主要是因为资金链断裂。东东现在重新组织了团队开始新的创业。</b></p><p><b>看来现在区块链行业创业环境也比较艰难啊。</b></p><p><br></p><p><br></p><p><b>Coblox 链接所有的区块链</b></p><p>这个开源组织号称要链接所有的区块链，里面有几个开源项目是Rust实现的，可以关注下</p><p><a href="https://github.com/coblox">CoBloX</a></p><p><br></p><p><b>Mesalink  : 内存安全的OpenSSL兼容TLS库</b></p><p>之前介绍过，由美国百度产品，最近发布的0.7版本，并加上了这个介绍页面</p><p><a href="https://mesalink.io/">https://mesalink.io/</a> </p><hr><h2><b>博文与库</b></h2><p><br></p><p><b>调试Rust中的Rc &lt;T&gt;引用泄漏</b></p><p>librsvg作者发现该库出了两个Bug，泄漏了所有的SVG节点。主要问题出在Unsafe代码中。</p><p>该库中使用了Rc：</p><code lang="rust">pub struct Tree {
    // This is the Rc that was getting leaked
    pub root: Rc&lt;Node&gt;,
    ...
}</code><p>作者使用GDB监控了Rc的引用计数，最终检查出了内存泄漏的地方并得以修正。</p><p><a href="https://people.gnome.org/~federico/blog/debugging-reference-leak-in-rust.html">https://people.gnome.org/~federico/blog/debugging-reference-leak-in-rust.html</a></p><p><br></p><p><b>使用RwLock和Condvar示例</b></p><p><a href="https://tutorialedge.net/rust/using-rwlocks-and-condvars-rust/">https://tutorialedge.net/rust/using-rwlocks-and-condvars-rust/</a></p><p><br></p><p><b>为什么Rust的闭包有点难？</b></p><p><a href="http://stevedonovan.github.io/rustifications/2018/08/18/rust-closures-are-hard.html">http://stevedonovan.github.io/rustifications/2018/08/18/rust-closures-are-hard.html</a></p><p><br></p><p><b>Serde反序列化网卡地址为u64类型</b></p><p>作者记录和分析了他在反序列化网卡地址时碰到的问题，并给出了解决方法</p><p><a href="https://noyez.gitlab.io/post/2018-08-28-serilize-this-or-that-into-u64/">https://noyez.gitlab.io/post/2018-08-28-serilize-this-or-that-into-u64/</a></p><p><br></p><p><b>在Rust/ WASM 和JS中使用PARTIALLY-MAPPED (PMX)  </b></p><p>Partial-Mapped Crossover (PMX)是遗传算法中的一种交叉算子，叫部分映射</p><p>本文主要是使用Rust (wasm)和JS，结合PMX算子来解决经典的旅行商问题</p><p><a href="https://blog.x5ff.xyz/blog/ai-rust-javascript-pmx/">https://blog.x5ff.xyz/blog/ai-rust-javascript-pmx/</a></p><p><br></p><p><b>代码统计工具性能测试比较</b></p><p>对Redis仓库进行统计为例：</p><ul><li> tokei  32.7 ± 1.4  30.0…36.2</li><li>scc  50.5 ± 1.3  48.3…53.3</li><li>loc  29.4 ± 5.0  23.3…45.9</li><li>cloc  1288.4 ± 6.3  1276.1…1296.5</li></ul><p><a href="https://github.com/Aaronepower/tokei/blob/master/COMPARISON.md">Aaronepower/tokei</a> </p><p><br></p><p><b>Vulkan指南</b></p><p><a href="https://github.com/bwasty/vulkan-tutorial-rs">bwasty/vulkan-tutorial-rs</a></p><p><br></p><p><b>「机器学习」 模块化的单一或多目标优化求解器 MOP 发布</b></p><p><a href="https://www.reddit.com/r/rust/comments/9abuys/announcing_mop/">https://www.reddit.com/r/rust/comments/9abuys/announcing_mop/</a></p><p><br></p><p><b>氧化 sourmash ：WebAssembly</b></p><p>这是 氧化 sourmash系列文章第二篇，</p><p>将代码库转换为Rust的过程在Rust社区中称为“氧化（Oxidizing）”</p><p><a href="https://blog.luizirber.org/2018/08/27/sourmash-wasm/">https://blog.luizirber.org/2018/08/27/sourmash-wasm/</a></p><p><br></p><p><b>Ruby和Rust 合作编写密码生成工具</b></p><p><a href="https://hur.st/blog/2018/08-25-password-generation-in-ruby-and-rust/">https://hur.st/blog/2018/08-25-password-generation-in-ruby-and-rust/</a></p><p><br></p><p><b>Programming Servo： 如何调试代码</b></p><p>面对十万行代码的巨型Rust应用，该如何调试代码，才能快速定位问题？</p><ul><li>最简单的，println!输出日志。但是这种方法在面对程序崩溃或内存泄漏时则不起作用。此时则需要更强大的工具，比如Linux中的GDB、macOS中的LLDB、Windows中VS调试器。</li><li>本文主要探讨GDB，该工具和LLDB很相似，命令几乎相同。</li></ul><p>在本文中着重介绍了GDB，基本上这是一个GDB入门教程。</p><p><a href="https://medium.com/coding-neutrino-blog/programming-servo-the-debug-way-5db01f09b7f4">https://medium.com/coding-neutrino-blog/programming-servo-the-debug-way-5db01f09b7f4</a></p><p><br></p><p><b>From Rust to beyond系列：asm.js</b></p><p><a href="https://mnt.io/2018/08/28/from-rust-to-beyond-the-asm-js-galaxy/">https://mnt.io/2018/08/28/from-rust-to-beyond-the-asm-js-galaxy/</a></p><p><br></p><p><b>Notify发布4.0.6</b></p><p>Notify是Rust实现的跨平台文件系统通知库</p><p>cargo-watch、cobalt等工具都使用了它</p><p><a href="https://github.com/passcod/notify">passcod/notify</a> </p><p><br></p><p><b>azul ： 桌面GUI框架</b></p><p><a href="https://github.com/maps4print/azul">maps4print/azul</a></p><p><br></p><p><b>rayn光线追踪渲染器 </b></p><p>基于《Ray tracing in one weekend》一书的代码实践</p><p>（这本书在2018年，我见到第三次了）</p><p><a href="https://github.com/termhn/rayn">https://github.com/termhn/rayn</a></p><p></p><p></p><p></p>