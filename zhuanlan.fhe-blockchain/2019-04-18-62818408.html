<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>密码学入门与实践-3</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/62818408">原文</a></p>
<p></p><h2><b>哈希函数</b></h2><p class="ztext-empty-paragraph"><br/></p><p>到目前为止，很高兴我们可以保护“通过不受信任连接”交换的消息内容，但我们从未解决内容完整性问题。如何才能确定邮件内容（甚至是加密的）遭受未经授权的更改？</p><p class="ztext-empty-paragraph"><br/></p><p> 哈希函或者称之为“单向函数”或“不可逆函数”或“非双射函数”的函数，它输入可变长度的消息并产生固定长度(消息)的输出。</p><p class="ztext-empty-paragraph"><br/></p><p> 例如，使用不同的哈希函数计算以下字符串的校验和：</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-9762c74f573a6a6914d16883f02b2d59_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="163" class="origin_image zh-lightbox-thumb" width="624" data-original="https://pic2.zhimg.com/v2-9762c74f573a6a6914d16883f02b2d59_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-9762c74f573a6a6914d16883f02b2d59_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="163" class="origin_image zh-lightbox-thumb lazy" width="624" data-original="https://pic2.zhimg.com/v2-9762c74f573a6a6914d16883f02b2d59_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-9762c74f573a6a6914d16883f02b2d59_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p>如果我们只修改原始消息中的单个字母怎么办？例如&#39;E&#39;：</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-d94bbbbd6062b3a7ced1eb52fe133cf6_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="161" class="origin_image zh-lightbox-thumb" width="624" data-original="https://pic3.zhimg.com/v2-d94bbbbd6062b3a7ced1eb52fe133cf6_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-d94bbbbd6062b3a7ced1eb52fe133cf6_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="161" class="origin_image zh-lightbox-thumb lazy" width="624" data-original="https://pic3.zhimg.com/v2-d94bbbbd6062b3a7ced1eb52fe133cf6_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-d94bbbbd6062b3a7ced1eb52fe133cf6_b.jpg"/></figure><p>你可以看到，结果完全不同。哈希函数的一个大问题是容易发生碰撞：</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-27429b916b6ca7ab47574b48e5b79eac_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="443" class="origin_image zh-lightbox-thumb" width="624" data-original="https://pic1.zhimg.com/v2-27429b916b6ca7ab47574b48e5b79eac_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-27429b916b6ca7ab47574b48e5b79eac_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="443" class="origin_image zh-lightbox-thumb lazy" width="624" data-original="https://pic1.zhimg.com/v2-27429b916b6ca7ab47574b48e5b79eac_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-27429b916b6ca7ab47574b48e5b79eac_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p>正如您可以看到两个具有不同内容的文件 - 在这种情况下只更改了6个字节 – 却具有相同的MD5校验和。我们称之为哈希碰撞。</p><p class="ztext-empty-paragraph"><br/></p><p><b>数字证书</b></p><p class="ztext-empty-paragraph"><br/></p><p>我们已经谈了很长时间关于加密和解密，尽管我们的密码系统足够安全，但我们却无法确定某人的真实身份。确实，Diffie-Hellman密钥交换算法没有解决“确定真实身份”的问题。信息安全是加密的基本目标，不仅包括机密性和数据完整性，还包括不可否认性或身份验证。</p><p class="ztext-empty-paragraph"><br/></p><p> 在谈论证书之前，让我们看看数字签名是如何工作的。最后，我们将看到在身份验证和不可否认方面存在很大差异。</p><p class="ztext-empty-paragraph"><br/></p><p> 在我们讨论非对称密钥和哈希函数时，我们将解释为什么他们对数字签名很重要。模拟数字签名是一种手写签名。虽然后者很容易伪造，但数字签名可以提供更多的安全性（几乎不可能伪造）。让我们看看它是如何工作的：</p><p class="ztext-empty-paragraph"><br/></p><p><b>第1步</b>：首先，你必须生成一对密钥：公钥和私钥。私钥将保存在安全的地方，公钥可以提供给任何人。假设您要撰写包含消息M的文档。</p><p class="ztext-empty-paragraph"><br/></p><p><b> 第2步</b>：计算摘要。</p><p> 您将使用哈希函数为您的消息计算摘要。</p><p class="ztext-empty-paragraph"><br/></p><p><b>第3步</b>：计算数字签名。</p><p> 您将使用密钥签署哈希结果（摘要）。现在，您可以将带有哈希结果签名的消息M发送给您的朋友。</p><p class="ztext-empty-paragraph"><br/></p><p><b> 第4步</b>：验证数字签名。</p><p> 您的朋友使用相同的哈希函数来计算消息M的摘要，并将结果与您的签名摘要进行比较。如果它们相同则意味着消息M没有被改变（这称为数据完整性）。</p><p class="ztext-empty-paragraph"><br/></p><p>现在，您的朋友还需要来验证消息M确实来自于您。他将使用您的公钥来验证，该摘要是由您的私钥签名的。只有使用您私钥签名的消息，才能被您的公钥验证（这提供了身份验证和不可否认性）。</p><p class="ztext-empty-paragraph"><br/></p><p> 您可能想知道为什么我们首先需要通过哈希函数计算消息M的摘要（步骤2），而不是直接对消息进行签名。如果直接对消息签名，这肯定也是可行的，但原因是因为，使用私钥对消息进行签名并使用公钥验证它的真实性，(它的)速度是非常慢的。</p><p class="ztext-empty-paragraph"><br/></p><p>而且，它产生大量数据。哈希函数可生成固定长度的数据（所以可以缩短需要签名的数据），还可提供数据完整性。</p><p class="ztext-empty-paragraph"><br/></p><p> 有一个问题：你的朋友怎么能确定你的公钥是哪个？他不能，但数字证书可以！</p><p class="ztext-empty-paragraph"><br/></p><p> 数字签名和数字证书之间的唯一区别是公钥由可信赖的国际认证机构（CA）认证。注册CA时，您必须提供真实的身份证明文件（身份证，护照等）。</p><p class="ztext-empty-paragraph"><br/></p><p>因此，您的朋友可以使用您的公钥（registered to a CA）验证附加的哈希结果是否使用您的私钥签名。</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-43823f241e4ba53e24e94b7aaf35663f_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="450" class="origin_image zh-lightbox-thumb" width="624" data-original="https://pic4.zhimg.com/v2-43823f241e4ba53e24e94b7aaf35663f_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-43823f241e4ba53e24e94b7aaf35663f_b.jpg" data-caption="" data-size="normal" data-rawwidth="624" data-rawheight="450" class="origin_image zh-lightbox-thumb lazy" width="624" data-original="https://pic4.zhimg.com/v2-43823f241e4ba53e24e94b7aaf35663f_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-43823f241e4ba53e24e94b7aaf35663f_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p>==========================================================================</p><p><b>文章首发在微信公众号：btc201800</b><br/><b>知识星球ID：28018093</b></p><p><br/><b>音频发布在喜马拉雅上“区块链杂谈 (第2季)”</b> <b><u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/Bjq4se" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/Bjq4se</span><span class="invisible"></span></a></u></b></p><p><b>解读区块链白皮书</b> <u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/RNU1Q8" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/RNU1Q8</span><span class="invisible"></span></a></u></p><p><br/><b>宁波格密链网络科技有限公司，专注于区块链上的密码技术研发。</b></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
