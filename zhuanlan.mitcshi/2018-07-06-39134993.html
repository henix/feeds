<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>σ 的三要素</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/39134993">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-22bcf8a36682d5d67ab961a39b517ddd_r.jpg" alt=""></div><p><b>1 前言</b></p><p>今天介绍一篇 Barra 的关于风险归因的文章：σ 的三要素（Davis and Menchero 2010）。获得超额收益是主动管理的目标，但在这个过程中，对风险的控制不亚于对收益的追求。在被动投资中，由于仅仅买入市场组合，风险就是市场的系统性风险。在主动管理中，基金经理通过配置得到了不同于市场的投资组合，因此该组合的风险也不同于市场风险。一个优秀的基金经理必须十分清楚其投资组合风险的组成部分。</p><p>人们熟知 α 的三要素：α = Volatility × IC × Score。关于主动管理中投资组合的风险（用投资组合收益率的标准差 σ 来衡量），同样存在一个类似的表达式：</p><p><equation>\sigma=\mbox{Exposure}\times\mbox{Volatility}\times\mbox{Correlation}\\</equation> </p><p>为了有助于下文的讨论，假设一个基金经理构建了一个主动管理的投资组合 P（该组合由不同的股票以某种权重构成），令 R 代表这个投资组合的收益率。在构建 P 时，基金经理通过将投资组合以特定的风险暴露（exposure）置于不同的收益源（sources of return）之中得到，因此投资组合的收益率 R 可以分解为：</p><p><equation>R=\sum_m x_mr_m~~~~~~~~~~(1)\\</equation> </p><p>其中 <equation>x_m</equation> 是投资组合 P 在收益源 m 上的暴露， <equation>r_m</equation> 是收益源 m 的收益率。举个例子，假设一个基金经理以 0.3 的暴露买入了银行业的所有股票并以 0.6 的暴露买入了国防军工业的所有股票，以此构建了投资组合。在本例中，银行和国防军工两个行业的收益率就是两个收益源的收益，而 0.3 和 0.6 就是该投资组合在这两个收益源上的暴露，即</p><p><equation>R=0.3r_{\mbox{银行}}+0.6r_{\mbox{国防军工}}\\</equation> </p><p>基于投资组合收益率的分解模型（1），我们下面探讨投资组合的风险 σ(R)。首先来看两个传统的研究方法。</p><h2><b>2 计算 σ(R) 的两种传统方法</b></h2><p>第一种方法是独立考虑每个收益源对投资组合的风险贡献。对于收益源 m，它对投资组合收益率 R 的风险贡献为 <equation>\sigma(x_m r_m)</equation>，即我们计算收益源收益率 <equation>r_m</equation> 自身的风险，再把它按比例折算到投资组合收益率的风险中。<b>这种做法虽然直观，但是它没有考虑收益源与投资组合之间的相关性（显然，收益源与投资组合的相关性越高，它对投资组合的风险贡献度越大）。</b>此外收益源各自独立的风险加在一起不等于投资组合的风险，即</p><p><equation>\sigma(R)\neq\sum_m\sigma(x_mr_m)\\</equation> </p><p><b>这导致投资组合的风险中无法被收益源的独立风险之和解释。</b></p><p>第二种方法是考虑每种收益源对投资组合风险的<b>边际贡献（marginal contribution）</b>，它由如下的偏导数定义： <equation>\mbox{MCR}_m=\frac{\partial\sigma(R)}{\partial x_m}\\</equation> </p><p>在这种解释下，投资组合对收益源m的风险暴露每增加一个 <equation>\Delta x_m</equation> 单位，投资组合的风险 σ(R) 便增加 <equation>\mbox{MCR}_m\Delta x_m</equation>。不难证明，投资组合的风险等于所有收益源的边际风险贡献之和（我们会在下文介绍 σ 的三要素时给出这个式子的推导）：</p><p><equation>\sigma(R)=\sum_mx_m\mbox{MCR}_m\\</equation> </p><p><b>基于边际风险贡献这个方法的最大好处正如上式所示：投资组合的风险可以完全的被边际风险解释。然而，它的缺点是人们很难从业务层面理解偏导数：每个收益源到底对投资组合的风险有多少贡献？这和偏导数又有什么关系？</b>诸如此类的问题很难直观的回答。</p><h2><b>3 σ(R) 的三要素</b></h2><p>由于上述两种传统方法在解释投资组合的风险 σ(R) 都不尽如人意，Davis and Menchero (2010) 提出了投资组合风险的三要素，即 σ = Exposure × Volatility × Correlation。该公式的数学表达为：</p><p><equation>\sigma(R)=\sum_mx_m\sigma(r_m)\rho(r_m,R)~~~~~~~~~~(2)\\</equation> </p><p>三要素的解释如下：</p><ul><li><b>Exposure（暴露）：</b>即 <equation>x_m</equation>，它衡量投资组合对每个收益源的暴露大小。这完全由基金经理来决定，充分的反映了基金经理的投资偏好。值得说明的是，投资组合对于收益源的暴露值没有任何符号上的限制，即它既可以为正也可以为负。优秀的基金经理会通过对特定收益源采取负的暴露来对冲投资组合在其他收益源上的风险，从而降低投资组合整体的风险。</li><li><b>Volatility（波动性）：</b>即 <equation>σ(r_m)</equation>，它代表的是收益源收益率 <equation>r_m</equation> 的波动。由于投资组合是暴露在不同的收益源之中，那么收益源收益率的波动越大，显然投资组合的风险的贡献程度（可以是正向也可以是负向，取决于 Exposure 的符号）也越大。</li><li><b>Correlation（相关性）：</b>即 <equation>ρ(r_m, R)</equation>，它是收益源和投资组合收益率之间的相关系数，衡量收益源和投资组合收益率的相关性大小。这种相关性越高，投资组合收益率受收益源收益率波动影响的确定性越显著。</li></ul><p>由上述说明可知，风险三要素公式（2）的含义是：<b>如果收益源收益率和投资组合收益率的相关性越高、收益源收益率自身的波动越大、投资组合在该收益源上的暴露越大，那么该收益源对投资组合的风险的贡献就越高。此外，投资组合的风险 σ(R) 可以完全被所有收益源的风险 </b><equation>σ(r_m)</equation><b> 按上式分解。</b></p><p><b>风险三要素公式的正确性由下面的证明给出。</b>通过对（1）等式两边和投资组合收益率 R 计算协方差可以得到（2）：</p><p><equation>\begin{array}{rrrrll} &amp;\mbox{cov}(R,R)&amp;=&amp;\mbox{var}(R)&amp;=&amp;\displaystyle\sum_m\mbox{cov}(x_mr_m,R)\\ &amp;&amp;&amp;&amp;=&amp;\displaystyle\sum_mx_m\mbox{cov}(r_m,R)\\\\ \Rightarrow&amp;&amp;&amp;\sigma(R)\sigma(R)&amp;=&amp;\displaystyle\sum_mx_m\sigma(R)\sigma(r_m)\rho(r_m,R)\\\\ \Rightarrow&amp;&amp;&amp;\sigma(R)&amp;=&amp;\displaystyle\sum_mx_m\sigma(r_m)\rho(r_m,R) \end{array}\\</equation> </p><p>上面的推导中仅仅用到了协方差公式的定义，以及协方差和相关系数之间的关系。</p><h2><b>4 三要素优于传统解释</b></h2><p><b>在解释投资组合的风险时，三要素公式较第二节中的两种传统解释有明显的优势。</b></p><p>第一种方法将收益源与投资组合隔绝开来，不考虑收益源与投资组合的相关性，也不考虑收益源之间的相关性，无法正确的解释收益源对 σ(R) 的贡献。</p><p>另一方面，对比第二种方法中 σ(R) 的计算公式以及三要素公式（2）易知 <equation>\mbox{MCR}_m = σ(r_m)ρ(r_m, R)</equation> 。这可以由如下推导验证：</p><p><equation>\begin{array}{rll} \mbox{var}(R)&amp;=&amp;\displaystyle\sum_mx_m\mbox{cov}(r_m,R)\\ &amp;=&amp;\displaystyle\sum_mx_m\mbox{cov}\left(r_m,\sum_nx_nr_n\right)\\\\ &amp;=&amp;\displaystyle\sum_n\sum_mx_nx_m\mbox{cov}(r_m,r_n) \end{array}\\</equation> </p><p>两边同时对 <equation>x_m</equation> 求偏导数并利用链式法则以及协方差公式的定义有：</p><p><equation>\begin{array}{rrll} &amp;\displaystyle2\sigma(R)\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle2\sum_nx_n\mbox{cov}(r_m,r_n)\\ \Rightarrow&amp;\displaystyle\sigma(R)\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle\sum_nx_n\mbox{cov}(r_m,r_n)\\ \Rightarrow&amp;\displaystyle\sigma(R)\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle\mbox{cov}\left(r_m,\sum_nx_nr_n\right)\\ \Rightarrow&amp;\displaystyle\sigma(R)\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle\mbox{cov}(r_m,R)\\ \Rightarrow&amp;\displaystyle\sigma(R)\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle\sigma(R)\sigma(r_m)\rho(r_m,R)\\ \Rightarrow&amp;\displaystyle\frac{\partial\sigma(R)}{\partial x_m}&amp;=&amp;\displaystyle\sigma(r_m)\rho(r_m,R)\\ \Rightarrow&amp;\displaystyle\mbox{MCR}_m&amp;=&amp;\displaystyle\sigma(r_m)\rho(r_m,R) \end{array}\\</equation> </p><p>可见，<b>收益源 m 的边际风险贡献 </b> <equation>\mbox{MCR}_m</equation> <b>等于其自身的波动 </b><equation>σ(r_m)</equation><b> 乘以它和投资组合收益率的相关系数 </b><equation>ρ(r_m, R)</equation> <b>。</b>显然，比起偏导数的解释，<equation>σ(r_m)</equation> 与 <equation>ρ(r_m, R)</equation> 乘积的解释要更加清晰。此外，这种对 <equation>\mbox{MCR}_m</equation> 的分解可以为基金经理提供更好的判断。</p><p>举个例子，假设两个收益源的边际风险贡献都是 1%（且投资组合对这两个收益源的暴露相同）。基于 MCR 的解释方法无法区分它们。进一步假设第一个收益源自身的波动为 10%，它与投资组合的相关系数为 0.1（10% × 0.1 = 1%）；第二个收益源自身的波动为 2%，它与投资组合的相关系数为 0.5（2% × 0.5 = 1%）。 <equation>\mbox{MCR}_m = \sigma(r_m)\rho(r_m, R)</equation> 说明，虽然  <equation>\mbox{MCR}_m</equation> 相同，但是收益源 1 自身有更大的波动。这虽然并不意味着收益源 1 更加危险（因为这两个收益源的边际风险贡献相同），但是不要忘记，所有的这些参数都是根据历史数据估计得到的。<b>由于收益率自身的波动比收益率之间的协方差更容易估计，因此收益源 1 对投资组合的风险的影响很有可能比收益源 2 更大。此外，如果基金经理想要排除他的投资组合对这两个收益源中某一个的暴露，那么仅仅依靠 </b><equation>\mbox{MCR}_m</equation><b>是不够的，</b> <equation>σ(r_m)</equation><b> 与 </b><equation>ρ(r_m, R)</equation><b> 显然为他提供了更多的依据。</b></p><h2><b>5 全新视角：从风险角度看收益相关性</b></h2><p><b>风险三要素公式说明，收益源和投资组合的相关性对风险贡献至关重要。收益源和投资组合的相关性又和收益源之间的相关性有着千丝万缕的联系。</b>通常情况下，用来构建投资组合的收益源之间或多或少存在相关性（可以是正相关也可以是负相关）。比如，如果银行行业和低 <equation>β</equation> 是两个收益源，那么它们之间显然存在一定的正相关性。两个收益源 m 和 n 的收益率之间的相关性可以由它们的相关系数 <equation>ρ(r_m, r_n)</equation> 表示。风险三素公式为解读 <equation>ρ(r_m, R)</equation> 和 <equation>ρ(r_m, r_n)</equation> 的关系提供了全新的思路。首先给出数学推导： </p><p><equation>\begin{array}{rrll} &amp;\rho(r_m,R)&amp;=&amp;\displaystyle\frac{\mbox{cov}(r_m,R)}{\sigma(r_m)\sigma(R)}\\ \Rightarrow&amp;\rho(r_m,R)&amp;=&amp;\displaystyle\frac{\mbox{cov}\left(r_m,\sum_n x_n r_n\right)}{\sigma(r_m)\sigma(R)}\\ \Rightarrow&amp;\rho(r_m,R)&amp;=&amp;\displaystyle\sum_nx_n\frac{\mbox{cov}(r_m,r_n)}{\sigma(r_m)\sigma(R)}\\ \Rightarrow&amp;\rho(r_m,R)&amp;=&amp;\displaystyle\sum_nx_n\frac{\sigma(r_n)\mbox{cov}(r_m,r_n)}{\sigma(r_n)\sigma(r_m)\sigma(R)}\\ \Rightarrow&amp;\rho(r_m,R)&amp;=&amp;\displaystyle\sum_nx_n\frac{\sigma(r_n)}{\sigma(R)}\frac{\mbox{cov}(r_m,r_n)}{\sigma(r_n)\sigma(r_m)}\\ \Rightarrow&amp;\rho(r_m,R)&amp;=&amp;\displaystyle\sum_nx_n\left[\frac{\sigma(r_n)}{\sigma(R)}\right]\rho(r_m,r_n) \end{array}\\</equation> </p><p>此公式说明<b>任何一个收益源 m 和投资组合的相关性 </b><equation>ρ(r_m, R)</equation><b> 相当于 </b><equation>r_m</equation><b> 与所有收益源 </b><equation>r_n</equation><b> 的相关性 </b><equation>ρ(r_m, r_n)</equation><b> 以权重 </b><equation>x_n(σ(r_n)/σ(R))</equation><b> 的加和。</b>收益源 n 对 <equation>ρ(r_m, r_n)</equation> 的贡献度取决于投资组合对收益源 n 的暴露程度 <equation>x_n</equation>，收益源 n 对于投资组合的相对波动率 <equation>σ(r_n)/ σ(R)</equation>，以及收益源 n 与 m 之间的相关性 <equation>ρ(r_m, r_n)</equation> 。<b>只有当</b></p><ol><li><equation>x_n</equation><b> 足够大；</b></li><li><equation>r_n</equation><b> 的波动与 R 的波动有可比性；</b></li><li><equation>r_n</equation><b> 与 </b><equation>r_m</equation><b> 足够相关</b></li></ol><p><b>三个条件同时满足时，收益源 n 才足以影响到收益源 m 与投资组合的相关性。通过比较不同收益源的 </b><equation>x_n(σ(r_n)/σ(R))ρ(r_m, r_n)</equation><b>，就可以方便的判断哪个收益源 n 对 </b><equation>ρ(r_m, R)</equation><b> 贡献最大。</b>这可以为基金经理控制投资组合的风险提供新的思路。</p><p><b>在理想情况下，</b>如果投资组合的收益可以完全被若干个收益源解释，且<b>这些收益源之间都是无关的（uncorrelated），</b>即对于不同 m 和 n 有 <equation>ρ(r_m, r_n) = 0</equation> ，在这种情况下（并且由定义有 <equation>ρ(r_m, r_m) = 1</equation> ），上式简化为 </p><p><equation>\begin{array}{rrll} &amp;\rho(r_m,R)&amp;=&amp;\displaystyle x_m\frac{\sigma(r_m)}{\sigma(R)}\\ \Rightarrow&amp;\sigma(R)&amp;=&amp;\displaystyle\frac{x_m\sigma(r_m)}{\rho(r_m,R)}~~~~~~~~~~\forall m \end{array}\\</equation> </p><p>乍一看，这似乎与三要素公式（2）矛盾（因为（2）里面用到所有收益源的求和，且 <equation>ρ(r_m, R)</equation> 不是分母）。但简单的计算加上运用最小二乘法回归的性质不难验证<b>上式与（2）是完全一致的</b>。将上式两边同时乘以 ρ(r_m, R) 的平方得到：</p><p><equation>\sigma(R)\rho(r_m,R)^2=x_m\sigma(r_m)\rho(r_m,R)~~~~~~~~~~\forall m\\</equation> </p><p>上式对所有收益源 m 都成立。将对应所有收益源 m 的上式相加，经过简单的推导便可以得到风险三要素公式（2）：</p><p><equation>\begin{array}{rrll} &amp;\sum_m\sigma(R)\rho(r_m,R)^2&amp;=&amp;\displaystyle\sum_mx_m\sigma(r_m)\rho(r_m,R)\\ \Rightarrow&amp;\displaystyle\left(\sum_m\rho(r_m,R)^2\right)\sigma(R)&amp;=&amp;\displaystyle\sum_mx_m\sigma(r_m)\rho(r_m,R)\\ \Rightarrow&amp;\displaystyle 1\times\sigma(R)&amp;=&amp;\displaystyle\sum_mx_m\sigma(r_m)\rho(r_m,R)\\ \Rightarrow&amp;\displaystyle\sigma(R)&amp;=&amp;\displaystyle\sum_mx_m\sigma(r_m)\rho(r_m,R) \end{array}\\</equation> </p><p>在上面的推导中， <equation>\sum_m ρ(r_m, R)^2 = 1</equation> 是利用到了多元线性回归中 coefficient of determination（就是我们回归中常说的 R-squared）的性质。由于我们假设投资组合的收益率完全由这些收益源解释，因此 R-squared = 1；又因为我们假设了所有的收益源都是不相关的，即 <equation>ρ(r_m, r_n) = 0</equation> ，在这种情况下 R-squared 等于投资组合收益率与每一个风险源收益率的相关系数的平方和。因此有  <equation>1 = \mbox{R-squared} = \sum_m \rho(r_m, R)^2</equation> 。</p><h2><b>6 三要素公式在风险多因子模型中的应用</b></h2><p>在一个风险多因子模型中，个股的收益率（刨除无风险收益率后） <equation>r_n</equation> 往往被写成若干个风险因子的收益率和其自身的特异性收益率的组合（<b>这些风险因子和股票的特异性便对应上文中的收益源</b>）： </p><p><equation>r_n=\sum_k X_{nk}f_k+u_n\\</equation> </p><p>其中 <equation>X_{nk}</equation> 是股票 n 在因子 k 上的暴露， <equation>f_k</equation> 是因子收益率， <equation>u_n</equation> 是股票 n 的特异性收益率。所有股票相对无风险的超额收益都可以用上式表示。如果按照一定的权重 <equation>w_n</equation> 将股票组合成一个投资组合，那么该投资组合的收益率也可以由这些风险因子收益率和所有股票的特异性收益率表示： </p><p><equation>\begin{array}{rll} R&amp;=&amp;\displaystyle\sum_k\left(\sum_n w_nX_{nk}\right)f_k+\sum_n w_nu_n\\\\ &amp;=&amp;\displaystyle\sum_k X_kf_k+\sum_nw_nu_n \end{array}\\</equation> </p><p>对上式直接运用风险三要素公式便可方便的求出投资组合的风险的组成：</p><img src="https://pic4.zhimg.com/v2-02308dfc622ac78b2cc04d30721e542f_r.jpg" data-caption="" data-size="normal" data-rawwidth="481" data-rawheight="133" data-watermark="watermark" data-original-src="v2-02308dfc622ac78b2cc04d30721e542f" data-watermark-src="v2-10c3f73ee05cc755ca483b6dfc39a9b5" data-private-watermark-src=""><p><b>投资组合的风险由因子模型的系统性风险和个股特异性风险两部分组成。</b>个股特异性风险源于个股的特异性收益 <equation>u_n</equation> ，它是风险因子无法解释的那部分收益。<b>使用风险多因子模型时，为了正确计算投资组合的风险，上面两个组成部分均要考虑。</b></p><p><br></p><p><b>参考文献</b></p><p>Davis, B. and Menchero, J. (2010). <i>Risk Contribution is Exposure times Volatility times Correlation. Technical Report. </i>MSCI Barra Research.</p><p><br></p><p><br></p><p>原创不易，请保护版权。如需转载，请联系获得授权，并注明出处，谢谢。已委托“维权骑士”(<a href="http://rightknights.com">维权骑士_免费版权监测/版权保护/版权分发</a>) 为进行维权行动。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
