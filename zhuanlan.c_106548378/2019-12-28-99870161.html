<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>策略如何增加容量</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/99870161">原文</a></p>
<p>比如一个简单的策略，就用rsi一个指标：</p><ul><li>rsi&gt;60做多到1手；</li><li>rsi&lt;-60做空到1手；</li><li>rsi&gt;20 且仓位为负则买入平仓；</li><li>rsi&lt;-20且仓位为正则卖出平仓；</li></ul><p>就这么一个简单的策略，放在螺纹、焦炭等趋势性强的品种，一般回测下来都是能赚钱的。但它有一些弊端。</p><p>比如现在rsi等于65，它持有1手多仓，未来rsi指标下降到零又回到60以上，这时策略也不会加仓，因为最多持仓1手。</p><p>如果设置多几组参数，比如60、65、70、85等，对应不同的策略，这样可以稍微缓解一下问题。但由于这些都来自一个指标，本质上高度相关的。如果指标冲到90，那么就全部开仓了。</p><p>一个策略的容量其实也不难评估：比如策略触发的时间点高度雷同，例如使用5分钟K线，都是做400手，如果都是同一个5分钟触发，那么如果挂弹量只有200手，那么就难免产生滑点，增加了交易成本。但如果是不同的5分钟触发，例如分别在4个5分钟触发，每次100手，则都不会有滑点。</p><p>那么如何把交易平摊下去呢？</p><p>如果仅仅增加算法交易，比如要下400手我就人为拆分下单，这样实盘跟回测可能不大一致。如果是基于5分钟K线的这类趋势策略，如果下单时间超过1分钟，那么价格就会偏离很远，而且基本上都是不好的偏离。这其实严重损害策略的表现。</p><p>事实上，很多中低频交易，虽然用5分钟K线，但持仓5天以上很正常，平均净利润10跳左右。如果因为滑点损失1跳，实际上损失了10%的利润，这损失还是挺大的。</p><p>回到之前的问题。产生这种问题的愿意在于对指标的使用率不够高。比如它第一次大于60的时候就下单了，后面还有大于60的机会就被忽略了，但其实那些时间点也是可以下单的。</p><p>因此，可以考虑人为拆分下单。比如第一次超过60下一部分，然后第二次超过60又下一部分。但这样也难免增加策略复杂性。</p><p>另一种方法是增加阈值的密度。比如之前60、65、70，现在可以改成60、61、62、63、64...70，这样之前3个策略的量分散到了10个策略，比如这个5分钟到达60了下一点，下个5分钟到达61了下一点，起到分散的效果。</p><p>但如果指标到达80了全部一起下单还是没有解决。这可以划分时间段，比如一天有白天和黑夜分成两段，白天下单的策略和黑夜下单的策略是独立的，可以分别优化，这样资金也进一步拆分，哪怕白天一下载指标达到80也只是下一部分单子，到了晚上指标达到60、70还是会下单。</p><p>其实这个过程可以进一步细分：比如按小时划分，螺纹钢交易6小时就有6个时间段，每个时间段触发的交易独立计算。当然参数优化是可以一起优化的。</p><p>比如每个时段开仓最多2手（由负到正），平仓最多1手，只有触发指标才操作，而不是对理论持仓的同步。这样就可以错开下单时间。</p><p>进一步可以继续划分半小时、15分钟、5分钟等，就可以限制了每个时间段的下单，也避开在开盘阶段高波动的时候猛下单。。策略持仓5天、10天的话其实挺长的，这类下单时间分散不会太影响表现，因为都是在指标达到下单阈值才触发的，这比那种生硬地分散到1分钟下单要好，因为那种方式面对的基本都是价格的不利变化。</p><p>所以说，策略容量一般不会是个太大的问题。基于5分钟持仓5天的策略全品种100个亿没啥问题；基于分笔数据的日内策略10个亿没啥问题。就不要再纠结容量的问题了。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
