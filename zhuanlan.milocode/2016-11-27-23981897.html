<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>如何优雅地判断 N 个布尔值是否全部相等？</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/23981897">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-bca5d54fdd9a7637f6f6a54b412768c3_r.jpg" alt=""></div>原问题：<a href="https://www.zhihu.com/question/52881172">https://www.zhihu.com/question/52881172</a>，原来是指定 JavaScript 的。<br><p>原答案：<br></p><code lang="js">return arr.indexOf(!arr[0])&lt;0;</code><p>（题图 <a href="https://unsplash.com/photos/DoSDQvzjeH0" class="">Photo by Jessica Ruscello</a>）<br></p><p>在这里尝试用逻辑说明原理。<br></p><br>假设数组定义为 <equation>\{a_i:0\le i &lt; n\}</equation>。<br><br>用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" data-editable="true" data-title="Array.prototype.indexOf()" class="">Array.prototype.indexOf()</a> 可以搜寻<equation>x</equation>是否存在于数组，即判断 <equation>\exists i(a_i=x)</equation>。如果 <equation>x</equation> 存在，返回该索引( i &gt;= 0)，如果不存在，该函数在返回 -1。<br><br>然后我们需要检查所有元素是否相等，那么等价于检查所有元素是否等于第一个元素，取反一下：<br><br><equation>\forall i (a_i=a_0) \\
\Leftrightarrow \neg \neg \forall i (a_i=a_0)\\
\Leftrightarrow \neg \exists i(a_i \ne a_0)</equation><br><br>由于问题需求刚好是布尔数组，所以 <equation>a_i \ne a_0 \Leftrightarrow a_i=\neg a_0</equation>，那么就可变换为：<br><br><equation>\neg \exists i (a_i=\neg a_0)</equation><br><br>用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" data-editable="true" data-title="Array.prototype.indexOf()" class="">Array.prototype.indexOf()</a> 的好处是原生提供的，而且是很直接的做最多 <equation>n</equation> 次相等测试，所以应该比以脚本自行实现快。但这个解答仅限于布尔数组才能使用。
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
