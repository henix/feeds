<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>txmonad：一个玩具版的 xmonad</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/115914944">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-e5a2a9858bfa0c0e317c6943a84edb5b_b.jpg" alt=""></div><h2>动机与介绍</h2><p><a href="https://link.zhihu.com/?target=https%3A//github.com/xmonad/xmonad" class=" wrap external" target="_blank" rel="nofollow noreferrer">xmonad</a> 是一个以 Haskell 书写的非常优秀的平铺式桌面管理系统，也是一个相当不错的 Haskell 工程代码入门项目，它有着非常优秀的类型设计、函数式的数据结构、工程代码的异常处理以及健壮性设计，当然最重要的是一种基于 monad 和 monad transformer 的编程范式。</p><p>但同时 xmonad 作为一个 Haskell 的入门项目也有一些问题，它和 X11 紧耦合，有非常复杂的与之相关的状态与事件处理逻辑，这些代码使得 xmonad 对于来自各个平台/系统的 Haskell 初学者来说，显得不够友好。另外如果想进行代码修改、理解架构的话，运行一个桌面管理系统也显得太过折腾。</p><p>所以我们开发并开源了 <a href="https://link.zhihu.com/?target=https%3A//github.com/fragilelambda/txmonad" class=" wrap external" target="_blank" rel="nofollow noreferrer">txmoand</a> (a toy xmoand) 这一项目： </p><a href="https://link.zhihu.com/?target=https%3A//github.com/fragilelambda/txmonad" data-draft-node="block" data-draft-type="link-card" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/fragilelambd</span><span class="invisible">a/txmonad</span><span class="ellipsis"></span></a><p>txmonad 是一个命令行版本的 xmoand 模仿项目，它仿照了 xmonad 的架构设计以及类型设计，但是只能进行命令行交互。我们希望这一项目可以成为 Haskell 初学者的游乐场，更好地方便更多 Haskell 初学者上手体验，修改代码，从而了解一个工程级别的 Haskell 项目是怎样运作的。</p><h2>演示截图</h2><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-4e2c1537c713336d783030663e808c8a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1148" data-rawheight="1546" class="origin_image zh-lightbox-thumb" width="1148" data-original="https://pic3.zhimg.com/v2-4e2c1537c713336d783030663e808c8a_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-4e2c1537c713336d783030663e808c8a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1148" data-rawheight="1546" class="origin_image zh-lightbox-thumb lazy" width="1148" data-original="https://pic3.zhimg.com/v2-4e2c1537c713336d783030663e808c8a_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-4e2c1537c713336d783030663e808c8a_b.jpg"/></figure><p> 这里我们对 2 块屏幕，多个工作区的一个模拟展示。</p><h2>与 xmonad 的异同</h2><h2>相同之处</h2><ul><li>项目采用了相似的架构设计</li><li>项目采用了相似的函数式数据结构</li><li>基于类型的编程与类型设计</li><li>工程代码的代码设计与健壮性设计</li><li>基于 monad 的编程范式</li></ul><h2>不同之处</h2><ul><li>txmonad <b>不是</b> 一个桌面管理系统，它无法助力进行任何有意义的实际工作，它只是一个代码教学项目</li><li>txmonad 不依赖于 X11</li><li>txmonad 对于事件处理以及消息传递机制的处理相比于 xmonad 有大幅简化（如果不是过分简化的话）</li></ul><h2>后续开发计划</h2><p>目前构思的一些开发计划以及在考虑尝试的点：</p><ul><li>加入用户级别布局算法以及配置的支持 </li><li>对于 quick-check 的支持 </li><li>一系列对于初学者的教程或者上手文章  </li><li>更多基于新 GHC 特性的对于 txmonad 的改造，比如加入 lens，更多想法可见 reddit 上的<a href="https://link.zhihu.com/?target=https%3A//www.reddit.com/r/haskell/comments/5e8fmo/what_would_xmonad_with_modern_ghc_features_look/" class=" wrap external" target="_blank" rel="nofollow noreferrer">讨论</a></li></ul><h2>后记</h2><p>抱歉新的更新鸽了这么久，一方面有工作学习上的原因，一方面也是因为 Haskell 各方面知识的坑实在太深（之前较长时间都掉进了范畴论的深坑里无法自拔）。</p><p>这个工程项目的上手是我很早前就在规划的一个项目，希望能够通过这个项目适当地减缓 Haskell 初学者的上手难度曲线，目前项目本身还有许多不完善的地方欢迎大家多提 PR 和 issue。</p><p>另外关于专栏后续的更新我有一些方向，这里列出来和大家讨论：</p><ul><li>基于 txmonad 的更多工程实践，以及更详细的带逛上手教程</li><li>范畴论与 Haskell 的相关文章</li><li>基于类型编程的更多实践以及上手教程</li><li>函数式数据结构与算法相关文章</li></ul><p>不知道大家更倾向于看哪些的文章，欢迎讨论，向我提出建议和留言！（当然我不保证一定能采纳大家的意见，甚至有可能会继续鸽 =w=）</p><p>最后，祝愿疫情早日结束，大家身体健康！</p><p>最后的最后，我们的范畴论电报群还在持续加人中，欢迎大家加入讨论哟~</p><a href="https://link.zhihu.com/?target=http%3A//t.me/wecattheory" data-draft-node="block" data-draft-type="link-card" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">t.me/wecattheory</span><span class="invisible"></span></a><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
