<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>打下扎实的基本功——概率分布图​（一）</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/31917252">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-c5c2d8e623c0979b02caeea854294866_r.jpg" alt=""></div><p><b>量化投资与机器学习与<a href="https://www.digquant.com.cn/">DigQuant点宽网</a></b>开展了一次学术合作 </p><p><br></p><p><b><a href="https://mp.weixin.qq.com/s?__biz=MzUxODEyNDI1Mw%3D%3D&amp;mid=2247484131&amp;idx=1&amp;sn=b7912719473ad6ac43ffb2853493514e&amp;scene=45#wechat_redirect">本期是概率分布图系列（一）</a></b></p><p><b>[红框内容]</b></p><img src="https://pic3.zhimg.com/v2-1ca4032dc766c3d794885dc99f4b71cd_r.jpg" data-caption="" data-size="normal" data-rawwidth="1892" data-rawheight="2219"><h2><b>1、</b>Zipf分布</h2><img src="https://pic2.zhimg.com/v2-ef280c13c087c405e7ff74ed77913ec2_r.jpg" data-caption="" data-size="normal" data-rawwidth="595" data-rawheight="284"><p><b>Zipf分布介绍</b> </p><p>用<b>X~Zipf(alpha,n)</b>表示随机变量X具有带参数alpha和n的Zipf分布。带有参数alpha和n的Zipf随机变量X是有<b>概率质量函数</b>在里面。</p><img src="https://pic3.zhimg.com/v2-ce6a0d6fb14d0a5562385d7d434bd905_r.jpg" data-caption="" data-size="normal" data-rawwidth="367" data-rawheight="59"><p>这里我们解释一下什么是<b>概率质量函数：</b></p><p>在概率论中，<b>概率质量函数</b> (Probability Mass Function，PMF)是离散随机变量在各特定取值上的概率。概率质量函数和概率密度函数不同之处在于：概率密度函数是对连续随机变量定义的，本身不是概率，只有对连续随机变量的取值进行积分后才是概率。</p><img src="https://pic1.zhimg.com/v2-49e88e0d28bc9301988ed659aec34ed7_r.jpg" data-caption="" data-size="normal" data-rawwidth="389" data-rawheight="40"><p>上面公式的含义为在随机变量X的映射函数下，所有样本空间中的结果在此映射下输出结果为x的概率。</p><p>属性如下：</p><img src="https://pic1.zhimg.com/v2-76949586b8ee0a16eb5d29c7c874113e_r.jpg" data-caption="" data-size="normal" data-rawwidth="201" data-rawheight="71"><p>继续我们的介绍。对于所有正整数n和所有的alpha&gt;0。Zipf分布可以用来解释人口中少数成员的相对受欢迎程度以及其他人口的相对默默无闻的程度。例子包括以下：</p><ul><li>少部分网站获得了大量的点击量，大多数网站获得了适度的点击量，还有大量的网站几乎没有任何点击量。</li><li>图书馆有几本人人都想借的书(畅销书)，大多数借阅的书(经典著作)，还有大量几乎从未借过的书。</li><li>自然语言中使用频率很高的单词( "the" 和 "of" 排在英语前两位)，大多数单词频率使用较低(如“butter”和“joke”)，还有大量的词汇很少人用(如“defenestrate”，“lucubration” 或 “mascaron”等。</li></ul><p>alpha = 1 和 n = 10 的概率质量函数如下图所示：</p><img src="https://pic2.zhimg.com/v2-131b1412c9333d483a46829d3024e72b_r.jpg" data-caption="" data-size="normal" data-rawwidth="395" data-rawheight="297"><p>分母中的求和表示为：</p><img src="https://pic1.zhimg.com/v2-e97a5e4157d1a46a67f86318e33fcf56_r.jpg" data-caption="" data-size="normal" data-rawwidth="158" data-rawheight="65"><p>另一种表现形式是：</p><img src="https://pic2.zhimg.com/v2-fc8f635eddce1d0408aade9048d756d9_r.jpg" data-caption="" data-size="normal" data-rawwidth="300" data-rawheight="52"><p>X的累积分布函数：</p><img src="https://pic2.zhimg.com/v2-5a84385e433a79f731157f5d166db1bd_r.jpg" data-caption="" data-size="normal" data-rawwidth="384" data-rawheight="58"><p>X的残存函数：</p><img src="https://pic2.zhimg.com/v2-dcccdb9980df480a38d244817e0b6078_r.jpg" data-caption="" data-size="normal" data-rawwidth="490" data-rawheight="57"><p>X的风险函数：</p><img src="https://pic1.zhimg.com/v2-e56322c1e5c8591f7b3fb0e835fc62ec_r.jpg" data-caption="" data-size="normal" data-rawwidth="454" data-rawheight="60"><p>X的累积风险函数： </p><img src="https://pic4.zhimg.com/v2-bd2cbeb86dd83092f907bfc878845fb4_r.jpg" data-caption="" data-size="normal" data-rawwidth="619" data-rawheight="38"><p>X的矩量母函数：</p><img src="https://pic2.zhimg.com/v2-fbf3951ad7d87ad8b5d9dee8378313f6_r.jpg" data-caption="" data-size="normal" data-rawwidth="403" data-rawheight="64"><p>X的特征函数：</p><img src="https://pic2.zhimg.com/v2-21ce301e016ba612762fe68a8c6a026a_r.jpg" data-caption="" data-size="normal" data-rawwidth="412" data-rawheight="54"><p>X的总体均值，方差，偏度，峰度：</p><img src="https://pic4.zhimg.com/v2-7a132df38e0ee004b72570e0c1647a31_r.jpg" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="227"><p><br></p><h2><b>2、</b>Zeta分布</h2><img src="https://pic2.zhimg.com/v2-ef280c13c087c405e7ff74ed77913ec2_r.jpg" data-caption="" data-size="normal" data-rawwidth="595" data-rawheight="284"><p>当n趋近于无限大时，Zipf分布就变成了Zeta分布。 </p><p><b>Zeta分布介绍</b></p><p><b>X~Zeta(alpha)</b>表示随机变量X的Zeta分布。参数alpha&gt;1。</p><img src="https://pic2.zhimg.com/v2-22bd965a945370b9b5800d9609c37f51_r.jpg" data-caption="" data-size="normal" data-rawwidth="339" data-rawheight="89"><p>对于任何alpha&gt; 1。alpha=2 的概率质量函数如下所示：</p><img src="https://pic1.zhimg.com/v2-0926ebc7c7f89305a510539d839bd899_r.jpg" data-caption="" data-size="normal" data-rawwidth="387" data-rawheight="300"><p><b>Zeta分布</b>也可以认为是在离散概率分布中的<b>帕累托分布</b>。</p><p><b>帕累托分布</b>以意大利经济学家 Vilfredo Pareto命名，他在1882年研究英国的财富分配情况时，发现前20%的人群拥有着社会80%的财富，这一现象可以用一个简单的概率分布函数来描述，即帕累托分布。</p><p>帕累托分布是一个skewed，厚尾(fat-tailed)分布。对于一个随机变量X来说，xm是X能取到的最小值，X的survival function是</p><img src="https://pic3.zhimg.com/v2-741c62239c2463814c055a2955019672_r.jpg" data-caption="" data-size="normal" data-rawwidth="337" data-rawheight="60"><p>由此可以得到X的概率分布函数(c.d.f)<br>其中系数α为正，被称为shape parameter,或tail index。<br>xm是1时，帕累托分布的累计概率分布函数图像为：</p><img src="https://pic1.zhimg.com/v2-8709724ebf3a40e988da54671a115d18_r.jpg" data-caption="" data-size="normal" data-rawwidth="368" data-rawheight="246"><p>对应的密度函数为：</p><img src="https://pic1.zhimg.com/v2-35fda4cdf1339256b9cffac39ba5cb26_r.jpg" data-caption="" data-size="normal" data-rawwidth="325" data-rawheight="219"><p>其他和Zipf类似，这里不再进一步描述。</p><p><br></p><h2><b>3、</b>Discrete uniform分布</h2><img src="https://pic2.zhimg.com/v2-ef280c13c087c405e7ff74ed77913ec2_r.jpg" data-caption="" data-size="normal" data-rawwidth="595" data-rawheight="284"><p><b>Zipf分布</b>满足上面的条件就会演变成离散均匀分布。 </p><p><b>离散均匀分布介绍：</b></p><p><b>X∼discrete uniform(a,b)</b>随机变量X和整数离散均匀分布参数a和b，a &lt; b。</p><img src="https://pic4.zhimg.com/v2-48e151f8c3efb6b5167bcf68c78e790d_r.jpg" data-caption="" data-size="normal" data-rawwidth="347" data-rawheight="52"><p>概率质量函数如下图所示：</p><img src="https://pic1.zhimg.com/v2-5392d30ae918c3732bbe2855a124d937_r.jpg" data-caption="" data-size="normal" data-rawwidth="361" data-rawheight="234"><p>例如：a23，n=32，则：</p><img src="https://pic3.zhimg.com/v2-ab2b772c9c7b3b66f477fbc0c362daa9_r.jpg" data-caption="" data-size="normal" data-rawwidth="519" data-rawheight="159"><p>X的累积分布函数：</p><img src="https://pic1.zhimg.com/v2-d1948d49a0d40172abfc3303890d9c4b_r.jpg" data-caption="" data-size="normal" data-rawwidth="441" data-rawheight="52"><p>X的残存函数：</p><img src="https://pic1.zhimg.com/v2-606e5c40756861e408dfe4ffca0bd71f_r.jpg" data-caption="" data-size="normal" data-rawwidth="429" data-rawheight="51"><p>X的风险函数：</p><img src="https://pic4.zhimg.com/v2-3ae88534a2102d587824e77ddf601611_r.jpg" data-caption="" data-size="normal" data-rawwidth="399" data-rawheight="54"><p>X的累积风险函数：</p><img src="https://pic2.zhimg.com/v2-5fa5acd1624f1639cc502244cb0b0005_r.jpg" data-caption="" data-size="normal" data-rawwidth="373" data-rawheight="44"><p>X的中位数m：</p><img src="https://pic2.zhimg.com/v2-562aded08b4586ef3597cdb1e273e858_r.jpg" data-caption="" data-size="normal" data-rawwidth="103" data-rawheight="49"><p>X的特征函数：</p><img src="https://pic4.zhimg.com/v2-6e00d6b5768ca2d76dcf884429f5e371_r.jpg" data-caption="" data-size="normal" data-rawwidth="464" data-rawheight="57"><p>X的总体均值，方差，偏度，峰度：</p><img src="https://pic4.zhimg.com/v2-b9ca5233233cade96e0a69ada23a6099_r.jpg" data-caption="" data-size="normal" data-rawwidth="522" data-rawheight="140"><h2><b>4、</b>Rectangular分布</h2><img src="https://pic4.zhimg.com/v2-80642d35076a3f86ad1a4d811ec61ee3_r.jpg" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="83"><p><b>离散均匀分布</b>满足上面的条件就会演变成<b>Rectangular分布</b>。</p><img src="https://pic4.zhimg.com/v2-caddf43d052236b7edf410e8a6eddb22_r.jpg" data-caption="" data-size="normal" data-rawwidth="312" data-rawheight="54"><p>概率质量函数，n=5 如下图所示：</p><img src="https://pic4.zhimg.com/v2-b6f666b509f5af34fc02333b95eaa90d_r.jpg" data-caption="" data-size="normal" data-rawwidth="351" data-rawheight="250"><p>其他和离散均匀分布类似，这里不再进一步描述。</p><p><br></p><h2><b>5、</b>Beta-binomial分布</h2><img src="https://pic4.zhimg.com/v2-3edd5d3e9938cc8814c70cfa70dcddd5_r.jpg" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="83"><p><b>贝塔-二项式分布介绍：</b></p><p>反过来当满足a=b=1时，贝塔-二项式分布符合了Rectangular分布。</p><p>贝塔-二项分布：二项分布中的参数p不是固定的值，是服从Beta(a,b)分布。 </p><p>计算公式：</p><img src="https://pic2.zhimg.com/v2-bb09b5d8ea49d3bad92801a543d83f53_r.jpg" data-caption="" data-size="normal" data-rawwidth="336" data-rawheight="48"><p>其中L(p|k)表示二项式分布的最大似然估计计算方式。然后将</p><img src="https://pic4.zhimg.com/v2-4b8e4ff2fc34de1756c702538415ed99_r.jpg" data-caption="" data-size="normal" data-rawwidth="166" data-rawheight="24"><p>整合到p得：</p><img src="https://pic3.zhimg.com/v2-c2e3b1aec1dc16b80a962c516836fd64_r.jpg" data-caption="" data-size="normal" data-rawwidth="336" data-rawheight="190"><p>期望：</p><img src="https://pic3.zhimg.com/v2-921290237b096c97d29ade77a6c28e40_r.jpg" data-caption="" data-size="normal" data-rawwidth="163" data-rawheight="60"><p><b>二项分布</b>就是重复n次独立的伯努利试验。在每次试验中只有两种可能的结果，而且两种结果发生与否互相对立，并且相互独立，与其它各次试验结果无关，事件发生与否的概率在每一次独立试验中都保持不变，则这一系列试验总称为n重伯努利实验，当试验次数为1时，二项分布服从0-1分布。</p><p>如果随机变量Ｘ服从二项分布，记为：</p><img src="https://pic2.zhimg.com/v2-cd0cfa10829c429d5af62b51fd1964f9_r.jpg" data-caption="" data-size="normal" data-rawwidth="91" data-rawheight="24"><p>恒有</p><img src="https://pic1.zhimg.com/v2-dd3b8d4694fb0b58ae63f92eea5fda0b_r.jpg" data-caption="" data-size="normal" data-rawwidth="108" data-rawheight="45"><p>当n相当大时，只要p不太靠近0或1， 特别是当nπ和n(1－π)都大于5时，二项分布B（n，π）近似正态分布。</p><img src="https://pic4.zhimg.com/v2-17084076bc8364e72adeee6ce9b6044e_r.jpg" data-caption="（a）概率函数直条图；（b）连续性校正直方图；（c）正态近似图" data-size="normal" data-rawwidth="640" data-rawheight="236"><p><b>贝塔分布</b>是一个作为伯努利分布和二项式分布的共轭先验分布的密度函数，在机器学习和数理统计学中有重要应用。贝塔分布中的参数可以理解为伪计数，伯努利分布的似然函数可以表示为，表示一次事件发生的概率，它为贝塔有相同的形式，因此可以用贝塔分布作为其先验分布。 </p><img src="https://pic3.zhimg.com/v2-ab2019e0b4cc63326761cf9432b6b8d9_r.jpg" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="56"><p>其中，B(a,b)是beta函数。</p><p>首先，现实生活中我们通常需要估计一件事情发生的概率，如抛一次硬币为正面的概率。我们可以进行统计的方式给出答案，比如抛了100次硬币，其中有30次向上，我们就可以说这个硬币为正面的概率是0.3。当然我们可以从另外一个角度回答问题，比我对实验的公信度进行怀疑，我就可以说为正面的概率是0.3的可能性是0.5，为0.2的可能性是0.2，为0.4的概率是0.3，给出硬币为正面的概率的分布，即伯努利实验中p的分布。给出参数的分布，而不是固定值，的好处有很多。</p><ul><li>一，如抛100次中，30次向上，和抛100000次中30000次向上，两者估计p的值都是0.3。但后者更有说服力。如果前者实验得到p为0.3的置信度是0.5的话，后者实验得到p为0.3的置信度就有可能是0.9，更让人信服。</li><li>二，估计一个棒球运动员的击球命中率。如果我们统计一个新棒球运动员的比赛次数，发现，3场比赛中，他击中2次，那么我们可以说他的击球命中率是2/3么？显然不合理，因为因为根据棒球的历史信息，我们知道这个击球率应该是0.215到0.36之间才对。但如果我们给出的是击球明中率的分布，而不是固定的值，就可以表示我们对当前击球命中率估计的置信度，提供了更加丰富的信息。因为只观察了三次比赛，所以我们得到运动员命中率为2/3的概率是0.1，表示我们对这个命中率值不确定。</li></ul><p>由前面可知，我们的需求是为了模拟模型参数的模型，beta分布是来模拟”取值范围是从0到1时的模型的参数的分布”。比如就求抛硬币为正的概率p为例。如果我们知道p的取值，我们就可以计算抛10次硬币，其中有1次向上的概率是</p><img src="https://pic3.zhimg.com/v2-4c6cc165d075840a00f29583c153ebff_r.jpg" data-caption="" data-size="normal" data-rawwidth="205" data-rawheight="41"><p>有3次向上的概率是</p><img src="https://pic4.zhimg.com/v2-93ea557f6eb439b76d39e4ef6fc82488_r.jpg" data-caption="" data-size="normal" data-rawwidth="202" data-rawheight="34"><p>有6次向上的概率是P</p><img src="https://pic4.zhimg.com/v2-7ab22d36d7f2413c1cde1312aca5e646_r.jpg" data-caption="" data-size="normal" data-rawwidth="202" data-rawheight="36"><p>那么我们如何求p值呢？ 前面说的有两种方法，一个是给固定的值 ，一个给值的密度分布函数。我们这里介绍后者，假设p值符合Beta分布。即</p><img src="https://pic4.zhimg.com/v2-0ef89a765228c6a88f8c4215f188fa37_r.jpg" data-caption="" data-size="normal" data-rawwidth="280" data-rawheight="46"><p>那么现在我们又做了10次实验，其中4次为正，6次为反，称为信息X。那么我们现在要计算得到信息X后概率p的分布，即P(p|X)，根据贝叶斯条件概率计算公式 </p><img src="https://pic1.zhimg.com/v2-fb72fc493fd071dd720124cc315c9aef_r.jpg" data-caption="" data-size="normal" data-rawwidth="362" data-rawheight="481"><p>这里使用最大似然估计计算P(X|p)，即</p><img src="https://pic1.zhimg.com/v2-d48d690c544c6e2a1f25649c187ce16d_r.jpg" data-caption="" data-size="normal" data-rawwidth="188" data-rawheight="41"><p>其中分子分母中</p><img src="https://pic2.zhimg.com/v2-cf6815595d7fb4a9b49b3b045dbc302b_r.jpg" data-caption="" data-size="normal" data-rawwidth="30" data-rawheight="34"><p>和是B(a,b)函数是常数项可以约去，最后得到：</p><img src="https://pic2.zhimg.com/v2-d3e25c987788b7a2c835af761480a919_r.jpg" data-caption="" data-size="normal" data-rawwidth="240" data-rawheight="32"><p><b>总结：</b>目的是计算得到p的概率分布，而不是固定的值。首先根据之前的经验或者统计，假设p服从Beta(a,b)分布，a表示之前统计中为正的次数，b为之前统计中为负的次数。接着，根据新做的实验或者新到达的信息X，来修正p的分布，修正后的p同样是服从Beta分布，只不过是参数由(a,b)变成(a+m,b+n)，m表示新得到的信息中为正的次数，n表示新得到的信息中为负的次数。这样的修正过程可以很直观的被理解，而且修改前后是兼容的，很好的体现了一个学习修正的过程。</p><p>用<b>X~betabinomial(a,b,n</b>)来表示随机变量X具有a、b和n的贝塔-二项分布，其中a、b &gt; 0和n为正整数。贝塔-二项式随机变量X与参数A、b和n具有概率质量函数。</p><img src="https://pic2.zhimg.com/v2-6b0640d803a8aa60241729e92a50d398_r.jpg" data-caption="" data-size="normal" data-rawwidth="633" data-rawheight="62"><p><b>贝塔-二项式</b>随机变量是一个具有随机参数p的二项随机变量，它是具有与参数a和b的beta分布。 </p><p>n = 20 的概率质量函数和3个不同参数如下图所示：</p><img src="https://pic4.zhimg.com/v2-54196f77d7c680c9dbbc55e1df797a2b_r.jpg" data-caption="a = 0.7、b = 2" data-size="normal" data-rawwidth="511" data-rawheight="155"><img src="https://pic4.zhimg.com/v2-81fe63b0ae40a8758a59bdd7803724c5_r.jpg" data-caption="a = 2、b = 2" data-size="normal" data-rawwidth="501" data-rawheight="160"><img src="https://pic3.zhimg.com/v2-ea50ac2901807c019215da0533330e68_r.jpg" data-caption="a = 6、b =4" data-size="normal" data-rawwidth="496" data-rawheight="160"><p>X的总体均值，方差，偏度，峰度： </p><img src="https://pic3.zhimg.com/v2-4b5c222e5a06bdb1ab5e35a4e60bf69d_r.jpg" data-caption="" data-size="normal" data-rawwidth="429" data-rawheight="128"><p><br></p><img src="https://pic3.zhimg.com/v2-a283cc2b67804cefe5c2b7a6d86dfc21_r.jpg" data-caption="" data-size="normal" data-rawwidth="1141" data-rawheight="697"><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
