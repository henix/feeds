<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Swaption条款</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/63067899">原文</a></p>
<div class="title-image"><img src="" alt=""></div><p><b>本系列依偏产品条款，与“预测”，“交易策略”，”期权策略“等贴近交易的内容不直接相关。不感兴趣的知有可以继续右上角了。</b></p><p><b>前言：</b></p><p>继上一篇<a href="https://zhuanlan.zhihu.com/p/61908474" class="internal">黑猫Q形态：Cap/Floor条款</a>之后，本篇讨论swaption的条款。在此之前我们要补充一下Cap的一些内容：</p><p>实际上，一个以Libor为underlying的看涨期权被称为caplet。一张Cap合同往往会包含一个或多个caplets（由期限决定），因此一个cap可能会有一系列payoff。 </p><p>至于这样的系列payoff会不会牵扯到forward starting（延期开始）问题呢？其实不是的，固定收益产品因为往往自带一个利率的远期结构。以Libor为例，他的一般会含有一个maturity和一个tenor（持续期），因此其代表的是远期利率，其大部分收益结构都是限期可以确定的。 那么什么时候固收产品才是真正的forward starting呢？ 一般是strike date（敲定执行的日期）长过Underlying maturity的时候，比如maturity 为6m， tenor 为3m（一般报价是会采用6m3mLibor这样的形式），一旦strike date超过距今为止六个月以后，（限于）这个6m3mLibor的远期收益将不会被现在的期限结构所表示，因此被视为forward starting。</p><p>之所以要先理解Libor后理解Swaption是因为Swaption既可以看作是Swap的衍生品，也可以看作是Libor的衍生品。</p><hr/><p>Swaption是一个虽然名曰香草实际上比绝大多数奇异产品更奇异的衍生品（其Und swap本身就是相当奇异的东西）。虽然“Swaption is a option under annuity measure。”这样的经典面试题标准答案是耳熟能详的，细挖下去其奇异程度还是超乎常人的理解范围。如果将一般欧式期权比喻为一颗螺丝，swaption的复杂程度大概是一台挖掘机。很难想象如此奇异的产品，竟然是固收市场里流动性排前列的利率参照物，如此说来整个固收市场就是一个奇异的市场也不为过。</p><p>本文是介绍条款的文章，不会去深究其本身的奇异结构（那些东西也是很多人不愿意看到的所谓”虚假理论“）。而仅仅条款方面，swaption也是相当“奇异”的。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Underlying（标的资产）：</b></p><p>Swaption，顾名思义，其Und就是Swap。</p><p>Swap和其他Und最大的区别，就是他不是一个说买就买的Und，而是一个合同。一般“购买”swap是两个机构和中央对手方（一般是ISDA）之间的一个共同行为。由于ISDA（International Swaps and Derivatives Association，国际互换和衍生品协会）有一定的撮合职能，其一定程度上能作为exchange一样，提供不同估值日近似可以作为und的标的swap合同。一个五年的美元swap可以报：5yUSD ISDA SWAP。</p><p>Swap作为und，可以视为一个复合Libor产品。我们称在t时刻，第n期tenor（T_n 到 T{n+1}之间）的Libor为第n期Libor（也叫第n期远期单利，其中T_n被称为第n个Libor观察日，或者叫Libor重置日，Libor固定日）：</p><p><img src="https://www.zhihu.com/equation?tex=L_n%28t%29+%3DL%28t%2CT_n%2CT_%7Bn%2B1%7D%29" alt="L_n(t) =L(t,T_n,T_{n+1})" eeimg="1"/> </p><p>再定义从第k期开始（T_k 到 T_{k+1}之间）到第m期结束（T_m 到 T_{m+1}之间）的年金系数：</p><p><img src="https://www.zhihu.com/equation?tex=A_%7Bk%2Cm%7D%28t%29+%3D+%5Csum_%7Bn%3Dk%7D%5E%7Bk%2Bm-1%7D%5Ctau_nP%28t%2CT_%7Bn%2B1%7D%29" alt="A_{k,m}(t) = \sum_{n=k}^{k+m-1}\tau_nP(t,T_{n+1})" eeimg="1"/> 其中\tau_n为第n期tenor</p><p>容易看出年金系数可以作为多期利息的贴现率。</p><p>那么老生常谈地，作为Und的swap可以表示为：</p><p><img src="https://www.zhihu.com/equation?tex=S_%7Bk%2Cm%7D%28t%29+%3D%5Cfrac%7B%5Csum_%7Bn%3Dk%7D%5E%7Bk%2Bm-1%7D%5Ctau_nP%28t%2CT_%7Bn%2B1%7D%29L_n%28t%29+%7D%7BA_%7Bk%2Cm%7D%28t%29%7D" alt="S_{k,m}(t) =\frac{\sum_{n=k}^{k+m-1}\tau_nP(t,T_{n+1})L_n(t) }{A_{k,m}(t)}" eeimg="1"/> </p><p>这里有几点要注意的地方:</p><p>1.虽然原则上所有持续期为五年的swap我们都可以称之为5yUSD ISDA SWAP，但是不同开始期和不同结束期的swap是不同的。由k-m，我们可以确定一系列swap，可以统称之为5年swap。</p><p>2.由于swap的每一个payoff之间都是定期的（虽然固定方和浮动方可以规定不同的频率），因此swap对于一方而言，其tenor  \tau 是在合同里就确定好的。（不会专门提取流动好的固定tenor，比如1m3m， 3m6m， 6m1y）</p><p>3.S是浮动方的payment，固定方的payment可以用k来表示。 </p><p>4.接3，可能会有人表示，浮动方的payment不是“未来”知道么，那这个现在就确定的S是什么？实际上，确定Libor具体值的时间就是第n个重置日，在那一天，浮动方的Libor rate为 <img src="https://www.zhihu.com/equation?tex=L%28T_n%2C+T_n%2C+T_%7B+n%2B1%7D%29" alt="L(T_n, T_n, T_{ n+1})" eeimg="1"/> ,这个的确是未来才知道的, 因而swap的观察日（对浮动方而言）等同于Libor的观察日。我们提到的L_n是他的从n期的tenor struct所估算的现值。这里这种独特的远期期限结构被称为tenor struct而不是term struct，是因为决定他的并不是单纯的第几个到期日（term, maturity，这里也就是Libor的重置日), 而是第几个tenor。 我们习惯成称一系列Libor：</p><p><img src="https://www.zhihu.com/equation?tex=L%28t%2CT_n%2CT_%7Bn%2B1%7D%29%2C~L%28t%2CT_%7Bn%2B1%7D%2CT_%7Bn%2B2%7D%29...L%28t%2CT_%7Bn%2Bj%7D%2CT_%7Bn%2Bj%2B1%7D%29+" alt="L(t,T_n,T_{n+1}),~L(t,T_{n+1},T_{n+2})...L(t,T_{n+j},T_{n+j+1}) " eeimg="1"/> </p><p>为tenor structure。</p><p>那么实际上一个swap总可以写为这样的形式：</p><p><img src="https://www.zhihu.com/equation?tex=A_%7Bk%2Cm%7D%28t%29+%28S_%7Bk%2Cm%7D%28t%29+-k%29+" alt="A_{k,m}(t) (S_{k,m}(t) -k) " eeimg="1"/> </p><p>而对应的swaption则会表现为：</p><p><img src="https://www.zhihu.com/equation?tex=A_%7Bk%2Cm%7D%28t%29+E%5E%7BA_%7Bk%2Cm%7D%7D%28S_%7Bk%2Cm%7D%28t%29+-k%29%5E%2B+" alt="A_{k,m}(t) E^{A_{k,m}}(S_{k,m}(t) -k)^+ " eeimg="1"/> </p><p>其中 <img src="https://www.zhihu.com/equation?tex=E%5E%7BA_%7Bk%2Cm%7D%7D+" alt="E^{A_{k,m}} " eeimg="1"/> 表示求期望是用到的贴现因子（也叫计价单位）是 <img src="https://www.zhihu.com/equation?tex=A_%7Bk%2Cm%7D%28t%29+" alt="A_{k,m}(t) " eeimg="1"/> 年金系数。这样的swaption成为payer swaption充当了vanilla swaption中的call，充当put的被称为receiver swaption。</p><p class="ztext-empty-paragraph"><br/></p><p>接下来我们要看swap作为underlying本身他的条款在哪。</p><p>首先Libor有的，他几乎都有，而且都是双份的。原因是最大流通的固定浮动方经常不是一个国家的（美英，美欧）。</p><p>daycount：有了fixed daycount和float daycount，一般都是有最大的两个固定浮动支出方决定的。以美元为例，固定方为30/360， 浮动方为ACT/360。</p><p>frequency：不同于Libor，swap也有固定浮动频率之分，一般浮动会比固定的短，这是因为Libor有重置（观测）需求。以美元为例，固定频率为6m，浮动为3m。</p><p>resetCalendar：对应Libor und的重置日，swap一般会有一个重置日历（其实Libor也有重置日历，但是对于单期Libor und而言，他只有一个重置日，而swap中有很多期的tenor，因此根据Libor的重置日法则会生成出一个日历）。每一个币种都会遵循一个的日历（或者重置日法则），以美元为例重置日历遵循伦敦日期。（这里也可以看出为啥有一个代表浮动利率的Libor，有一个专有名词和和其指代的另一个专有率，也就是人们熟知的那个将要被sofr取代的“Libor”。英国曾是最大浮动率流动方）</p><p>互换开始结束日：由于和Libor不同，swap不是一个根据benchmark在特定日重置的浮动und而是一个合同，而作为合同就存在开始和结束日。</p><p class="ztext-empty-paragraph"><br/></p><p><b>StrikeTenor(start tenor) & ExpiryTenor(end tenor):</b></p><p>swaption也有StrikeTenor 和 ExpiryTenor大致上与Libor相同， 这里只介绍不同的部分。</p><p>与Libor不同的是，swaption一般是到期了才敲定的（一般情况下StrikeDate = ExpiryDate）。这是因为swaption的目标是选择进入一个swap与否，这样一来swaption的执行日（ExpiryDate）时，一个swap至少是未完结的，严格要求还得是未开始的。 因此swaption的StrikeTenor 和 ExpiryTenor和Libor有了不同的意义：</p><p>对于严格要求到期即开始swaption，StrikeTenor表示swaption作为期权的的持续期，而ExpiryTenor则作为und swap本身的持续期。 此时的ExpiryTenor必须等于swap本身的持续期（ExpiryTenor = swapTenor），而swaption的StrikeDate必须等于swap的开始日（StrikeDate= swapStartDate）。</p><p>对于允许进入已经开始的还未结束swap的swaption，StrikeDate（定义与上篇中Libor的StrikeDate相同，其中swaption的spot days就是Libor的spot days） 允许晚于swap本身的开始日（StrikeDate > swapStartDate）。这类产品其实并不是严格意义上的vanilla swaption，而是一种奇异的swaption。</p><p>还有一类可以归到vanilla swaption中的非常规操作是允许只进入一部分的swap（ExpiryTenor <swapTenor）。这类产品可以用vanilla swaption的方式去定价，因而归在了一般swaption里。</p><p>一般人们看到的swaption也是是以StrikeTenor x ExpiryTenor 的形式进行报价的。 所以我们会看到 5yx5y这样的swaption期限，意为五年敲定执行，然后进入一个swap五年的swaption。</p><p class="ztext-empty-paragraph"><br/></p><p><b>ccy（币种）和 quote ccy（报价币种）：</b></p><p>跨币种swap是另一种更加奇异的衍生品，他牵扯到了跨币种年金系数，因而不归在vanilla swap里。swaption默认的ccy和quote ccy都是本币。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Payment Calendar（结算日历）：</b></p><p>和其他衍生品一样，swaption的payment date一般在执行日之后，不同的是由于其und本身有多个payment date，swaption因而有多个payment date，从而服从一个日历，这个日历本身是swap的属性。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Settlement Method（结算方式）：</b></p><p>这是swaption和一般衍生品区别最大的地方之一。对于一般的衍生品，结算方式只会改变最后的到手的是und(physical settled)还是现金(cash settled)。swaption由于und本身是个合同，一旦选择现金结算，swaption本身的属性会发生巨大改变。因而cash-settled swaption和一般swaption不一样，将被作为一种奇异swaption出现，具有特殊的年金系数：</p><p><img src="https://www.zhihu.com/equation?tex=a%28S_T%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7D%7B%5Cfrac%7B%5Ctau_n%7D%7B%5Cprod_%7Bi%3D0%7D%5E%7Bn%7D+%281%2B%5Ctau_iS_T%29%7D%7D" alt="a(S_T) = \sum_{n=0}^{N-1}{\frac{\tau_n}{\prod_{i=0}^{n} (1+\tau_iS_T)}}" eeimg="1"/> </p><p>留意 <img src="https://www.zhihu.com/equation?tex=S_T" alt="S_T" eeimg="1"/> 并没有观察日属性 T_n，这是由于一旦选择cash settled，swap合同（潜在的）在签立时（swaption到期）既有固定的现金流（以现在的tenor structure为依据估算现值），因而无需在更远的未来的重置日单独观察。所以在swaption在结束时即可确定所有信息，这里原本需要tenor structure才能确定的互换率的S，退而变为一个只要term structure就可以确定的率。</p><p>注意结算方式不等同于报价方式（reference type），结算方式决定的是交割物，报价方式决定的是购买方式是以本金形式还是单位形式(手数，unit）。由于swaption作为固定收益产品，所以默认选择fixedcash 作为reference type。</p><hr/><p><b>后记和吐(si)槽(huo):</b></p><p>事实上，这些在金融领域里的生产（产品，系统性工作）环节，可能地位确实不如流通环节(比如交易）高。这些属于金融里的”基建“职能确实不是最赚钱的，也不是最有趣的（甚至是trivial的），被知乎随便年入1mPnlCut的quant们鄙视鄙视不入行那也只能认了。</p><p>但是这些”民工“内容，是很多金融活动的源头。对于理解how things work和how things run是极其有帮助。</p><p>当然，是些产品执行上的琐碎细节大佬们一般不care这些，只要能预测市场赚钱，里面内容什么样，自己买的是什么，可能都是无所谓的，也不屑于去追究的。这些低等的工作就交给黑猫这样的低等文职，板砖民工罢了。</p><p>希望这些低等民工实务的介绍能帮助一些从业者和学习者。</p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
