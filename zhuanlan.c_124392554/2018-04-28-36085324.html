<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>汉诺塔杂谈（三）——非递归算法</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/36085324">原文</a></p>
<div class="title-image"><img src="https://pic3.zhimg.com/v2-771ff3541309ad53a07e06cd86964f32_r.jpg" alt=""></div><p>下面介绍 <equation>n</equation> 个盘子的汉诺塔的非递归算法：</p><p><b>1.</b> 将三根柱子按顺序排成品字型，若 <equation>n</equation> 为偶数，按顺时针方向依次摆放A、B、C；若 <equation>n</equation> 为奇数，按顺时针方向依次摆放A、C、B。</p><p><b>2.</b> 把圆盘1从现在的柱子移动到顺时针方向的下一根柱。</p><p><b>3.</b> 接着，把另外两根柱上可以移动的圆盘移动到新的柱上（事实上只有唯一的选择）。</p><p><b>4.</b> 如果没有达到目标要求，则返回步骤2。</p><p>例如下图是 <equation>n=3</equation> 的情况：</p><img src="https://pic2.zhimg.com/v2-48daff50d79be9eb853d9843a1fecc40_r.jpg" data-caption="" data-size="normal" data-rawwidth="1401" data-rawheight="506" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><img src="https://pic3.zhimg.com/v2-2e2450672ed733d05302c40022eadf60_r.jpg" data-caption="" data-size="normal" data-rawwidth="1386" data-rawheight="506" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><img src="https://pic1.zhimg.com/v2-e5b834c987ca7ab2857d47d5c75b7468_r.jpg" data-caption="" data-size="normal" data-rawwidth="1464" data-rawheight="506" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><img src="https://pic4.zhimg.com/v2-9a80b4387a06118e7f1cdaaa583e4806_r.jpg" data-caption="" data-size="normal" data-rawwidth="1469" data-rawheight="506" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>由二进制也可以得到 <equation>n</equation> 个盘子的汉诺塔的非递归算法：</p><p>对于有 <equation>n</equation> 个盘子的汉诺塔问题，按序写出所有 <equation>n</equation> 位普通二进制码 <equation>B_nB_{n-1}…B_2B_1</equation> ，自左而右标记为第 <equation>n</equation> 位、第 <equation>n-1</equation> 位、…第2位、第1位。则 <equation>\min(k|i=B_nB_{n-1}…B_2B_1，B_k=1)</equation> 表示第 <equation>i</equation> 步移动 <equation>k</equation> 号盘子。</p><ul><li>对于最小的盘子而言，总是有两种移动的可能性。若 <equation>n</equation> 为偶数，最小的盘子的移动次序是A→B→C→A→…；若 <equation>n</equation> 为奇数，最小的盘子的移动次序是A→C→B→A→…。</li><li>对于其他盘子，总是有唯一的移动可能性。</li></ul><p><equation>n=4</equation> 的情况见下表。</p><img src="https://pic1.zhimg.com/v2-bf997e85836935b43312efb0ea0796c3_r.jpg" data-caption="" data-size="normal" data-rawwidth="820" data-rawheight="587" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>在<i>Mathematica</i>中有一个函数“<b>IntegerExponent</b>”，官方的帮助给出的说明是：</p><blockquote>IntegerExponent[n, b] gives the highest power of b that divides n. </blockquote><p>就是返回能整除 <equation>n</equation> 的（大于1的整数） <equation>b</equation> 的最高次幂。例如：</p><img src="https://pic3.zhimg.com/v2-840e57a1b25bde0b945565a254c95259_r.jpg" data-caption="" data-size="normal" data-rawwidth="199" data-rawheight="46" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>说明 <equation>3^3|432</equation> 而 <equation>3^4 \nmid 432</equation> 。</p><p>于是在<i>Mathematica</i>中，输入“<b>IntegerExponent [Range[2^n - 1], 2] + 1</b>” 可以得到 <equation>n</equation> 个盘子的汉诺塔问题依次移动的盘子的号码。</p><p>例如：</p><img src="https://pic2.zhimg.com/v2-ed5b19953a0864904050c95e3407778d_r.jpg" data-caption="" data-size="normal" data-rawwidth="316" data-rawheight="46" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>具体移动方法同前。</p><hr><p>由格雷码也可以得到一个非递归算法，这部分内容我将放在下一篇中介绍。</p><p>此外，假设 <equation>m</equation> 的二进制表示为 <equation>B_nB_{n-1}…B_2B_1</equation> ，则可以由 <equation>B_nB_{n-1}…B_2B_1</equation> 得到移动 <equation>m</equation> 步后 <equation>n</equation> 个盘子在3个柱的分布情况，这一部分也将在下一篇中介绍。</p><p>（注意到格雷码与普通二进制码的转换关系，则可以将 <equation>m</equation> 的二进制表示转换为 <equation>m</equation> 对应的格雷码）。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
