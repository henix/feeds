<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>函数式编程与数字电路</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/44000409">原文</a></p>
<p>目前函数式编程应用主要是在编译器（Haskell，ml），以及大数据和分布式系统（Scala），但其实用函数式语言编写硬件逻辑电路也有一段历史了，特别是开源的RISC V 最近让Chisel好好火了一把，这一幕挺像当年的Spark。除了基于Scala的Chisel外，还有一门是基于Haskell的Clash。Chisel是利用macro元编程和Scala原本的编译器，实现了一个可以方便构建RTL的库，而后者的方法更激进，是通过修改Haskell的编译器GHC来直接把Haskell代码转变为RTL。</p><p>需要注意的是，虽然他们都是基于非常高层的抽象语言，但是和所谓的High Level Synthesis没什么关系，要实现任何东西都是需要自己在RTL级别进行构建和思考的，编译器并不会变魔术一样帮你实现某些算法，可以把他们看作是某些语法糖，理论上仍然是可以把Verilog再编译回去的，而不像Haskell编译为汇编那样不可逆。</p><p>那为啥不老老实实用Verilog？虽然都是RTL，但是他们相当于给Verilog加上了部分元编程的能力，所以最后生成的Verilog代码大小可能会让人惊叹。另一个是模块化，在项目一大以后优势就体现出来了，Scala的Trait，Haskell的Type Class，都能够更好的组织代码。在编辑器方面，Scala有开源免费的Intellij ，用起来是非常爽的，能提升不少战斗力，另外Haskell的VS code也不错。</p><p>Chisel和Clash除了语法和实现，感觉差异不是很大，Clash由于是基于Haskell而且严重依赖Type Class，所以学习曲线更加陡峭，不过Chisel深入学习以后也需要了解下Subtyping相关的类型系统知识。定制化方面，Chisel的架构更灵活一些，分离出了一个叫Firrtl的IR，比较容易加入某些中间代码变换。</p><p><br></p><p>关于Chisel对于生产力的提升，可以看看 @<a href="https://www.zhihu.com/people/xfguo">郭雄飞</a> 的回答</p><a href="https://www.zhihu.com/question/58584770/answer/284119982" data-draft-node="block" data-draft-type="link-card" data-image="v2-a5b864ff40c14ea5bd899c6072809019" data-image-width="120" data-image-height="120" data-image-size="ipico">https://www.zhihu.com/question/58584770/answer/284119982</a><p><a href="https://www.zhihu.com/question/58584770/answer/284119982">郭雄飞：RISC-V开源项目为什么选用chisel这种新的高层次建模语言，而不是SystemVerilog?</a></p><a href="https://www.zhihu.com/question/58584770/answer/284119982" data-draft-node="block" data-draft-type="link-card" data-image="v2-a5b864ff40c14ea5bd899c6072809019" data-image-width="120" data-image-height="120" data-image-size="ipico">RISC-V开源项目为什么选用chisel这种新的高层次建模语言，而不是SystemVerilog?</a><a href="https://github.com/freechipsproject/chisel3/wiki" data-draft-node="block" data-draft-type="link-card" data-image="v2-3adf1d09765d5840cf68feec5eeda97e" data-image-width="420" data-image-height="420" data-image-size="ipico">freechipsproject/chisel3</a><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
