<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>这是《Rust编程之道》的故事</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/57576985">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-0363e60dae0aad173e7d9e9ae18484d7_b.jpg" alt=""></div><p>2018年12月28号，《Rust编程之道》开启了预售，截止到本月月底就满两个月了。现在《Rust编程之道》已经上架各大电商平台正式开售，亚马逊Kindle电子版也已上架，欢迎大家订购学习。</p><p>除此之外，我也想跟大家唠嗑一下关于这本书的一些故事。</p><hr><h2><b>恶评风波</b></h2><p>预售开启后的第一周，遭遇恶评。</p><p>当我满心欢喜，等待读者对本书的评价时。第一个看到的却是一个心理残疾的恶心小人发布的恶评，具体可参见我知乎专栏相关文章。</p><p>有的人说，不就是一个差评吗？那么在乎干什么？心胸要宽广点。这话说来轻巧。一年的精心写作，比作怀胎十月也不为过。新生命的诞生，总是让人喜悦的，并且对它未来的成长充满了期待。换成谁，也绝不会允许别人恶意的诋毁。这不是差评那么简单，我绝不会原谅这个小人。</p><p>过年期间，看了《流浪地球》，一部匠心之作。同样是在豆瓣，遭遇了垃圾的诋毁。为什么呢？就是吴京PTSD综合症患者，也不管电影拍的如何，看见吴京就会骂。这些人和我得罪的那个小人是一样的心理残疾。</p><p>当然，也有更多的人跟我说：「真正的读者，都有自己的判断力」。事实证明，确实如此。</p><p>恶评风波过后几天，全国各地的读者陆陆续续都收到了书。大家在看过本书以后，纷纷找到我，对我说出内容一致的话：「书写的不错」。这句话，将我内心因为被恶评而产生的坏心情一扫而光。之前我在知乎也公开了几次，我也保存了很多私聊的截图，但暂时就不公开了。</p><h2><b>正视差评</b></h2><p>除了恶评，其实还有差评。比如你去翻一下淘宝或京东下面的评论，会发现有人说：「什么烂书，开篇就有错」。实话实说，对于这种差评，我是百分百的接受。因为确实有错。</p><p>人无完人，孰能无过？我是第一次写这么厚的书。在写书之前我并没有预见或约束自己一定要写多少字。我只是想把我觉得该写的，都写出来。结果一下就写了百万字（当然包括代码）。</p><p>写书的过程，也是很累的。到后期，我自己都有点麻木。有时候，为了写好一句话，想半天。而且，我发现一个诡异的问题。当时写的文字，自己阅读几遍，觉得非常通顺达意。但是过几天，或几周再看，感觉写的完全是狗P不通。甚至还有明显的语病。</p><p>这就是人类的大脑。它是有缺陷的，只能通过反复的筛查和修改来发现问题。再加上稿件交给出版社，还需要专门的排版人员去排版，这也增加了出错的风险。编辑们也很辛苦，审稿三次。说这么多，并不是想找借口，而是想说明一个问题，这种事情是难以避免的。</p><p>而且这种差评，在我决定写本书之前就已经预料到了。为了弥补这种可以预见的错误，我做了以下两件事：</p><p><b>一、 创建Rusty风格的源码仓库。</b></p><p>因为Rust的文档注释功能相当强大，所以我就想到，直接把源码创建为一个crate多好。发布到<a href="http://link.zhihu.com/?target=https%3A//crates.io/crates/tao-of-rust" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">crates.io/crates/tao-of</span><span class="invisible">-rust</span><span class="ellipsis"></span></a>，就可以直接生成相关文档 ：<a href="http://link.zhihu.com/?target=https%3A//docs.rs/tao-of-rust/1.0.2/tao_of_rust/" class=" wrap external" target="_blank" rel="nofollow noreferrer">tao_of_rust - Rust</a>。并且可以一键点击文档中的示例，一键跳转到<a href="http://link.zhihu.com/?target=https%3A//play.rust-lang.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Rust Playground</a>，方便动手调试代码。</p><figure><noscript><img src="https://pic3.zhimg.com/v2-f3c05388cd1d22471df211fbfeccfbe2_b.jpg" data-rawwidth="2066" data-rawheight="858" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="2066" data-original="https://pic3.zhimg.com/v2-f3c05388cd1d22471df211fbfeccfbe2_r.jpg"></noscript><img src="https://pic3.zhimg.com/v2-f3c05388cd1d22471df211fbfeccfbe2_b.jpg" data-rawwidth="2066" data-rawheight="858" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="2066" data-original="https://pic3.zhimg.com/v2-f3c05388cd1d22471df211fbfeccfbe2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-f3c05388cd1d22471df211fbfeccfbe2_b.jpg"></figure><figure><noscript><img src="https://pic3.zhimg.com/v2-c3b96dd66eff89952173e6074bb820a6_b.png" data-rawwidth="3720" data-rawheight="582" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="3720" data-original="https://pic3.zhimg.com/v2-c3b96dd66eff89952173e6074bb820a6_r.jpg"></noscript><img src="https://pic3.zhimg.com/v2-c3b96dd66eff89952173e6074bb820a6_b.png" data-rawwidth="3720" data-rawheight="582" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="3720" data-original="https://pic3.zhimg.com/v2-c3b96dd66eff89952173e6074bb820a6_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-c3b96dd66eff89952173e6074bb820a6_b.png"></figure><p>另外一个好处就是，如果示例代码有印刷错误、手误，或者因为Rust版本升级而无法运行，我可以方便地修改这个仓库源码。书中也声明了，让大家以仓库源码为主，毕竟提供了这么方便的功能。</p><p><b>二、打通沟通渠道。</b></p><p>2018年初，我开始为Rust社区提供「Rust日报」服务。每天梳理一些Rust的新闻，发送到Rust社区。这样做有两个方面的原因。第一个原因，是我自己也想了解Rust社区的动态，并且通过这个过程，挖掘一些学习资源。整理和分享，顺手的事。第二个原因，就是为了建立一种渠道，在书出版以后，可以把我和读者方便地联系起来。</p><p>事实证明效果很好。以随书源码的issues为勘误列表，我创建了勘误模板，大家在看到我在日报里推送的消息，都踊跃地提交了勘误。</p><figure><noscript><img src="https://pic2.zhimg.com/v2-111fa856807f12e92ad79e8254eb7135_b.jpg" data-rawwidth="2328" data-rawheight="1860" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="2328" data-original="https://pic2.zhimg.com/v2-111fa856807f12e92ad79e8254eb7135_r.jpg"></noscript><img src="https://pic2.zhimg.com/v2-111fa856807f12e92ad79e8254eb7135_b.jpg" data-rawwidth="2328" data-rawheight="1860" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="2328" data-original="https://pic2.zhimg.com/v2-111fa856807f12e92ad79e8254eb7135_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-111fa856807f12e92ad79e8254eb7135_b.jpg"></figure><p>这些勘误，和「差评」的不同点在于：这些读者都是认真看书的，他们接受书本的错误，对作者（我）宽容以待，并且是经过认真思考的，并且希望获得准确的知识。一位读者在豆瓣这样评价： 「瑕不掩瑜」。因为本书的整体，大家都是认同的。</p><p>经过这样的反馈，也方便我及时修正书中的相应问题。在后续的印刷版本或电子书中及时更正。</p><p>我一直认为，写书就是和读者的交流和沟通。通过这本书的勘误，以及读者群里的各种交流，我体验到了什么叫「群体智慧」。写书的过程，太漫长。再加上我自己的水平和认知也是有限的，所以对于一些概念的理解，难免也有问题。这些认真的读者发现了，他们通过我构建的反馈渠道给我正面反馈。我根据这些反馈，再重新思考相应内容，又进一步加深了我对相应知识的理解。</p><h2><b>斩获殊荣</b></h2><p>我的用心，都在书里了，大家也看在眼里了。下面是本书斩获的一些殊荣。</p><p><b>预售第一个月：</b></p><ol><li>开启了第二次印刷</li><li>京东24小时新书榜第一、计算机总榜第六</li><li>京东计算机新书周榜前十</li><li>京东计算机新书月榜前十 </li><li>京东图书计算机类首页热门读物推荐</li></ol><figure><noscript><img src="https://pic2.zhimg.com/v2-f789c1c6fa90d354d071556093d7ed25_b.jpg" data-rawwidth="2588" data-rawheight="1390" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="2588" data-original="https://pic2.zhimg.com/v2-f789c1c6fa90d354d071556093d7ed25_r.jpg"></noscript><img src="https://pic2.zhimg.com/v2-f789c1c6fa90d354d071556093d7ed25_b.jpg" data-rawwidth="2588" data-rawheight="1390" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="2588" data-original="https://pic2.zhimg.com/v2-f789c1c6fa90d354d071556093d7ed25_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-f789c1c6fa90d354d071556093d7ed25_b.jpg"></figure><figure><noscript><img src="https://pic4.zhimg.com/v2-869216479c10e5d6a82677f850a20d53_b.jpg" data-rawwidth="1940" data-rawheight="2246" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="1940" data-original="https://pic4.zhimg.com/v2-869216479c10e5d6a82677f850a20d53_r.jpg"></noscript><img src="https://pic4.zhimg.com/v2-869216479c10e5d6a82677f850a20d53_b.jpg" data-rawwidth="1940" data-rawheight="2246" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="1940" data-original="https://pic4.zhimg.com/v2-869216479c10e5d6a82677f850a20d53_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-869216479c10e5d6a82677f850a20d53_b.jpg"></figure><p><br></p><p><br></p><p><b>预售第二个月（也是本月）</b></p><ol><li>开启了第三次印刷。</li><li>亚马逊Kindle版电子书刚上线一天，即进入了新品销售排行榜程序语言第一、互联网技术总榜第八。</li><li>豆瓣评价 9.2分。</li></ol><p><br></p><figure><noscript><img src="https://pic3.zhimg.com/v2-687ded7f995e5cd3428c2067774c0486_b.jpg" data-rawwidth="4042" data-rawheight="1906" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="4042" data-original="https://pic3.zhimg.com/v2-687ded7f995e5cd3428c2067774c0486_r.jpg"></noscript><img src="https://pic3.zhimg.com/v2-687ded7f995e5cd3428c2067774c0486_b.jpg" data-rawwidth="4042" data-rawheight="1906" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="4042" data-original="https://pic3.zhimg.com/v2-687ded7f995e5cd3428c2067774c0486_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-687ded7f995e5cd3428c2067774c0486_b.jpg"></figure><figure><noscript><img src="https://pic2.zhimg.com/v2-1827b0ca0eaaf05fd9592f917157e1c9_b.jpg" data-rawwidth="2060" data-rawheight="782" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="2060" data-original="https://pic2.zhimg.com/v2-1827b0ca0eaaf05fd9592f917157e1c9_r.jpg"></noscript><img src="https://pic2.zhimg.com/v2-1827b0ca0eaaf05fd9592f917157e1c9_b.jpg" data-rawwidth="2060" data-rawheight="782" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="2060" data-original="https://pic2.zhimg.com/v2-1827b0ca0eaaf05fd9592f917157e1c9_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-1827b0ca0eaaf05fd9592f917157e1c9_b.jpg"></figure><figure><noscript><img src="https://pic2.zhimg.com/v2-d26e6c4659a70cd4547d5e05095b6f01_b.jpg" data-rawwidth="2046" data-rawheight="746" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="2046" data-original="https://pic2.zhimg.com/v2-d26e6c4659a70cd4547d5e05095b6f01_r.jpg"></noscript><img src="https://pic2.zhimg.com/v2-d26e6c4659a70cd4547d5e05095b6f01_b.jpg" data-rawwidth="2046" data-rawheight="746" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="2046" data-original="https://pic2.zhimg.com/v2-d26e6c4659a70cd4547d5e05095b6f01_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-d26e6c4659a70cd4547d5e05095b6f01_b.jpg"></figure><p>我在写本书之前，就立下了一个小心愿：「一定要写出豆瓣评分9.0以上的作品」。这个小心愿的标杆就是我之前翻译的《Ruby原理剖析》的评分。其实，在《流浪地球》的恶评事件之后，我对豆瓣的评分已经很失望了。但至少，排除那一个恶评之外，评价的这几个人中，都是认真看过书的。我的小心愿，总算是得以满足。</p><h2><b>何谓之「道」</b></h2><p>之前看到有的人说，中国人起个书名就爱起个「道」啊「禅」啊，都看腻了。但我其实更希望他问：“你为什么要起《Rust编程之道》这个名字？”。</p><p>「道」，这个词，出自老子的《道德经》。这本书蕴含了辩证逻辑思想，代表了中国的哲学智慧。「道」，就是指在宇宙万物背后隐藏的那个规律。 这个规律包含了秩序，也包含了混沌。宇宙万物的运转，脱离不了「道」。</p><p>《Rust编程之道》书名中的「道」，就是指「Rust宇宙中的万物」背后所遵循的那个东西。与「现实宇宙」不同的地方在于，「Rust宇宙」是人造的，而「现实宇宙」是神造的。（这里的神，代表「自然」的鬼斧神工）。</p><p>所以，我在第一章开篇就这样写道：</p><blockquote> 你肯定有过夏夜仰望星空的时候，但不知道你是否思考过这样一个问题：如何才能知道宇宙万物星罗棋布的规律？科学家们殚精竭虑地研究，就是为了探寻这个秘密。如果科学家们能和宇宙的设计者对话，就可以通过设计者的亲口描述了解其对宇宙万物的规划，这样就可以对研究宇宙万物起到提纲挈领的作用，科学家们的工作会更有成效。但是，没有这种“如果”。  <br> 一门编程语言就像一个小宇宙，语言中的各种语法概念就像一颗颗星辰。对于初学者来说，看这些语法概念与看星罗棋布时产生的迷惑是相似的。幸亏编程语言是由人类创造的，编程语言的作者可以被找到，编程语言的源码也可以被看到，甚至一些好的编程语言还会为你准备好非常丰富的文档，供你参阅学习。通过这些信息我们可以了解到：一门语言缘何诞生？它想解决什么问题？它遵循什么样的设计哲学？一门好的语言是有内涵哲学的语言，它表里如一，有所想，有所为。  <br> </blockquote><p>这就是我为什么把书名定为《Rust编程之道》的原因。</p><p>Rust从诞生以来，一直就伴随着一个标签：「学习曲线高」。然而，在我开始学习Rust之后，我发现一个问题，其实并非Rust学习曲线高，而是我们的学习方法有问题。</p><p>最初，我只了解到Rust是一个混合范式的语言，我以为只是简单的把OOP和函数式的概念加工一下，混起来。但深入了解以后，我发现并不是这么简单。Rust语言的混合范式，实际上是通过类型系统，将现有范式进行了有机地融合。一切都那么地自然。</p><p>最初，我以为凭借我十年编程的功力，学Rust不就是几天的事吗？然而，我又错了。在我深入Rust以后才明白一个道理：不仅仅是未知的知识会形成我学习的阻碍，连我以往的经验都会成为我的绊脚石。</p><p>Rust要解决的问题也非常明确：内存安全、高性能、现代化编程语言。</p><p>内存安全，还不能有GC，并且要求高性能，这就意味着Rust具有精细化操作内存的能力，而且还不容易产生未定义行为。Rust借助类型系统，以及独特的所有权机制，达成了这个目标。</p><p>那什么是现代化编程语言？现代化意味着语言应该具有高度的表达能力。按往常的知识，高度抽象表达能力，就意味着性能的损耗，Rust如何做到呢？答案是：零成本抽象。同样是借助类型系统，几乎所有的抽象都只在编译期，编译后的代码将不包含任何抽象。</p><figure><noscript><img src="https://pic2.zhimg.com/v2-5f6346af275a1fc2ce3ff2ce5b0bc949_b.jpg" data-rawwidth="3270" data-rawheight="2072" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb" width="3270" data-original="https://pic2.zhimg.com/v2-5f6346af275a1fc2ce3ff2ce5b0bc949_r.jpg"></noscript><img src="https://pic2.zhimg.com/v2-5f6346af275a1fc2ce3ff2ce5b0bc949_b.jpg" data-rawwidth="3270" data-rawheight="2072" data-size="normal" data-caption="" class="origin_image zh-lightbox-thumb lazy" width="3270" data-original="https://pic2.zhimg.com/v2-5f6346af275a1fc2ce3ff2ce5b0bc949_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-5f6346af275a1fc2ce3ff2ce5b0bc949_b.jpg"></figure><p><br></p><p>因此，我得出一个Rust的语言架构。Rust语言的类型系统，承上启下，保证语言的一致性。上承所有权语义，下启无GC的内存安全管理。</p><p>《Rust编程之道》就是按此语言架构来进行内容组织。希望可以帮助读者把Rust中的概念结构化和层次化，形成系统的知识体系，达成精通Rust的目的。</p><h2>寄语读者</h2><p>看本书的最佳实践，其实我都写在文前了。可惜我发现，很多人拿到书，都不看文前。</p><p>《如何阅读一本书》中，对于看书学习的过程，有一个类比非常好。 </p><p>你学滑雪的时候，是先学会一个个的分解动作，然后把这些分解动作，再归并为一个整体，你才能快乐地滑雪。没有人滑雪的时候，还在做一个个的分解动作。</p><p>看书学习也是这样一个过程。书的作者（比如我），将一个整体性的知识，拆分一个个的分解知识（各个章节）。读者首先要做的是，先对Rust有一个整体性的了解，然后再逐步学习分解知识，最后，再需要你自己，把学到的分解的知识，梳理为一个整体。这样才是你自己的知识。</p><p>其实第一章和第二章的目标，就是为了让你从整体上去了解Rust语言。 多动手练习代码，从语法上先把陌生感消除掉，然后再深入到后面的章节更好。在练习第二章代码的时候，也不要过于深入到细节。要记住第二章的副标题所说的：好读书，不求甚解。你不可能一遍学会Rust。</p><p>最后，希望大家都能精通Rust。如果想要进读者群交流学习，可以加此微信邀请进群。</p><figure><noscript><img src="https://pic4.zhimg.com/v2-269daab872eb5cfe83881b46bd6f0b57_b.jpg" data-rawwidth="226" data-rawheight="178" data-size="normal" data-caption="" class="content_image" width="226"></noscript><img src="https://pic4.zhimg.com/v2-269daab872eb5cfe83881b46bd6f0b57_b.jpg" data-rawwidth="226" data-rawheight="178" data-size="normal" data-caption="" class="content_image lazy" width="226" data-actualsrc="https://pic4.zhimg.com/v2-269daab872eb5cfe83881b46bd6f0b57_b.jpg"></figure><p>最后的最后，感谢大家的认可。我会再接再厉，继续出好作品。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
</body>
</html>
