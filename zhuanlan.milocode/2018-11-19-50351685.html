<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>腾讯香农编码器，尽享高清视频体验</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/50351685">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-e4f37e174d1ddaab435feae983354b99_r.jpg" alt=""></div><p>      这里给大家推荐一款高清视频编码利器——腾讯自主研发的香农编码器（<a href="https://shannon-lab.qq.com/">Tencent Shannon Encoder</a>，简称T265）。在莫斯科国立大学主办的2018世界视频编码器大赛（MSU codec comparison）中，香农编码器从众多编码器中脱颖而出，继在客观指标取得优异成绩后，经过主办方严格的人眼主观测试，取得人眼主观质量评测的冠军：</p><a href="http://www.compression.ru/video/codec_comparison/hevc_2018/#subjective_report" data-draft-node="block" data-draft-type="link-card" data-image="v2-abe98f4240a1cc40c89eba20b0b97f1f" data-image-width="300" data-image-height="150" data-image-size="180x120">HEVC Video Codecs Comparison 2018</a><img src="https://pic3.zhimg.com/v2-47bc5baf13fb26c090e45800af0d5276_r.jpg" data-caption="图1 MSU发布的腾讯香农编码器的性能测试结果" data-size="normal" data-rawwidth="1981" data-rawheight="1825" data-watermark="watermark" data-original-src="v2-47bc5baf13fb26c090e45800af0d5276" data-watermark-src="v2-81a023252af7f5ea01e2440f5dff8543" data-private-watermark-src=""><p>       衡量一个编码器的优劣是一件非常复杂的事情，涉及编码质量，速度和质量平衡以及码控平稳度等多个指标，受多种因素影响。下面结合大赛的测评报告，对香农编码器做三点评述。</p><h2><b>注重SSIM与PSNR的均衡</b></h2><p>       在MSU的编码质量测评中，使用了SSIM 和PSNR两种客观指标，其中SSIM指标侧重于衡量编码视频图像和原视频图像之间的结构相似性，而PSNR指标侧重于衡量编码视频图像相对原视频图像的保真度。为了保证编码视频图像的主观质量，一般需要保证SSIM和PSNR两者间的均衡，避免导致意外的主观质量问题。如图2所示，中间和右边的图像虽然PSNR一样，但右边图像有严重块效应，主观质量很差，这里SSIM指标比PSNR指标更好地反映了主观质量；而如图3所示，中间和右边图像SSIM一样，但右边图像有像素块像素值完全反转的严重失真，主观质量差得多，这里PSNR指标比SSIM指标更好地反映了主观质量。</p><img src="https://pic2.zhimg.com/v2-29a51a9507c710d2f247dd51349d4b46_r.jpg" data-caption="图2 编码PSNR相同，SSIM不同的情况" data-size="normal" data-rawwidth="1224" data-rawheight="508" data-watermark="watermark" data-original-src="v2-29a51a9507c710d2f247dd51349d4b46" data-watermark-src="v2-087fa81e798672e649ff95a2df3358dd" data-private-watermark-src=""><img src="https://pic4.zhimg.com/v2-5d4560722f32536e4b965efc5745bdd9_r.jpg" data-caption="图3 编码SSIM相同，PSNR不同的情况" data-size="normal" data-rawwidth="1238" data-rawheight="442" data-watermark="watermark" data-original-src="v2-5d4560722f32536e4b965efc5745bdd9" data-watermark-src="v2-ac05bb1186b6566c819912458a76dc8b" data-private-watermark-src=""><p>       腾讯香农编码器在优化过程中综合考虑了PSNR和SSIM模型的特点，在算法设计实现中采取了两者比较均衡的策略，给用户带来较好的主观视觉体验。</p><img src="https://pic1.zhimg.com/v2-01168dc1038b4aff2856a944c7cc27f8_r.jpg" data-caption="图4 香农编码器PSNR和SSIM排名" data-size="normal" data-rawwidth="1064" data-rawheight="239" data-watermark="watermark" data-original-src="v2-01168dc1038b4aff2856a944c7cc27f8" data-watermark-src="v2-681fe1d4f18b36846d35390013bb9f27" data-private-watermark-src=""><h2><b>侧重中低码率的互联网应用</b></h2><p>       在MSU的测评中所有测试序列的编码码率段都主要集中在1~12Mbps，甚至更高码率上，而互联网视频应用中编码码率段基本集中在1~6Mbps之间。腾讯香农编码器作为一款主要服务于互联网视频应用的编码器，在优化时也更关注于1~6Mbps中低码率段，由MSU测评的数据可以得到如下中低码率段的排名和全码率段的排名对比，香农编码器在中低码率段更有优势。</p><img src="https://pic2.zhimg.com/v2-dff397db45dc83ac6dbaf1be938e4f2e_r.jpg" data-caption="图5 Playground序列全码率段RD曲线" data-size="normal" data-rawwidth="1886" data-rawheight="774" data-watermark="watermark" data-original-src="v2-dff397db45dc83ac6dbaf1be938e4f2e" data-watermark-src="v2-0a7fcda5e9e48ebc3fced768539b38c1" data-private-watermark-src=""><img src="https://pic2.zhimg.com/v2-ddb872587456c9fd8e61dcd7f39864ff_r.jpg" data-caption="图6 中低码率段部分编码器排名" data-size="normal" data-rawwidth="531" data-rawheight="215" data-watermark="watermark" data-original-src="v2-ddb872587456c9fd8e61dcd7f39864ff" data-watermark-src="v2-2f53376173d8e27820bc6eec49b01f74" data-private-watermark-src=""><h2><b>编码鲁棒性</b></h2><p>       MSU根据时间复杂度和空间复杂度选择了迥异的测试序列，这些测试序列基本涵盖了各种场景，用来测试编码器对各种场景的编码适应能力。香农编码器通过更合理的码率分配策略，将码控精度控制在5%以内的同时，还额外节省了超过6%的带宽。其编码的鲁棒性表现也还不错，如下图所示，对于典型测试序列Sea Sunrise，当许多编码器的RD曲线都出现异常的时候，香农编码器的RD曲线不但正常，压缩性能也超过竞品。测试序列的难例挖掘是编码器研发不断迭代过程中的一个难点，香农编码器在编码鲁棒性上还有可提升的空间。</p><img src="https://pic4.zhimg.com/v2-6ff9807d0518e4504dc8bce3b2738a65_r.jpg" data-caption="图7 Sea Sunrise RD曲线" data-size="normal" data-rawwidth="984" data-rawheight="415" data-watermark="watermark" data-original-src="v2-6ff9807d0518e4504dc8bce3b2738a65" data-watermark-src="v2-e0e6a39811e0a47590915cf38dc470ba" data-private-watermark-src=""><h2><b>总结和展望</b></h2><p>       腾讯香农编码器在MSU视频编码比赛中经受了检验，无论客观指标，还是主观指标，成绩都非常突出，未来我们在技术上还会持续演进，带来更清晰流畅的视频体验。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
