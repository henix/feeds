<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>「Rust每日新闻」本周精选  •  第四期</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/40797885">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-10c6913d0bc44f08fed6d57e31af7e30_r.jpg" alt=""></div><blockquote>前言：<br>从2018年开始，我每天会花1个小时关注Rust社区动态，并且在<a href="http://rust.cc">http://rust.cc</a>论坛、<a href="https://t.me/rust_daily_news">tg channel</a>、GitHub都开通了Rust每日新闻，分享我每天的见闻，偶尔也夹杂了一些个人的观点。半年过去了，Rust每日新闻已经成为了Rust社区群大家每天必看的内容。今天突然想到，在这个知乎专栏里，每周精选几篇Rust社区中的动态，和大家分享。分享的内容就不按时间排序了。<br><br><i>2018-07-29</i></blockquote><h2><b>官方新闻：</b></h2><p><b>官方核心团队：Rust 2018是什么</b></p><p>12月6日发布的Rust 1.31.0将是“Rust 2018”的第一个版本。</p><p>通过在Cargo.toml中增加edition = '2018'，将会开启一些在新的功能。</p><p>edition 的意义在于Rust自身的进化，例如try是Rust 2018中的关键字，无法在Rust 2015中去修改它，这是为了不去破坏社区生态。如果开发者选择了edition='2018'，就代表了接受Rust的这种内部的变化，接受新的关键字try。</p><p>edition升级的只是表面语法功能，Rust的核心概念是不会改变的。</p><p>官方通过cargo fix工具帮助开发者升级到2018 edition</p><p>Rust编译器可以方便地管理版本的兼容性：</p><ul><li>Rust 2015和Rust 2018是彼此兼容的</li><li>Rust编译器知道如何编译这两个版本，就像javac知道如何编译Java9和Java10，gcc和clang知道如何处理C++14和C++17一样。</li><li>你可以在Rust 2018版本中依赖Rust 2015的库，反之亦然。</li><li>Rust 2015版本并未冻结。</li><li>目前Rust 2018预览版已经登陆Nightly版本</li></ul><p>Rust大版本，每三年发布一次，下一次是Rust 2021。</p><p>文章中还提到了Rust 2.0 </p><p>&gt; “2.0”的概念在开发人员的脑子里极度泛滥成灾。 2.0应该是重大的突破性变化，当是时候扔掉所有东西重新开始的时候，才会考虑2.0。 因此，我们会非常谨慎地发布Rust 2.0。</p><p><a href="https://blog.rust-lang.org/2018/07/27/what-is-rust-2018.html">https://blog.rust-lang.org/2018/07/27/what-is-rust-2018.html</a></p><p><br></p><p><b>「2018年7月」Rust流行快照</b></p><p>该文从多个角度观察了Rust的流行度：</p><ul><li>GitHub增长趋势：</li></ul><blockquote>    -  使用GitHub Octoverse中用到的Rust语言pull请求数判断，Rust排名第15，2018年PR数是52936。第一名的是JavaScript，PR数是1736476<br>    -  按活跃的项目来算，Rust一共有2604个活跃项目，排名第15<br>- 「重磅」Rust的商业用户增长飞快<br>    - Amazon，Rust作为构建工具<br>    - Atlassian，在后端使用Rust<br>    - Dropbox，前后端都用了Rust<br>    - Facebook，源码管理工具<br>    - Google， Fuchsia项目的一部分<br>    - MicroSoft，新的Azure IoT 网络上的一部分<br>    -  npm，在某些核心服务上使用了Rust<br>    - Red Hat，用Rust创建了一些新的存储系统<br>    - Reddit，用Rust处理评论<br>    - Twitter， 构建团队使用Rust<br>    -   可以在[Rust之友](<a href="https://www.rust-lang.org/en-US/friends.html">https://www.rust-lang.org/en-US/friends.html</a>)网页上看到更多公司身影，包括百度、三星、mozilla、Chef等。</blockquote><ul><li>游戏行业</li></ul><blockquote>    - Chucklefish，在新的游戏上使用Rust<br>    - Electronic，在SEED中使用Rust<br>    - Frostbite， 在后端处理中使用Rust<br>    - Ready at Dawn Studios，所有游戏将使用Rust （开发了《战神：奥林匹斯之链》 和《 战神：斯巴达之魂》的那家）<br>    - Unity，在数据工程中使用Rust<br>    - 其他的独立开发者</blockquote><ul><li>工作：</li></ul><blockquote>    - 招聘职位越来越多<br>    - Rust岗位目前覆盖云计算、区块链、安全、科学/医疗保健职位等领域</blockquote><ul><li>社区治理： </li></ul><blockquote>   - 在过去，语言仅仅是用于商业开发，但是Rust社区改变了这种状况，Rust社区是语言的一部分，它提供了新用户、新项目的基调。<br>   - 全世界的Rust meetup已经有130+<br>   - Rust官方twitter 粉丝超过了31k，GitHub star也接近30k<br>   - Rust团队规模增长了一倍</blockquote><p>以上只是Rust社区数据一瞥，Rust未来会如何？我肯定会一直关注并看好。</p><p><a href="http://www.jonathanturner.org/2018/07/snapshot-of-rust-popularity.html">http://www.jonathanturner.org/2018/07/snapshot-of-rust-popularity.html</a></p><p><br></p><p><b>Rust2018发布计划</b></p><blockquote>2018-08-02  1.29         1.28       Nightly = “Edition Preview 2”<br>2018-09-13  1.30         1.29       Beta = “Edition RC 1”<br>2018-10-25  1.31         1.30       Beta = “Edition RC 2”<br>2018-12-06  1.32         1.31       Stable = “Edition release”   </blockquote><p><a href="https://internals.rust-lang.org/t/rust-2018-release-schedule-and-extended-beta/8076">https://internals.rust-lang.org/t/rust-2018-release-schedule-and-extended-beta/8076</a></p><p><br></p><p><b>「官方」网络工作组重启</b></p><p>之前都去忙 Futures 0.3 alpha  了，接下来重启网络工作组完成其余的基础工作：</p><ul><li>集成Futures到现有的库中</li><li>制定、记录和改进网络服务生态系统：</li></ul><blockquote>   - 协议支持同步和异步（http、http/2、grpc、thrift等）<br>   - 为现有的中间件建立接口（rabbitmq、kafka、rdis等，以及其他存储中间件）  <br>   - Web框架<br>   - 完善异步编程指南</blockquote><p><a href="https://internals.rust-lang.org/t/rebooting-the-network-services-working-group/8036">https://internals.rust-lang.org/t/rebooting-the-network-services-working-group/8036</a></p><p><br></p><p><b>ralfj： 指针真的很简单只是整数而已吗？</b></p><p>最近回归Rust核心团队的ralfj来帮助你破除这种传言。ralfj正在为mir的内存模型而努力，这篇文章是他对指针模型和思考。主要涉及两个问题：</p><ul><li>指针是什么</li><li>内存中的字节是什么</li></ul><p>因为他需要在mir中实现，如果指针和字节仅仅是数字，那么可能无法满足他的需求。</p><p>结论：</p><ol><li>指针绝不是整数。证明：如果两个指针具有相同的地址，并不意味着它们就可以相互交换使用。</li><li>指针是什么？其实没有这个问题的完整答案。在Rust中，由miri实现的指针模型是：指针是由“分配资源的唯一标识ID”和“偏移量”组合而成。</li><li>字节也不仅仅是0..256范围内的数字。</li></ol><p><a href="https://www.ralfj.de/blog/2018/07/24/pointers-and-bytes.html">Pointers Are Complicated, or: What's in a Byte?</a></p><p><br></p><p><b>js-sys发布 0.2</b></p><p>js-sys是配合wasm-bindgen 使用的库，它绑定了ECMAScript标准中存在的JavaScript所有全局API，方便调用</p><p>当然js-sys还没有覆盖100%的JS API，还需要你的帮忙：<a href="https://github.com/rustwasm/wasm-bindgen/issues/275">js-sys: Expose bindings to ALL the global JS things · Issue #275 · rustwasm/wasm-bindgen</a> </p><p>这是个体力活</p><p><a href="https://rustwasm.github.io/2018/07/26/announcing-the-js-sys-crate.html">https://rustwasm.github.io/2018/07/26/announcing-the-js-sys-crate.html</a></p><p>另外wasm-bindgen也包括了Web API的绑定，对应于web-sys库： <a href="https://github.com/rustwasm/wasm-bindgen/blob/master/crates/web-sys/README.md">rustwasm/wasm-bindgen</a></p><p>web-sys库也需要帮助</p><p><br></p><p><b>Cargo中的版本选择</b></p><p>在这篇文章里，Aturon解释了为什么Cargo在解决依赖关系时通常会选择最新版本。</p><p>Aturon认为「依赖地狱」出现的原因是以下四点目标没有做好：</p><ul><li>重复性。在不同的机器上进行构建都会得到相同的结果</li><li>控制。用户可以控制何时以及如何升级依赖</li><li>兼容性。</li><li>可维护性。</li></ul><p>因此，包管理的作用就是提供机制、默认值和最佳实践，以便促使生态系统在这些目标之间达成平衡。目前并没有出现一个最佳的解决办法。</p><p>最大版本解析的基本原理：</p><ul><li>大多数包管理器都使用最大（最新）版本，只有vgo使用了最小版本</li><li>选择最大版本，需要lockfile文件的帮助来实现重现机制，而最小版本则不需要</li><li>选择最大版本，是促进生态系统一致性的协议：版本之间彼此测试兼容性要以最新版本为准；而选择最小版本，则不会达到生态系统一致的目的。</li><li>选择最大版本，有利于下游用户获得最新的错误修正，也可以促使生态系统中的库倾向于维护最新版本。</li><li>Cargo团队认为，选最大版本是对整个生态系统有好处的。主要的成本在于lockfile的复杂性。</li></ul><p>文章里也有关于工具链的更多讨论：</p><p><a href="http://aturon.github.io/2018/07/25/cargo-version-selection/">Version selection in Cargo</a></p><p><br></p><p><b>rustfix现在已经被合并到了cargo中成为其子命令</b></p><p>cargo fix </p><p><a href="https://github.com/rust-lang/cargo/pull/5723">Import `cargo fix` directly in to Cargo by alexcrichton · Pull Request #5723 · rust-lang/cargo</a></p><hr><h2><b>社区新闻</b></h2><p><b>【重磅】开发《战神》的游戏大厂宣布将全面拥抱Rust</b></p><p>曾开发 《战神：奥林匹斯之链》 和《 战神：斯巴达之魂》 的业界大厂 Ready at Dawn Studios 日前表示，将放弃C/C++开发，全面拥抱Rust。</p><p>其CTO表示：将使用Rust添加或替换掉核心技术模块，最初会使用C-API来和遗留代码集成，直到最终不再有遗留代码。</p><p>&gt; 老实说，我不再认为有任何理由使用C++</p><img src="https://pic4.zhimg.com/v2-ff8276bf4fbda24a047facfd5463b060_r.jpg" data-rawwidth="954" data-rawheight="540" data-caption="" data-size="normal" data-watermark="watermark" data-original-src="v2-ff8276bf4fbda24a047facfd5463b060" data-watermark-src="v2-d33f93d6185c046784dc62ffb45f5fa8" data-private-watermark-src=""><img src="https://pic3.zhimg.com/v2-b68965ac67ba6d27a6dbca1b0c5e2b8b_r.jpg" data-rawwidth="1276" data-rawheight="282" data-caption="" data-size="normal" data-watermark="watermark" data-original-src="v2-b68965ac67ba6d27a6dbca1b0c5e2b8b" data-watermark-src="v2-cee39dcf58b0681b85fdf925a83f626b" data-private-watermark-src=""><p><br></p><p><b>cargo-audit 0.3 和 rustsec 0.7 发布</b></p><p>cargo-audit可以对项目中的crate进行安全审计，发现是否存在有包含安全漏洞的包</p><p>rustsec是一个crates.io生态系统中的安全漏洞数据库</p><p>这次版本更新有重大革新</p><p><a href="https://www.reddit.com/r/rust/comments/919c8k/announcing_cargoaudit_03_and_rustsec_07_audit/">r/rust - Announcing cargo-audit 0.3 and rustsec 0.7: audit your Rust projects for vulnerable crates</a></p><p><br></p><p><b>Rust安全公告数据库： Rustsec</b></p><p>RUSTSEC-2018-0003：  如果在Iterator::next中迭代器给SmallVec :: insert_many传播了恐慌，则在unwind的时候运行析构函数，导致双重释放。在smallvec 0.6.3中得到修复。</p><p><a href="https://rustsec.org/">https://rustsec.org/</a></p><p><br></p><p><b>硬件钱包也开始用Rust了</b></p><p>作者在Ledger加密狗上尝试使用Rust，并且最终使用Rust替代了所有的C SDK依赖。</p><p><a href="https://medium.com/@roosmaa/bringing-rust-to-ledger-hardware-wallet-ccf1356a7de1">https://medium.com/@roosmaa/bringing-rust-to-ledger-hardware-wallet-ccf1356a7de1</a></p><p>源码：<a href="https://github.com/roosmaa/bolos-rs">roosmaa/bolos-rs</a></p><hr><h2><b>博文与库</b></h2><p><b>教你如何阅读反汇编</b></p><p>有助于Rust的学习</p><p><a href="https://hackernoon.com/you-too-can-read-disassembly-d47a3be74010">https://hackernoon.com/you-too-can-read-disassembly-d47a3be74010</a></p><p><br></p><p><b>gcode v0.3发布</b></p><p>一个解析gcode程序的小项目，主要用于嵌入式应用程序（CNC机器或3D打印机）。</p><p><a href="https://www.reddit.com/r/rust/comments/90x6k0/announcing_gcode_v030/">https://www.reddit.com/r/rust/comments/90x6k0/announcing_gcode_v030/</a></p><p><br></p><p><b>基于组件的Rust程序架构模式</b></p><p>本文探索组件模式以及如何在Rust中实现它，从组件trait的基本概念开始，然后基于组件的并行操作，通过消息传递来通信。并且包含一个完整的示例。</p><p>大型应用程序通常由许多有状态进程组成，这些进程必须以特定的顺序启动和停止。 组件模型使这些关系显式和声明性，而不是隐式代码。</p><p>组件trait：</p><code lang="text">#[derive(Debug)]
enum ComponentError {
  NotStarted,
  InvalidConfiguration
}

pub trait Component {
    fn get_name(&amp;self) -&gt; &amp;str;
    fn start(&amp;mut self) -&gt; Result&lt;(), ComponentError&gt;;
    fn stop(&amp;mut self) -&gt; Result&lt;(), ComponentError&gt;;
}</code><p><a href="https://vadosware.io/post/a-pattern-for-component-based-program-architecture-in-rust/">https://vadosware.io/post/a-pattern-for-component-based-program-architecture-in-rust</a></p><p><br></p><p><b>Rust实现的解析器词法分析器生成器plex</b></p><p>提供两个宏：lexer!和parser!</p><ul><li>lexer! 可以创建基于DFA的词法分析器，工作方式像lex</li><li>parser! 可以创建一个LALR(1)的解析器，工作方式像yacc</li></ul><p><a href="https://github.com/goffrie/plex">goffrie/plex</a></p><p><br></p><p><b>Don't Panic</b></p><p>该文作者分析了在多线程并发程序中发生panic的问题所在，并探讨了解决方法</p><p><a href="https://vorner.github.io/2018/07/22/dont_panic.html">Dont_panic</a></p><p><br></p><p><b>之前的Cretonne项目改名为Cranelift</b></p><p>是一个高性能的WASM代码生成器</p><p><a href="https://github.com/CraneStation/cranelift">CraneStation/cranelift</a></p><p><br></p><p><b>使用Rust开发静态Web 应用</b></p><p>作者记录了他的Yew和Rust三天之旅</p><p><a href="http://bluejekyll.github.io/blog/rust/2018/07/22/static-web-app-rust.html">http://bluejekyll.github.io/blog/rust/2018/07/22/static-web-app-rust.html</a></p><p><br></p><p><b>Rust+Wasm实现的svg编辑器</b></p><p>Demo： <a href="http://ivanceras.github.io/svgbob-editor/">Convert your ascii diagram scribbles into happy little SVG</a></p><p>代码： <a href="https://gitlab.com/ivanceras/svgeditor-simple">ivanceras / svgeditor-simple</a></p><p><br></p><p><b>Rust+WebAssembly构建同构的Web App</b></p><p>实现了一个虚拟dom，可以根据服务端的HTML字符串渲染到浏览器的dom，完全同构，纯Rust+Wasm</p><p><a href="https://github.com/chinedufn/percy">chinedufn/percy</a></p><p><br></p><p><b>Toshi，基于Tantivy的全文搜索引擎</b></p><p>作者的目标是让Toshi成为ElasticSearch</p><p><a href="https://github.com/hntd187/toshi">hntd187/Toshi</a></p><p><br></p><p><b>[教程] 如何使用Rust构建OpenGL渲染器</b></p><p><a href="https://www.reddit.com/r/rust/comments/92abkg/rust_and_opengl_from_scratch_a_blog_post_series/">r/rust - Rust and OpenGL from scratch, a blog post series where we learn how to build OpenGL renderer with Rust</a></p><p><a href="http://nercury.github.io/rust/opengl/tutorial/2018/02/08/opengl-in-rust-from-scratch-00-setup.html">http://nercury.github.io/rust/opengl/tutorial/2018/02/08/opengl-in-rust-from-scratch-00-setup.html</a></p><p><br></p><p><b>macOS上交叉编译Linux二进制文件案例</b></p><p>苹果上是有点麻烦，这篇文章真及时</p><p><a href="http://timryan.org/2018/07/27/cross-compiling-linux-binaries-from-macos.html">A “rustup target” Example: Using a Mac to cross-compile Linux binaries</a></p><p><br></p><p><b>nphysics官方导读上线</b></p><p>nphysics是纯Rust实现的2D和3D物理引擎</p><p><a href="http://nphysics.org/">http://nphysics.org/</a></p><p><br></p><p><b>使用Rust构建推荐系统</b></p><p>文章以构建一个推荐好书的应用为示例：根据个人的阅读历史，为其推荐下一步的内容阅读建议。基于sbr包里的推荐拟合模型</p><p><a href="https://maciejkula.github.io/2018/07/27/recommending-books-with-rust/">Recommending books (with Rust) - Mostly Engineering</a></p><p><br></p><p><b>基于Rust和wasm-bindgen实现的在线CBOR 解析工具</b></p><p>CBOR可以理解为二进制JSON格式</p><p>这哥们说：</p><p>&gt; 我真的必须把它交给Rust WASM团队，只是扔给前端几个Rust crate说明不了什么问题</p><p>言外之意就是必须用实际的应用来展示Rust和wasm-bingen的强大</p><p><a href="https://www.reddit.com/r/rust/comments/92gir9/i_really_have_to_give_it_to_the_rust_wasm_team/">r/rust - I really have to give it to the Rust WASM team, they made it trivial to throw a frontend on top of a Rust crate</a></p><p>CBOR的更多介绍可以看这个幻灯片：<a href="https://www.slideshare.net/ChristophEngelbert/cbor-the-better-json">https://www.slideshare.net/ChristophEngelbert/cbor-the-better-json</a></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
