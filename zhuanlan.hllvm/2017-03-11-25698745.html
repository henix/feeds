<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[Java] 新版本的Java将会废弃Object.finalize()，并添加新的java.lang.ref.Cleaner</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/25698745">原文</a></p>
下面这俩RFE相映成趣：<ul><li><a href="https://bugs.openjdk.java.net/browse/JDK-8138696" data-editable="true" data-title="java.lang.ref.Cleaner - an alternative to finalization" class="">JDK-8138696: java.lang.ref.Cleaner - an alternative to finalization</a><br></li><li><a href="https://bugs.openjdk.java.net/browse/JDK-8165641" class="" data-editable="true" data-title="Deprecate Object.finalize">JDK-8165641: Deprecate Object.finalize</a><br></li></ul><p>结合这个讨论串来看更美味：<a href="http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-March/046650.html" data-editable="true" data-title="RFR 9: 8165641 : Deprecate Object.finalize">RFR 9: 8165641 : Deprecate Object.finalize</a></p><p>以后新学Java的同学大概可以少为学习finalizer的用法而痛苦了。嗯不，是换成“如何使用java.lang.ref.Cleaner”而痛苦（逃</p><p>顺带一提，这个新的 java.lang.ref.Cleaner 其实是以前的 sun.misc.Cleaner 的公有API移植版。对后者比较熟悉的同学应该会见过它在 DirectByteBuffer 等实现中的用法。</p><p>Cleaner 是基于 PhantomReference 的，所以不会像finalizer那样有复活对象的机会，所以坑会比finalizer稍微少一点。嗯<i>稍微</i>少一点…</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
