<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>教你使用Docker搭建渗透测试靶场：webug4.0</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/98035469">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-5ebff57af477d29dd1a1185522870d5c_b.jpg" alt=""></div><h2>webug4.0</h2><p>WeBug 名称定义为”我们的漏洞”靶场环境 ，基础环境是基于 PHP/mysql 制作搭建而成，中级环境与高级环境分别都是由互联网漏洞事件而收集的漏洞存在的操作环境。部分漏洞是基于Windows操作系统的漏洞所以将WeBug的web环境都装在了一个纯净版的Windows 2003的虚拟机中。在 webug3.0 发布后的四百多天 <a href="https://link.zhihu.com/?target=http%3A//www.226safe.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">226安全团队</a>终于在大年初二发布了 webug 的 4.0 版本。 </p><p>webug4.0官网（貌似出了点事故）：<a href="https://link.zhihu.com/?target=http%3A//www.webug.org/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">webug.org/</span><span class="invisible"></span></a></p><p>Webug4.0官方源码：<a href="https://link.zhihu.com/?target=https%3A//github.com/wangai3176/webug4.0" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/wangai3176/w</span><span class="invisible">ebug4.0</span><span class="ellipsis"></span></a></p><h2>靶场内容</h2><div class="highlight"><pre><code class="language-text">1.  注入
1.1 报错注入  - flag
1.2 布尔注入  - flag
1.3 延时注入  - flag
1.4 CSV注入
1.5 POST注入  - flag
1.6 XML注入  - flag
1.7 注入过滤  - flag
2. XSS
2.1 反射型XSS  - flag
2.2 存储型XSS  - flag
2.3 DOM型XSS  - flag
2.4 链接注入
2.5 基于过滤的存储型XSS  - flag
3. 任意文件下载
4. 上传漏洞
4.1前端拦截  - flag
4,2解析漏洞  - flag
4.3畸形文件上传  - flag
4.4.htaccess文件上传  - flag
4.5截断上传  - flag
5. 逻辑漏洞
5.1 越权修改密码
5.2 支付漏洞
5.3 邮箱轰炸      - 需要写在使用手册中发件邮箱配置说明
5.4 越权信息查看admin      - flag
6.  其他
6.1 URL跳转
6.2文件包含
6.3 命令执行
6.5 SSRF
6.8 CSRF</code></pre></div><h2>Docker下搭建</h2><p>首先从 Docker hub 上拉取镜像。</p><blockquote>这里使用的是 <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/area39/webug" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">hub.docker.com/r/area39</span><span class="invisible">/webug</span><span class="ellipsis"></span></a> （感谢大佬整合）</blockquote><div class="highlight"><pre><code class="language-text">docker pull area39/webug</code></pre></div><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-bf58787704d9d738c6e092f03c0f8824_b.jpg" data-caption="" data-size="normal" data-rawwidth="1087" data-rawheight="396" class="origin_image zh-lightbox-thumb" width="1087" data-original="https://pic1.zhimg.com/v2-bf58787704d9d738c6e092f03c0f8824_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-bf58787704d9d738c6e092f03c0f8824_b.jpg" data-caption="" data-size="normal" data-rawwidth="1087" data-rawheight="396" class="origin_image zh-lightbox-thumb lazy" width="1087" data-original="https://pic1.zhimg.com/v2-bf58787704d9d738c6e092f03c0f8824_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-bf58787704d9d738c6e092f03c0f8824_b.jpg"/></figure><p>跑起来。</p><div class="highlight"><pre><code class="language-text">docker run -d -P area39/webug</code></pre></div><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-747323f18415a4791170140b669ded87_b.jpg" data-caption="" data-size="normal" data-rawwidth="1091" data-rawheight="216" class="origin_image zh-lightbox-thumb" width="1091" data-original="https://pic4.zhimg.com/v2-747323f18415a4791170140b669ded87_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-747323f18415a4791170140b669ded87_b.jpg" data-caption="" data-size="normal" data-rawwidth="1091" data-rawheight="216" class="origin_image zh-lightbox-thumb lazy" width="1091" data-original="https://pic4.zhimg.com/v2-747323f18415a4791170140b669ded87_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-747323f18415a4791170140b669ded87_b.jpg"/></figure><p>访问本地 32768 端口就可以访问了。</p><p><a href="https://link.zhihu.com/?target=http%3A//127.0.0.1%3A32768/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">127.0.0.1:32768/</span><span class="invisible"></span></a></p><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-90e5b5569b190e78e5f052b1c564b960_b.jpg" data-caption="" data-size="small" data-rawwidth="1130" data-rawheight="608" class="origin_image zh-lightbox-thumb" width="1130" data-original="https://pic1.zhimg.com/v2-90e5b5569b190e78e5f052b1c564b960_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-90e5b5569b190e78e5f052b1c564b960_b.jpg" data-caption="" data-size="small" data-rawwidth="1130" data-rawheight="608" class="origin_image zh-lightbox-thumb lazy" width="1130" data-original="https://pic1.zhimg.com/v2-90e5b5569b190e78e5f052b1c564b960_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-90e5b5569b190e78e5f052b1c564b960_b.jpg"/></figure><blockquote>当然，也可以自行构建 Dockerfile 进行搭建<br/>项目地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/Area39/Webug4.0-Docker" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/Area39/Webug</span><span class="invisible">4.0-Docker</span><span class="ellipsis"></span></a></blockquote><h2>简单尝试</h2><p>用户名：admin</p><p>密码：admin</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-96710c604a36ff10f5469be303f38ac2_b.jpg" data-caption="" data-size="normal" data-rawwidth="2516" data-rawheight="1196" class="origin_image zh-lightbox-thumb" width="2516" data-original="https://pic3.zhimg.com/v2-96710c604a36ff10f5469be303f38ac2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-96710c604a36ff10f5469be303f38ac2_b.jpg" data-caption="" data-size="normal" data-rawwidth="2516" data-rawheight="1196" class="origin_image zh-lightbox-thumb lazy" width="2516" data-original="https://pic3.zhimg.com/v2-96710c604a36ff10f5469be303f38ac2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-96710c604a36ff10f5469be303f38ac2_b.jpg"/></figure><p><b>现有模块</b></p><ul><li>web靶场</li><li>MD5</li></ul><p><b>体验【反射型xss】</b></p><p>进入到页面，我们找到输入点、输出点。</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-3de2b581c25e32d7f11582ded6f759f2_b.jpg" data-caption="" data-size="normal" data-rawwidth="1899" data-rawheight="364" class="origin_image zh-lightbox-thumb" width="1899" data-original="https://pic3.zhimg.com/v2-3de2b581c25e32d7f11582ded6f759f2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-3de2b581c25e32d7f11582ded6f759f2_b.jpg" data-caption="" data-size="normal" data-rawwidth="1899" data-rawheight="364" class="origin_image zh-lightbox-thumb lazy" width="1899" data-original="https://pic3.zhimg.com/v2-3de2b581c25e32d7f11582ded6f759f2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-3de2b581c25e32d7f11582ded6f759f2_b.jpg"/></figure><p>找到位置</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-f5a2adb50f18775c567a1cfde1bf773e_b.jpg" data-caption="" data-size="normal" data-rawwidth="1000" data-rawheight="175" class="origin_image zh-lightbox-thumb" width="1000" data-original="https://pic3.zhimg.com/v2-f5a2adb50f18775c567a1cfde1bf773e_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-f5a2adb50f18775c567a1cfde1bf773e_b.jpg" data-caption="" data-size="normal" data-rawwidth="1000" data-rawheight="175" class="origin_image zh-lightbox-thumb lazy" width="1000" data-original="https://pic3.zhimg.com/v2-f5a2adb50f18775c567a1cfde1bf773e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-f5a2adb50f18775c567a1cfde1bf773e_b.jpg"/></figure><p>so easy</p><p>键入 payload</p><div class="highlight"><pre><code class="language-text">&lt;script&gt;alert(/twosecurity/)&lt;/script&gt;</code></pre></div><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-20b4ee1cef5f542237876eddbb08cd07_b.jpg" data-caption="" data-size="normal" data-rawwidth="1484" data-rawheight="247" class="origin_image zh-lightbox-thumb" width="1484" data-original="https://pic4.zhimg.com/v2-20b4ee1cef5f542237876eddbb08cd07_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-20b4ee1cef5f542237876eddbb08cd07_b.jpg" data-caption="" data-size="normal" data-rawwidth="1484" data-rawheight="247" class="origin_image zh-lightbox-thumb lazy" width="1484" data-original="https://pic4.zhimg.com/v2-20b4ee1cef5f542237876eddbb08cd07_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-20b4ee1cef5f542237876eddbb08cd07_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-7e487bf26e3c9f0a50be681ce2274805_b.jpg" data-caption="" data-size="normal" data-rawwidth="565" data-rawheight="164" class="origin_image zh-lightbox-thumb" width="565" data-original="https://pic2.zhimg.com/v2-7e487bf26e3c9f0a50be681ce2274805_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-7e487bf26e3c9f0a50be681ce2274805_b.jpg" data-caption="" data-size="normal" data-rawwidth="565" data-rawheight="164" class="origin_image zh-lightbox-thumb lazy" width="565" data-original="https://pic2.zhimg.com/v2-7e487bf26e3c9f0a50be681ce2274805_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-7e487bf26e3c9f0a50be681ce2274805_b.jpg"/></figure><p>成功~</p><p>那么问题来了，flag 在哪里？？？</p><p>经过一番折腾，发现 flag 在 cookie 里。。。</p><div class="highlight"><pre><code class="language-text">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</code></pre></div><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-2b45bc00c7e4ea9b519c97785379b24f_b.jpg" data-caption="" data-size="normal" data-rawwidth="1472" data-rawheight="236" class="origin_image zh-lightbox-thumb" width="1472" data-original="https://pic4.zhimg.com/v2-2b45bc00c7e4ea9b519c97785379b24f_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-2b45bc00c7e4ea9b519c97785379b24f_b.jpg" data-caption="" data-size="normal" data-rawwidth="1472" data-rawheight="236" class="origin_image zh-lightbox-thumb lazy" width="1472" data-original="https://pic4.zhimg.com/v2-2b45bc00c7e4ea9b519c97785379b24f_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-2b45bc00c7e4ea9b519c97785379b24f_b.jpg"/></figure><p>提交 flag 完成练习。</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-c6e64f6a13f86ba6523a4171a0dabdfa_b.jpg" data-caption="" data-size="normal" data-rawwidth="1824" data-rawheight="270" class="origin_image zh-lightbox-thumb" width="1824" data-original="https://pic3.zhimg.com/v2-c6e64f6a13f86ba6523a4171a0dabdfa_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-c6e64f6a13f86ba6523a4171a0dabdfa_b.jpg" data-caption="" data-size="normal" data-rawwidth="1824" data-rawheight="270" class="origin_image zh-lightbox-thumb lazy" width="1824" data-original="https://pic3.zhimg.com/v2-c6e64f6a13f86ba6523a4171a0dabdfa_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-c6e64f6a13f86ba6523a4171a0dabdfa_b.jpg"/></figure><blockquote>这个题感觉很基础，适合小白学习，入门练习。（大佬们见笑了）</blockquote><p>有人可能会问，script是什么？payload是什么？flag又是什么？什么都不懂的小白，如何入门网络安全呢？</p><p><a href="https://link.zhihu.com/?target=https%3A//twosecurity.cn/" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a> 最近推出了网络安全零基础入门集训，哪怕你什么都不懂，都能让你轻松（好吧，没那么简单，还是要付出努力的）入门网络安全。</p><a href="https://zhuanlan.zhihu.com/p/97763889" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-685d1b251edaac139b1ca1a08811e317_180x120.jpg" data-image-width="900" data-image-height="383" class="internal">二向箔安全学院：入门网络安全的统一解答【零基础入门集训营】</a><p>进行网络安全入门集训，短短<b>2 个周</b>快速入门。</p><p>当然，态度认真的学员（说白了就是都可以）可免费使用我们官方的 <b>在线强化训练集 </b>（现含81道训练题，随时更新ing）</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-6ac23bc399dfcf8529d153b35eadbb12_b.jpg" data-caption="" data-size="small" data-rawwidth="2149" data-rawheight="1217" class="origin_image zh-lightbox-thumb" width="2149" data-original="https://pic3.zhimg.com/v2-6ac23bc399dfcf8529d153b35eadbb12_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-6ac23bc399dfcf8529d153b35eadbb12_b.jpg" data-caption="" data-size="small" data-rawwidth="2149" data-rawheight="1217" class="origin_image zh-lightbox-thumb lazy" width="2149" data-original="https://pic3.zhimg.com/v2-6ac23bc399dfcf8529d153b35eadbb12_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-6ac23bc399dfcf8529d153b35eadbb12_b.jpg"/></figure><p>本期 <b>限定两个班级</b>，招满即止。</p><p><a href="https://link.zhihu.com/?target=https%3A//submit.twosecurity.io/f/lF6ZMY" class=" wrap external" target="_blank" rel="nofollow noreferrer">填写资料并付款</a>，按付款时间顺序开班，<b>因人数超过限制而报名失败的学员将全额退款。</b></p><p>详情可咨询客服微信 <b>twosecurity02</b></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
