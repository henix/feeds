<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>【量化课堂】基于信号波动理论产生的LLT模型-发现股市中的“大浪”</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/34097449">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-5359da8bdec6868220440febd7265aa1_b.jpg" alt=""></div><blockquote>股市中<b>小的波动</b>经常干扰股票投资人对<b>大趋势</b>的判断，倘若股市的波动同信号波动类似，那是不是可以用处理信号的方式处理股票波动发现大的波动呢？我们知道通信领域在处理信号波动时也常会遇到被噪音干扰的问题，这些噪音通常需要用对应的<b>滤波器</b>过滤，那么在股市中我们是不是也可以设计合适的滤波器来<b>过滤小的波动留下股市“大浪”</b>呢？本文介绍的<b>LLT模型</b>就是基于此思想产生的。本文参考对象是广发证券的《低延迟趋势线与交易性择时——短线择时策略研究之三》，有兴趣更深入理解LLT原理的读者可以阅读原研报。</blockquote><p class="ztext-empty-paragraph"><br/></p><p><b>前言</b></p><p>股票应该怎么交易？不就是低点买入高点卖出吗。</p><p><b>理想中的股票波动大致是这样的：</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-fb57b95e839961a144db5198c0552bc1_b.jpg" data-caption="" data-size="normal" data-rawwidth="1043" data-rawheight="492" class="origin_image zh-lightbox-thumb" width="1043" data-original="https://pic2.zhimg.com/v2-fb57b95e839961a144db5198c0552bc1_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-fb57b95e839961a144db5198c0552bc1_b.jpg" data-caption="" data-size="normal" data-rawwidth="1043" data-rawheight="492" class="origin_image zh-lightbox-thumb lazy" width="1043" data-original="https://pic2.zhimg.com/v2-fb57b95e839961a144db5198c0552bc1_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-fb57b95e839961a144db5198c0552bc1_b.jpg"/></figure><p><b>然后，理想的交易状态状态是这样的：</b></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-f9f0ba0064d065f794b14f543692e080_b.jpg" data-caption="" data-size="normal" data-rawwidth="1035" data-rawheight="481" class="origin_image zh-lightbox-thumb" width="1035" data-original="https://pic1.zhimg.com/v2-f9f0ba0064d065f794b14f543692e080_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-f9f0ba0064d065f794b14f543692e080_b.jpg" data-caption="" data-size="normal" data-rawwidth="1035" data-rawheight="481" class="origin_image zh-lightbox-thumb lazy" width="1035" data-original="https://pic1.zhimg.com/v2-f9f0ba0064d065f794b14f543692e080_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-f9f0ba0064d065f794b14f543692e080_b.jpg"/></figure><p>在有上涨趋势出现的时候买入，下跌趋势出现的时候卖出，稍微滞后一点没关系，总体肯定会赚的。</p><p>那么是不是从此资产飙升，过上睡觉睡到自然醒，数钱数到手抽筋的生活。想想还有点小激动呢~</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-eb58b1cb2aec3d2f5307e4a199b86a40_b.gif" data-caption="" data-size="normal" data-rawwidth="162" data-rawheight="190" data-thumbnail="https://pic1.zhimg.com/v2-eb58b1cb2aec3d2f5307e4a199b86a40_b.jpg" class="content_image" width="162"/></noscript><img src="https://pic1.zhimg.com/v2-eb58b1cb2aec3d2f5307e4a199b86a40_b.gif" data-caption="" data-size="normal" data-rawwidth="162" data-rawheight="190" data-thumbnail="https://pic1.zhimg.com/v2-eb58b1cb2aec3d2f5307e4a199b86a40_b.jpg" class="content_image lazy" width="162" data-actualsrc="https://pic1.zhimg.com/v2-eb58b1cb2aec3d2f5307e4a199b86a40_b.gif"/></figure><p><b>然而，事实总是这样的：</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-9d4f57db337f87253f0b2f51fae63157_b.jpg" data-caption="" data-size="normal" data-rawwidth="1030" data-rawheight="474" class="origin_image zh-lightbox-thumb" width="1030" data-original="https://pic4.zhimg.com/v2-9d4f57db337f87253f0b2f51fae63157_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-9d4f57db337f87253f0b2f51fae63157_b.jpg" data-caption="" data-size="normal" data-rawwidth="1030" data-rawheight="474" class="origin_image zh-lightbox-thumb lazy" width="1030" data-original="https://pic4.zhimg.com/v2-9d4f57db337f87253f0b2f51fae63157_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-9d4f57db337f87253f0b2f51fae63157_b.jpg"/></figure><p>说好的一起做手拉手做一辈子的朋友呢？友谊的小船怎么说翻就翻？这些小波浪该怎么整！！！！</p><p>只有对大的趋势判断准确，才能规避掉股市中的小的波动，<b>那么怎样作出正确的大趋势判断，来更好的的择时呢？</b>这就是本文策略要解决的目标。本文的主角LLT趋势线（滤波器）为此而生。</p><p class="ztext-empty-paragraph"><br/></p><p><b>一、MA,EMA指标</b></p><p>先从现有的择时策略引入，<b>MA</b>是一种常用的趋势跟踪指标，可以在一定程度上把图二转化为图一，<b>MA的计算天数越长，曲线越平滑，过滤小“波浪”能力越强。</b>但同时<b>滞后性</b>也越高，往往在股市最高最低点出现若干天后，MA才真正反应，这<b>在震荡横盘的市场中劣势及其明显</b>。</p><p>与MA类似的指标还有<b>EMA</b>，EMA计算的是过去数据的加权均值，并通过赋予邻近点更大的权重来提高指标的灵敏度。把 EMA的公式用通信的角度解释，<b>EMA就是一个一阶低通滤波器，用以过滤高频率的波动留下低频率的波动。</b>那么假设股价波动同样也是波动的这一假设成立，那么我们是不是可以利用通信领域常年积累的滤波器原理设计一个比EMA更加平滑灵敏的滤波器来实现引言中图一到图二的转化呢？<b>本文讲述的LLT就是这样一个2阶滤波器。</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>二、LLT思路简介</b></p><p>LLT滤波器是广发证券短线择时研报提出的一种滤波器，旨在过滤股市中的低频波动留下高频波动，以便择时，是一种2阶的滤波器。</p><p><b>这一趋势跟踪策略的核心思路是把股市波动当做我们平时所见的信号波处理。</b>信号传输过程中经常被噪音所干扰，所以通信领域大量使用滤波器函数来过滤不需要的频率的波动。若要发现股市中的“大浪”，我们需要把高频率的“小浪”过滤掉，于是股市趋势跟踪策略在通信领域就被转化成寻找股市波动中表现优良的滤波器的任务。（过高频波动留下低频波动的滤波器）</p><p class="ztext-empty-paragraph"><br/></p><p><b>三、LLT模型的理解</b></p><p>通信领域习惯于过滤高频或低频的信号波，用以过滤噪音。首先我们用很多人熟悉的EMA公式来引入LLT模型。</p><p><b>1、EMA（1阶滤波器）引入：</b></p><p><b>指数平均线EMA：</b></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-b0866e9df9f79fdf50b61617010171ba_b.jpg" data-size="normal" data-rawwidth="500" data-rawheight="52" class="origin_image zh-lightbox-thumb" width="500" data-original="https://pic3.zhimg.com/v2-b0866e9df9f79fdf50b61617010171ba_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-b0866e9df9f79fdf50b61617010171ba_b.jpg" data-size="normal" data-rawwidth="500" data-rawheight="52" class="origin_image zh-lightbox-thumb lazy" width="500" data-original="https://pic3.zhimg.com/v2-b0866e9df9f79fdf50b61617010171ba_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-b0866e9df9f79fdf50b61617010171ba_b.jpg"/><figcaption>（1）式</figcaption></figure><p>其中EMA(1)=Price(1)，α是一个取值在0到1之间的比例，EMA本质上是赋予邻近点更大权重比例的移动平均值数据</p><p>由于我们认为一个特定的波是由不同频率的波组合而成，所以一个随时间波动的波也可以表述成多个频率波动的组合，及自变量由时间（时域）变成了不同波的频率（频域）。我们可以用一个Z变换来将这一时域公式转化为频域公式</p><p><b>Z变换的公式是：</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-d13ffddf14a031ba39bd09551dd2036b_b.jpg" data-caption="" data-size="normal" data-rawwidth="203" data-rawheight="71" class="content_image" width="203"/></noscript><img src="https://pic4.zhimg.com/v2-d13ffddf14a031ba39bd09551dd2036b_b.jpg" data-caption="" data-size="normal" data-rawwidth="203" data-rawheight="71" class="content_image lazy" width="203" data-actualsrc="https://pic4.zhimg.com/v2-d13ffddf14a031ba39bd09551dd2036b_b.jpg"/></figure><p>其中 z 定义复频域，f(k)是时域离散信号，</p><p><b>接着定义传输函数：</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-a7da01a9139180078a83cbded63ca2d3_b.jpg" data-caption="" data-size="normal" data-rawwidth="186" data-rawheight="70" class="content_image" width="186"/></noscript><img src="https://pic4.zhimg.com/v2-a7da01a9139180078a83cbded63ca2d3_b.jpg" data-caption="" data-size="normal" data-rawwidth="186" data-rawheight="70" class="content_image lazy" width="186" data-actualsrc="https://pic4.zhimg.com/v2-a7da01a9139180078a83cbded63ca2d3_b.jpg"/></figure><p>在这顺便一提传输函数，传输函数是是指零初始条件下线性系统响应（即输出）量的拉普拉斯变换（或z变换）与激励（即输入）量的拉普拉斯变换之比。传输函数代表了输入和输出之间的联系，不受输入输出值的影响，可以用它来分析系统的动态特性，稳定性，或根据给定要求设计满意的控制器。</p><p><b>将(2)带入(1)式，并借助Z变换的线性性质：</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-faef7d1f7abafb0d1c94404fdeab6fd7_b.jpg" data-caption="" data-size="normal" data-rawwidth="332" data-rawheight="43" class="content_image" width="332"/></noscript><img src="https://pic4.zhimg.com/v2-faef7d1f7abafb0d1c94404fdeab6fd7_b.jpg" data-caption="" data-size="normal" data-rawwidth="332" data-rawheight="43" class="content_image lazy" width="332" data-actualsrc="https://pic4.zhimg.com/v2-faef7d1f7abafb0d1c94404fdeab6fd7_b.jpg"/></figure><p><b>和时位移性质：</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-b6ed740e90e016a315163282ad748f25_b.jpg" data-caption="" data-size="normal" data-rawwidth="185" data-rawheight="47" class="content_image" width="185"/></noscript><img src="https://pic2.zhimg.com/v2-b6ed740e90e016a315163282ad748f25_b.jpg" data-caption="" data-size="normal" data-rawwidth="185" data-rawheight="47" class="content_image lazy" width="185" data-actualsrc="https://pic2.zhimg.com/v2-b6ed740e90e016a315163282ad748f25_b.jpg"/></figure><p><b>可以推导出EMA均线的传输函数为：</b></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-48b2ca9fe9762892dc02c60c374cda66_b.jpg" data-caption="" data-size="normal" data-rawwidth="222" data-rawheight="75" class="content_image" width="222"/></noscript><img src="https://pic3.zhimg.com/v2-48b2ca9fe9762892dc02c60c374cda66_b.jpg" data-caption="" data-size="normal" data-rawwidth="222" data-rawheight="75" class="content_image lazy" width="222" data-actualsrc="https://pic3.zhimg.com/v2-48b2ca9fe9762892dc02c60c374cda66_b.jpg"/></figure><p>这样就实现了EMA的时域频域转化。</p><p><b>2、LLT的设计</b></p><p>LLT是一个二阶的滤波器，广发证券此研报作者做了三部转化将EMA一阶滤波器转化为LLT二阶滤波器：</p><p>（1）为了使构造的高通滤波器，即不存在高频分量输出的1−H(z)，<b>首先修改EMA公式为：</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-263ecc610c459a98e291b69dc3d06fd9_b.jpg" data-caption="" data-size="normal" data-rawwidth="677" data-rawheight="61" class="origin_image zh-lightbox-thumb" width="677" data-original="https://pic2.zhimg.com/v2-263ecc610c459a98e291b69dc3d06fd9_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-263ecc610c459a98e291b69dc3d06fd9_b.jpg" data-caption="" data-size="normal" data-rawwidth="677" data-rawheight="61" class="origin_image zh-lightbox-thumb lazy" width="677" data-original="https://pic2.zhimg.com/v2-263ecc610c459a98e291b69dc3d06fd9_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-263ecc610c459a98e291b69dc3d06fd9_b.jpg"/></figure><p>接着我们将公式转换至频域以便于进行滤波，<b>那么修改后的EMA滤波器变为</b></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-b1830f261119bbc93b88bc02351a9f00_b.jpg" data-caption="" data-size="normal" data-rawwidth="228" data-rawheight="67" class="content_image" width="228"/></noscript><img src="https://pic1.zhimg.com/v2-b1830f261119bbc93b88bc02351a9f00_b.jpg" data-caption="" data-size="normal" data-rawwidth="228" data-rawheight="67" class="content_image lazy" width="228" data-actualsrc="https://pic1.zhimg.com/v2-b1830f261119bbc93b88bc02351a9f00_b.jpg"/></figure><p>（2）<b>构建一阶高通滤波器，其结构为</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-84b797a15a31a13441d232b5c548d0ad_b.jpg" data-caption="" data-size="normal" data-rawwidth="361" data-rawheight="60" class="content_image" width="361"/></noscript><img src="https://pic2.zhimg.com/v2-84b797a15a31a13441d232b5c548d0ad_b.jpg" data-caption="" data-size="normal" data-rawwidth="361" data-rawheight="60" class="content_image lazy" width="361" data-actualsrc="https://pic2.zhimg.com/v2-84b797a15a31a13441d232b5c548d0ad_b.jpg"/></figure><p>（3）<b>完成二阶滤波函数的构建</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-ecf79aa7aedf97ced9c96cdeb68109e1_b.jpg" data-caption="" data-size="normal" data-rawwidth="475" data-rawheight="66" class="origin_image zh-lightbox-thumb" width="475" data-original="https://pic2.zhimg.com/v2-ecf79aa7aedf97ced9c96cdeb68109e1_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-ecf79aa7aedf97ced9c96cdeb68109e1_b.jpg" data-caption="" data-size="normal" data-rawwidth="475" data-rawheight="66" class="origin_image zh-lightbox-thumb lazy" width="475" data-original="https://pic2.zhimg.com/v2-ecf79aa7aedf97ced9c96cdeb68109e1_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-ecf79aa7aedf97ced9c96cdeb68109e1_b.jpg"/></figure><p><b>相应的，对应的2阶高通滤波器为：</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-1a6be56349a233ba599402a252653dd1_b.jpg" data-caption="" data-size="normal" data-rawwidth="519" data-rawheight="63" class="origin_image zh-lightbox-thumb" width="519" data-original="https://pic2.zhimg.com/v2-1a6be56349a233ba599402a252653dd1_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-1a6be56349a233ba599402a252653dd1_b.jpg" data-caption="" data-size="normal" data-rawwidth="519" data-rawheight="63" class="origin_image zh-lightbox-thumb lazy" width="519" data-original="https://pic2.zhimg.com/v2-1a6be56349a233ba599402a252653dd1_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-1a6be56349a233ba599402a252653dd1_b.jpg"/></figure><p><b>最终得到了二阶高通滤波函数：</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-04f77cd98c3ee21c28facb6e71d8a263_b.jpg" data-caption="" data-size="normal" data-rawwidth="591" data-rawheight="75" class="origin_image zh-lightbox-thumb" width="591" data-original="https://pic4.zhimg.com/v2-04f77cd98c3ee21c28facb6e71d8a263_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-04f77cd98c3ee21c28facb6e71d8a263_b.jpg" data-caption="" data-size="normal" data-rawwidth="591" data-rawheight="75" class="origin_image zh-lightbox-thumb lazy" width="591" data-original="https://pic4.zhimg.com/v2-04f77cd98c3ee21c28facb6e71d8a263_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-04f77cd98c3ee21c28facb6e71d8a263_b.jpg"/></figure><p><b>最后由拉普拉斯逆转换得到的 LLT（t）的公式为</b></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-059c563a2de4f7f2eec8812d05433a58_b.jpg" data-caption="" data-size="normal" data-rawwidth="1135" data-rawheight="45" class="origin_image zh-lightbox-thumb" width="1135" data-original="https://pic1.zhimg.com/v2-059c563a2de4f7f2eec8812d05433a58_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-059c563a2de4f7f2eec8812d05433a58_b.jpg" data-caption="" data-size="normal" data-rawwidth="1135" data-rawheight="45" class="origin_image zh-lightbox-thumb lazy" width="1135" data-original="https://pic1.zhimg.com/v2-059c563a2de4f7f2eec8812d05433a58_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-059c563a2de4f7f2eec8812d05433a58_b.jpg"/></figure><p>理论上讲LLT就是原波动从前言中图二到图一的转化，及我们应该在LLT值大于LLT的上一值时大趋势来临，买入股票：当LLT值小于LLT前值时大趋势变为下降，卖出股票。</p><p class="ztext-empty-paragraph"><br/></p><p><b>四、HS300应用</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-7b443d50ed9c5c514c1e444693aa5257_b.jpg" data-caption="" data-size="normal" data-rawwidth="1642" data-rawheight="673" class="origin_image zh-lightbox-thumb" width="1642" data-original="https://pic4.zhimg.com/v2-7b443d50ed9c5c514c1e444693aa5257_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-7b443d50ed9c5c514c1e444693aa5257_b.jpg" data-caption="" data-size="normal" data-rawwidth="1642" data-rawheight="673" class="origin_image zh-lightbox-thumb lazy" width="1642" data-original="https://pic4.zhimg.com/v2-7b443d50ed9c5c514c1e444693aa5257_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-7b443d50ed9c5c514c1e444693aa5257_b.jpg"/></figure><p>LLT策略的参数只有alpha一个。在HS300中本文用梯度下降的方法将alpha调整为2/35。</p><p>此图是无交易费用的策略表现，从2005年至今，<b>年化收益20%，回撤27.5%</b>，表现尚可吧。后面附代码是<b>加入了交易费用后的表现，年化收益将至17%</b>。总的来说这一策略<b>预防股灾的效果尚可</b>。</p><p class="ztext-empty-paragraph"><br/></p><p><b>五、补充和扩展</b></p><p>LLT本质上只是一种滤波器罢了，某些邮电学校通信工程专业仓库里不要的滤波器函数一抓一大把，是不是可以废物利用一下试试股市上好不好用呢？只恨当年没学好通信原理啊！（哭晕在厕所）</p><p>小编个人感觉择时策略有较好的<b>预测股灾能力</b>，虽然大部分收益一般，但可以作为其他选股策略的<b>止损函数</b>，从而获得其他策略高收益的同时降低风险。另一个大盘择时策略<u><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzI0MjE2MjE2MA%3D%3D%26mid%3D2716576614%26idx%3D1%26sn%3D20aed9cdaabf3d17edff18fd8e4fa55c%26chksm%3Dcd1f8bf9fa6802eff1e3fb5a00e3fddc341c1473f564307e56aae0c7c09ffd07f676d398035e%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">RSRS</a></u>效果也不错，推荐大家阅读。此外，聚宽论坛上也有很多择时模型，有兴趣的读者可以继续研究。</p><p><b>点击《<a href="https://link.zhihu.com/?target=https%3A//www.joinquant.com/community/post/detailMobile%3FpostId%3D11158%26page%3D%26limit%3D20%26replyId%3D%26tag%3D" class=" wrap external" target="_blank" rel="nofollow noreferrer">【量化课堂】LLT-发现股市中的“大浪”</a>》访问聚宽社区查看源码及更多详情。</b></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
