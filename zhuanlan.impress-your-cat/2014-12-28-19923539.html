<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>21天学通Erlang从写解释器开始</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/19923539">原文</a></p>
<p>前几天有几个人一致向我抱怨说这个21天学通Erlang是不是太偏理论了。我不认同这种观点。</p><p>没人会否定Erlang是一门实用的语言。Erlang不需要一本Practical Common Lisp/Real World Haskell/Real World OCaml来标榜自己也是实用的。Erlang的成名不就是因为在上面开发出了9个9的产品啊。即便是国内，也有很多公司在用RabbitMQ，CouchBase什么的。可是，即便能用Erlang方便开发出高可用的服务，还是被认为这主要是因为BEAM，OTP，以及容错的思想，和Erlang语言一点关系都没有。Erlang可能遇到了一个别的语言都没遇到过的麻烦，越强调Erlang之强大，Erlang就越难以被采用。你看某人的PySonar的粉丝都比HiPE多，即便PySonar离Practical还远着呢，即便PySonar比HiPE晚出现了可能都不止5年，即便有些PySonar作者在slides里提到的问题在Erlang/HiPE里并不存在，还不是被很多人当作原创的新东西看待，还不是被各种膜拜。要推广Erlang要从新手抓起。</p><p>当然了，这不代表21天学通Erlang里不该写一些实际程序的例子。但是，也别一上来就讲非常实际的例子啊。你们总不能因为Erlang如此实用，在第一章就得开始写实际的东西吧。21天学通Erlang是一本用来入门的书啊。大哥们。</p><p>Erlang是一门非常适合用来入门的语言，Erlang语言本身很简单。而我们只需要用其中模式匹配和函数的部分对于写一些简单的解释器来说已经足够方便了。用Erlang，就不需要像SICP那样，一开始先花三章让你学会用scheme。SICP的思路是，等你学会用scheme里，你就可以开始看后面两章来理解scheme的语义，你理解了scheme的语义，你就能学会scheme了。你看这就是个鸡蛋问题嘛。用Erlang，就不用像SICP那样兜个大圈子。一开始我们只介绍Erlang里的模式匹配和函数的概念，接着你就可以只用这两个概念来写一个解释器，这个解释器足以解释和Erlang中类似的模式匹配和函数。这些已经足够你验证自己是否理解模式匹配和函数了。而不是像看什么C++ Primer之类的书一样知其然不知其所以然，感觉自己好像学会了一门语言，但里面随便挑点功能出来，连个解释器都写不出来。<br></p><p>Erlang不止是这些。我们还要把解释器改成回溯和合一，这样就是一个Prolog了。Erlang的原型是用Prolog写的，我希望这个Prolog足够解释和Erlang原型功能相同的Prolog程序。另外Parser是一个特殊的解释器，Prolog就有DCG嘛。所以到这里你已经能从源代码直接解释一部分Erlang程序了。后面这部分我想我已经重复了好多遍了，就是把Prolog的回溯改成tabling就变成了Datalog。Datalog对应的Parser，就是Earley了，Earley一路弱化最后成了正则表达式。至此，你自己就可以写一个简单的lex/yacc工具了，而不用像SICP那样整天躲在括号后面。</p><p>到这里你肯定还是很困惑，你不能确定自己写对了没，你也不该相信我，毕竟我说的都是错的。既然会写解释器了，那就根据Curry-Howard Correspondence把解释器改改，改成一个Proof Checker。有了形式证明你就该放心多了吧。你总不能说这个很重要得放一开始去讲吧，你敢相信我这种渣渣写给你的Proof Checker没问题？有了形式证明，我们就可以讲一些实用的东西了。难道你想像那些水货一样，连Paxos都不会证明，只会躲在ZooKeeper，Etcd后面侃侃而谈分布式怎么怎么好？</p><p>既然是一本入门书，还可以顺便补一下必要的基础，讲讲数字电路，怎么写一个数字电路模拟器？也可以讲讲常用的数据结构。...... 等基础写得差不多了，就可以开始写偏实战的，比如怎么写个简化的CouchDB，Scalaris什么的。两个也可以同时开始写，反正重要的东西都写形式证明就是了，缺了就去补。这哪里一点都不偏理论好不好，你不能光看第一章就说这个不实用了。</p><p>其实也就这么一点点内容而已嘛。不过我想我一个人不可能写的完了。你们还不赶紧来写，不写来吐槽也行啊。</p><p>就是这样</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
