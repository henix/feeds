<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>一款由Node.js打造的WEB漏洞测试平台：DVNA</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/105003724">原文</a></p>
<div class="title-image"><img src="https://pic3.zhimg.com/v2-7f5fa36fd783aea36c17707371e19a9a_b.jpg" alt=""></div><p>相信大家一定都听说过 DVWA（Damn Vulnerable Web App）这个老熟人，那它的亲戚 DVNA（Damn Vulnerable NodeJS Application） 呢？</p><h2>DVNA</h2><p>它是一个使用 Node.js 编写的 web 应用程序，包含了在 Node.js 中的 OWASP Top 10 漏洞场景，可用于学习和演示 OWASP 十大漏洞，并提供有关修复和避免这些漏洞的指南。</p><p>项目地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/appsecco/dvna" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/appsecco/dvn</span><span class="invisible">a</span><span class="ellipsis"></span></a></p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-3855e93e1707bdb7150e355cd9dd14a5_b.jpg" data-caption="" data-size="small" data-rawwidth="1157" data-rawheight="776" class="origin_image zh-lightbox-thumb" width="1157" data-original="https://pic2.zhimg.com/v2-3855e93e1707bdb7150e355cd9dd14a5_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-3855e93e1707bdb7150e355cd9dd14a5_b.jpg" data-caption="" data-size="small" data-rawwidth="1157" data-rawheight="776" class="origin_image zh-lightbox-thumb lazy" width="1157" data-original="https://pic2.zhimg.com/v2-3855e93e1707bdb7150e355cd9dd14a5_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-3855e93e1707bdb7150e355cd9dd14a5_b.jpg"/></figure><p>尽管现已有很多类似的应用程序，但作者的初衷还是想要的是一个简单的NodeJs Web应用程序，开发人员可以使用该应用程序来学习如何避免常见漏洞。</p><p>该应用程序带有一个分支，其中包含针对该应用程序中每个漏洞的修复程序，作为修复漏洞的参考。因此，它提供了一个了解安全问题及其修复方法的完整视图。</p><p>分支项目地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/appsecco/dvna/tree/fixes" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/appsecco/dvn</span><span class="invisible">a/tree/fixes</span><span class="ellipsis"></span></a></p><h2>功能</h2><p>DVNA 具有以下功能：</p><ol><li>每个漏洞的概述</li><li>演示每个漏洞的方案</li><li>学习参考</li></ol><p>例如 XSS 漏洞：</p><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-5bcfec31a77d6de954c4a02aa53a457b_b.jpg" data-caption="" data-size="small" data-rawwidth="1071" data-rawheight="435" class="origin_image zh-lightbox-thumb" width="1071" data-original="https://pic4.zhimg.com/v2-5bcfec31a77d6de954c4a02aa53a457b_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-5bcfec31a77d6de954c4a02aa53a457b_b.jpg" data-caption="" data-size="small" data-rawwidth="1071" data-rawheight="435" class="origin_image zh-lightbox-thumb lazy" width="1071" data-original="https://pic4.zhimg.com/v2-5bcfec31a77d6de954c4a02aa53a457b_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-5bcfec31a77d6de954c4a02aa53a457b_b.jpg"/></figure><p>另外，还有一本电子书，包含了：</p><ol><li>设置 DVNA 的说明</li><li>有关利用漏洞的说明</li><li>易受攻击的代码片段和带有说明的相应修复</li><li>避免此类漏洞的建议</li><li>了解更多的参考</li></ol><p>电子书：<a href="https://link.zhihu.com/?target=https%3A//appsecco.com/books/dvna-developers-security-guide/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">appsecco.com/books/dvna</span><span class="invisible">-developers-security-guide/</span><span class="ellipsis"></span></a></p><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-1bd14f79389d6e1324fbc6bd703e6fbf_b.jpg" data-caption="" data-size="small" data-rawwidth="1037" data-rawheight="840" class="origin_image zh-lightbox-thumb" width="1037" data-original="https://pic4.zhimg.com/v2-1bd14f79389d6e1324fbc6bd703e6fbf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-1bd14f79389d6e1324fbc6bd703e6fbf_b.jpg" data-caption="" data-size="small" data-rawwidth="1037" data-rawheight="840" class="origin_image zh-lightbox-thumb lazy" width="1037" data-original="https://pic4.zhimg.com/v2-1bd14f79389d6e1324fbc6bd703e6fbf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-1bd14f79389d6e1324fbc6bd703e6fbf_b.jpg"/></figure><blockquote>对十大漏洞不是特别了解的同学，可参考该电子书进行学习。</blockquote><h2>使用 Docker 快速搭建</h2><p>首先下载项目到本地。</p><p>下载地址：</p><p><a href="https://link.zhihu.com/?target=https%3A//github.com/appsecco/dvna" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/appsecco/dvn</span><span class="invisible">a</span><span class="ellipsis"></span></a> </p><p>官方提供了三种部署方法，这里推荐使用 docker-compose 进行部署</p><p>在目录下创建文件 vars.env</p><div class="highlight"><pre><code class="language-text">MYSQL_USER=dvna
MYSQL_DATABASE=dvna
MYSQL_PASSWORD=passw0rd
MYSQL_RANDOM_ROOT_PASSWORD=yes</code></pre></div><p>执行命令</p><div class="highlight"><pre><code class="language-text">docker-compose up</code></pre></div><p>完成后访问 127.0.0.1:9090 即可</p><h2>实践</h2><p>这里就以 DOM XSS 作为学习案例。</p><p><b>DOM XSS in user listing</b></p><p>先注册一个用户</p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-d496b30195823cf6ddce8042e4fa605d_b.jpg" data-caption="" data-size="small" data-rawwidth="683" data-rawheight="464" class="origin_image zh-lightbox-thumb" width="683" data-original="https://pic2.zhimg.com/v2-d496b30195823cf6ddce8042e4fa605d_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-d496b30195823cf6ddce8042e4fa605d_b.jpg" data-caption="" data-size="small" data-rawwidth="683" data-rawheight="464" class="origin_image zh-lightbox-thumb lazy" width="683" data-original="https://pic2.zhimg.com/v2-d496b30195823cf6ddce8042e4fa605d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-d496b30195823cf6ddce8042e4fa605d_b.jpg"/></figure><p>我们将用户名设为：</p><div class="highlight"><pre><code class="language-text">&lt;img src=&#34;a&#34; onerror=&#34;alert(document.domain)&#34;&gt;</code></pre></div><p>访问 /app/admin/users 时触发 XSS</p><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-47e0c25527161d66edcc006a98624c58_b.jpg" data-caption="" data-size="small" data-rawwidth="718" data-rawheight="323" class="origin_image zh-lightbox-thumb" width="718" data-original="https://pic1.zhimg.com/v2-47e0c25527161d66edcc006a98624c58_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-47e0c25527161d66edcc006a98624c58_b.jpg" data-caption="" data-size="small" data-rawwidth="718" data-rawheight="323" class="origin_image zh-lightbox-thumb lazy" width="718" data-original="https://pic1.zhimg.com/v2-47e0c25527161d66edcc006a98624c58_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-47e0c25527161d66edcc006a98624c58_b.jpg"/></figure><p>漏洞代码：</p><p>views/app/adminusers.ejs</p><div class="highlight"><pre><code class="language-text">...
c_id.innerHTML = users[i].id;
c_name.innerHTML = users[i].name;
c_email.innerHTML = users[i].email;
...</code></pre></div><p>用户提供的输入将使用 innerHTML 作为标记注入到页面中。可以利用此问题来注入任意脚本代码以执行跨站点脚本攻击。</p><p>修改方法：</p><div class="highlight"><pre><code class="language-text">...
c_id.textContent = users[i].id;
c_name.textContent = users[i].name;
c_email.textContent = users[i].email;
...</code></pre></div><p>使用 textContent 代替。</p><p>更多网络安全学习尽在 <a href="https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a>，另外，网络安全技能包又更新了！学 Python 的也能当黑客了，多实战沉浸式体验，让你回味无穷。</p><p>抓住春节的尾巴，让你从 <b>程序猿→黑客x程序员 PLUS</b>！</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg" data-caption="" data-size="normal" data-rawwidth="3058" data-rawheight="1720" class="origin_image zh-lightbox-thumb" width="3058" data-original="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg" data-caption="" data-size="normal" data-rawwidth="3058" data-rawheight="1720" class="origin_image zh-lightbox-thumb lazy" width="3058" data-original="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg"/></figure><p>更多有关渗透测试的内容请前往<a href="https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a>进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 <b>twosecurity02</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb lazy" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg"/></figure>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
