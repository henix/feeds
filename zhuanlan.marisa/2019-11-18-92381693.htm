<div class="title-image"><img src="https://pic1.zhimg.com/v2-ab78974f11ac5d246038b7f47a3f1c15_b.jpg" alt=""></div><div class="highlight"><pre><code class="language-apl"><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">DECODE</span> <span class="nv">N</span>
  <span class="nv">R</span><span class="kd">←</span><span class="m">2</span><span class="o">⊥</span><span class="nv">N</span>
<span class="bp">∇</span>

<span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">X</span> <span class="nv">ENCODE</span> <span class="nv">N</span>
  <span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="nv">X</span><span class="o">⍴</span><span class="m">2</span><span class="p">)</span><span class="o">⊤</span><span class="nv">N</span>
<span class="bp">∇</span>

<span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">ENCODE32</span> <span class="nv">N</span>
  <span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="m">32</span><span class="o">⍴</span><span class="m">2</span><span class="p">)</span><span class="o">⊤</span><span class="nv">N</span>
<span class="bp">∇</span>

<span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">ENCODE64</span> <span class="nv">N</span>
  <span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="m">64</span><span class="o">⍴</span><span class="m">2</span><span class="p">)</span><span class="o">⊤</span><span class="nv">N</span>
<span class="bp">∇</span>

<span class="c1">⍝ example</span>
      <span class="vg">⎕</span><span class="kd">←</span><span class="nv">A</span><span class="kd">←</span><span class="nv">ENCODE64</span> <span class="m">865940890845960854</span>
<span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span>
      <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="nv">DECODE</span> <span class="nv">A</span>
<span class="m">8.659408908E17</span> <span class="c1">⍝ GG</span></code></pre></div><p>正常情況下都会这么用 loop 写吧</p><div class="highlight"><pre><code class="language-apl"><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span> <span class="nv">ADD</span> <span class="nv">B</span><span class="sr">;</span><span class="nv">C</span>
  <span class="c1">⍝ BINARY ADDITION</span>
  <span class="kd">→</span><span class="nv">NOTEST</span><span class="na">/</span><span class="nv">BEGIN</span>
  <span class="nv">DERR</span><span class="o">∧</span><span class="na">/</span><span class="p">(</span><span class="nv">A</span><span class="o">=</span><span class="nv">A</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="o">∧</span><span class="nv">B</span><span class="o">=</span><span class="nv">B</span><span class="o">=</span><span class="m">1</span>
<span class="nv">BEGIN</span><span class="bp">:</span>
  <span class="c1">⍝ RESET OVERFLOW</span>
  <span class="nv">OVERFLOW</span><span class="kd">←</span><span class="m">0</span>
<span class="nv">LOOP</span><span class="bp">:</span><span class="nv">A</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
  <span class="c1">⍝ FIND CARRY</span>
  <span class="nv">C</span><span class="kd">←</span><span class="m">2</span><span class="o">=</span><span class="nv">A</span>
  <span class="kd">→</span><span class="p">(</span><span class="m">0</span><span class="o">=+</span><span class="na">/</span><span class="nv">C</span><span class="p">)</span><span class="na">/</span><span class="nv">END</span>
  <span class="nv">A</span><span class="sr">[</span><span class="nv">C</span><span class="na">/</span><span class="o">⍳⍴</span><span class="nv">C</span><span class="sr">]</span><span class="kd">←</span><span class="m">0</span>
  <span class="c1">⍝ CHECK OVERFLOW</span>
  <span class="nv">OVERFLOW</span><span class="kd">←</span><span class="nv">OVERFLOW</span><span class="o">∨</span><span class="m">1</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">⍴</span><span class="nv">C</span>
  <span class="nv">B</span><span class="kd">←</span><span class="p">(</span><span class="o">⍴</span><span class="nv">C</span><span class="p">)</span><span class="o">↑</span><span class="m">1</span><span class="o">↓</span><span class="nv">C</span>
  <span class="kd">→</span><span class="nv">LOOP</span>
<span class="nv">END</span><span class="bp">:</span>
  <span class="nv">R</span><span class="kd">←</span><span class="nv">A</span>
<span class="bp">∇</span></code></pre></div><p>说白了就是进位法。</p><p>不过发现了一个规律沒有</p><div class="highlight"><pre><code class="language-apl">      <span class="nv">A</span><span class="kd">←</span><span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
      <span class="nv">B</span><span class="kd">←</span><span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span>
      <span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
<span class="m">2</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span>
      <span class="nv">A</span> <span class="nv">ADD</span> <span class="nv">B</span>
<span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span></code></pre></div><p>单个的 &#34;2&#34; 会变成 &#34;10&#34;，&#34;12&#34; 变成 &#34;100&#34;，&#34;1112&#34; 会变成 &#34;10000&#34;，&#34;22&#34; 则是 &#34;110&#34;。</p><p>这样看來根本不用 loop 麻。</p><div class="highlight"><pre><code class="language-apl">      <span class="nv">C</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span>
      <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="o">⊂</span><span class="nv">C</span>
<span class="err">┌─┬───┬─────┬─┬─┬─┬───────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">1</span> <span class="m">1</span> <span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span><span class="err">│</span>
<span class="err">└─┴───┴─────┴─┴─┴─┴───────┘</span>
      <span class="nv">Z</span><span class="kd">←</span><span class="nv">C</span><span class="o">&gt;</span><span class="m">0</span>
      <span class="nv">Z</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
      <span class="p">(</span><span class="m">1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span>
<span class="m">¯1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">¯1</span> <span class="m">1</span> <span class="m">¯1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span>
<span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">¯1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">¯1</span> <span class="m">1</span> <span class="m">¯1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="o">|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span>
<span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span>
<span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
<span class="err">┌─┬───┬─────┬─┬─┬─┬───────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">1</span> <span class="m">1</span> <span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span><span class="err">│</span>
<span class="err">└─┴───┴─────┴─┴─┴─┴───────┘</span>
      <span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
<span class="err">┌─┬───┬─────┬─┬─┬─┬───────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span>
<span class="err">└─┴───┴─────┴─┴─┴─┴───────┘</span>
      <span class="nv">A</span> <span class="nv">ADD</span> <span class="nv">B</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
      <span class="o">⊃</span><span class="na">¨</span><span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">2</span>
      <span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
<span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span>
      <span class="nv">K</span><span class="kd">←</span><span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">Z</span><span class="p">)</span><span class="o">-</span><span class="nv">Z</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
      <span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span>
<span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span>
      <span class="p">(</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span><span class="p">)</span><span class="na">/</span><span class="nv">K</span>
<span class="err">┌─────┬─┬───────┐</span>
<span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span>
<span class="err">└─────┴─┴───────┘</span>
      <span class="kt">{</span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="p">(</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span><span class="p">)</span><span class="na">/</span><span class="nv">K</span>
<span class="err">┌─────┬─┬───────┐</span>
<span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span>
<span class="err">└─────┴─┴───────┘</span>
      <span class="nv">Z</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="p">(</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span><span class="p">)</span><span class="na">/</span><span class="nv">K</span>
      <span class="nv">Z</span>
<span class="err">┌─────┬─┬───────┐</span>
<span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span>
<span class="err">└─────┴─┴───────┘</span>
      <span class="nv">K</span>
<span class="err">┌─┬───┬─────┬─┬─┬─┬───────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">2</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span><span class="err">│</span>
<span class="err">└─┴───┴─────┴─┴─┴─┴───────┘</span>
      <span class="nv">K</span><span class="sr">[</span><span class="err">⍸</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span><span class="sr">]</span><span class="kd">←</span><span class="nv">Z</span>
      <span class="nv">K</span>
<span class="err">┌─┬───┬─────┬─┬─┬─┬───────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="err">│</span>
<span class="err">└─┴───┴─────┴─┴─┴─┴───────┘</span>
      <span class="o">∊</span><span class="nv">K</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span></code></pre></div><p>于是有 version1</p><div class="highlight"><pre><code class="language-apl"><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span> <span class="nv">ADDK</span> <span class="nv">B</span><span class="sr">;</span><span class="nv">C</span><span class="sr">;</span><span class="nv">B</span><span class="sr">;</span><span class="nv">T</span><span class="sr">;</span><span class="nv">K</span>
  <span class="nv">C</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
  <span class="nv">N</span><span class="kd">←</span><span class="nv">C</span><span class="o">&gt;</span><span class="m">0</span>
  <span class="nv">K</span><span class="kd">←</span><span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">N</span><span class="p">)</span><span class="o">-</span><span class="nv">N</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
  <span class="nv">T</span><span class="kd">←</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">K</span>
  <span class="nv">K</span><span class="sr">[</span><span class="err">⍸</span><span class="nv">T</span><span class="sr">]</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="nv">T</span><span class="na">/</span><span class="nv">K</span>
  <span class="nv">T</span><span class="kd">←</span><span class="p">(</span><span class="o">⍴</span><span class="nv">T</span><span class="p">)</span><span class="o">↑</span><span class="m">1</span><span class="o">↓</span><span class="nv">T</span>
  <span class="nv">K</span><span class="sr">[</span><span class="err">⍸</span><span class="nv">T</span><span class="sr">]</span><span class="kd">←</span><span class="kt">{</span><span class="m">1</span><span class="o">,</span><span class="p">((</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="nv">T</span><span class="na">/</span><span class="nv">K</span>
  <span class="nv">K</span><span class="kd">←</span><span class="o">∊⌽</span><span class="na">¨</span><span class="nv">K</span>
  <span class="nv">R</span><span class="kd">←</span><span class="nv">K</span>
<span class="bp">∇</span></code></pre></div><p>试一试</p><div class="highlight"><pre><code class="language-apl">      <span class="nv">A</span> <span class="nv">ADDK</span> <span class="nv">B</span>
<span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="c1">⍝ seems ok</span>
<span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="nv">ADDK</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>      
<span class="m">0</span> <span class="m">0</span> <span class="m">0</span></code></pre></div><p>GG, WTF?</p><div class="highlight"><pre><code class="language-apl">      <span class="nv">A</span><span class="kd">←</span><span class="nv">B</span> <span class="kd">←</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
      <span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
<span class="m">2</span> <span class="m">2</span> <span class="m">2</span>
      <span class="nv">C</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
      <span class="nv">K</span><span class="kd">←</span><span class="o">⌽</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">N</span><span class="p">)</span><span class="o">-</span><span class="nv">N</span><span class="kd">←</span><span class="nv">C</span><span class="o">&gt;</span><span class="m">0</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span>
      <span class="nv">K</span>
<span class="err">┌─────┐</span>
<span class="err">│</span><span class="m">2</span> <span class="m">2</span> <span class="m">2</span><span class="err">│</span>
<span class="err">└─────┘</span></code></pre></div><p>額⋯⋯</p><p>说明 2 要額外做 partition。</p><p>那么干脆就一开始先 reverse 好了</p><p>于是最后版本 </p><div class="highlight"><pre><code class="language-apl"><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span> <span class="nv">ADD</span> <span class="nv">B</span><span class="sr">;</span><span class="nv">C</span><span class="sr">;</span><span class="nv">N</span><span class="sr">;</span><span class="nv">I</span>
  <span class="nv">C</span><span class="kd">←</span><span class="o">⌽</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
  <span class="nv">N</span><span class="kd">←</span><span class="nv">C</span><span class="o">&gt;</span><span class="m">0</span>
  <span class="nv">R</span><span class="kd">←</span><span class="p">((</span><span class="nv">C</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="o">∨</span><span class="m">1</span><span class="o">,</span><span class="m">1</span><span class="o">↓|</span><span class="p">(</span><span class="m">¯1</span><span class="o">⌽</span><span class="nv">N</span><span class="p">)</span><span class="o">-</span><span class="nv">N</span><span class="p">)</span><span class="o">⊂</span><span class="nv">C</span> <span class="c1">⍝ Partition</span>
  <span class="nv">I</span><span class="kd">←</span><span class="m">2</span><span class="o">=⊃</span><span class="na">¨</span><span class="nv">R</span> <span class="c1">⍝ Find pattern &#34;1*2&#34;</span>
  <span class="nv">R</span><span class="sr">[</span><span class="err">⍸</span><span class="nv">I</span><span class="sr">]</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="nv">I</span><span class="na">/</span><span class="nv">R</span> <span class="c1">⍝ substitution</span>
  <span class="nv">OVERFLOW</span><span class="kd">←</span><span class="s1">&#39;&#39;</span><span class="o">⍴⌽</span><span class="nv">I</span>
  <span class="nv">I</span><span class="kd">←</span><span class="p">(</span><span class="o">-⍴</span><span class="nv">I</span><span class="p">)</span><span class="o">↑</span><span class="m">¯1</span><span class="o">↓</span><span class="nv">I</span> <span class="c1">⍝ carry</span>
  <span class="nv">R</span><span class="sr">[</span><span class="err">⍸</span><span class="nv">I</span><span class="sr">]</span><span class="kd">←</span><span class="kt">{</span><span class="m">1</span><span class="o">,</span><span class="p">((</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="kt">}</span><span class="na">¨</span><span class="nv">I</span><span class="na">/</span><span class="nv">R</span>
  <span class="nv">R</span><span class="kd">←</span><span class="o">⌽∊</span><span class="nv">R</span>
<span class="bp">∇</span></code></pre></div><p>试试</p><div class="highlight"><pre><code class="language-apl">      <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="nv">ADD</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
<span class="m">1</span> <span class="m">1</span> <span class="m">0</span>
      <span class="nv">OVERFLOW</span>
<span class="m">1</span></code></pre></div><p>∇</p>