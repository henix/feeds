<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>「Rust每日新闻」本周精选 • 第十八期</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/48495066">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-10c6913d0bc44f08fed6d57e31af7e30_r.jpg" alt=""></div><blockquote>前言： 从2018年开始，我每天会花1个小时关注Rust社区动态，并且在<a href="http://rust.cc/">Rust.CC论坛</a>、<a href="https://t.me/rust_daily_news">tg channel</a>、<a href="https://steemit.com/@blackanger">Steemit</a>、<a href="https://github.com/RustStudy/rust_daily_news">GitHub</a>、<a href="https://www.yuque.com/chaosbot/rustnews">语雀订阅</a>都开通了Rust每日新闻，分享我每天的见闻，偶尔也夹杂了一些个人的观点。大半年过去了，Rust每日新闻已经成为了Rust社区群大家每天必看的内容。在这个知乎专栏里，每周会精选几篇Rust社区中的动态，和大家分享。分享的内容就不按时间排序了。<br>2018-11-04</blockquote><h2>官方新闻</h2><h2>「官方」来帮助测试Rust 2018</h2><p><code class="inline">$ rustup install beta</code> <a href="https://blog.rust-lang.org/2018/10/30/help-test-rust-2018.html">Read More </a></p><p><br></p><h2>「Rust 2018」 Anchored and Uniform Paths</h2><p>该文是官方团队成员withoutblogs所写。 锚定（Anchored）和统一（Uniform）路径，是当前Rust 2018中还存在的两种模块路径引入变体支持。但是官方计划在12月正式发布Rust 2018的时候只保留一种变体。 在Rust 2018版本中：</p><ul><li>可以直接使用crate:: 命名空间来访问当前crate中的模块，而不是在顶层根目录下use。</li><li>使用第三方包的时候不需要使用 extern crate 语句</li><li>你可以在代码的任意地方像使用crate::命名空间这样去访问第三方包，而不再需要“::”前缀。比如，不再需要<code class="inline">impl ::std::fmt::Debug</code>，而只需要写<code class="inline">impl std::fmt::Debug</code> 锚定（Anchored）和统一（Uniform）路径区别：</li><li>锚定路径： 如果从子模块中导入，则需要写  <code class="inline">self::submodule::</code>。</li><li>统一路径：从子模块导入，可以直接 <code class="inline">use submodule::</code> 。</li><li>统一路径中，子模块如果和第三方依赖有相同的名称，则需要使用<code class="inline">use ::foo</code> 来消除歧义。</li><li>统一路径的优势是可以避免混淆，更加符合直觉。</li><li>锚定路径的优势： 可以消除模块来自于哪里的歧义。它们有专门的命名空间：crate、super和self。 经过官方团队的内部会议之后，该文作者认为以后应该走统一路径的方向。</li><li>统一路径优势很大，将为新用户消除<code class="inline">self::</code>这样的障碍。</li><li>虽然名称冲突可能发生，但情况比较稀有。使用<code class="inline">use ::</code> 这种方式，比使用<code class="inline">use self</code>要好的多。 官方会在未来3周内对此问题做出决定。即，withoutboats建议，在1.31版本中，只保留统一路径。 <a href="https://boats.gitlab.io/blog/post/anchored-uniform/">Read More</a></li></ul><p><br></p><h2>Jemalloc已被彻底移出标准库</h2><p>从Rust 1.28开始稳定了#[global_allocator]属性，从PR55238开始，Jemalloc已经被彻底移出了标准库。 如果想使用Jemalloc，则需要配合#[global_allocator]属性喝jemalloc第三方包。 现在默认是系统分配器。 <a href="https://www.reddit.com/r/rust/comments/9twam5/jemalloc_was_just_removed_from_the_standard/">Read More</a> <a href="https://github.com/rust-lang/rust/pull/55238">PR55238</a></p><p><br></p><h2>trait alias实现已经被merge</h2><code lang="text">trait DebugDefault = Debug + Default;</code><p><a href="https://github.com/rust-lang/rfcs/blob/master/text/1733-trait-alias.md">RFC 1773</a> <a href="https://github.com/rust-lang/rust/pull/55101">PR 55101</a></p><p><br></p><h2>「官方」嵌入式工作组报告 14</h2><p>简要： 一、 好消息：终于可以用Rust Stable开发嵌入式程序了。 因为<code class="inline">#[panic_handler]</code>登录了Rust 1.30稳定版，这就意味着可以用Stable Rust写Cortex-M的裸机程序了。cortex-m, cortex-m-rt 和 embedded-hal这几个库都可以用于Stable了。 但要注意在Discovery 和 The Embedded Rust Book这两本书中的代码还必须在1.30 beta或1.31 beta或最新Nightly版本中使用，因为它们用了2018 Edition版本。</p><ul><li><a href="https://rust-embedded.github.io/discovery/">Discovery</a></li><li><a href="https://rust-embedded.github.io/book/">嵌入式之书（The Embedded Rust Book）</a> 二、嵌入式工作组已经启动了一个Cortex-A团队，专注于为ARM-Cortex-A系列微处理器的裸机程序开发提供支持。 三、为了解决多个设备连接到同一个外设的问题，@Rahix开发了<a href="https://github.com/Rahix/shared-bus">shared-bus</a> 四、嵌入式社区有了蓬勃的发展。工作组也从最初的8个人，增加到了现在的27名开发人员（分散在11个团队中，每个团队都在嵌入式开发中有自己的擅长领域） 现在是开始用Rust进行嵌入式开发的最好时机。 <a href="https://rust-embedded.github.io/blog/2018-10-28-newsletter-14/">Read More</a></li></ul><p><br></p><hr><p><br></p><h2>社区新闻</h2><p><br></p><h2>2018 国内Rust社区调查报告</h2><p><a href="https://zhuanlan.zhihu.com/p/48236630">Read More</a></p><p><br></p><h2>「研究项目」Shifgrethor：Rust实现的垃圾收集库</h2><p>该文章有更新。 <a href="https://zhuanlan.zhihu.com/p/47850166">Read More</a></p><p><br></p><h2>「Slides」禅与说服贵公司使用Rust的艺术</h2><p>Rust核心团队成员Ashley Williams（@ag_bubs），<a href="http://xn--crates-957in10bjt4blqa.io/">同时也是crates.io</a>、Rust社区的团队领导，WebAssembly工作组的成员分享了这篇主题。 「视频地址：」<a href="https://www.youtube.com/watch?v=GCsxYAxw3JQ">How I Convinced the World's Largest Package Manager to Use Rust, and So Can You!</a> <a href="https://ashleygwilliams.github.io/gotober-2018/#1">PPT</a></p><p><br></p><h2>基于MIR的借用检查NLL已登陆Rust 2018</h2><p>现在Rust 2018的crate已经默认是使用NLL了。在2018 测试版本稳定之后，官方也准备将NLL加到Rust 2015中。 NLL的目的是提升Rust的使用体验。也就是说，开发者只需要按自己的直觉去写代码，而不需要做一些特殊的行为来取悦借用检查器。极大降低了Rust的学习曲线。 Nll的诊断信息也得到了很大的提升，比之前的借用检查器更好，开发者可以看到更详细的错误提示信息。 虽然NLL现在还有一些轻微的开销，但是性能基本已经不再成为实践的阻碍了。 当前NLL运行在迁移模式下，也就是说，对于一些不遵循NLL的老代码，会报出警告信息。这只是一个过渡，假以时日，这些警告会变成硬性的错误。 Rust所有权和借用检查的未来如何？ 还有一些小问题需要修复，以及应对未来人们开发过程中的新问题，并且还要加紧发布相关的文档。继续改进Polonius。等等 <a href="http://smallcultfollowing.com/babysteps/blog/2018/10/31/mir-based-borrowck-is-almost-here/">Read More</a></p><p><br></p><h2>Rust程序发布checklist</h2><p><a href="https://zhuanlan.zhihu.com/p/47924519">Read More</a></p><p><br></p><h2>「rustsim」最后两月动态月刊#1</h2><p>Rustsim组织是一个GitHub组织，聚焦于提供各种数值模拟的库。包括</p><ul><li>alga， 抽象代数库</li><li>nalgebra， 线性代数库</li><li>ncollide， 2D和3D的碰撞检测库</li><li>nphysics， 2D和3D的物理模拟库 <a href="https://rustsim.org/">rustsim.org</a> 今年最后的两个月，在改进ncollide和nalgebra，以便支持可变性物体的物理模拟。并且新增了两个crate：nalgebra-glm和nphysics-ecs。其中nphysics-ecs是打算让开发者方便将物理系统集成到ECS应用程序中。 还将改进文档。 <a href="https://www.rustsim.org/blog/2018/11/01/this-month-in-rustsim/">Read More</a></li></ul><p><br></p><h2>「oj平台」Kattis现在支持Rust了</h2><p>顺便统计一下国内外支持Rust的OJ平台。</p><ul><li>Codewars （支持）</li><li>CodinGame （支持）</li><li>CodeSignal （支持）</li><li>codechef（支持）</li><li><a href="http://exercism.io/">exercism.io</a> （支持）</li><li><a href="http://atcoder.jp/">atcoder.jp</a>（支持）</li><li>LeetCode（正在开发Rust支持）</li><li>hackerrank （不支持）</li><li>coderbyte （目前不支持Rust）</li><li>geeksforgeeks （不支持） 欢迎补充 <a href="https://open.kattis.com/help/rust">Read More</a></li></ul><p><br></p><h2>hashbrown：基于Google SwissTable哈希算法实现的Map</h2><p>该库是parking_lot作者开发的新库， 基于SwissTable算法实现了HashMap和HashSet。 Rust标准库的HashMap和HashSet基于RobinHood散列，hashbrown基于SwissTable散列。 SwissTable整体性能要优于Robinhood，尤其是在搜索上面：</p><code lang="text">|  name           |stdhash ns/iter | hashbrown ns/iter|diff ns/iter| diff % |speedup
|find_existing    |  23,831        | 2,935            | -20,896    |-87.68% | x 8.12
|find_nonexisting |  25,326        | 2,283            | -23,043    |-90.99% | x 11.09
|get_remove_insert|  124           | 25               | -99        |-79.84% | x 4.96
|grow_by_insertion|  197           | 177              | -20        |-10.15% | x 1.11
|hashmap_as_queue |  72            | 18               | -54        |-75.00% | x 4.00
|new_drop         |  14            | 0                | -14        |-100.00%| x inf
|new_insert_drop  |  78            | 55               | -23        |-29.49% | x 1.42</code><p><a href="https://github.com/Amanieu/hashbrown">hashbrown</a> <a href="https://www.reddit.com/r/rust/comments/9sn4ze/github_amanieuhashbrown_a_faster_hashmap_for_rust/">reddit讨论贴</a> <a href="https://www.youtube.com/watch?v=ncHmEUmJZf4">算法原理讲解视频: 《CppCon 2017: Matt Kulukundis “Designing a Fast, Efficient, Cache-friendly Hash Table, Step by Step”》</a></p><p><br></p><h2>「Web框架」Rocket v0.4 发布了候选版本</h2><p>正式版将于11月9号发布，到时候作者会写一篇完整介绍V0.4最大特色和变化的文章。 <a href="https://rocket.rs/v0.4/news/2018-10-31-version-0.4-rc/">Read More</a></p><p><br></p><h2>salsa：通用增量计算框架</h2><p>Rust团队核心成员Niko又开了新坑，莎莎（salsa），是一个通用的增量计算框架。 然后我又看到Cargo的贡献者Yehuda创建了一个新库：<a href="https://github.com/wycats/salsa-examples">salsa-examples</a>，我在猜测，Yehuda是不是想在salsa的基础上实现一个新的ORM框架呢？ <a href="https://github.com/salsa-rs/salsa">salsa</a></p><p><br></p><h2>Rust编译器现在已支持14个debian架构</h2><p>本周新增的CPU架构为：</p><ul><li>mips</li><li>mips64el</li><li>mipsel</li><li>powerpcspe <a href="https://lists.debian.org/debian-devel-announce/2018/11/msg00000.html">Read More</a></li></ul><p><br></p><hr><p><br></p><h2>学习资源</h2><p><br></p><h2>「杂谈」异常处理 vs 错误处理</h2><p><a href="https://zhuanlan.zhihu.com/p/48200804">Read More</a></p><p><br></p><h2>查找并修复Hyper应用中的内存泄漏</h2><p><a href="https://zhuanlan.zhihu.com/p/48011141">Read More</a></p><p><br></p><h2>NLL之后：程序间冲突</h2><p><a href="https://zhuanlan.zhihu.com/p/48302513">Read More</a></p><p><br></p><h2>Cita-cli工具开发中的异步经验谈</h2><p>本文是来自 @driftluo 的投稿。 他在使用全异步开发cita-cli过程遇到了自引用的问题，但他是在稳定版Rust下开发，使用的还是futures 0.1，为了解决这个问题，他给出了一个自己的思路。 <a href="https://www.driftluo.com/article/19d035a0-f467-4f9d-a8d4-9c7096f7044d">Read More</a></p><p><br></p><h2>2D图形Rust开发：了解GPU内存管理</h2><p>该篇文章在gfx-hal基础上构思了一个2D图形库的一些底层实现细节。他讨论的这些内容并非2D图形API，而是基础的组件，在此组件上面可以实现各种渲染技术，并且该组件将独立于这些渲染技术。 <a href="https://nical.github.io/posts/rust-2d-graphics-02.html"> Read More </a></p><p><br></p><h2>「Web框架」使用actix-web制作一个验证用户身份的微服务 Part 2</h2><p><a href="https://hgill.io/posts/auth-microservice-rust-actix-web-diesel-complete-tutorial-part-1/">前文索引</a> <a href="https://hgill.io/posts/auth-microservice-rust-actix-web-diesel-complete-tutorial-part-2/">Read More</a></p><p><br></p><h2>如何使用Cargo构建Qt应用</h2><p>目的是想让Qt的安装和运行更加简单 <a href="https://www.vandenoever.info/blog/2018/10/30/building_qt_apps_with_cargo.html">Read More</a></p><p><br></p><h2>Pyro: 一个轻巧的ECS</h2><p>Pyro是一个快速的、小型的、带文档的ECS。 特点：</p><ul><li>完全线性的迭代</li><li>组件中的组合始终存在于同一存储中</li><li>目前还仅支持单线程（作者说未来会加多线程支持）</li><li>不要用于生产环境，该库主要是用于教育的目的 <a href="https://github.com/MaikKlein/pyro">pyro</a> <a href="https://www.reddit.com/r/rust/comments/9srhuc/pyro_a_fast_small_and_documented_entity_component/">Read More </a></li></ul><p><br></p><h2>rs_pbrt发布0.4版本</h2><p>rs_pbrt是对《Physically Based Rendering,PBRT(光线跟踪：基于物理的渲染) 》这本书中代码的Rust实现。 <a href="https://users.rust-lang.org/t/rs-pbrt-v0-4-4-adds-support-for-nurbs-and-subdivision-surfaces/21801">Read More</a> <a href="https://github.com/wahn/rs_pbrt">rs_pbrt</a> <a href="https://www.pbrt.org/">www.pbrt.org</a></p><p><br></p><hr><p><br></p><h2>项目</h2><p><br></p><h2>ZoKrates: 以太坊的zkSNARKS工具箱</h2><p>当前为POC项目。 zkSNARKS是一种零知识证明算法，以太坊据说要应用这种技术来提升以太坊的性能。</p><blockquote>Buterin 估计，ZK-SNARK 的整合和采用能够使以太坊每秒处理高达500笔交易，而目前的上限约为15笔。 <a href="https://github.com/Zokrates/ZoKrates">ZoKrates</a></blockquote><p><br></p><h2>xorc-notifications：用于发送推送通知的Kafka Consumer</h2><p>该项目是来自于生产环境实践的开源项目，从kafka topic读取protocol buffer的数据并将推送通知发送到apns2，fcm和web-push三个平台，也可以用来发送普通的http请求。 <a href="https://github.com/xray-tech/xorc-notifications">xorc-notifications</a></p><p><br></p><h2>sled是一款Rust实现的现代化嵌入式数据库</h2><p>新的版本更加可靠，且实现了零Copy读取，Rust的所有权模型让引用安全地返回给缓存而无需防御性的拷贝。 <a href="https://github.com/spacejam/sled">sled</a></p><p><br></p><h2>「GUI框架」Azul：面向IMGUI的免费功能性GUI框架</h2><p>支持用Rust编写桌面软件，基于Mozilla WebRender渲染引擎。 目前还在完善中，期望特点（也就是说，当前这些功能并非全部支持）：</p><ul><li>跨平台</li><li>IMGUI （Immediate Mode GUI ）/ MVVM 编程模型</li><li>基于Dom的无状态组件</li><li>CSS风格的样式引擎，支持多种通用CSS属性</li><li>基于Flexbox的布局</li><li>内置标准控件</li><li>自定义widgets</li><li>SVG渲染引擎，2D绘图助手 (lines, circles, rects, etc.)</li><li>OpenGL集成</li><li>Async I/O</li><li>可选的集成日志和错误报告辅助</li><li>独立二进制部署，最小二进制大小（5MB）</li><li>CPU使用率（0-4%），内存使用率（总共约50MB）</li><li>快速重绘时间（0.5~4ms），包括了高效的状态缓存 <a href="https://azul.rs/">azul.rs</a></li></ul><p><br></p><h2>「异步Web框架」Gotham 0.3发布</h2><p>特点：</p><ul><li>基于新的tokio库</li><li>采用hyper 0.12和新的http库</li><li>内部路由算法改进</li><li>自定义Gotham使用tokio运行时</li><li>通过tokio-fs提供异步静态文件</li><li>更多性能和可用性改进 <a href="https://gotham.rs/blog/release/2018/10/29/gotham-0.3.html">Read More</a></li></ul><p><br></p><hr><p><br></p><h2>工具与库</h2><p><br></p><h2>「库」bytecount 0.4 发布</h2><p>该库可以快速计算内存中给定字节或UTF8字符串出现的次数 新版本中支持了新的更快的算法，基于stdsimd。 <a href="https://github.com/llogiq/bytecount">bytecount</a></p><p><br></p><h2>slotmap 0.3 发布</h2><p>该库是在<a href="https://kyren.github.io/2018/09/14/rustconf-talk.html">Rust 2018 Conf闭幕演讲</a>中介绍的，基于 Generational Index模式实现的库。 新功能：</p><ul><li>可以自定义Key的类型</li><li>SecondaryMap，运行slotmap中的key和任意数据关联 <a href="https://www.reddit.com/r/rust/comments/9s0hbk/slotmap_03_released_support_for_custom_key_types/">Read More</a></li></ul><p><br></p><h2>aws_lambda_events 发布</h2><p>aws_lambda_events 提供了AWS Lambda事件类型，以便与AWS Lambda事件源一起使用。 <a href="https://github.com/srijs/rust-aws-lambda/tree/master/aws_lambda_events">aws_lambda_events</a></p><p><br></p><h2>SUPER 0.5发布</h2><p>SUPER 是一款Android应用程序分析工具，可以检测潜在的安全漏洞并创建漂亮的报告。 <a href="https://superanalyzer.rocks/2018/11/03/super-0.5.0-release">Read More</a> <a href="https://github.com/SUPERAndroidAnalyzer/super">SUPER</a></p><p><br></p><h2>「工具」Roughenough 1.1.0 发布</h2><p>该工具是基于Google的Roughtime协议的Rust实现，包含了客户端和服务端。可以用来做时间同步验证。比如区块链矿工可以用它来验证自己的时间早于其他矿工。 新版本中支持KMS、HTTP运行状况检查和服务器模糊测试 <a href="https://www.reddit.com/r/rust/comments/9s51tp/roughenough_110_released_with_kms_support_an_http/">Read More</a> <a href="https://github.com/int08h/roughenough">roughenough</a></p><p><br></p><hr><p><br></p><h2>招聘两则</h2><p><br></p><h2>移动端图形渲染开发工程师</h2><p>工作地点：北京 因为项目涉及保密，所以公司名和公司联系方式不便对外公布。</p><blockquote>内容：开发iOS/Android短视频渲染框架 预算：30-50k 要求：<br></blockquote><ol><li>熟悉Rust/C++语言，有一年以上Rust开发经验更好。</li><li>熟练掌握OpenGL ES 3.x/Metal/Vulkan其中之一，拥有一个或以上已上线图形渲染项目开发经验。</li></ol><p><br></p><p><br></p><p>联系方式： 82084788 [at] qq [dot] com</p><p><br></p><h2>「今日头条EE部门」Rust开发工程师</h2><p>工作城市： 上海 岗位描述：</p><blockquote>1、开发跨平台高性能native客户端核心组件； 2、负责沟通及创作工具的系统设计, 实现, 优化和演进； 3、研究分析主流 IM，优化实现方案，改进产品功能； 4、负责设计和优化 IM 协议、弱网通信、推送、存储、网络并发、并行计算、加密以及安全等； 5、保证工程质量和开发效率。</blockquote><p><br></p><p>岗位要求：</p><blockquote>1、良好的系统编程能力. 喜爱或有Rust经验以及扎实的C/C++功底更佳； 2、喜爱关注新技术, 愿意尝试更优解决方案； 3、不设边界, 愿意探索了解事物运转原理； 4、熟悉开源社区； 5、热衷自动化完成事情； 6、关注代码设计，有持续学习习惯。</blockquote><p><br></p><p>注：如有需要，可以联系我，帮转（猎头）简历。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
</body>
</html>
