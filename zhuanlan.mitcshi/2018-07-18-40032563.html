<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Greenblatt 的神奇公式及其改进</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/40032563">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-47fee2135b86e5b288024c05b540042b_r.jpg" alt=""></div><h2><b>摘要</b></h2><p><b>单次优势 + 大数定律 = 长期成功。</b>价值投资二者皆有，久经市场考验，是在股市中取得成功的不二法则。Greenblatt 的神奇公式用两个简单的量化指标执行价值投资，值得仔细品味。</p><h2><b>1 Joel Greenblatt</b></h2><p><b>Joel Greenblatt（乔尔·格林布拉特）</b>在华尔街家喻户晓。他是<b>特殊事件投资（special situation investing）</b>的旗帜性人物。<b>特殊事件投资就是投资那些因为企业拆分、公司并购、资产重组、破产清算等而被低估的证券。</b>他的基金 Gotham Capital 在 1985 年到 1995 年间取得了费前 40% 的惊人年化收益率（在 1995 年之后他退回了所有外部投资者的钱，但继续用自己的钱进行特殊事件投资）。1999 年，Greenblatt 写了一本《You can be a stock market genius》（Greenblatt 1999）介绍他的投资方法。毫无意外的，该书在推出后迅速成为畅销书，它一举奠定了 Greenblatt “明星投资人”的地位，并成为特殊事件投资领域的经典之作。</p><p>然而，让 Greenblatt 的声望到达顶峰的却是他的第二本书《The little book that beats the market》（Greenblatt 2005）。该书源自他的一个设想 —— <b>能否使用简单的量化手段来复制巴菲特的价值投资。</b>在巴菲特的诸多名言中，对 Greenblatt 影响最深的要数下面这句：</p><blockquote><i>It's far better to buy a wonderful company at a fair price than a fair company at a wonderful price.</i><br><i>译：用合理的钱买到好公司远远好于用一个好价钱买到一个普通的公司。</i></blockquote><p>从这句至理名言中，Greenblatt 总结出巴菲特的成功之处在于两点：<b>好公司 + 价格便宜</b>。按照这个思路，他开始了自己的尝试，并最终找到了<b>两个量化指标</b>来代表这两个方面。<b>根据这两个量化指标选出来的股票在历史长河中远远跑赢了基准指数。</b>Greenblatt 将这个由这两个量化指标构成的选股系统称作<b>神奇公式（the Magic Formula）</b>，并把它公布在上面提到的《The little book that beats the market》这本书中。在随后的 5 年中，Greenblatt 继续进行着他的价值投资实践，并推出了该书的升级版《The little book that <b>still</b> beats the market》（Greenblatt 2010，升级版中加入了更多的数据和最新 5 年的回测），而这本书最终也被翻译成中文版引入了中国，并有一个非常响亮的名字：《股市稳赚》。</p><img src="https://pic3.zhimg.com/v2-6a115423dd9268d31b67acdbab2d5f0f_r.jpg" data-caption="" data-size="normal" data-rawwidth="982" data-rawheight="435" data-watermark="watermark" data-original-src="v2-6a115423dd9268d31b67acdbab2d5f0f" data-watermark-src="v2-43933f2d7ad383e1fb72b8f648032162" data-private-watermark-src=""><p>神奇公式在华尔街名声大噪。而随着最近两年价值投资逐渐成为 A 股市场的主旋律，它在国内的知名度也越来越高。Greenblatt 在神奇公式中使用的两个量化指标究竟是什么呢？它们有没有改进的空间呢？这就是本文关注的问题。</p><h2><b>2 神奇公式</b></h2><p>在好公司这个维度，从巴菲特每年写给股东的 Chairman's letters 中，不难觅出蛛丝马迹。在巴菲特看来，一个优秀公司应该能够“earns a high return on equity capital”，即<b>好公司的资本回报率要高</b>。为此，Greenblatt 选择了他的第一个量化指标 —— <b>ROC（Return on Capital）</b>。</p><p>具体的，ROC 的定义为：</p><blockquote><i><b>ROC = Earnings before Interest and Taxes (EBIT) / Capital</b></i><br><i><b>译：ROC = 息税前利润 / 资本</b></i></blockquote><p>在上式中，资本的定义为 Net Working Capital + Net Fixed Assets，即净营运资金和固定资产净额之和。<b>值得注意的是，计算 ROC 的时候应该和常见的 ROE 以及 ROA 一致，资本应该是期初的值，而利润应该是在期初到期末这段时间内由期初资本产生的利润。</b></p><p>假如做同种生意的两个公司 A 和 B 它们的初期投资都是 400,000 美元，而公司 A 产生的利润是 200,000，是公司 B 的两倍。则从 ROC 的角度来说，公司 A 的回报更高（50%），因此它比公司 B 更值得拥有。</p><img src="https://pic4.zhimg.com/v2-cbe191b264ba73c197739185d8d0fc23_r.jpg" data-caption="" data-size="normal" data-rawwidth="580" data-rawheight="211" data-watermark="watermark" data-original-src="v2-cbe191b264ba73c197739185d8d0fc23" data-watermark-src="v2-975d33f68726ba0674c3756968ac3470" data-private-watermark-src=""><p><b>ROC 度量了上市公司在公司运营中利用资本的效率。ROC 越高说明单位资本产生的利润更高，公司越优秀。</b></p><p>再来看看价格便宜这个维度。Greenblatt 选择的是 Earnings Yield（回报率），和我们常说的 P/E 的倒数类似。具体的，Earnings Yield 的定义为：</p><blockquote><i><b>Earnings Yield = EBIT / Total Enterprise Value</b></i><br><i><b>译：Earnings Yield = 息税前利润 / 企业总价值</b></i></blockquote><p><b>企业总价值（TEV）是购买整个公司需要的价格，可以近似的理解为总市值 + 总负债 – 总现金。</b>举个例子，假如我们可以花 100 块买公司 A 或者公司 B，而公司 A 每年能给我们产生 20 块的利润，公司 B 仅能在每年产生 5 块钱的利润。因此 A 的回报率是 20%，远远超过 B 的 5%。显然，A 公司比 B 公司更好。从“便宜”的角度，我们花同样的钱，买到了 20% 回报率的公司，而不是那个仅仅有 5% 回报率的公司。物有所值！所以，<b>Earnings Yield 越大说明公司越便宜。</b></p><p>有了 ROC 和 Earnings Yield 这两个量化指标，Greenblatt 分别使用它们给股票排序（每个指标下表现最好的公司排名为 1，最差的排名最后）。在每支股票得到两个维度的排名后，把它们相加得到最终的排名，Greenblatt 选出名次靠前的 30 支股票，持有一年，每年调仓。</p><p>在实证中，Greenblatt 排除了公用事业和金融行业的公司，以及流动性特别差的公司。他指出在这个神奇公式在 1988 到 2004 年之间可以取得 30.8% 的年化收益率，远超同期市场的 12.3%。最新的满足神奇公式的股票实时公布在 magicformulainvesting.com 这个网站上，感兴趣的小伙伴不妨关注下（需要注册）。</p><p>不妨来看看这个神奇公式在 A 股上是否也如此神奇。</p><h2><b>3 神奇公式在 A 股上的实证</b></h2><p>本节使用果仁网简单的在 A 股上验证神奇公式。具体的，我们把投资标的限制在沪深 300 的成分股以及中证 500 的成分股（分别测试，并排除金融和公用事业）。回测时间是 2009 年 1 月 2 日到 2018 年 6 月 6 日。</p><p>在 ROC 方面，我们可以采用默认的 TTM（trailing twelve months）作为期初和期末的窗口，也可以用最新一季度的季报数据。从回测来看，基于季报数据的结果更好，因此本文使用基于季报的 ROC。具体的，ROC 的定义为最新一季息税前利润与上一季资本的比值，这里上一季资本等于该季的流动资产 – 流动负债 + 固定资产 – 固定资产折旧。在 Earnings Yield 方面，使用相关财务指标的 TTM 数据计算。</p><p>首先来看在沪深 300 上的回测结果。按上述两个指标排序，将股票分成 10 档，每 20 天调仓。这 10 档的收益率如下图所示，单调性为 0.89 —— <b>说明这两个指标非常有效的区分了这些股票，且正的单调性说明按照这两个因子选出的排名高的股票确实能获得更高的收益。</b></p><img src="https://pic3.zhimg.com/v2-dd01f9a5ac929c973c6a68b8d76d20d4_r.jpg" data-caption="" data-size="normal" data-rawwidth="1063" data-rawheight="471" data-watermark="watermark" data-original-src="v2-dd01f9a5ac929c973c6a68b8d76d20d4" data-watermark-src="v2-583711f43a9406e4a90fd2b8b78df5f7" data-private-watermark-src=""><p>接下来考虑一个简单的选股策略：</p><p>每日更新上述两个指标并重新对股票排名，新股理想仓位为 4%，上下各浮动 0.4%；卖出条件为股票按神奇公式的最新排名超过 20；为降低换手率，要求每支股票买入后持有不少于 20 个交易日，且在卖出时不考虑涨停的股票；单边交易费用为千分之一、假设按照收盘价交易。</p><p>在这个选股策略的净值和沪深 300 的对比如下。高下立判。</p><img src="https://pic1.zhimg.com/v2-73a214c505074b4afa4d6b891f19733b_r.jpg" data-caption="" data-size="normal" data-rawwidth="712" data-rawheight="442" data-watermark="watermark" data-original-src="v2-73a214c505074b4afa4d6b891f19733b" data-watermark-src="v2-cda4b7bfd12bebd319d133edbb53072b" data-private-watermark-src=""><p>再来看看神奇公式在中证 500 上的效果，它分类的单调性为 0.84。</p><img src="https://pic2.zhimg.com/v2-a747991e2625b60ab167246354e47db0_r.jpg" data-caption="" data-size="normal" data-rawwidth="1059" data-rawheight="466" data-watermark="watermark" data-original-src="v2-a747991e2625b60ab167246354e47db0" data-watermark-src="v2-b4b28dabb5ad8af367e442f6141d2a43" data-private-watermark-src=""><p>选股策略的效果和中证 500 的比较如下。</p><img src="https://pic4.zhimg.com/v2-33c992b351f5eeb0708df4e5b6018c75_r.jpg" data-caption="" data-size="normal" data-rawwidth="719" data-rawheight="445" data-watermark="watermark" data-original-src="v2-33c992b351f5eeb0708df4e5b6018c75" data-watermark-src="v2-ea07731d26332eba171255d4c57a4e2e" data-private-watermark-src=""><p>自 2016 年价值投资回归后，该策略在中证 500 上的绝对收益似乎不够优秀。但这是因为中证 500 本身太差。如果我们来看相对收益率（下图），还是能明显的看出这二者的差异 —— 矬子里拔将军，神奇公式依旧神奇。</p><img src="https://pic3.zhimg.com/v2-6a0b15232596f0e98777bca6a3b9fc4e_r.jpg" data-caption="" data-size="normal" data-rawwidth="1046" data-rawheight="416" data-watermark="watermark" data-original-src="v2-6a0b15232596f0e98777bca6a3b9fc4e" data-watermark-src="v2-1f4c0a14e6e289dce84f6eb3714d3ea8" data-private-watermark-src=""><h2><b>4 来自学术界的改进</b></h2><p>自因子投资发展以来，学术界发现了大量可用于价值投资的优秀因子。因此，我们想看看能否根据学术界的这些发现来让神奇公式更上一层楼。</p><p><b>当然，这么做的动机除了希望学术界能够证明自己以外，还有一个非常现实的原因。</b>在神奇公式中， EBIT 是一个核心财务指标，它被同时用在 ROC 和 Earnings Yield 中。<b>然而在财报中，EBIT 存在被篡改的可能，因此它有时是失真的。</b>正如 Novy-Marx (2010) 指出的那样：</p><blockquote><i>The farther down the income statement one goes, the more polluted profitability measures become, and the less related they are to true economic profitability.</i><br><i>译：当我们沿着利润表（income statement）往下看的时候，利润这一项变得越来越不纯粹（polluted），且越来越无法有效的反映该公司真正的经济利润。</i></blockquote><p>为此，Novy-Marx (2010) 提出了另一个指标：<b>Gross Profit to Total Assets（GPA）</b>。<b>这被认为是学术界发现的衡量公司盈利能力的最有效指标之一。</b>我们用它来代替神奇公式中的 ROC。GPA 和 ROC 的结构差不多，但是在分子方面，它用 Gross Profit 代替了 EBIT，而在分母上用 Total Assets 代替了 Capital。</p><p><b>毛利（gross profit）是利润最纯粹的度量，它处于 income statement 的最上端，被操纵的可能最小。</b>毛利是公司经营的基础。该公司卖产品能获得多少销售额？生产该产品的费用又是多少？毛利高的公司有机会就如何分配资本（再投资、减少债务、回报股东）做出更明智的决定；而毛利较低的公司成功的可能性也较低。</p><p><b>在分母方面，使用 Total Assets（资产总计）的好处是，该数值和公司的资产结构无关。这和毛利相对应，因为毛利也是和公司的资本结构无关。</b>因此，使用 GPA 代替 ROC 可以让我们在不同的公司之间进行 apples to apples 的比较。</p><p>在价格便宜方面，为了替换掉 EBIT，我们使用学术界最著名的一个估值因子，来自 Fama 和 French 三因子（Fama and French 1992）中的 Book-to-Market Value，即常说的 B/P。Fama 和 French 喜欢这个因子的原因是账面价值相比于其他基本面指标更加稳定，和有助于保证投资者组合的低换手率：</p><blockquote><i>We like [book-to-market capitalization] because the book value in the numerator is more stable over time than earnings or cashflow, which is important for keeping turnover down in a value portfolio.</i></blockquote><p><b>总结一下，在本节提出的改进使用 GPA 替换神奇公式中的 ROC；只用 B/P 代替神奇公式中的 Earnings Yield。</b>马上来看看是来自华尔街的智慧（神奇公式）厉害，还是来自学术界的智慧（利用 GPA 和 B/P）更胜一筹。</p><h2><b>5 改进后的神奇公式在 A 股上的实证</b></h2><p>在 GPA 方面，我们同样测试了单季数据和 TTM 数据计算的指标。结果显示单季的效果更好。具体的，GPA 定义为单季的毛利除以上一季度的资产总计。</p><p>对于沪深 300，使用改进后的指标把股票分成 10 类，单调性为 0.92，<b>高于神奇公式，且各档之间的区分度更明显。</b></p><img src="https://pic4.zhimg.com/v2-858ac2386549f6468878784f37e099a2_r.jpg" data-caption="" data-size="normal" data-rawwidth="1055" data-rawheight="466" data-watermark="watermark" data-original-src="v2-858ac2386549f6468878784f37e099a2" data-watermark-src="v2-08b844f1a44aafdf80ac360bae107768" data-private-watermark-src=""><p>选股策略的效果如下 —— <b>年化收益、夏普率以及最大回撤都要优于神奇公式</b>：</p><img src="https://pic1.zhimg.com/v2-305182cd9825e704762cbde8987aea10_r.jpg" data-caption="" data-size="normal" data-rawwidth="721" data-rawheight="447" data-watermark="watermark" data-original-src="v2-305182cd9825e704762cbde8987aea10" data-watermark-src="v2-d4e08fc9a6f7640a5824c389cf68430f" data-private-watermark-src=""><p>最后来看看对中证 500 的结果。使用改进后的指标把股票分成 10 类，单调性为 0.93，同样高于神奇公式。</p><img src="https://pic3.zhimg.com/v2-c1ba3360777d7f155793a00208324757_r.jpg" data-caption="" data-size="normal" data-rawwidth="1054" data-rawheight="465" data-watermark="watermark" data-original-src="v2-c1ba3360777d7f155793a00208324757" data-watermark-src="v2-6b799eeaed995e15f81d9c9a213cddb7" data-private-watermark-src=""><p>选股策略的效果如下。<b>在中证 500 上，来自学术界的改进版神奇公式效果远超于来自华尔街的神奇公式（相对收益率的曲线也变得更加平滑，且在 2018 年的表现也非常好）。</b></p><img src="https://pic1.zhimg.com/v2-993c7e0f523edc030510efe5b6dd54b7_r.jpg" data-caption="" data-size="normal" data-rawwidth="718" data-rawheight="730" data-watermark="watermark" data-original-src="v2-993c7e0f523edc030510efe5b6dd54b7" data-watermark-src="v2-0853fd80e37a0714acfe902e5ebc6002" data-private-watermark-src=""><h2><b>6 结语 —— 价值投资为什么能成功？</b></h2><p>Greenblatt 对于价值投资的信仰绝不仅仅表现为他写了两本畅销书。<b>2010 年，他的基金 Gotham Capital 决定放弃之前赖以成名的特殊事件投资，转而专注于价值投资。行胜于言，Greenblatt 的这个决定比任何溢美之词都更能说明价值投资的意义。</b>而这个决策的背后，无疑是 Greenblatt 对“价值投资这一套体系一定能取得成功”所秉持的坚定不移的态度。</p><p>在实践层面，Greenblatt 的神奇公式还有另外一个意义。早在 80 年前，在 Benjamin Graham 和 David Dodd 合著的第一版价值投资圣经《证券分析》中，Graham 就给出了 10 条选股标准，它们很好的诠释了“优质 + 便宜”这个核心思想。<b>但 Graham 的方法有个小问题，那就是它选的是绝对指标而非相对指标。</b>因此在某些历史阶段，很难选出足够多的满足那 10 条标准的股票，这会造成策略在那些时间内仓位很低或者重仓投资于少数几支股票上。<b>神奇公式的优势在于它考虑的是股票之间的相对强弱，因此我们总能选出足够多的股票。</b></p><p>无论是 Graham、Dodd、Buffett 还是 Greenblatt，他们的传奇似乎都在诉说着市场中一个最平凡的真谛：<b>价值投资久经考验，是想要在股市中取得成功的不二法则。</b></p><p>那么，价值投资为什么能成功？</p><p>如同价值投资中有它的神奇公式，在市场中想要成功也有它自己的“神奇公式”：</p><p><b>单次优势 + 大数定律 = 长期成功。</b></p><p>在一个不确定性的博弈中（可以是一个赌局，或者一项投资），<b>单次优势是说我们需要在概率上有获胜的优势，或者我们的期望收益为正。</b>一个概率为 50/50 的扔硬币赌局，如果赢了给你 10 块，输了让你赔 11 块，你是不会玩的。为什么？因为它的期望收益为负！<b>“高质量 + 低价格”的公司是大概率优于“低质量 + 高价格”的公司的，因此价值投资给了我们单次优势。</b></p><p>不幸的是，单次优势仅仅是成功的必要条件。在上面这个成功的食谱中，最重要的是第二项：大数定律。哪怕单次优势再明显，仅仅进行一次、两次也是无法保证最终获胜的。<b>唯有我们一直坚持下去，参与的回合足够多，大数定律才能保证我们的长期实际收益收敛于理论上的期望收益。</b></p><p><b>价值投资的难点从来就不是用哪个因子来选股，而是“大数定律” —— 持之以恒的坚持。</b>那些善于逆向交易、耐得住寂寞的交易者，才更有可能取得成功。成功是对坚持价值投资的巴菲特们的巨大褒奖。</p><p><br></p><p>向前跑 迎着冷眼和嘲笑</p><p>市场的广阔不经历磨难怎能感到</p><p>价格它无法让我们跪地求饶</p><p>就算魅力股占据头条</p><p><br></p><p>继续跑 带着赤子的骄傲</p><p>价值的闪耀不坚持到底怎能看到</p><p>与其朝三暮四不如长期持有吧</p><p>为了心中的美好</p><p>不妥协直到变老</p><p><br></p><p><br></p><p><b>参考文献</b></p><ul><li>Fama, E. F. and K. R. French (1992). The cross-section of expected stock returns. <i>The Journal of Finance</i>, Vol. 47(2), 427 – 465.</li><li>Greenblatt, J. (1999). <i>You Can Be a Stock Market Genius.</i> Touchstone.</li><li>Greenblatt, J. (2005). <i>The little book that beats the market.</i> John Wiley &amp; Sons.</li><li>Greenblatt, J. (2010). <i>The little book that still beats the market.</i> John Wiley &amp; Sons.</li><li>Novy-Marx, R. (2010). The other side of value: good growth and the gross profitability premium. NBER Working Paper No. w15940, available at <i>SSRN http://ssrn.com/abstract=1598056.</i></li></ul><p><br></p><p><br></p><p>原创不易，请保护版权。如需转载，请联系获得授权，并注明出处，谢谢。已委托“维权骑士”(<a href="http://rightknights.com">维权骑士_免费版权监测/版权保护/版权分发</a>) 为进行维权行动。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
