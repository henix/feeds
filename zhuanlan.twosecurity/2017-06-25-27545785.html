<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>BurpSuite 几个扩展的使用</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/27545785">原文</a></p>
<p><b>前言</b></p>

<p>BurpSuite 是一个辅助渗透的工具，它提供了简单的 HTTP 的抓包改包、数据枚举模块到各种安全漏洞的手动式扫描与爬虫式扫描，以及很多经常会用到的小工具。它的主要模块 Proxy / Scanner / Spider 等都设计了接口可以很方便的使用 Java / Python 或是
Javascript 进行编写扩展，我们也可以在应用内的扩展商城 BApp Store 中直接勾选安装其它人共享的渗透测试扩展，类型非常丰富。<br></p><br><p><b>插件安装<br></b></p><img src="https://pic1.zhimg.com/v2-45f9c4089eb37a285b8d32aa4f71e270_r.png" data-rawwidth="554" data-rawheight="294"><h2>XSS
Validator</h2><p>用来自动检测当前网站是否存在 XSS 漏洞。</p><ol><li><b>使用准备：</b><br> 安装phantomJS，下载地址：<a href="https://translate.googleusercontent.com/translate_c?depth=2&amp;hl=zh-CN&amp;prev=search&amp;rurl=translate.google.com&amp;sl=en&amp;sp=nmt4&amp;u=http://phantomjs.org/&amp;usg=ALkJrhgQk-eQa7djfhPAHBDMF0BvuwkdIQ" data-editable="true" data-title="http://phantomjs.org/" class="">http://phantomjs.org/</a>，此过程不再赘述。（将 phantomJS 加入到环境变量中，方便使用）。<p>安装好的 XSS validator，页面如下：</p><br><img src="https://pic1.zhimg.com/v2-c8358d53841433f7c3485452f6335798_r.png" data-rawwidth="553" data-rawheight="352"><br></li><li><b>使用方式</b><br><p>在cmd命令提示符窗口执行命令 :</p><code lang="text">phantomjs xss.js</code><p>xss.js 这个文件在插件安装目录下的xss-detector文件夹下，若该文件夹下没有，可以去<a href="https://github.com/nVisium/xssValidator" data-editable="true" data-title="nVisium/xssValidator" class="">https://github.com/nVisium/xssValidator</a>下载，并复制到插件安装目录中。控制台界面显示如下，并无其他提示信息。<br><img src="https://pic1.zhimg.com/v2-4e0321a196cab93309fb9281984c665d_r.png" data-rawwidth="553" data-rawheight="59"></p><p>配置 payload：<br><img src="https://pic1.zhimg.com/v2-84a66a7316b030457a22fb106bef80a6_r.png" data-rawwidth="608" data-rawheight="403"><img src="https://pic1.zhimg.com/v2-7a568224bc6682ed69daf4e60168f606_r.png" data-rawwidth="592" data-rawheight="365"><img src="https://pic1.zhimg.com/v2-e30064e1139b9966d1cbac5472722162_r.png" data-rawwidth="537" data-rawheight="453"><br></p><br></li><li>然后 start attack，跳出来的页面显示：成功触发 XSS 攻击的有效负载将被存在“ fy7sdufsuidfhuisdf ”标志所指出，如下所示：<br><img src="https://pic1.zhimg.com/v2-8c86ca7656e24b15fa032841e494d493_r.png" data-rawwidth="554" data-rawheight="351"></li><li>可以看到，响应报文中存在 XSS 漏洞的均被标出。若要验证某一个 XSS 漏洞的效果，选中<br><img src="https://pic1.zhimg.com/v2-e195e7f60b4fd0423d4b9ffd342c192a_r.png" data-rawwidth="553" data-rawheight="350"><img src="https://pic1.zhimg.com/v2-9be34538a575c4cc62f6e5958fd0db0c_r.png" data-rawwidth="401" data-rawheight="183">复制该地址到浏览器（设置了代理）中打开即可。 </li></ol><h2><b>Notes</b></h2><p>notes 是用来管理在渗透过程中创建的外部文件。</p><p>安装后的界面如下：</p><img src="https://pic1.zhimg.com/v2-1543a70582b2989f5ba0a41fb2936024_r.png" data-rawwidth="238" data-rawheight="340"><br><ul><li>Export Tab ：将单个备注导出为外部文件。<br></li><li>Save Notes： 将当前打开的所有备注保存在一个文件中。<br></li><li>Load Notes：打开以前保存的一组备注。<br></li><li>New Text ：新建注释文本。<br></li><li>New Spreadsheet：新建电子表格。<br></li><li>Import Text：导入文本文档的内容。<br></li><li>Import Spreadsheet：导入电子表格。<br><br>还可以将发送HTTP请求和响应到 Notes：<br></li></ul><br><img src="https://pic1.zhimg.com/v2-0e227016e44437ee66fd19b90d46f203_r.png" data-rawwidth="553" data-rawheight="317"><br><h2><b>Bypasswaf</b></h2><p>WAF（web 应用防火墙）会检查请求的 HTTP 头。具体实现是检查头 X-originating-IP 的请求。而利用 BurpSuite 可以轻松的在请求里添加标头以绕过某些 WAF 产品。此扩展程序将自动将以下标头添加到所有请求中： </p><ul><li>X-Originating-IP：127.0.0.1<br></li><li>X-Forwarded-For：127.0.0.1<br></li><li>X-Remote-IP：127.0.0.1<br></li><li>X-Remote-Addr：127.0.0.1<br></li><li>X-Client-IP：127.0.0.1<br></li></ul><br><p><b> 使用方式：</b></p><ol><li>在burp中创建一个会话处理规则以此来激活该插件。<img src="https://pic1.zhimg.com/v2-2e02ebdfaa3da75f45eb20fbfabe2873_r.png" data-rawwidth="554" data-rawheight="305"><img src="https://pic1.zhimg.com/v2-b88cc527d98b1f3af215d1c72b764ea8_r.png" data-rawwidth="554" data-rawheight="369"><img src="https://pic1.zhimg.com/v2-dc5b68b8753f70e63c7a23699cf67c6d_r.png" data-rawwidth="554" data-rawheight="134"><p>启用您想要使用该插件的所有工具，然后设置范围。<img src="https://pic1.zhimg.com/v2-c3efcb15dcbc7c71bf3d6792f425ea84_r.png" data-rawwidth="554" data-rawheight="341"></p></li><li>激活所有配置<img src="https://pic1.zhimg.com/v2-8dfddc1a0a63fe1929907ff7f1fa6b7c_r.png" data-rawwidth="554" data-rawheight="415"></li></ol><h2><b>Random IP Address Header</b></h2><p>这个扩展会自动生成 IPV6 和 IPV4 的地址头来躲避 WAF 的过滤。这种扩展可以在使用 Imperva WAF 的攻击站点或者在 Akamai CDN 背后躲避 WAF 规则的时候提供帮助。</p><img src="https://pic1.zhimg.com/v2-acb919563784b14f40cc989d7b726274_r.png" data-rawwidth="554" data-rawheight="301"><br><h2><b>Python Scripter</b></h2><p>该扩展在每个 HTTP 请求和由 Burp 处理的响应中执行自定义的 Python 脚本。</p><p>使用时，将 Python 脚本键入或粘贴到 “Scrip” 选项卡中，并以正常的方式使用 Burp。该脚本将针对每个 HTTP 请求和响应执行。</p><h2><b>Sentinel</b></h2><p>使用 BurpSentinel，渗透测试人员可以快速轻松地将大量恶意请求发送给 HTTP 请求的参数，来检测当前网站是否有漏洞。不仅如此，它还显示了与响应相对应的 HTTP 响应的大量信息。此工具只能发现漏洞，而不能利用漏洞。</p><p><i>注：本插件只能在 burpsuite 专业版里使用。</i></p><ol><li> 将抓到的包send to sentinel<img src="https://pic1.zhimg.com/v2-f9753a3d69ad016181e312d1bd701559_r.png" data-rawwidth="587" data-rawheight="351"></li><li> 选择攻击方式<img src="https://pic1.zhimg.com/v2-3f2dacef07dc8f5a9401ed28d804c646_r.png" data-rawwidth="589" data-rawheight="335"></li><li> 选择应该被攻击的参数，send<img src="https://pic1.zhimg.com/v2-c8299457099c9cd48147016298a4ab23_r.png" data-rawwidth="576" data-rawheight="275"></li><li> Go 收到攻击时发送的http请求列表<img src="https://pic1.zhimg.com/v2-eede51ed1ac46d9f399001901913c404_r.png" data-rawwidth="575" data-rawheight="329"><p>有V的代表检测到了漏洞</p><img src="https://pic1.zhimg.com/v2-9c9bfb8c9c47003eb2db658530e6064d_r.png" data-rawwidth="568" data-rawheight="113"></li></ol><p><img src="https://pic1.zhimg.com/v2-26d057f686d352430b1fcc51bd6518be_r.png" data-rawwidth="655" data-rawheight="751">另外还可以查看原始请求与攻击请求的差异</p><img src="https://pic1.zhimg.com/v2-1fb482385138eab3c13aeb811729c1ca_r.png" data-rawwidth="650" data-rawheight="121"><br><p><b>参考：</b></p><a href="https://github.com/nVisium/xssValidator" data-editable="true" data-title="nVisium/xssValidator" class="">https://github.com/nVisium/xssValidator</a><br><a href="https://t0data.gitbooks.io/burpsuite/chapter19.html" data-editable="true" data-title="第十九章 使用Burp、PhantomJS进行XSS检测" class="hover">https://t0data.gitbooks.io/burpsuite/chapter19.html</a><br><a href="https://nvisium.com/blog/2014/01/31/accurate-xss-detection-with-burpsuite/" class="" data-editable="true" data-title="nVisium: The Intersection of Software and Security">nVisium: The Intersection of Software and Security</a><br><a href="https://www.codewatch.org/blog/?p=408" class="" data-editable="true" data-title="Bypass WAF: Burp Plugin to Bypass Some WAF Devices">Bypass WAF: Burp Plugin to Bypass Some WAF Devices</a><br><a href="https://github.com/codewatchorg/bypasswaf" data-editable="true" data-title="codewatchorg/bypasswaf" class="">https://github.com/codewatchorg/bypasswaf</a><br><a href="https://github.com/dobin/BurpSentinel/wiki/BurpSentinel---HowTo-and-introduction" data-editable="true" data-title="dobin/BurpSentinel" class="">https://github.com/dobin/BurpSentinel/wiki/BurpSentinel---HowTo-and-introductio</a>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
