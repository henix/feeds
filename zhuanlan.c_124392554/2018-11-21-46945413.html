<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>“82=(1,2,5)”是什么？——RNS</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/46945413">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-ce567281838c029e1db9b222d782431b_r.jpg" alt=""></div><p>如果，希望进行“<b>模105</b>”意义下的加、减、乘、除（如果可行）运算，但是目前能提供的存储单元最多只能保存<b>0~9</b>，以及只能进行<b>10以内的模运算</b>，那么该怎么办呢？</p><hr><p>在“<a href="https://zhuanlan.zhihu.com/p/44591114">中国剩余定理（CRT ）</a>”中讲到：<b>每一个0~104之间的数值都可以使用它除以3的余数、除以5的余数、除以7的余数来描述</b>。</p><p>如图所示——</p><img src="https://pic1.zhimg.com/v2-c3755c0ec0a82b7ff82c76bcbb1aea4f_r.jpg" data-caption="" data-size="normal" data-rawwidth="907" data-rawheight="758" data-watermark="watermark" data-original-src="v2-c3755c0ec0a82b7ff82c76bcbb1aea4f" data-watermark-src="v2-f65606794cfcc175ec63d5242f9871bd" data-private-watermark-src=""><p>而且，粉色部分和黄色的三个值的组合是<b>一一对应</b>的。</p><p>于是，当我们给出一个黄色的三元组的时候，其实就是唯一给定了一个粉色的值。</p><p>例如，可以写：43=(1, 3, 1)，26=(2, 1, 5)。</p><hr><p>当我们把<b>0~104之间的每个数值都用它除以3的余数、除以5的余数、除以7的余数来描述</b>之后，就要考虑加、减、乘、除（如果可行）运算的问题了。</p><p>如果 <equation>x</equation> 对应 <equation>\left( x_3,x_5,x_7 \right)</equation> 、 <equation>y</equation> 对应 <equation>\left( y_3,y_5,y_7 \right)</equation> ，表明</p><p><equation>      \begin{equation}     \begin{cases}     x\equiv x_3\pmod {3}\\     x\equiv x_5\pmod {5}\\         x\equiv x_7\pmod {7}\\     \end{cases}     \end{equation}</equation> ， <equation>      \begin{equation}     \begin{cases}     y\equiv y_3\pmod {3}\\     y\equiv y_5\pmod {5}\\         y\equiv y_7\pmod {7}\\     \end{cases}     \end{equation}</equation> 。</p><p>于是， <equation>(x+y)\bmod 105</equation> 就对应 <equation>\left( (x_3+y_3)\bmod3,(x_5+y_5)\bmod5,(x_7+y_7)\bmod7 \right)</equation> ，<equation>x-y</equation> 就对应 <equation>\left( (x_3-y_3)\bmod3,(x_5-y_5)\bmod5,(x_7-y_7)\bmod7 \right)</equation> ，<equation>x\times y</equation> 就对应 <equation>\left( (x_3\times y_3)\bmod3,(x_5\times y_5)\bmod5,(x_7\times y_7)\bmod7 \right)</equation> 。</p><p>例如：</p><p>57对应 <equation>(0,2,1) </equation> ，94对应 <equation>(1,4,3)</equation> ，于是 <equation>46=(57+94)\bmod 105</equation> 就对应与 <equation>\left( (0+1)\bmod3,(2+4)\bmod5,(1+3)\bmod7 \right)=(1,1,4)</equation> 。</p><p>57对应 <equation>(0,2,1) </equation> ，94对应 <equation>(1,4,3)</equation> ，于是 <equation>68=(57+94)\bmod 105</equation> 就对应与 <equation>\left( (0-1)\bmod3,(2-4)\bmod5,(1-3)\bmod7 \right)=(2,3,5)</equation> 。</p><p>57对应 <equation>(0,2,1) </equation> ，94对应 <equation>(1,4,3)</equation> ，于是 <equation>3=(57\times94)\bmod 105</equation> 就对应与 <equation>\left( (0\times1)\bmod3,(2\times4)\bmod5,(1\times3)\bmod7 \right)=(0,3,3)</equation> 。</p><p>这样，就可以用最多只能保存<b>0~9</b>的存储单元以及<b>10以内的模运算</b>进行“<b>模105</b>”意义下的加、减、乘运算了！</p><hr><p>除（如果可行）运算比较麻烦……</p><p>如果 <equation>b</equation> 和105不互素，那么是不能进行 <equation>a\div b\pmod {105}</equation> 的。</p><p>而 <equation>b</equation> 和105不互素，当且仅当 <equation>3|b</equation> 或者 <equation>5|b</equation> 或者 <equation>7|b</equation> ，这时 <equation>b</equation> 对应的 <equation>\left( b_3,b_5,b_7 \right)</equation> 至少有一个是0。</p><p>于是，当 <equation>\left( b_3,b_5,b_7 \right)</equation> 三个值都不是0的时候，可以计算 <equation>a\div b\pmod {105}</equation> ：假设 <equation>a</equation> 对应的是 <equation>\left( a_3,a_5,a_7 \right)</equation> ，那么 <equation>a\div b\pmod {105}</equation> 对应的就是 <equation>\left( a_3\times[b_3^{-1}]_3\bmod 3,a_5\times[b_5^{-1}]_5\bmod 5,a_7\times[b_7^{-1}]_7\bmod 7 \right)</equation> 。</p><p>例如：</p><p>57对应 <equation>(0,2,1) </equation> ，94对应 <equation>(1,4,3)</equation> ，于是 <equation>33=(57\div94)\bmod 105</equation> 就对应于 <equation>\left( 0\times[1^{-1}]_3\bmod 3,2\times[4^{-1}]_5\bmod 5,1\times[3^{-1}]_7\bmod 7 \right)</equation> <equation>=\left( 0\times1\bmod 3,2\times4\bmod 5,1\times5\bmod 7 \right)</equation> <equation>=\left( 0,3,5 \right)</equation> 。</p><hr><p>更一般地讲，假设整数 <equation>m_1,m_2, ... ,m_n</equation> 两两互素，则由“中国剩余定理”（<a href="https://zhuanlan.zhihu.com/p/44591114">中国剩余定理（CRT ）</a>），若 <equation>0\leq x\leq N-1</equation> 且</p><p><equation>      \begin{equation}     \begin{cases}     x\equiv a_1\pmod {m_1}\\     x\equiv a_2\pmod {m_2}\\     \cdots \\     x\equiv a_n\pmod {m_n}\\     \end{cases}     \end{equation}</equation> </p><p>则可以将 <equation>x</equation> 与 <equation>\left( a_1,a_2, ... ,a_n \right)</equation> 一一对应而视作等同，其中 <equation>N=\prod_{i=1}^{n}m_i</equation> 。</p><p>此时，若 <equation>x</equation> 表示做 <equation>\left( x_1,x_2, ... ,x_n \right)</equation> 、<equation>y</equation> 表示做 <equation>\left( y_1,y_2, ... ,y_n \right)</equation> ，则有：</p><ul><li><equation>\left( x+y \right)\bmod N</equation> 一一对应 <equation>\left( \left( x_1+y_1 \right)\bmod m_1,\left( x_2+y_2 \right)\bmod m_2, ... ,\left( x_n+y_n \right)\bmod m_n \right)</equation> ；</li><li><equation>\left( x-y \right)\bmod N</equation> 一一对应 <equation>\left( \left( x_1-y_1 \right)\bmod m_1,\left( x_2-y_2 \right)\bmod m_2, ... ,\left( x_n-y_n \right)\bmod m_n \right)</equation> ；</li><li><equation>\left( x\times y \right)\bmod N</equation> 一一对应 <equation>\left( \left( x_1\times y_1 \right)\bmod m_1,\left( x_2\times \right)\bmod m_2, ... ,\left( x_n\times y_n \right)\bmod m_n \right)</equation> ；</li><li>当对于所有 <equation>1\leq i\leq n</equation> 都有 <equation>y_i</equation> 与 <equation>m_i</equation> 互素——此时 <equation>y</equation> 与 <equation>n</equation> 互素——时， <equation>\left( x\div y \right)\bmod N</equation>一一对应 <equation>\left( \left( x_1\times \left[ y_1^{-1} \right]_{m_1} \right)\bmod m_1,\left( x_2\times \left[ y_2^{-1} \right]_{m_2}\right)\bmod m_2, ... ,\left( x_n\times \left[ y_n^{-1} \right]_{m_n} \right)\bmod m_n \right)</equation> 。</li></ul><p>——而这就是<b>residue numeral system</b> (<b>RNS</b>)。</p><hr><p>这时候，如果取模为91,95,97,99，就可以用四个不超过100的数字表示0~83017934之间的值，例如：由 <equation>      \begin{equation}     \begin{cases}     23456789\equiv 83\pmod {91}\\     23456789\equiv 54\pmod {95}\\     23456789\equiv 55\pmod {97}\\     23456789\equiv 26\pmod {99}\\     \end{cases}     \end{equation}</equation> 就可以使用 <equation>\left( 83,54,55,56 \right)</equation> 表示23456789。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
