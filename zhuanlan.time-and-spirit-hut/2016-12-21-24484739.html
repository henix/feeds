<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>阅读源码: 提升编码水平的致胜之法</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/24484739">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-881a760238400f703a243d2359ce449b_r.jpg" alt=""></div><blockquote>这是原作者2010年写的一篇<a href="https://changelog.com/posts/one-sure-fire-way-to-improve-your-coding" data-editable="true" data-title="老文">老文</a>了，因为发表此文的网站挂了，所以最近他又重新发了一遍。虽然里面提到的案例比较陈旧，介绍的阅读方法也应该是比较常见了，但是思想和方法还是挺有指导性的，所以我把它翻译分享出来给不知道如何看源码学习的新人。<br><br>大家也可以在评论中留下你所推荐阅读的开源项目，或者分享你的阅读笔记，当然也欢迎分享你的阅读方法。</blockquote><h2>正文</h2><p>众所周知，提升编码水平最明显的方法是写更多的代码。然而，还有另一种方式也能提高你的编码水平，这种方式正好是“写代码"的反面。</p><p>我会充分说明这一点：<b>如果你想大幅度的提升你的编程技巧，你需要阅读别人的代码。</b></p><p>或许你相信我说的，或许不信，但我希望你相信。如果你愿意花一点时间去尝试，我相信你将会收获很多。</p><p>在此文中，我将帮你选择「阅读什么」，并对「如何阅读」给出一些实用性的建议。如果你已经是一个「代码阅读者」，那么你可能会获得更多的方法。如果你不是，那本文最适合你了。</p><h2>读什么</h2><p>这个决定太重要了，很难给出建议。我不可能直接给你我认为你应该看的代码，因为这完全取决于你自己。但是，我会提供一些准则来帮助你做出选择。</p><p><b>阅读你依赖的代码</b></p><p>你正在使用的插件或者库是一个好的开始。<br></p><blockquote><p>你喜欢的WordPress插件</p><p>你觉得有用的Ruby gem</p><p>你一直使用的jQuery插件<br></p></blockquote><p>（或者其他的一些库或插件）</p><p>这些都是很好的学习素材。因为你已经熟悉了它们的API，所以便于你理解它们内部工作机制。另外，做为这些代码的用户，你还有机会添加文档、实现新的功能或者以其他方式回馈项目。</p><p><b>阅读令你印象深刻项目的源码</b></p><p>当我第一次看到<a href="http://web.archive.org/web/20100524010505/http://280slides.com/" data-title="280 Slides这个网站" class="" data-editable="true">280 Slides这个网站</a>的时候（已经挂了），我暗想，“这真是令人印象深刻”。于是我快速的学习了该网站的源码，因为它是基于开源项目 <a href="http://www.cappuccino-project.org/" data-title="Cappuccino" class="" data-editable="true">Cappuccino</a>构建的。这些知识我一直记忆犹新，之后我又看到另一个让我印象深刻基于Cappuccino的<a href="http://web.archive.org/web/20100522014618/http://almost.at/" data-editable="true" data-title="项目">项目</a>（也挂了），我知道我又可以从中学到更多东西了。最近令你印象深刻的是什么？它是否开源？如果开源，那正好是开始阅读的最佳选择，因为该代码可能会像最终的应用程序一样给你留下深刻的印象。</p><p><b>阅读你敬重的人写的代码</b></p><p>如果你已经使用了一段时间的开源软件，那么应该有一些赢得你敬重的程序员。我可以想到一些开发人员，他们写的代码是非常令人羡慕的。 </p><img src="https://pic2.zhimg.com/v2-fc754ad5c9a6d39a01de49f6e35ac3ff_r.png" data-rawwidth="438" data-rawheight="88"><br><p>如果你没有这样的人选，那其实也很容易找到。他/她可能是前面两部分（你依赖的，令你印象深刻的）代码的作者。</p><p><b>阅读你能实际掌控的代码</b></p><p>如果你是那种冒险型选手，你可能会选择大的开源项目来阅读，比如Ruby on Rails, Drupal, 或 jQuery。我建议你避免选择这样的大型项目，除非你已经是一个有经验的代码阅读者了。</p><p>大型项目部件太多，你可能本来只为学一个概念点但却陷入到更多的概念中。困惑导致气馁，越大的项目越容易让你感到困惑，从而阻碍你继续阅读。选择一个小的项目阅读的优势是，你可以一次将整个程序的逻辑都映射在你脑中，而你只需要探索和学习那些细节。</p><h2>如何阅读</h2><p>当你选择了可供阅读的代码，那么最好的阅读方式是什么呢？我每天都读很多代码，我可以建议几种方法来最大限度的提高你的ROI（投资回报率）。</p><p><b>观大局</b></p><img src="https://pic4.zhimg.com/v2-4f310f79974b2c1ffd9cf3c992a44a8d_r.png" data-rawwidth="230" data-rawheight="510"><br><p>我假设你至少知道正在读的代码在宏观层面的具体实现。如果不知道，我建议你去看看该项目的网站、指南、文档以及任何可以让你上手的代码之外的资料。</p><p>我建议你第一步去理解项目的结构。这个工作量取决于你选择的代码库的大小，但只要多于一个文件就肯定会花费一些时间。</p><p>首先注意文件结构。这一步应该使用包含文件夹层次结构视图的编辑器来辅助，比如TextMate。示例是一个Twitter  Ruby gem的概览。</p><p>这一步的目标只是为了熟悉源码。找出是哪些文件include/require/load了哪些文件，核心代码的位置，有没有使用命名空间等诸如此类的事。一旦你有了大局观，你就可以挖掘细节了。</p><p><b>记录你的收获</b></p><p>阅读代码不是一个被动的行为。我建议你在阅读过程中增加一些注释，当你开始理解程序流程的时候，可以记录你的假设和结论。你第一次添加注释的时候可能看起来像这样：</p><code lang="rb"># 我认为这个函数会在 'initialize'之后被调用
# 这个等式是做什么的呢?
# 确定该变量在17行之后丢失了作用域
</code><p>随着你对代码的逐步深入理解，你可以删除之前留下的一些面包屑注释，或许可以写出更有意义和更专业的注释。<br></p><p><b>使用测（原）试（力），Luke</b></p><p>希望你选择一个有测试的项目。如果没有，你完全可以跳过这一部分（或者换一个有测试的）。</p><p>当你阅读别人代码的时候，测试是一个很好的起点，因为测试记录了代码的功能。某些测试可能更有用，但是无论写的多好，你经常会发现相比于功能代码，在测试中可以更容易发现程序员的意图。在阅读的时候，尝试让测试套件成功运行，这可以确保你的开发环境配置正确，并且当你更改的时候会更有信心。</p><p><b>执行，修改，再执行</b></p><p>谁说读代码不用动手的？一旦你打破一切，然后再恢复它们，你才会真正的开始理解它们。记得你通过的那些测试吗？让它们失败，添加更多的测试，或尝试改变功能实现而不是破坏它们。尝试你认为很酷的一个小功能，或者设置项目级的日志记录，以便你可以在代码的各个阶段打印输出。那这还是读代码吗？当然，但从这一点上来说，相比于看一本神秘小说，它更像是你亲自冒险。这样很好。</p><p><b>周而复始</b></p><p>读完一个代码库之后，再选择另外一个代码库重复这个过程。你阅读的代码越多，阅读的效果越好，那么在更短的时间内收获更多。你肯定会发现ROI增长很快，这实际上是一个非常愉快的学习方式。</p><h2>从哪里开始</h2><p>从哪里找到这些源码呢？当然是<a href="https://github.com/" data-title="Github" class="" data-editable="true">Github</a>了呀！众所周知，就不废话了。</p><h2>后记</h2>除了原文中给出了一些阅读源码的准则，我还想对「如何选择源码」加一条：<p><b>有时候你会学习一些新的技术概念，比如理解各种并发模型，这个时候可以找找相关模型的源码实现来帮助学习。</b></p><p>对「如何阅读源码」加一条：</p><p><b>Github上查看PR历史，review pr code， 一般来说，一个标准的PR算是一个完整的功能单元，这也是一个学习途径</b></p><br><p>感谢阅读。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
