<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>谷歌隐私交集和技术解析2—技术概览</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/79643138">原文</a></p>
<p><b>本文由陈智罡博士撰写</b></p><p>上一篇文章我们分析了谷歌开源库（Private Join and Compute）的应用场景（<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MTYzMjMzNA%3D%3D%26mid%3D2247485202%26idx%3D1%26sn%3Db62c632e5dd24232ca53833e45d50bc6%26chksm%3Dfcdc78b3cbabf1a512e808e72dbdca24fdc8e9838c707ed39c66f1995ab4f10bb8f8da31933d%26token%3D393350469%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">谷歌隐私交集和技术解析1—应用场景分析</a>），本篇文章对其技术进行分析。</p><p class="ztext-empty-paragraph"><br/></p><p>谷歌这个开源库是利用已有的密码技术成果，对已有技术组合从而达到解决问题的目的。有点像比特币（<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MTYzMjMzNA%3D%3D%26mid%3D2247483759%26idx%3D1%26sn%3Df780b496c5961277bb6e5c533e4ca410%26chksm%3Dfcdc7ececbabf7d83d866d7deb01462d2be0df583bafb4242c723030bea95e2760247ed4cbaf%26token%3D322153894%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" class=" wrap external" target="_blank" rel="nofollow noreferrer">比特币白皮书解析链接</a>），都是站在巨人肩膀上。</p><p class="ztext-empty-paragraph"><br/></p><p>谷歌是如何从学术界摘果子来解决工业界实际问题的呢？</p><p class="ztext-empty-paragraph"><br/></p><p>谷歌这个开源库的主要工作就是设计一个切实可行的密码学安全计算协议，其目的是为了工业界的使用。</p><p class="ztext-empty-paragraph"><br/></p><h2><b>01问题模型</b></h2><p><b>该协议解决的主要问题就是计算隐私交集和（Private Intersection-Sum，简称PIS）</b>。</p><p class="ztext-empty-paragraph"><br/></p><p>问题模型可以抽象为：</p><p class="ztext-empty-paragraph"><br/></p><p>有两方各自拥有包含用户身份的数据集，其中一方还拥有与用户身份相关的一个整数，例如该整数可以是该用户的交易金额。双方想知道如下内容：</p><p>(1) 双方拥有的共同用户数量；</p><p>(2) 在不泄露用户输入的任何隐私信息下，这些共同用户所对应的整数之和。</p><p class="ztext-empty-paragraph"><br/></p><p>这就是一个<b>隐私交集和（PIS）</b>问题。</p><p class="ztext-empty-paragraph"><br/></p><p>该问题不是一个空想出来的问题，而是来自于企业的具体需求。</p><p class="ztext-empty-paragraph"><br/></p><p>例如在广告战中，计算具体广告转化率，也就是打广告的效果。有多少人因为广告而购买了商品。在该需求中，可能涉及到多个企业。这是在企业合作中经常会出现的情况。</p><p class="ztext-empty-paragraph"><br/></p><p><b>这个问题具有重要的实际价值，而且在很多场景下都需要，具有共性</b>。</p><p class="ztext-empty-paragraph"><br/></p><h2><b>02技术框架</b></h2><p>上述问题咋看起来，很像<b>隐私集合交集问题（Private Set Intersection，简称PSI）</b>。注意PIS和PSI是两个问题。</p><p class="ztext-empty-paragraph"><br/></p><p>PIS是一个密码学上的传统问题，即在不泄露交集的情况下，计算集合的交集。</p><p class="ztext-empty-paragraph"><br/></p><p>而谷歌这里定义的PIS是除了PIS所完成的功能外，还能够对交集做聚合计算。显然这会带来额外的计算开销。</p><p>注意，聚合就是对同一属性的元素求和。</p><p class="ztext-empty-paragraph"><br/></p><p>谷歌开源库做的事就是以PSI方案为基石，对其进行扩展。将其扩展为在不泄露交集的情况下，能够在相应的属性上做聚合计算。</p><p class="ztext-empty-paragraph"><br/></p><p>所以该开源库的架构是：</p><p><b>PSI</b> <b>+</b> <b>对交集元素求和（在不泄露交集元素的前提下）</b></p><p class="ztext-empty-paragraph"><br/></p><h2><b>03技术路线</b></h2><p>该库的技术路线就是首先根据已有的PSI方案，选择出最有效的方案作为备选。然后通过加法同态加密实现聚合功能。</p><p class="ztext-empty-paragraph"><br/></p><p>这些年，密码学界已经有许多PSI的解决方案。谷歌技术路线上选择了两种解决PSI问题的方法。</p><p class="ztext-empty-paragraph"><br/></p><p><b>一种方法</b>是基于随机不经意传输（Random Oblivious Transfer），该方法利用了不经意PRF（OPRF）技巧，获得了隐藏交集元素身份的功能。然后利用<b>加法同态加密</b>，实现了在不泄露交集元素的情况下提供聚合功能。</p><p class="ztext-empty-paragraph"><br/></p><p><b>第二种方法</b>是在加法同态加密下，利用加密的Bloom过滤器构造了一个oblivious协议。聚合功能依然通过加法同态加密实现。</p><p class="ztext-empty-paragraph"><br/></p><p>除了以上两个协议外，还构造了<b>第三个协议</b>，称为DDH类型协议。该协议基于传统的集合交集协议，使用Pohlig Hellman 密文（基于判断类DDH问题的困难性）。这种类型协议可以看做是使用共享密钥的不经意PRF。同样，聚合功能也是通过加法同态加密实现。</p><p class="ztext-empty-paragraph"><br/></p><h2><b>04性能</b></h2><p>以上三个协议都需要加法同态加密。目前有三种加法同态加密方案：</p><p>1. Paillier加密方案</p><p>2. 指数型ElGamal加密方案</p><p>3. 环LWE加密方案</p><p class="ztext-empty-paragraph"><br/></p><p>从通信效率和计算效率两个角度，谷歌对基于这三个加法同态加密的三个协议进行了详细分析。</p><p class="ztext-empty-paragraph"><br/></p><p>数据显示，第三个协议--DDH类型协议获得了最好的通信效率。在输入集合元素是10万个元素情况下，只需要9.28M的通信量。</p><p class="ztext-empty-paragraph"><br/></p><p>此外，在计算效率方面，基于环LWE加密方案的DDH类型协议也依然获得了最佳性能。在输入集合含有10万个元素，以及相关整数是32位的情况下，计算PIS问题仅需395.78秒。</p><p class="ztext-empty-paragraph"><br/></p><p>对于其它两个协议，尽管做了计算上的优化，但是其计算瓶颈主要花在了同态操作上。</p><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MTYzMjMzNA%3D%3D%26mid%3D2247485206%26idx%3D1%26sn%3Dc13cc75c644d9b4f7ea1c62f490f939f%26chksm%3Dfcdc78b7cbabf1a1320d4cf918da8a610b66a1731153c5c1190956189d15c52a365dddf7bd47%26token%3D1203348933%26lang%3Dzh_CN%23rd" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-b129227c86c62a3591d6707026a377ef_180x120.jpg" data-image-width="900" data-image-height="382" class=" wrap external" target="_blank" rel="nofollow noreferrer">谷歌隐私交集和技术解析2—技术概览</a><hr/><p><b>文章首发在微信公众号：btc201800</b><br/><b>知识星球ID：28018093</b><br/><br/><b>音频发布在喜马拉雅上“区块链杂谈 (第2季)”</b> <b><u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/Bjq4se" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/Bjq4se</span><span class="invisible"></span></a></u></b><br/><b>解读区块链白皮书</b> <u><a href="https://link.zhihu.com/?target=http%3A//xima.tv/RNU1Q8" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">xima.tv/RNU1Q8</span><span class="invisible"></span></a></u><br/><br/><b>宁波格密链网络科技有限公司，专注于区块链上的密码技术研发。</b></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
