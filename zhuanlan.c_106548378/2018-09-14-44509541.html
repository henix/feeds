<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>基于自适应阶梯的中低频择时策略</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/44509541">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-c58ad7383795270536876f8b9258b599_r.jpg" alt=""></div><p><b>NO：01</b></p><p><b>「我们所经历的上个世纪反复证明，市场的非理性是周期性爆发的。这强烈暗示投资者应尽力去学会应对下一个市场的非理性爆发。而这需要的是一剂解毒剂，我认为这剂解毒剂就是量化分析。如果你定量分析，你并不一定会出色，但是你也不会坠入疯狂。」</b></p><p>换句话说，量化择时可以根据：市场整体择时、板块行业轮动择时及个股的择时。那么，如果能选择牛市、规避熊市，将能够获得非常高超额收益。尤其是在系统性风险较高、波动性比较大的、相关性较强的期货市场，尤为有效。</p><p><b>NO：02</b></p><p>严格来说，<b>「量化择时」</b>是一个很模糊的概念。因为从一个很大的范围来看，形态交易是择时，趋势交易是择时，统计套利是择时，市场情绪量化是择时、盘口交易也是一种择时，都是设置定量条件，然后观察价格或价差在何时突破这个条件，触发建仓和平仓信号。</p><p><br></p><img src="https://pic2.zhimg.com/v2-a1528917a66e674e566a44d119ed809c_r.jpg" data-caption="" data-size="normal" data-rawwidth="1843" data-rawheight="947" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br></p><p>这次给大家分享一个量化择时——<b>阶梯策略</b>（请无视这个比较土的名字）。为了避免过度拟合，在设计策略的时候，只给定了一个参数。虽然仅有一个参数，但却不失策略在市场中的灵活性。</p><p><br></p><img src="https://pic1.zhimg.com/v2-43859a0f69a3fdbde3a26543d00c7af0_r.jpg" data-caption="" data-size="normal" data-rawwidth="1730" data-rawheight="947" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br></p><p>不仅如此，阶梯策略既能适应国内外商品期货，还可以应用于 A 股 ETF ，包括外盘 ETF 和反向杠杆 ETF，以及外汇市场。当然只是部分品种适应，全品种统计来看，是一个普适性比较强的策略。</p><p><b>NO：03</b></p><p>有过实盘经验的人应该深有体会：当市场进行横向整理或者摇摆不定的时候，对交叉类系统的打击很大，往往会买在高点，卖在低点。如果行情一直持续，则会出现连续亏损，连续的亏损信号将对交易者造成严重的心理负担和资金回撤压力。如下图：</p><p><br></p><img src="https://pic3.zhimg.com/v2-c396b225031b06f35827de1efd7de6d8_r.jpg" data-caption="" data-size="normal" data-rawwidth="1702" data-rawheight="767" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br></p><p>通过利用，<b>通道技术则可以过滤或者减少价格反复缠绕，减少部分虚假信号，对于降低无效交易有巨大帮助。</b>本策略正是借鉴这个思路，但并非传统的通道策略。</p><p>而是根据前期最高价和最低价，反向建立自适应通道。这里提到的自适应是指回溯日期会根据我们的逻辑进行调整，具体来说本策略是由市场波动的变动率来变化。</p><p><br></p><p><b>NO：04</b></p><p><b>通道的建立：</b></p><p><b>如果当前的最高价 &gt;  昨天的最高价，那么就以前 N 天的最低价 - (1 + TR) * N，作为下轨；</b></p><p><b>如果当前的最低价 &lt;  昨天的最低价，那么就以前 N 天的最高价 + (1 + TR) * N，作为上轨；</b></p><p>大部分通道策略的组成是由两个因子决定，第一个就是中轨，然后再根据中轨算出通道宽度，即上下轨。比如常见的布林带通道( BollingerBand )，先是由一条均线当中心线，而通道宽度是由标准差所决定。</p><p>阶梯策略的通道并不是以中轨得来，与之相反的是：先根据市场波动率计算出通道上下轨，然后再根据通道宽度算出中轨。如下图：<br></p><img src="https://pic2.zhimg.com/v2-8eba2cdc1163a15878a9a2f09325a62c_r.jpg" data-caption="" data-size="normal" data-rawwidth="1843" data-rawheight="947" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br><b>入场条件：</b><br>多头入场：如果当前没有持仓，并且价格大于上轨 * 1.05，买入开仓。</p><p>空头入场：如果当前没有持仓，并且价格小于下轨 * 0.95，卖出开仓。</p><p><br><b>出场条件：</b></p><p>多头出场：如果当前持有多单，并且价格小于中轨，卖出平仓。</p><p>空头出场：如果当前持有空单，兵器价格大于中轨，买入平仓。</p><p><br>大家一定觉得奇怪为什么通道下限的计算中要乘上系数来调整呢？那是因为经由观察过后发现价格比较常接触到上限，比较不容易接触到下限，所以这边乘上一个系数来做调整。</p><p>用来判定最高点和最低点的 K 线条数取决于我们愿意给交易多少变化空间。我们用来越多的 K 线条数来确定上下轨，我们给予程序化交易的变化空间越大，相应的，在触发止损前盈利回撤的幅度也会越大。使用越近的高点或低点，止损被触发的速度也越快。</p><p>所以看你要怎么去设定都可以。基本上这里介绍的通道宽度是由市场的波动率和系数来决定的，想让通道窄一点就设定小一点，想让通道宽一点就设定大一点。</p><p><br></p><p><b>NO：05</b></p><p><b>测试结果：</b></p><img src="https://pic1.zhimg.com/v2-224dd5c5a85462943f76170d0268dbd2_r.jpg" data-caption="" data-size="normal" data-rawwidth="580" data-rawheight="218" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br></p><img src="https://pic2.zhimg.com/v2-029cbfdc60fb6f0f3dfe2be8ff9051ed_r.jpg" data-caption="" data-size="normal" data-rawwidth="1250" data-rawheight="685" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br></p><img src="https://pic3.zhimg.com/v2-52be26ad4949b6e9370a71995da8896a_r.jpg" data-caption="" data-size="normal" data-rawwidth="1235" data-rawheight="676" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br><br></p><img src="https://pic3.zhimg.com/v2-1d05786665738c3b9fbc42556b747bed_r.jpg" data-caption="" data-size="normal" data-rawwidth="1235" data-rawheight="675" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p><br><br>从上面的测试结果来看，这样的通道突破在国内商品期货中，是可以获利的。但因逻辑简单，交易次数够多，若能再增加一些滤网，适当的减少一些可能会亏损的交易，即可增加获利也减少回档的幅度。</p><p><br><b>NO：06</b></p><p><b>总结:</b></p><p>1、该策略根据价格的波动率计算出通道，这是区别于以往策略的一个亮点，通过过滤无效盘整行情来达到提高绩效的目标。<br>2、该策略符合顺势思想，通过线上买线下卖，以保障通道突破的过程中能够顺应大势，以提高整体绩效。<br>3、从具体绩效来看，小时周期的表现要好于大周期的，这主要是由于大周期（日线）级别相对交易机会过少所致，所有周期的绝对收益表现并出十分出众。<br>4、从策略稳定性来说，策略绩效分布较为稳定，各个周期表现均十分稳定，品种适应性强。</p><p><b>NO：07</b></p><p><b>改进建议:</b></p><p>1、增加仓位管理的内容结合上次介绍的幽灵交易系统，我们可以通过连续亏损进场或者连续盈利进场来调整进场方式和整体仓位。<br>2、增加离场方式从历史资金曲线中我们可以看到，导致收益风险比下降的根源还是在于极端行情的盈利保护上，所以可以对改系统增加其他类型的止盈方式，如乖离止盈和吊顶止盈等。</p><p><br>跟一般通道策略有所不同，所以以上建议提供给大家参考。希望可以激发出大家更多的灵感，当然不同参数的设定会有不同的结果，大家有兴趣可以去跑最佳化看看何种参数组合较好！</p><p><br></p><p><b>NO：08</b></p><p>在量化投资领域，突破策略技术分析中很重要的一部份，它的观念在于<b>市场价格穿透了之前的价格压力或支撑，继而形成一股新的趋势</b>，我们的目标就是在突破发生时能够确认并建立部位以获取趋势的利润。<br><b>通道策略有他的弹性，可顺可逆。</b>把通道缩窄一点，就可以做顺势；或是把通道拉宽一点，就可以做逆势，或是再搭配其他指标写成其他的交易策略等。可以发现其实通道无所不在，只是通道的取法各有不同罢了。换个角度来看，我们都只是在寻找两条线，支撑跟压力线来决定进场作多或作空，通道的上限与下限即是这种概念。</p><p><b>通道策略的好处在于宽一点的通道可以做逆势策略，窄一点的通道可以做顺势策略。</b>当然你也可以把它组合成顺势加逆势的综合交易策略。总之，对程序化交易而言，不管是什么策略，可以赚钱就是好策略！</p><p><br></p><p><b>NO：09</b></p><p><b>市场唯一不变的就是一直在变，并且未来不可预测。</b>本文仅代表作者观点。</p><p><br></p><p>延伸阅读：<a href="https://quant.la/Article/View/62/%E6%BC%AB%E6%BC%AB%E7%86%8A%E9%80%94%EF%BC%8C%E8%BF%98%E8%B0%88%E4%BB%80%E4%B9%88%E3%80%8C%E4%BF%A1%E4%BB%B0%E4%BB%B7%E5%80%BC%E3%80%8D%EF%BC%9F.html">漫漫熊途，还谈什么「信仰价值」？</a></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
