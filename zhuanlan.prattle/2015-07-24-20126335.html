<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>程序人生之图穷匕见：第二弹</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/20126335">原文</a></p>
<div class="title-image"><img src="https://pic3.zhimg.com/5e67151c6d088a6f23df7fb45d10ead2_r.jpg" alt=""></div><p>欢迎来到第二周的podcast，程序人生之图穷匕见。以后这个一周综述的名字就叫图穷匕见。</p><br><p>本周的podcast精彩不多，还是讲讲TED吧。上周末TED radio hour的一个话题：infinite很有意思，谈论一个很值得重视的一个问题：在我们的世界里，哪些资源是有限的，且逐渐消失的？说到这个问题，大家首先想到的是消失的雨淋，不复存在的耕地，渐渐枯竭的油气，和不断减少的可饮用水。在节目大概第26分钟时，我听到了一个新的视角：尽管我们能随意制造抗生素，但抗生素也是一种有限的资源 —— 滥用抗生素使得致病微生物和细菌不断进化以抵御抗生素的威胁，一些本被攻克的疾病死灰复燃，越发强大。所以在 "How Did A Medical Miracle Turn Into A Global Threat?" 里，Ramanan提出：抗生素这种资源，但他们的可利用价值，和地下的石油一样，都是有限的，不断减少的。 </p><br><p>但即便是我们意识到了这一点，我们的医疗体系却与之矛盾。医生对于病人的疾病，倾向于使用更多剂量的药物，因为她要保护病人，而非整个系统。在这一点上，其实我们目前束手无策。</p><br><p>不过，人类之所以成为人类，是因为面对有限资源的时候，面对生存危机的时候，总能通过创新而化险为夷。</p><br><p>接下来我们说说hackernews。本周hackernews重磅消息可谓是应接不暇：先是前两日有个创业者在家离奇死亡，排除了吸毒，自杀和他杀后，如果警方再排除了毒杀的可能性，那基本就是猝死了。创业者和程序猿们要注意了，天天绷紧神经，还没事熬夜绝对不是什么好习惯，雄心万丈是好事，但什么事都不能一蹴而就，要准备好跑马拉松的心态和身体：吃喝玩乐，健身锻炼，聊天约会，一个都不能少！</p><br><p>接下来这则消息则令人震惊：著名的连线网站爆料，黑客现在可以通过车载的wifi系统，远程侵入一台正在运行的2014款Jeep切诺基。在网站的视频和文章里，我们看到一台在高速路上以110公里时速行驶的汽车，突然间空调开始制冷，中控像变魔术一样意外显示出未知来源的图片，音乐骤然想起，雨刷器胡乱工作，最后发动机熄火。当实验者惊魂未定地回到安全的地方后，黑客又演示了远程控制控制方向盘转向，刹车，加油等一系列更加危险的动作。</p><br><p>其实有潜在风险的不光是Jeep，任何有车载互联网，能通过互联网更新内容的汽车都有这样的风险，比如说宝马。黑客们会在8月初的defcon大会揭露完整细节。</p><br><p>另一个重大的消息是：YC终于在他们对创业者的条款里加入了pro rata，就是所谓的反稀释条款。pro rata是说，我这轮投了你，拿了10%股份，下轮你融钱，我的股份就被稀释了，我可以以新一轮同等的价格把稀释的股份补回来。YC的新政策是，除了种子轮以外，他们不会领投，但只要被投公司投后估值不超过2.5亿美金都会行使pro rata。pro rata是个比较中性的投资条款，一般用以保证投资人的利益。</p><br><p>做创业的同学应该还听过super pro rata，这是个比较流氓的条款。投资人不但可以防止自己的股份被稀释，还可以以同等价钱挤兑走下一轮的投资人。好比你是小红，A轮投资人是小明，B轮小强要投你，你们已经眉来眼去多时，小强看上了你的人，你看上了小强的资源，小强准备好了嫁妆，就登门求亲；本来不打算继续包养你的小明一看，呦，原来俺的童养媳小红现在出落成人见人爱的大美人了。不成，我的展示我的存在感。于是小明就把大家召集在一起，把装满了钱的皮箱往桌上一拍，环视四周，霸气地说：朋友，小红是我的！</p><br><p>最后说说github。本周github值得关注的repo是postgrest，就是著名数据库postgres名字后面加个t。这个repo是haskell写的，以postgres数据库为基础，替你自动生成REST API。你只需要定义好数据库的table，schema，view以及role，postgrest就能生成全尺寸REST API，包括authentication。整个项目就2000行haskell代码哦 —— 最重要的是，你不用懂haskell代码，只要会写sql，定义数据库，postgrest替你搞定剩下的一切，配合API Gateway使用，可以满足大部分小型应用。postgrest效率非常高，在AWS tiny RDS instance，heroku tiny dyno下，可以达到每秒2000API请求哦。它的设计理念也很有意思：<b>尽量把一切都放在postgrest里完成</b>，连json的render，API的authentication都在postgres里。估计用postgres的同学没几个知道它能够输出json吧，光这一项，就比解释型语言处理json快几倍，大的json数据那就几十倍上百倍的速度优势。我们这一代在ORM阴影下生存的开发者，光记着ORM可以数据库无关，随意切换数据库的好处，殊不知这牺牲了多少数据库原生的能力。大家想想，有多少人做的web项目，没事从mysql切到postgres，再切到oracle呢？postgres/mysql都要哭了：我们发展了十几年了，各种高级功能够一个工程师学一辈子了，却被当成了一个data store，存储过程，ACID，transaction在web开发者面前都能了累赘，连乳臭未干的mongodb都骑在俺们头上。可悲，可叹啊！</p><br><p>当然，postgrest这么深度地压榨数据库能力，scaling/sharding怎么做？让我们拭目以待后续发展。</p><br><p>这个项目还利用了一些最新的http RFC来处理数据，比如说使用RANGE头来做分页（对，RANGE就是用来做分块下载，断点续传的那个头），干净，漂亮！大家可以仔细研究一下。程序君按照教程完了一下，把做出来的repo放在了github上：<a href="https://github.com/tyrchen/goodfilm" data-editable="true" data-title="tyrchen/goodfilm · GitHub">tyrchen/goodfilm · GitHub</a>， 欢迎尝鲜。</p><br><p>本期就讲这么多，题图是Kepler-452b，想必已经刷了你的屏。</p><br><p>如果您觉得这篇文章不错，请点赞。多谢！</p><br><p>欢迎订阅公众号『程序人生』（搜索微信号 programmer_life）。每篇文章都力求原汁原味，北京时间中午12点左右，美西时间下午8点左右与您相会。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
