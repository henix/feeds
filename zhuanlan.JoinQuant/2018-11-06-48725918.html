<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>春暖花开前，不如先看看这个策略</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/48725918">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-80557287c4f9abc0f6fb8cb70d58e449_b.jpg" alt=""></div><h2><b>前言</b></h2><p class="ztext-empty-paragraph"><br/></p><p>我们一直在市场中苦苦寻找圣杯，希望能够找到长期战胜市场的投资方法，比如曾经风光无限的小市值的思路，带给了我们很大的信心，相信市场中是存在长期有效的超额收益的，直到2017年初失效。毕竟没有什么是一成不变的，市场在牛熊交替中也是不断变换风格，想在市场中一劳永逸，可能只是异想天开的韭菜吧。除非是发现了如下的策略方法。</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="658" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="658" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg"/></figure><h2><b>十三年超额收益稳健</b></h2><p class="ztext-empty-paragraph"><br/></p><p>在了解如上策略之前，我们先来看下面的策略。<br/></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-aea53122bb68472a6ffc2726936d3e16_b.jpg" data-caption="" data-size="normal" data-rawwidth="866" data-rawheight="335" class="origin_image zh-lightbox-thumb" width="866" data-original="https://pic3.zhimg.com/v2-aea53122bb68472a6ffc2726936d3e16_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-aea53122bb68472a6ffc2726936d3e16_b.jpg" data-caption="" data-size="normal" data-rawwidth="866" data-rawheight="335" class="origin_image zh-lightbox-thumb lazy" width="866" data-original="https://pic3.zhimg.com/v2-aea53122bb68472a6ffc2726936d3e16_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-aea53122bb68472a6ffc2726936d3e16_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p>该策略基于财务因子进行选股，从2005年到2018年，13年的时间，累计获得收益2395.74%的收益，是同期上证指数的20倍左右，年化27%的收益似乎看起来也不是很高，但是该策略却有着长期较为稳定的超额收益。可以看到，收益图中黄线代表超额收益，在长达十三年的时间里都有着平稳上升的超额收益！</p><p class="ztext-empty-paragraph"><br/></p><p>这样的策略距离直接拿来用还是有很多可以提升的地方，比如可以在这个基础上拿股指期货进行对冲，或者进行择时。我们看到策略有接近1的贝塔，熊市时候和大盘一起跌，产生较大的回撤，进行归因分析后取回撤的区间统计图示，可以看到和市场本身的熊市一致。因此我们想到，如果策略能够在熊市保住收益，应该会有更好的表现。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-82f694f657e9bc5981f33d30c7ba1d06_b.jpg" data-caption="" data-size="normal" data-rawwidth="1030" data-rawheight="647" class="origin_image zh-lightbox-thumb" width="1030" data-original="https://pic3.zhimg.com/v2-82f694f657e9bc5981f33d30c7ba1d06_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-82f694f657e9bc5981f33d30c7ba1d06_b.jpg" data-caption="" data-size="normal" data-rawwidth="1030" data-rawheight="647" class="origin_image zh-lightbox-thumb lazy" width="1030" data-original="https://pic3.zhimg.com/v2-82f694f657e9bc5981f33d30c7ba1d06_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-82f694f657e9bc5981f33d30c7ba1d06_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><h2><b>牛市作为，熊市蛰伏</b></h2><p class="ztext-empty-paragraph"><br/></p><p>A股市场里个股与大盘的相关性很高，针对前面提到的选择精准的进场出场时间，规避熊市回撤较大的问题，我们想到可以借助近来表现不错的RSRS，支持阻力相对强弱指标进行大盘择时。<br/></p><p class="ztext-empty-paragraph"><br/></p><p>RSRS，阻力支撑相对强度指标（ResistanceSupport Relative Strength，简称RSRS），出自光大证券的一篇技术择时系列的研究报告，其思路就是，以每天最高最低价格替代传统技术分析中的支持阻力，以最高价最低价变化的相对强弱替代支撑阻力具体价格阈值。下面是其思路的一些说明，具体也可参考研报和量化课堂RSRS的介绍内容。</p><ul><li>用最低价每变动 1的时候，最高价变动的幅度来衡量支持阻力的强弱</li><li>拿同时间段最高价、最低价的序列，进行回归，模型的beta 值就是所需要的斜率，即衡量支持阻力的具体指标</li></ul><div class="highlight"><pre><code class="language-text">import statsmodels.api as sm
import matplotlib.pyplot as plt
#step1 获取数据的高低点
security = &#39;000001.XSHG&#39;
prices = get_price(security, &#39;2005-01-05&#39;, &#39;2010-01-01&#39;, &#39;1d&#39;, [&#39;high&#39;, &#39;low&#39;])
highs = prices.high
lows = prices.low
#step2 计算斜率，进行记录
long = 18
beta_list = []
for i in range(long,len(highs)):
 y = highs[i-long:i]
 x = lows[i-long:i]
 X = sm.add_constant(x)
 model = sm.OLS(y,X)
 results = model.fit()
 beta_list.append(results.params[1])
plt.hist(beta_list,bins=50)</code></pre></div><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-d7496d6682997ff01f35c6f605c5837b_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image" width="370"/></noscript><img src="https://pic4.zhimg.com/v2-d7496d6682997ff01f35c6f605c5837b_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image lazy" width="370" data-actualsrc="https://pic4.zhimg.com/v2-d7496d6682997ff01f35c6f605c5837b_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-e98ddd199b3830dbe6350b47ac1f8575_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image" width="370"/></noscript><img src="https://pic2.zhimg.com/v2-e98ddd199b3830dbe6350b47ac1f8575_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image lazy" width="370" data-actualsrc="https://pic2.zhimg.com/v2-e98ddd199b3830dbe6350b47ac1f8575_b.jpg"/></figure><p>拿斜率进行阈值设置的话其波动较大，效果不佳，这里直接采用研报中将斜率值进行标准化（标准分的形式，如上图所示），且考虑拟合效果在内，将标准分进行决定系数(回归结果里的R方值)加权，效果如下图所示，最后我们直接采用效果显著的右偏标准分，右侧标准分决定抄底买入时机。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-763d4acc442fd051cb91d6aac8cb2740_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image" width="370"/></noscript><img src="https://pic1.zhimg.com/v2-763d4acc442fd051cb91d6aac8cb2740_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image lazy" width="370" data-actualsrc="https://pic1.zhimg.com/v2-763d4acc442fd051cb91d6aac8cb2740_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-198d5a3d13137b273629c966d512d4ba_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image" width="370"/></noscript><img src="https://pic3.zhimg.com/v2-198d5a3d13137b273629c966d512d4ba_b.jpg" data-caption="" data-size="normal" data-rawwidth="370" data-rawheight="266" class="content_image lazy" width="370" data-actualsrc="https://pic3.zhimg.com/v2-198d5a3d13137b273629c966d512d4ba_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p>下图是RSRS择时效果展示，基准为沪深300指数，交易标的同为沪深300指数，自2010至今的回测效果图展示，8年时间，最大回撤仅为17.7%，我们可以看到空仓时机，与大盘顶底基本吻合，简直是逃顶抓底的神器。下图展示就是应用在交易自身标的策略中的收益情况。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-96d247b20bdea9f2c6c63eb624e4763a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="326" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic3.zhimg.com/v2-96d247b20bdea9f2c6c63eb624e4763a_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-96d247b20bdea9f2c6c63eb624e4763a_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="326" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic3.zhimg.com/v2-96d247b20bdea9f2c6c63eb624e4763a_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-96d247b20bdea9f2c6c63eb624e4763a_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><h2><b>完美合璧，1+1&gt;2</b></h2><p class="ztext-empty-paragraph"><br/></p><p>按如上思路，我们把开篇提到的有超额收益的策略，与这个RSRS大盘择时方法结合，就得到了这次所要分享的策略，通过RSRS指标的精准择时，在熊市中能够保住收益，在非熊市时能够获得市场收益和策略的超额收益。我们通过在研究中调用策略回测结果，在同一时间范围内，分别展示了开篇提到的有超额收益的策略收益、RSRS择时策略收益、前两者结合的策略收益、基准收益的四条收益曲线，收益结果如下所示。<br/></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-248d0260fb620813d32de7416b317adf_b.jpg" data-caption="" data-size="normal" data-rawwidth="764" data-rawheight="487" class="origin_image zh-lightbox-thumb" width="764" data-original="https://pic4.zhimg.com/v2-248d0260fb620813d32de7416b317adf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-248d0260fb620813d32de7416b317adf_b.jpg" data-caption="" data-size="normal" data-rawwidth="764" data-rawheight="487" class="origin_image zh-lightbox-thumb lazy" width="764" data-original="https://pic4.zhimg.com/v2-248d0260fb620813d32de7416b317adf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-248d0260fb620813d32de7416b317adf_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p>近5年里，单纯策略的收益为146.50%（价值策略）、RSRS择时策略的收益为178.84%（风险策略）、前两者结合的策略收益为353.85%（综合策略），将价值选股思路与RSRS择时思路结合之后得到了1+1&gt;2的效果！</p><p class="ztext-empty-paragraph"><br/></p><p>由于策略里需要统计近5年的样本数据，数据最早是2005年，这里将综合策略从2010年开始进行了回测，策略获得了年化近30%的收益，夏普率达到1.4，回撤控制在20%以内，近八年回测结果如下。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="658" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="658" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-eda1390cd2d2ad9cf4275ddb163c2669_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p>策略持仓10只股票，八年时间交易1400次交易，一年约20次调仓，风险超过阈值全部清仓，单只股票历史最高仓位占比不超过14%，策略非个别股票贡献大部分收益，持仓收益贡献最大的10只股票如下。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-406e0a4ff858d0b14930f4128df70e5b_b.jpg" data-caption="" data-size="normal" data-rawwidth="501" data-rawheight="449" class="origin_image zh-lightbox-thumb" width="501" data-original="https://pic4.zhimg.com/v2-406e0a4ff858d0b14930f4128df70e5b_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-406e0a4ff858d0b14930f4128df70e5b_b.jpg" data-caption="" data-size="normal" data-rawwidth="501" data-rawheight="449" class="origin_image zh-lightbox-thumb lazy" width="501" data-original="https://pic4.zhimg.com/v2-406e0a4ff858d0b14930f4128df70e5b_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-406e0a4ff858d0b14930f4128df70e5b_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p><b>Brinson归因分析收益分解，超额收益、主动配置为策略贡献几乎全部收益。</b></p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-637855d02f6d39fe1c86b4510009a9d3_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="461" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic4.zhimg.com/v2-637855d02f6d39fe1c86b4510009a9d3_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-637855d02f6d39fe1c86b4510009a9d3_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="461" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic4.zhimg.com/v2-637855d02f6d39fe1c86b4510009a9d3_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-637855d02f6d39fe1c86b4510009a9d3_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><h2><b>总结</b></h2><p class="ztext-empty-paragraph"><br/></p><p>策略通过将长期拥有超额收益的财务因子策略作为选股，与大盘择时方法RSRS相结合，保证了策略近30%的年化收益，规避了熊市风险，使得策略表现不俗，在2017年大量策略失效的时候依然能够战胜市场，稳定盈利。感兴趣的朋友们可以进一步对参数敏感度以及斜率处理部分进行更细致的处理，亦或参考以RSRS择时加超额收益选股的思路进行更多的探索。 </p><a href="https://link.zhihu.com/?target=https%3A//www.joinquant.com/post/15002%3Ftag%3Dalgorithm" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">兄台且慢，去天台排队不如看看这个策略先 - K线放荡不羁 - JoinQuant</a><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
