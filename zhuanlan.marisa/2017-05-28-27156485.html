<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>循环小数与费马小定理</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/27156485">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-b427392203a419b81969f30ebc24ee9f_r.jpg" alt=""></div><h2><b>背景</b></h2><p>　　题目出自之前<a href="https://zhuanlan.zhihu.com/p/26757354" data-title="亮灯问题、杨辉三角与Sierpinski三角形" class="" data-editable="true">亮灯问题、杨辉三角与Sierpinski三角形</a>提及的生日题中的第三、四、五题。</p><h2><b>题目</b><br></h2><p><b>第三题</b>　证明：对于任意非<equation>2, 5</equation>倍数正整数<equation>n</equation>且满足<equation>n&gt;1</equation>，均存在正整数<equation>k, i</equation>满足<equation>kn=10^i-1</equation>。  <br>　　<b>第四题</b>　证明：<i>在<equation>k</equation>进制下</i><equation>(k&gt;1)</equation>，任何形如<equation>a/b</equation>（<equation>a, b</equation>均为正整数）的数均为有限小数或无限循环小数。  <br>　　<b>第五题</b>　证明：在上一问条件下，若<equation>b</equation>与<equation>k</equation>互质则<equation>a/b</equation>为无限循环小数，若<equation>a</equation>的质因子为<equation>k</equation>的质因子的子集则<equation>a/b</equation>为有限小数。</p><h2><b>答案</b></h2><p>　　既然是证明题，那么就没有标准答案。以下提供一种可行的思路并且再探讨另一个问题：<equation>k</equation>进制下<equation>b/a</equation>若循环，那么它的循环节长度<equation>len</equation>是多少？</p><p>　　接下来，我们将要分节讨论了。</p><h2><b>无限循环小数</b></h2><p>　　在<equation>k</equation>进制下，若有数<equation>x</equation>满足其为<equation>0&lt;x&lt;1</equation>的纯循环小数（即其循环节从小数点后第<equation>1</equation>位开始｜<b>思考：若为混循环小数或大于<equation>1</equation>的纯循环小数，有什么办法将其转化求解呢？</b>）且其循环节长度为<equation>len</equation>，循环节中数字为<equation>y</equation>，则我们可得<equation>x\cdot k^{len}-x=y</equation>。<equation>x\cdot k^{len}</equation>相当于将第一个循环节移动到小数点左侧，与<equation>x</equation>相减就得到循环节中的数字<equation>y</equation>。整理可得<equation>y/(k^{len}-1)=x</equation>。</p><p>　　所以，我们可得结论：数<equation>x=a/b</equation>为无限循环小数的条件为存在整数<equation>len, i</equation>满足<equation>bi=k^{len}-1</equation>。这个式子中，<equation>k</equation>取<equation>10</equation>的情形即第三题的提问。</p><p>　　思考题答案：若为大于<equation>1</equation>的纯循环小数，可表示成一个整数与一个<equation>0</equation>与<equation>1</equation>之间纯循环小数的和，因为整数一定能表示成任意整数作分母的分数形式，对小数部分讨论之后将整数部分加上去即可。对于混循环小数，可以乘以<equation>k</equation>的次幂，将小数点移动到循环节前，按照大于<equation>1</equation>的纯循环小数处理，最后乘以<equation>k</equation>的次幂的倒数即可。<br></p><h2><b>费马小定理</b></h2><p>　　对于质数<equation>p</equation>，与<equation>p</equation>互质的整数<equation>a</equation>，有下式成立：<equation>a^{p-1}\equiv 1 \pmod p</equation></p><p>　　这是接下来将要用到的定理。如何证明？</p><p><b>引理1</b>：对于整数<equation>a, b, c</equation>与正整数<equation>p</equation>，若<equation>c, p</equation>互质，<equation>ac\equiv bc \pmod p</equation>，则有<equation>a\equiv b \pmod p</equation>。</p><p>　　证明：  <br>　　移项得：<equation>\begin{align}ac-bc&amp;\equiv 0 \pmod p\\
(a-b)c&amp;\equiv 0 \pmod p\end{align}</equation><br>　　因为c, p互质，所以有：<equation>\begin{align}a-b&amp;\equiv 0\pmod p\\
a&amp;\equiv b\pmod p\end{align}</equation></p><p><b>引理2</b>：对于整数<equation>p</equation>满足<equation>p&gt;1</equation>，与<equation>p</equation>互质的整数<equation>b</equation>以及模<equation>p</equation>的完全剩余系<equation>a_1, a_2, .. ,a_m</equation>，有<equation>ba_1, ba_2, .. ,ba_m</equation>构成模<equation>p</equation>的完全剩余系。</p><p>　　证明：  <br>　　若其不构成模<equation>p</equation>的完全剩余系，则有<equation>ba_i\equiv ba_j \pmod p</equation>成立，由引理<equation>1</equation>得，有<equation>a_i \equiv a_j \pmod p</equation>成立，与条件不符，因此<equation>ba_i\equiv ba_j \pmod p</equation>不成立，则<equation>ba_1, ba_2, .. ,ba_m</equation>构成模<equation>p</equation>的完全剩余系。</p><p><b>费马小定理</b>：</p><p>　　构造模<equation>p</equation>下的完全剩余系<equation>{0, 1, 2, .. , p-1}</equation>，由引理<equation>2</equation>得<equation>{0, a , 2a, .. , (p-1)a}</equation>也为模<equation>p</equation>下的完全剩余系。可得<equation>1\times 2\times .. \times (p-1)\equiv a\times 2a\times .. \times (p-1)a \pmod p</equation>成立。则有<equation>(p-1)!\equiv a^{p-1}(p-1)! \pmod p</equation>成立。因为<equation>p</equation>为质数，所以<equation>(p-1)!</equation>与<equation>p</equation>互质，根据引理<equation>1</equation>得<equation>1\equiv a^{p-1}\pmod p</equation>成立。</p><h2><b>两者之间的关系</b></h2><p>　　之前提及，数<equation>x=a/b</equation>为无限循环小数的条件为存在整数<equation>len, i</equation>满足<equation>bi=k^{len}-1</equation>。而费马小定理则告诉我们，对于质数<equation>p</equation>，与<equation>p</equation>互质的整数<equation>a</equation>，有<equation>a^{p-1}\equiv 1 \pmod p</equation>。当<equation>b</equation>为质数，<equation>a=k</equation>时显然有<equation>k^{b-1}-1\equiv 0 \pmod b</equation>，也就是说，存在整数<equation>len, i</equation>满足条件。</p><p>　　但是当<equation>b</equation>不为质数但与<equation>k</equation>互质时怎么办？不妨将<equation>b</equation>分解质因数，令<equation>b=p_1^{q_1}\times p_2^{q_2} \times .. \times p_n^{q_n}</equation>（此处翻车），根据欧拉定理（在<equation>b, p</equation>互质下有<equation>p^{\varphi(b)}\equiv 1\pmod b</equation>），则分别有<equation>k^{\varphi(p_i^{q_i})} \equiv 1 \pmod {p_i^{q_i}}</equation>成立，其中<equation>1\leq i \leq n</equation>。可知有<equation>k^{c(p_i-1)p_i^{q_i-1}} \equiv 1 \pmod {p_i^{q_i-1}}</equation>成立。别忘了欧拉函数是积性函数，所以有下式成立：<equation>k^{\frac{[(p_1-1)p_1^{q_1-1}][(p_2-1)p_2^{q_2-1}]..[(p_n-1)p_n^{q_n-1}]}{gcd[(p_1-1)p_1^{q_1-1}, (p_2-1)p_2^{q_2-1}, .. , (p_n-1)p_n^{q_n-1}]}}\equiv 1 \pmod b</equation></p><p>　　即：<equation>k^{\frac{\varphi(p_1^{q_1})\varphi(p_2^{q_2}).. \varphi(p_n^{q_n})}{gcd[
\varphi(p_1^{q_1}),\varphi(p_2^{q_2}), .. , \varphi(p_n^{q_n})]}}\equiv 1 \pmod b</equation></p><p>　　并且由于积性函数，我们有：<equation>\varphi(b) \equiv 0 \pmod {\frac{\varphi(p_1^{q_1})\varphi(p_2^{q_2}).. \varphi(p_n^{q_n})}{gcd[
\varphi(p_1^{q_1}),\varphi(p_2^{q_2}), .. , \varphi(p_n^{q_n})]}}</equation></p><p>　　所以大多数情况下（<equation>b</equation>与<equation>k</equation>互质）时循环节长度最小值<equation>len</equation>能被<equation>\varphi(b)</equation>整除。</p><p>　　而对于<equation>b</equation>与<equation>k</equation>不互质的情况，我们要分类讨论。若<equation>b</equation>的质因数为<equation>k</equation>的质因数的子集，那么<equation>a/b</equation>乘以<equation>k</equation>的次幂一定可以得到一个整数，则<equation>a/b</equation>为有限小数。若不为子集，则我们将<equation>a/b</equation>乘以<equation>k</equation>的次幂，消除交集部分质因数的影响，转为<equation>b</equation>与<equation>k</equation>互质的情况继续讨论。这其实与之前思考题的解决方法一致。通过分类讨论，我们可以解决第四题与第五题。</p><p>　　所以，将<equation>k=10</equation>代入，我们可以证得第三题（对于任意非<equation>2, 5</equation>倍数正整数<equation>n</equation>且满足<equation>n&gt;1</equation>，均存在正整数<equation>k, i</equation>满足<equation>kn=10^i-1</equation>。）成立。<br></p><h2><b>结论</b></h2><p>　　在<equation>k</equation>进制下，形如<equation>a/b</equation>（<equation>a, b</equation>均为整数）的分数（最简形式），若<equation>b</equation>与<equation>k</equation>互质，则<equation>a/b</equation>为纯循环小数。若<equation>b</equation>质因数与<equation>k</equation>质因数有交集且<equation>b</equation>质因数不为<equation>k</equation>质因数子集，则<equation>a/b</equation>为混循环小数。否则若<equation>b</equation>质因数为<equation>k</equation>质因数的子集，<equation>a/b</equation>为有限小数。</p><p>　　当<equation>a/b</equation>为循环小数时，在大多数情况下其循环节长度<equation>len=\frac{\varphi(b)}{gcd[
\varphi(p_1^{q_1}),\varphi(p_2^{q_2}), .. , \varphi(p_n^{q_n})]}</equation>。不难发现有<equation>len\leq (b-1)</equation>且当<equation>b</equation>为质数时<equation>len</equation>取到<equation>b-1</equation>。</p><h2><b>感谢</b></h2><p>　　感谢帕秋莉发现翻车了并及时指出。（天哪我好菜啊.jpg）</p><p>　　本文同步发表于<a href="http://snakes.moe/detail/7" class="" data-editable="true" data-title="我的博客">我的博客</a>。</p><p>　　本人才疏学浅，难免有错漏之处，请于评论区指正，谢谢。←（这句话用处还是非常大的）</p><p>　　版权所有，转载请联系作者，禁止任何形式的未经授权的转载。 </p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
