<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>「Rust每日新闻」本周精选 • 第八期</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/42981024">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-10c6913d0bc44f08fed6d57e31af7e30_r.jpg" alt=""></div><blockquote>前言：<br>从2018年开始，我每天会花1个小时关注Rust社区动态，并且在<a href="https://link.zhihu.com/?target=http%3A//rust.cc">http://rust.cc</a>论坛、<a href="https://link.zhihu.com/?target=https%3A//t.me/rust_daily_news">tg channel</a>、GitHub都开通了Rust每日新闻，分享我每天的见闻，偶尔也夹杂了一些个人的观点。半年过去了，Rust每日新闻已经成为了Rust社区群大家每天必看的内容。今天突然想到，在这个知乎专栏里，每周精选几篇Rust社区中的动态，和大家分享。分享的内容就不按时间排序了。<br><i>2018-08-26</i></blockquote><h2><b>官方新闻</b></h2><p><b>Unsized Rvalues 特性已经被merge到master</b></p><p>Unsized Rvalues 是RFC 1909中定义的特性，该特性允许本地变量、函数参数和一些表达式具有unsized类型。具体实现是将临时值存储在可变大小的栈空间中。 </p><p>利用内部实现的alloca_unsized_indirect函数在栈上动态分配内存。</p><p>实现该特性的动机在于，在某些地方可以直接传递unsize类型，而不需要使用trait Object，比如Box来包装它。可能有些人会理解错，以为它是取代trait Object功能的，其实非也。</p><p>比如可以实现 VLA（variable-length array）数组</p><code lang="rust">extern "C" {
   fn random() -&gt; usize;
}

fn foo(n: usize) {
    let x = [0u8; n]; // x: [u8]
    let x = [0u8; n + (random() % 100)]; // x: [u8]
    let x = [0u8; 42]; // x: [u8; 42], like today
    let x = [0u8; random() % 100]; //~ ERROR constant evaluation error
}</code><p>foo函数中头两行x定义，会返回[u8]类型，它们将在运行时对长度进行求值。</p><p>第三行，和之前一样，在编译时求值，最后一行出错是因为不支持CTFE</p><p>当然，上面代码当前还不支持，期待后续的工作。</p><p><a href="https://github.com/rust-lang/rust/pull/51131">Implement Unsized Rvalues by qnighy · Pull Request #51131 · rust-lang/rust</a></p><p><br></p><p><b>通往const generics 的里程碑The Great Generics Generalisation刚刚被merge</b></p><p>const generics是什么？ </p><p>相信有不少人在标准库源码里看到数组实现trait，只是实现到长度为32的数组，也就是说有32个impl，而且都是手工编写。并不能为所有长度的数组实现那些trait。这正是因为当前还不能在const类型上使用泛型。如果支持const generics，将可以实现下面的代码：</p><code lang="rust">impl &lt;T，const N：usize&gt; Foo for [T; N] {...}</code><p>可以为所有长度的数组实现triat Foo。 那么数组的人体工程学将会得到很大的提升。</p><p>帖子里也有人给出了其他的例子，可以看看。</p><p>he Great Generics Generalisation这个合并，仅仅是实现const generics的一个基础，前方的路还很长吧</p><p><a href="https://www.reddit.com/r/rust/comments/98wa88/the_great_generics_generalisation_a_stepping/">https://www.reddit.com/r/rust/comments/98wa88/the_great_generics_generalisation_a_stepping/</a></p><p><br></p><p><b>CVE-2018-1000657：</b></p><p>Rust 1.3到1.21中VecDeque :: reserve（）中的缓冲区溢出允许任意代码执行</p><p>之前新闻里报道过，这个漏洞早已被修复，只是Rust官方没有发布CVE，在那个小哥的努力下，这个CVE算是补上了吧。</p><p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=%20CVE-2018-1000657">CVE - CVE-2018-1000657</a></p><p><br></p><p><b>这个PR有意思</b></p><p>该作者提交了一个充满歧义的代码，用以终结 tuorofish反对者的声音</p><p><a href="https://github.com/rust-lang/rust/pull/53562">Lament the invincibility of the Turbofish by varkor · Pull Request #53562 · rust-lang/rust</a></p><p><br></p><p><b>withoutboats对Pin API的重新思考</b></p><p>出于统一Pin类型的考虑（现在又是PinMut，又是PinBox，将来还会有PinRc、PinArc等），可能会制作一个组合Pin类型，如果要改的话，也只是API的改变，不会对Pin模型做出根本性变化。</p><p><a href="https://boats.gitlab.io/blog/post/rethinking-pin/">Another look at the pinning API</a></p><p><br></p><p><b>RLS 1.0 发布</b></p><p>及更多内容</p><p><a href="https://www.reddit.com/r/rust/comments/99ltpr/more_on_the_rls_and_a_10_release/">https://www.reddit.com/r/rust/comments/99ltpr/more_on_the_rls_and_a_10_release/</a></p><hr><h2><b>社区新闻</b></h2><p><b>Deno 发布 0.1 </b></p><p>Deno是Node.js之父的新项目，一个TypeScript运行时，已经完全用Rust重写，现在发布0.1</p><p>语言成分：</p><ul><li>Rust: 21.1%</li><li>Python 16.5%</li><li>C++ 14.1%</li><li>C 1.1%</li></ul><p><a href="https://www.reddit.com/r/rust/comments/99qd2s/deno_a_typescript_runtime_has_been_rewritten_in/">https://www.reddit.com/r/rust/comments/99qd2s/deno_a_typescript_runtime_has_been_rewritten_in/</a></p><p><br></p><p><br></p><p><b>Rust ORM框架Diesel文档中文翻译</b></p><p><a href="https://docs.ruster.xyz/server/diesel/start.html">开始 | Rust文档中心</a></p><p><br></p><p><b>「翻译」Into Rust (1) - 为什么你应该使用 Rust 语言?</b></p><p>Rust 语言核心开发人员Niko Matsakis 的Rust教程系列，目前出了五期，这里是第一集熟肉，野喵Up主翻译。</p><p><a href="https://www.bilibili.com/video/av30066131">Into Rust (1) - 为什么你应该使用 Rust 语言?_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></p><p><br></p><p><b>关于建立Rust 游戏开发 工作组的讨论</b></p><p>你怎么看？</p><p><a href="https://internals.rust-lang.org/t/a-working-group-for-rust-game-development/8240">A working group for Rust game development?</a></p><p><br></p><p><b>C2Rust项目的更多介绍</b></p><p><a href="https://galois.com/blog/2018/08/c2rust/">C2rust - Galois, Inc.</a></p><p><br></p><p><b>Rust 黑客游戏</b></p><p>该仓库的PDF文件介绍了该游戏的玩法，目前只给出了Windows版本。</p><ul><li>将自己的.dll 文件注入到某个线程中，然后实现API Hook</li><li>使用detours-rs库来实现detour hook</li></ul><p>可以关注下，后续也会发linux</p><p><a href="https://github.com/FabianB1998/Rust-Hacking/blob/master/document.pdf">https://github.com/FabianB1998/Rust-Hacking/blob/master/document.pdf</a></p><p><br></p><p><b>pyo3-pack发布</b></p><p>pyo3是一个零配置的打包工具，可以将带有pyo3的crate方便构建到Python中，也可以在pypi上发布它。</p><p>（这灵感好像是来自于wasm-pack）</p><p>pyo3-pack意味着取代setuptools-rust。 它支持在Windows，Linux和Mac上构建用于python 2.7和3.5+的轮子，包括类似于audithweel的工具，并且可以像twine一样将轮子上传到pypi。</p><p><a href="https://www.reddit.com/r/rust/comments/99o0i7/announcing_pyo3pack_publish_crates_with_pyo3/">https://www.reddit.com/r/rust/comments/99o0i7/announcing_pyo3pack_publish_crates_with_pyo3/</a></p><p>相关博文  <a href="https://blog.schuetze.link/2018/07/21/a-dive-into-packaging-native-python-extensions.html">A dive into packaging native python extensions</a></p><p><br></p><p><b>rand crate的发展历史</b></p><p>新版本Rand 0.5正准备发布，作者对以往的版本变化做了一个梳理</p><p><a href="https://www.reddit.com/r/rust/comments/87qy40/history_of_the_rand_crate/">https://www.reddit.com/r/rust/comments/87qy40/history_of_the_rand_crate/</a></p><p><br></p><p><b>Notes现在使用Rust和「Android组件」</b></p><p>Notes是Notes by Firefox，专门为Firefox 浏览器推出的便签 笔记 功能，目前已经发布了专属的Android 版本，可以脱离Firefox 浏览器单独使用。</p><p><a href="https://medium.com/firefox-test-pilot/notes-now-uses-rust-android-components-4809af1e4172">https://medium.com/firefox-test-pilot/notes-now-uses-rust-android-components-4809af1e4172</a> </p><p><br></p><p><b>Tokio 0.1.8发布</b></p><p>新增了很多API</p><ul><li>异步上下文执行文件系统操作</li><li>并发改进</li><li>计时器改进</li></ul><p><a href="https://tokio.rs/blog/2018-08-incremental-improvements/">https://tokio.rs/blog/2018-08-incremental-improvements/</a></p><p><br></p><p><b>actix-lua 为Actix提供安全的lua脚本环境</b></p><p><a href="https://github.com/poga/actix-lua">poga/actix-lua</a> </p><p>actix-lua 使用案例： actix-lua-web</p><p>使用纯lua构建web框架</p><p><a href="https://github.com/poga/actix-lua/tree/master/examples/lua-web">poga/actix-lua</a></p><p><br></p><p><b>RedSift公司：当Rust遇见q</b></p><p>该公司发布了KDB+的Rust绑定。可以使用该公司的kdb+平台，来创建可以在消费级硬件上以数十GB /秒的速率处理数据的应用程序。</p><blockquote>KDB+ 简介<br>kdb+ 号称 最强的内存数据库之一。列式存储的特性，使得对于某个列的统计分析操作异常方便。全球顶尖的投行，高盛，摩根，国内的国信等证券公司也开始使用，在延迟性上有着苛刻要求的金融领域，kdb+可谓一家独大。当然在优秀的性能背后，超高的费用也是必不可少的，貌似单核价格在3w+美刀以上?...<br>kdb+:<br>- 单体架构，轻松支持 billion以上数据<br>- 分布式扩展，无性能损耗<br>- 超低延迟+高并发支持<br>- 列式存储+内存数据库<br>- 灵活的Q语言，内置非常多的统计计算方法。<br>(来源：知乎)</blockquote><p><a href="https://blog.redsift.com/labs/rust-meet-q/">Rust, meet q</a></p><p><br></p><p><b>Rust序列化性能测试</b></p><p>capnp  vs protobuf </p><p>capnp的性能更好一些</p><p><a href="https://github.com/ChrisMacNaughton/proto_benchmarks">ChrisMacNaughton/proto_benchmarks</a>  </p><hr><h2><b>博文与库</b></h2><p><b>使用Rust编写语言vm系列文章</b></p><p>已经更新到了 part 9</p><p><a href="https://blog.subnetzero.io/">Subnet Zero Blog</a> </p><p><br></p><p><b>gfx-hal指南系列文章</b></p><p>00： 小乌龟作画</p><p>gfx-hal是gfx-rs中包含的组件，gix的硬件抽象层</p><p><a href="https://falseidolfactory.com/2018/08/16/gfx-hal-part-0-drawing-a-triangle.html">Gfx-hal Tutorial part 0: Drawing a triangle</a> </p><p>01: Resizing Windows</p><p><a href="https://falseidolfactory.com/2018/08/23/gfx-hal-part-1-resizing-windows.html">https://falseidolfactory.com/2018/08/23/gfx-hal-part-1-resizing-windows.html</a></p><p><br></p><p><b>Tokio异步读写示例</b></p><p><a href="https://github.com/vi/tokio-stdin-stdout">vi/tokio-stdin-stdout</a></p><p><br></p><p><b>「系列文章」 From Rust to beyond前奏</b></p><p>这系列文章是讲Rust如何与其他语言交互</p><p>- WebAssembly</p><p>- ASM.js</p><p>- C</p><p>- PHP</p><p>- Nodejs</p><p><a href="https://mnt.io/2018/08/21/from-rust-to-beyond-prelude/">From Rust to beyond: Prelude</a></p><p><br></p><p><b>cargo doc 文档实时刷新</b></p><p>该文作者介绍了两个工具： </p><ul><li>cargo-watch 可以根据源码的改变自动构建doc</li><li>http 可以生成文档的静态服务，也可以用cargo doc —open代替</li></ul><p><a href="http://benjamincongdon.me/blog/2018/08/22/Live-Refreshing-Cargo-Docs/">Live Refreshing Cargo Docs</a></p><p><br></p><p><b>rust-bitcoin 0.14发布</b></p><p>Rust比特币库</p><p><a href="https://github.com/rust-bitcoin/rust-bitcoin/blob/master/CHANGELOG.md#0140---2018-08-22">rust-bitcoin/rust-bitcoin</a></p><p><br></p><p><b>WASM + React.js + <a href="http://Socket.io">Socket.IO</a> 编写的公共聊天加密程序</b></p><p>可以通过wasm为聊天内容加密解密，然后实现在公共聊天室里进行私密对话的功能</p><p><a href="https://www.reddit.com/r/rust/comments/99j576/wasm_reactjs_socketio_fun_a_public_chat/">https://www.reddit.com/r/rust/comments/99j576/wasm_reactjs_socketio_fun_a_public_chat/</a></p><p><br></p><p><b>使用Rust快速读取文件</b></p><p>该文是scc作者，在尝试使用Rust重写scc的学习心得</p><p>scc是一个go实现的代码行数统计工具</p><p><a href="https://boyter.org/posts/reading-files-quickly-in-rust/">Reading files quickly in Rust</a></p><p><br></p><p><b>Rust实现的玩具JS 引擎</b></p><p>（感觉推荐过一遍呢？）</p><p><a href="https://github.com/maekawatoshiki/rapidus">maekawatoshiki/rapidus</a> </p><p><br></p><p><b>Objective-Rust：Rust和Objective-C的邪恶联盟</b></p><p>它的主要目的是帮助Rust应用程序使用Apple的原生Objective-C框架。</p><p>不要在生产环境使用它，目前是试玩。</p><p><a href="https://gitlab.com/objrs/objrs/tree/master">Files · master · objrs / objrs</a></p><p><br></p><p><b>Rust实现的NES模拟器 </b></p><p>结合WebAssembly</p><p><a href="http://koute.github.io/pinky-web/">Pinky - an NES emulator</a></p><p><a href="https://github.com/koute/pinky/tree/master/pinky-web">koute/pinky</a></p><h2><b>招聘</b></h2><p><br><b>[远程] TagniFi 正在招聘Rust工程师</b></p><p>TagniFi（<a href="https://www.tagnifi.com/">https://www.tagnifi.com</a>）是一家金融数据公司。提供通过API，网络和Excel提供的标准化财务数据。正在寻找一个远程Rust contractor来帮助完成各种项目。</p><p>更多信息：</p><p>TagniFi是从Rust 1.0开始，以脚本的形式使用它来监视/测试产品的各个方面。在了解Rust以后，现在决定加大投资力度，计划在整个产品中使用Rust，从后端/ API到Web前端。</p><p>现在寻找一位工程师来帮助实现这一目标。可以远程工作，位置和时间不是工作的障碍。</p><p>可能会让您处理的项目示例：抓取html页面以提取非结构化数据并将其解析为结构化表单，设计/开发与postgres数据库通信的API，以高性能方式访问财务数据，或使用WASM实现数据可视化Web组件。</p><p>如果您对该职位感兴趣或有任何疑问，请通过jobs@tagnifi.com或daveb@tagnifi.com联系。</p><p><a href="https://www.reddit.com/r/rust/comments/994fcg/job_tagnifi_is_looking_for_a_rust_engineer/">https://www.reddit.com/r/rust/comments/994fcg/job_tagnifi_is_looking_for_a_rust_engineer/</a> </p><p><br></p><p><b>在Paity工作是什么体验？</b></p><p>文章里有办公室美图，顺便它们也在招人：<a href="https://paritytech.io/jobs/">https://paritytech.io/jobs/</a></p><p><a href="https://medium.com/paritytech/engineering-at-parity-what-its-like-c0e5c8a17870">https://medium.com/paritytech/engineering-at-parity-what-its-like-c0e5c8a17870</a></p><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
