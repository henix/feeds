<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>汇集七种API的子域发现工具：Subfinder</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/100692663">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-e336a103f15c191da4ba9c3028e782c0_b.jpg" alt=""></div><h2>Subfinder</h2><p>一个子域发现工具，可通过使用被动的在线资源来发现网站的有效子域。它具有简单的模块化架构，并针对速度进行了优化。subfinder 仅用于做一件事，那就是被动子域枚举。</p><p>在获得了 APIKEY 后，可进行全方面的被动式子域发现，为渗透测试人员提供服务。</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-532240931abab5d2f41fbdf50ab576ce_b.jpg" data-caption="" data-size="small" data-rawwidth="2490" data-rawheight="1692" class="origin_image zh-lightbox-thumb" width="2490" data-original="https://pic3.zhimg.com/v2-532240931abab5d2f41fbdf50ab576ce_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-532240931abab5d2f41fbdf50ab576ce_b.jpg" data-caption="" data-size="small" data-rawwidth="2490" data-rawheight="1692" class="origin_image zh-lightbox-thumb lazy" width="2490" data-original="https://pic3.zhimg.com/v2-532240931abab5d2f41fbdf50ab576ce_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-532240931abab5d2f41fbdf50ab576ce_b.jpg"/></figure><h2>特征✨</h2><ul><li>模块化架构</li><li>速度快、轻量级资源</li><li>丰富的被动源（截至目前已有26个源）</li><li>支持集成 Stdin和 stdout</li><li>多种输出格式</li></ul><h2>安装❗</h2><p>项目地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/projectdiscovery/subfinder" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/projectdisco</span><span class="invisible">very/subfinder</span><span class="ellipsis"></span></a></p><p>使用版本：v2.2.4</p><p>环境：win10</p><blockquote>直接安装需 go1.13+ 才能成功安装！</blockquote><p><b>Docker 一键部署</b></p><p>先拉取官方镜像。</p><div class="highlight"><pre><code class="language-text">docker pull ice3man/subfinder</code></pre></div><p>运行：</p><div class="highlight"><pre><code class="language-text">docker run -it ice3man/subfinder</code></pre></div><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-f682f195223e3dd59590a8120d0f9765_b.jpg" data-caption="" data-size="small" data-rawwidth="793" data-rawheight="310" class="origin_image zh-lightbox-thumb" width="793" data-original="https://pic2.zhimg.com/v2-f682f195223e3dd59590a8120d0f9765_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-f682f195223e3dd59590a8120d0f9765_b.jpg" data-caption="" data-size="small" data-rawwidth="793" data-rawheight="310" class="origin_image zh-lightbox-thumb lazy" width="793" data-original="https://pic2.zhimg.com/v2-f682f195223e3dd59590a8120d0f9765_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-f682f195223e3dd59590a8120d0f9765_b.jpg"/></figure><p>提示没有提供输入列表，运行命令后面接参数指令即可，例如：</p><div class="highlight"><pre><code class="language-text">docker run -it ice3man/subfinder -h</code></pre></div><p>显示帮助菜单。</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-4fe9ec3030f3a3781bd5d3a09a0c01be_b.jpg" data-caption="" data-size="small" data-rawwidth="845" data-rawheight="750" class="origin_image zh-lightbox-thumb" width="845" data-original="https://pic3.zhimg.com/v2-4fe9ec3030f3a3781bd5d3a09a0c01be_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-4fe9ec3030f3a3781bd5d3a09a0c01be_b.jpg" data-caption="" data-size="small" data-rawwidth="845" data-rawheight="750" class="origin_image zh-lightbox-thumb lazy" width="845" data-original="https://pic3.zhimg.com/v2-4fe9ec3030f3a3781bd5d3a09a0c01be_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-4fe9ec3030f3a3781bd5d3a09a0c01be_b.jpg"/></figure><ul><li>-config API密钥等的配置文件</li><li>-d 查找子域</li><li>-dL 包含要枚举的域列表的文件</li><li>-exclude-sources 清单中要排除的来源清单</li><li>-max-time 等待枚举结果的分钟数（默认为10）</li><li>-nC 不要在输出中使用颜色</li><li>-nW 从输出中删除通配符和失效子域</li><li>-o 输出到指定文件（可选）</li><li>-oD 将枚举结果写入指定目录（可选）</li><li>-oI 以Host，IP格式写入输出</li><li>-oJ 以JSON行格式写入输出</li><li>-r 以逗号分隔的要使用的解析程序列表</li><li>-rL 包含要使用的解析器列表的文本文件</li><li>-silent 仅显示输出中的子域</li><li>-sources 用逗号分隔的来源列表</li><li>-t 用于解析的并发 goroutine 的数量（默认为10）</li><li>-timeout 超时时间（默认为30）</li><li>-v 显示详细输出</li></ul><p>Windows 下还可以自己下载 exe 文件运行。</p><p>下载地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/projectdiscovery/subfinder/releases" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/projectdisco</span><span class="invisible">very/subfinder/releases</span><span class="ellipsis"></span></a></p><p>运行方式：cmd 跳转到其相同目录，然后：（例如命令 -h）</p><div class="highlight"><pre><code class="language-text">subfinder-windows-amd64.exe -h</code></pre></div><h2>使用 API</h2><ul><li><a href="https://link.zhihu.com/?target=https%3A//www.virustotal.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Virustotal</a></li><li><a href="https://link.zhihu.com/?target=http%3A//passivetotal.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Passivetotal</a></li><li><a href="https://link.zhihu.com/?target=http%3A//securitytrails.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">SecurityTrails</a></li><li><a href="https://link.zhihu.com/?target=https%3A//censys.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Censys</a></li><li><a href="https://link.zhihu.com/?target=https%3A//binaryedge.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Binaryedge</a></li><li><a href="https://link.zhihu.com/?target=https%3A//shodan.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Shodan</a></li><li><a href="https://link.zhihu.com/?target=https%3A//urlscan.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">URLScan</a></li></ul><p>需要注册其帐号，获取 APIKEY，然后调用即可。说得有点啰嗦，直接看下面的操作吧。</p><p>例如，先获取 shodan 的 APIKEY：</p><p>进入 shodan 官网：<a href="https://link.zhihu.com/?target=https%3A//www.shodan.io/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://www.</span><span class="visible">shodan.io/</span><span class="invisible"></span></a> 并登录。进入“我的账户”：</p><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-37763752a113d14d1aaee8e6e80872f3_b.jpg" data-caption="" data-size="small" data-rawwidth="1216" data-rawheight="359" class="origin_image zh-lightbox-thumb" width="1216" data-original="https://pic4.zhimg.com/v2-37763752a113d14d1aaee8e6e80872f3_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-37763752a113d14d1aaee8e6e80872f3_b.jpg" data-caption="" data-size="small" data-rawwidth="1216" data-rawheight="359" class="origin_image zh-lightbox-thumb lazy" width="1216" data-original="https://pic4.zhimg.com/v2-37763752a113d14d1aaee8e6e80872f3_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-37763752a113d14d1aaee8e6e80872f3_b.jpg"/></figure><p>获取 APIKEY：</p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-c9be9d1fc0baf5209ac9deb691900071_b.jpg" data-caption="" data-size="small" data-rawwidth="1248" data-rawheight="746" class="origin_image zh-lightbox-thumb" width="1248" data-original="https://pic2.zhimg.com/v2-c9be9d1fc0baf5209ac9deb691900071_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-c9be9d1fc0baf5209ac9deb691900071_b.jpg" data-caption="" data-size="small" data-rawwidth="1248" data-rawheight="746" class="origin_image zh-lightbox-thumb lazy" width="1248" data-original="https://pic2.zhimg.com/v2-c9be9d1fc0baf5209ac9deb691900071_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-c9be9d1fc0baf5209ac9deb691900071_b.jpg"/></figure><p>然后，创建文件：<b>config.yaml</b></p><p><b>demo：</b></p><div class="highlight"><pre><code class="language-text">resolvers:
  - 1.1.1.1
  - 1.0.0.1
  - 8.8.8.8
  - 8.8.4.4
  - 9.9.9.9
  - 9.9.9.10
  - 77.88.8.8
  - 77.88.8.1
  - 208.67.222.222
  - 208.67.220.220
sources:
  - archiveis
  - binaryedge
  - bufferover
  - censys
  - certspotter
  - certspotterold
  - commoncrawl
  - crtsh
  - digicert
  - dnsdumpster
  - entrust
  - googleter
  - hackertarget
  - ipv4info
  - passivetotal
  - securitytrails
  - shodan
  - sitedossier
  - threatcrowd
  - threatminer
  - urlscan
  - virustotal
  - waybackarchive
binaryedge: []
censys: []
certspotter: []
passivetotal: []
securitytrails: []
shodan: []
urlscan: []
virustotal: []</code></pre></div><p>将 APIKEY 填入【】中并保存，运行：</p><div class="highlight"><pre><code class="language-text">subfinder-windows-amd64.exe -config config.yaml -d example.com</code></pre></div><p><b>使用测试</b></p><p>以 <a href="https://link.zhihu.com/?target=http%3A//example.com" class=" wrap external" target="_blank" rel="nofollow noreferrer">example.com</a> 为例。</p><p>查子域：</p><div class="highlight"><pre><code class="language-text">subfinder-windows-amd64.exe -d example.com</code></pre></div><p>或 docker 下使用：</p><div class="highlight"><pre><code class="language-text">docker run -it ice3man/subfinder -d example.com</code></pre></div><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-dd8ecd92599f8f3960553569412cd2a7_b.jpg" data-caption="" data-size="small" data-rawwidth="791" data-rawheight="740" class="origin_image zh-lightbox-thumb" width="791" data-original="https://pic4.zhimg.com/v2-dd8ecd92599f8f3960553569412cd2a7_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-dd8ecd92599f8f3960553569412cd2a7_b.jpg" data-caption="" data-size="small" data-rawwidth="791" data-rawheight="740" class="origin_image zh-lightbox-thumb lazy" width="791" data-original="https://pic4.zhimg.com/v2-dd8ecd92599f8f3960553569412cd2a7_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-dd8ecd92599f8f3960553569412cd2a7_b.jpg"/></figure><p>显示详细信息，使用 -v 即可，将逐一输出程序运行检测的所有域名：</p><div class="highlight"><pre><code class="language-text">subfinder-windows-amd64.exe -d example.com -v</code></pre></div><p>更多有关内容请前往<a href="https://link.zhihu.com/?target=https%3A//twosecurity.cn/%3Fquery_ref%3DqGLdXm" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a>进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 <b>twosecurity02</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb lazy" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg"/></figure>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
