<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>关于计价单位4——Hybrid Measure的一例</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/95413547">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-38a550b25eac3d06f877f827d12e7761_r.jpg" alt=""></div><p><b>本系列专注“虚假理论”，与“预测”，“交易策略”，"期权策略"等贴近交易的内容毫不相关。不感兴趣的知友可以继续右上角了。</b></p><p><b>前言：</b></p><p>上篇提到，很多百慕大产品是连续贴现和离散贴现条款并存的。对于这类产品，任意单一计价单位都不能满足他们的贴现需求，因此需要为这些产品专门混合使用一些计价单位，也就是所谓的混合测度Hybrid Measure。</p><p class="ztext-empty-paragraph"><br/></p><p><b>Libor(Spot) Measure in arbitrary tenor and rolling(reinvestment):</b></p><p>上篇提到的Libor Measure B(t) 作为货币市场单位 <img src="https://www.zhihu.com/equation?tex=%5Cbeta%28t%29" alt="\beta(t)" eeimg="1"/> 的离散版本，可以任意的作为任意一期tenor的计价单位。 离散计价单位相较于计价单位的好处是可以由现成的Libor tenor组成而不需要依赖于固定期限的bond（虽然Libor也可以由bond组成），因此可以很好的匹配到很多现有的流动产品上。这个特性使得Libor Measure可以用于和T-Forward Measure组成百慕大产品所使用的Hybrid Measure。 这里举AP书中的例子：</p><p>假设有 <img src="https://www.zhihu.com/equation?tex=T_1+...+T_N" alt="T_1 ... T_N" eeimg="1"/> N个tenor，取最后一期tenor的Forward Measure作为计价单位， 对于零息债V任意一个到期T，都有：</p><p><img src="https://www.zhihu.com/equation?tex=V%28t%29+%3D+P%28t%2C+T_N%29+E_t%5E%7BT_N%7D%28V%28T%29%2FP%28T%2CT_N%29%29++++%5Ctag1" alt="V(t) = P(t, T_N) E_t^{T_N}(V(T)/P(T,T_N))    \tag1" eeimg="1"/> </p><p>考虑上篇中提到的N期轮动投资债券，即在每一期初 <img src="https://www.zhihu.com/equation?tex=T_i" alt="T_i" eeimg="1"/> 购入在 <img src="https://www.zhihu.com/equation?tex=T_%7Bi%2B1%7D" alt="T_{i+1}" eeimg="1"/> 到期的零息债券并持续N期<i>，</i>对于第n和n+1期之间的时间点t来说，他的价值就是Libor Measure：</p><p><img src="https://www.zhihu.com/equation?tex=B%28t%29+%3D+%5Cprod_%7Bi%3D0%7D%5E%7BN%7D1%2F%28P%28T_i+%2CT_%7Bi%2B1%7D%29%29+P%28t%2CT_%7Bn%2B1%7D%29+%5Ctag+2" alt="B(t) = \prod_{i=0}^{N}1/(P(T_i ,T_{i+1})) P(t,T_{n+1}) \tag 2" eeimg="1"/></p><p>如果将 <img src="https://www.zhihu.com/equation?tex=V%28T%29+" alt="V(T) " eeimg="1"/> 轮动， payoff <img src="https://www.zhihu.com/equation?tex=V%28T%29%2FP%28T%2CT_N%29" alt="V(T)/P(T,T_N)" eeimg="1"/> 亦可以表示为 <img src="https://www.zhihu.com/equation?tex=V%28T%29%2FB%28T%29+%5Ccdot+B%28T_N%29" alt="V(T)/B(T) \cdot B(T_N)" eeimg="1"/> ，因此计价单位不变地也有：</p><p><img src="https://www.zhihu.com/equation?tex=V%28t%29+%3D+P%28t%2C+T_N%29+E_t%5E%7BT_N%7D%28V%28T%29%2FB%28T%29+%5Ccdot+B%28T_N%29%29++++%5Ctag3" alt="V(t) = P(t, T_N) E_t^{T_N}(V(T)/B(T) \cdot B(T_N))    \tag3" eeimg="1"/> </p><p>之所以能这么做是因为对于正好对齐tenor的贴现率来说： <img src="https://www.zhihu.com/equation?tex=P%28T%2CT_N%29+%3D+%5Cfrac%7BB%28T%29%7D%7BB%28T_N%29%7D" alt="P(T,T_N) = \frac{B(T)}{B(T_N)}" eeimg="1"/> </p><p>代表轮动投资的B除了能替代远期的贴现率意外还可以使得其期望不变，留意如果对T_N测度下的 <img src="https://www.zhihu.com/equation?tex=1%2FP%28T%2CT_N%29" alt="1/P(T,T_N)" eeimg="1"/> 向B测度进行变换的话会得到：</p><p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Balign%7D+E_T%5E%7BT_N%7D%5B%5Cfrac%7B1%7D%7BP%28T%2CT_N%29%7D%5D++%26%3D+E_T%5E%7BT_N%7D%5B%5Cfrac%7BB%28T_N%29%7D%7BB%28T%29%7D%5D+%5C%5C+%26%3DE_T%5E%7BB%7D%5B%5Cfrac%7BB%28T_N%29%7D%7BB%28T%29%7D+%5Ccdot+%5Cfrac%7BP%28T_N%2CT_N%29%2FB%28T_N%29%7D%7BP%28T%2CT_N%29%2FB%28T%29%7D%5D%5C%5C+%26%3DE_T%5E%7BB%7D%5B%5Cfrac%7BB%28T_N%29%7D%7BB%28T%29%7D+%5Ccdot+%5Cfrac%7B1%7D%7BB%28T_N%29%7D+%5Ccdot+%5Cfrac%7BB%28T%29%7D%7BP%28T%2CT_N%29%7D%5D%5C%5C+%26%3DE_T%5E%7BB%7D%5B%5Cfrac%7B1%7D%7BP%28T%2CT_N%29%7D%5D%5C%5C+%5Cend%7Balign%7D" alt="\begin{align} E_T^{T_N}[\frac{1}{P(T,T_N)}]  &= E_T^{T_N}[\frac{B(T_N)}{B(T)}] \\ &=E_T^{B}[\frac{B(T_N)}{B(T)} \cdot \frac{P(T_N,T_N)/B(T_N)}{P(T,T_N)/B(T)}]\\ &=E_T^{B}[\frac{B(T_N)}{B(T)} \cdot \frac{1}{B(T_N)} \cdot \frac{B(T)}{P(T,T_N)}]\\ &=E_T^{B}[\frac{1}{P(T,T_N)}]\\ \end{align}" eeimg="1"/> </p><p>也能得到不变的结果。由于变换至Libor Measure的金融含义是对T时刻的payoff进行轮动投资，以上结果说明了，对于V而言，持有到期后轮动投资能获得和持有到期一样的期望（需要假设在同一个tenor structure下，这个假设是合理的，因为定价时所有产品都默认采用同一个tenor structure，同时同一个tenor structure下不同产品满足无套利）。这样做的意义在于，轮动投资可以延长任意期的tenor但是确保到期T时刻相同的payoff能获得一样的期望，这样的行为使得混合测度的拼接成为了可能。 </p><p class="ztext-empty-paragraph"><br/></p><p><b>Hybrid Measure of Libor and T-Forward:</b></p><p>所谓的混合测度，其应用场景就是产品所用的计价单位一个不小心在产品到期前就先到期了。结合上文的例子可以试想一个带有障碍的百慕大产品，原定的到期日为 <img src="https://www.zhihu.com/equation?tex=T_N" alt="T_N" eeimg="1"/> ,但是不巧运行到第B个tenor <img src="https://www.zhihu.com/equation?tex=T_B" alt="T_B" eeimg="1"/> 就敲出了，payoff提前发了下来后如无其风险偏好，投资者会进行正常的轮动投资（这是货币的市场价格，投资者实际上不一定会轮动，但是产品的定价必须按照正常在货币市场账户中轮动后的情况进行，也就是所谓的无套利）。在这种情况下，我们必须在其到期后对资产立马构建一个当期的Libor Measure（这里注意，用Q Measure也能达到一样的效果，而Libor Measure的优点如文章开头所说：可以由现成的Libor tenor组成而不需要依赖于固定期限的bond，因此不需要额外进行“对齐”）， 我们定义如下计价单位：</p><p><img src="https://www.zhihu.com/equation?tex=%5Ctilde%7BP%7D%28t%2CT%29+%3D+++++%5Cbegin%7Bcases%7D+++++P%28t%2CT%29%2C+~~~~+t%5Cleq+T%5C%5C+++++B%28t%29%2FB%28T%29%2C+~~~~+t%5Cgeq+T%5C%5C+++++%5Cend%7Bcases%7D++%5Ctag4" alt="\tilde{P}(t,T) =     \begin{cases}     P(t,T), ~~~~ t\leq T\\     B(t)/B(T), ~~~~ t\geq T\\     \end{cases}  \tag4" eeimg="1"/> </p><p>这个测度代表了，i.在0时刻买一个在T时刻价值为1块钱的零息债； ii.零息债到期后马上把1块钱进行轮动债券投资。</p><p>这样一个计价单位，可以允许计算期望时期望例外的到期不一致（同理，超过到期的部分视为进入轮动债券投资）。对于一个在预定到期日前提前到期（ <img src="https://www.zhihu.com/equation?tex=T+%3C+T_N" alt="T < T_N" eeimg="1"/> )的产品， 我们有：</p><p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Balign%7D++++V%28t%29+%26%3D+%5Ctilde%7BP%7D%28t%2CT%29E%5E%7B%5Ctilde%7BQ%5ET%7D%7D_t%5BV%28T_N%29%2F%5Ctilde%7BP%7D%28T_N%2CT%29%5D%5C%5C+++%26%3D+%5Ctilde%7BP%7D%28t%2CT%29E%5E%7B%5Ctilde%7BQ%5ET%7D%7D_t%5BV%28T_N%29B%28t%29%2FB%28T_N%29%5D+%5Cend%7Balign%7D++%5Ctag5+" alt="\begin{align}    V(t) &= \tilde{P}(t,T)E^{\tilde{Q^T}}_t[V(T_N)/\tilde{P}(T_N,T)]\\   &= \tilde{P}(t,T)E^{\tilde{Q^T}}_t[V(T_N)B(t)/B(T_N)] \end{align}  \tag5 " eeimg="1"/> </p><p>其中， <img src="https://www.zhihu.com/equation?tex=%5Ctilde%7BQ%5ET%7D" alt="\tilde{Q^T}" eeimg="1"/> 为 <img src="https://www.zhihu.com/equation?tex=%5Ctilde%7BP%7D%28t%2CT%29+" alt="\tilde{P}(t,T) " eeimg="1"/> 所诱导的测度，上式中并未要求时间点一定在产品实际到期之前，如果产品未到期，上式可简化为： <img src="https://www.zhihu.com/equation?tex=%5C%5B+P%28t%2CT%29E%5E%7B%5Ctilde%7BQ%5ET%7D%7D_t%5BV%28T_N%29B%28t%29%2FB%28T_N%29%5D%5C%5D" alt="\[ P(t,T)E^{\tilde{Q^T}}_t[V(T_N)B(t)/B(T_N)]\]" eeimg="1"/> </p><p>式中在实际到期早于原定payoff而不能确定的部分为 <img src="https://www.zhihu.com/equation?tex=V%28T_N%29%2FB%28T_N%29" alt="V(T_N)/B(T_N)" eeimg="1"/> ，这一部分可以用轮动投资的贴现方式贴现至实际到期日，因此式5的等价T-Forward价值为：</p><p><img src="https://www.zhihu.com/equation?tex=+V%28t%29+%3D+P%28t%2CT%29E%5E%7BT%7D_t%5BB%28t%29+E%5EB_T%5BV%28T_N%29%2FB%28T_N%29%5D%5D+%5Ctag6+" alt=" V(t) = P(t,T)E^{T}_t[B(t) E^B_T[V(T_N)/B(T_N)]] \tag6 " eeimg="1"/> </p><p>如无提前到期，则无需轮动投资上式简化为T-Forward的： <img src="https://www.zhihu.com/equation?tex=P%28t%2CT%29E%5ET_t%5BV%28T%29%5D" alt="P(t,T)E^T_t[V(T)]" eeimg="1"/> ，保证了混合测度在 <img src="https://www.zhihu.com/equation?tex=T+%3DT_N" alt="T =T_N" eeimg="1"/> 的limiting case下与T-Forward Measure一致。</p><p class="ztext-empty-paragraph"><br/></p><p><b>后记：</b></p><p>文中只提供了Libor 和T-Forward的混合测度一例，是基于投资者会进行正常的轮动投资的假设下的。 如果投资者不进行轮动投资，则混合的另一方不为Libor Measure ，而是其与其再投资方式相关的更加复杂的混合测度（复杂的操作必然导致计价单位本身式混合的）。由于定价时无法揣测投资者在提前到期收到payoff后的行为，轮动投资是一个无风险且不失一般性的假设。</p><p>本文的方法提供了一个这样的思路：如果一个产品在在不同计价单位的limiting case下能保持期望一致，那么他们就可以拼接组成新的计价单位作为可能同时存在多种不同计价单位状态产品的专属计价单位。 这种复合方式存在非常多重，读者们可以自行思考或者创造。</p><p>另外本文的描述可以存在一些问题，概念也许不太明确，这段时间会持续检查并改进。</p><p>本系列接下来打算跳过Annuity Measure介绍跨币种Measure。 虽然Annuity Measure很重要也很复杂，但是其计价单位本身的构造没有任何特殊性可言，是单纯根据互换现金流专门定义，因此虽然很复杂但是可以跳过。 如果以后有机会专门介绍swaption特殊性系列可以再提。</p><p>另外，这应该是一段时间内黑猫在知乎上输出的最后一个相关专题的系列了。这个系列黑猫不太想鸽，虽然对金融行业已经几乎没有任何感情了，但是对Q系尤其是固定收益方向的模型的感情仍是极其深厚的。对于喜欢的东西，黑猫的态度一直都是想让大家知道，想让大家了解，减少大家误解的（然而，哪怕这是一个误解满天飞的时代）。所以哪怕没有丝毫动力，丧失了所有专业上的热情，至少计价单位还是要更完的。黑猫修心不足（奶奶的，原来做金融还要修心），做不到让误解和鄙视链的怨气断在自己这里；能力也不足，做不了止戈人。 但至少也要把有价值的东西传播出去。</p><p>更完之后，需要很长一段时间的闭关，休息，思考和安静。因此考虑退出一部分信息渠道，包括但不限于知乎和一些相关专业的朋友圈。 这次并没有受到什么特别大的刺激，而是黑猫真的感觉心很累，心理健康状况比较糟糕，很多事情确实需要非常仔细的思考一下了。到底要不要把quant作为职业道路？到底是迎着鄙视链而上还是退出这个循环？到底能不能接受机器学习里的思维和方法论？到底要不要继续从事金融行业？到底要怎么看待这些关系？ 这些问题，值得思考很久。毕竟人或者重要的事情就是知道自己要什么，做什么。 </p><p>最后按照惯例，本系列是“纯虚假理论”，是由一个不但理论功底不扎实也没有实践经验，还只会“唧唧歪歪装逼”的后台编写的。不指望能对从业者和学习者产生任何帮助，纯粹是笔者娱乐和消遣产物。</p><p class="ztext-empty-paragraph"><br/></p><p><b>ref：</b></p><p>Interest Rate Modeling. Volume 1: Foundations and Vanilla Models by<a href="https://link.zhihu.com/?target=https%3A//www.amazon.com/s/ref%3Ddp_byline_sr_book_1%3Fie%3DUTF8%26field-author%3DLeif%2BB.%2BG.%2BAndersen%26text%3DLeif%2BB.%2BG.%2BAndersen%26sort%3Drelevancerank%26search-alias%3Dbooks" class=" wrap external" target="_blank" rel="nofollow noreferrer">Leif B. G. Andersen</a></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
