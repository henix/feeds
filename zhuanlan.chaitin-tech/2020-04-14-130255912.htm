<h2>基本介绍</h2><p>WebSphere Application Server 是一款由IBM 公司开发的高性能的Java 中间件服务器，可用于构建、运行、集成、保护和管理部署的动态云和Web 应用。它不仅能够确保高性能和灵活性，还提供多种开放标准编程模型选项，旨在最大程度提高开发人员的生产力。</p><p>CVE-2020-4276 和CVE-2020-4362 是由长亭科技安全研究员Noxxx 发现的存在于WebSphere SOAP Connector 服务中的远程代码执行漏洞。远程且未经授权的攻击者通过利用此漏洞，可以在目标服务端执行任意恶意代码，获取系统权限。</p><h2>Q &amp; A</h2><h3>WebSphere SOAP Connector 是什么服务？</h3><p>WebSphere SOAP Connector 服务用于管理远程节点和数据同步，因此主要是在服务器与服务器之间进行通信。它的默认监听地址为0.0.0.0:8880。</p><h3>CVE-2020-4276和CVE-2020-4362 漏洞编号的由来？</h3><p>我们长亭科技于今年一月份的时候向IBM 官方报告了此漏洞，随后官方确认了漏洞，发布对应的补丁PH21511，分配漏洞编号CVE-2020-4276。但我们马上发现补丁PH21511 似乎并未起到漏洞修复的效果，于是再次与官方沟通，经过最终确认后，官方再次发布补丁PH23853，分配漏洞编号CVE-2020-4362。因此这两个CVE 编号，实际上是同一个漏洞。</p><h3>CVE-2020-4276、CVE-2020-4362 漏洞有哪些危害？</h3><p>远程且未经授权的攻击者通过成功利用此漏洞，可以在目标服务端执行任意恶意代码，获取系统权限。</p><h3>哪些版本的WebSphere 受到CVE-2020-4276、CVE-2020-4362 漏洞影响？</h3><ul><li>WebSphere Application Server 9.0.x</li><li>WebSphere Application Server 8.5.x</li><li>WebSphere Application Server 8.0.x</li><li>WebSphere Application Server 7.0.x</li></ul><h3>什么情况下的WebSphere可以被CVE-2020-4276、CVE-2020-4362 漏洞利用？</h3><p>对于受漏洞影响的WebSphere 来说，如果攻击者可以访问到其SOAP Connector 服务端口，即存在被漏洞利用的风险（WebSphereSOAP Connector 默认监听地址为0.0.0.0:8880，且此漏洞的利用无额外条件限制）。</p><p>由于WebSphere SOAP Connector 主要用于服务器之间的通信，因此多见于企业内网环境中。</p><h3>CVE-2020-4276、CVE-2020-4362 漏洞该如何修复？</h3><p>各版本WebSphere 的漏洞修复步骤：</p><ul><li>WebSphere Application Server 9.0.x：更新安全补丁PH21511 及PH23853</li><li>WebSphere Application Server 8.5.x：更新安全补丁PH21511 及PH23853</li><li>WebSphere Application Server 8.0.x：升级到8.0.0.15 版本，然后更新安全补丁PH21511 及PH23853</li><li>WebSphere Application Server 7.0.x：升级到7.0.0.45 版本，然后更新安全补丁PH21511 及PH23853</li></ul><p>可以通过运行IBM Installation Manager 进行更新，根据程序提示进行补丁下载、漏洞修复的工作：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-f0cf0d38b78e3abd9478d7ba84351544_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="572" class="origin_image zh-lightbox-thumb" width="864" data-original="https://pic1.zhimg.com/v2-f0cf0d38b78e3abd9478d7ba84351544_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-f0cf0d38b78e3abd9478d7ba84351544_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="572" class="origin_image zh-lightbox-thumb lazy" width="864" data-original="https://pic1.zhimg.com/v2-f0cf0d38b78e3abd9478d7ba84351544_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-f0cf0d38b78e3abd9478d7ba84351544_b.jpg"/></figure><p>也可以前往官方地址，手动进行补丁下载、漏洞修复的工作：</p><a href="https://link.zhihu.com/?target=https%3A//www.ibm.com/support/pages/node/6118222" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Security Bulletin: Privilege Escalation Vulnerability in WebSphere Application Server (CVE-2020-4276)</a><a href="https://link.zhihu.com/?target=https%3A//www.ibm.com/support/pages/node/6174417" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Security Bulletin: Privilege Escalation Vulnerability in WebSphere Application Server (CVE-2020-4362)</a><h2>漏洞防护方案</h2><p>IBM 官方并未给出漏洞的临时缓解防护办法，如果无法进行补丁更新升级，建议使用雷池WAF 并配置自定义规则对该漏洞进行安全防护。效果见下图：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-3d37d32ab54310cb0e842f43fd2a6509_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="247" class="origin_image zh-lightbox-thumb" width="864" data-original="https://pic2.zhimg.com/v2-3d37d32ab54310cb0e842f43fd2a6509_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-3d37d32ab54310cb0e842f43fd2a6509_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="247" class="origin_image zh-lightbox-thumb lazy" width="864" data-original="https://pic2.zhimg.com/v2-3d37d32ab54310cb0e842f43fd2a6509_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-3d37d32ab54310cb0e842f43fd2a6509_b.jpg"/></figure><h2>漏洞检测方案</h2><p>长亭洞鉴（X-Ray）提供了快速无损检测方法，在漏洞检测过程中不会改动原有的任何信息,不会对服务器造成任何影响。检测方法如下：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-870bfa0358a1a8020627b5dabf62a8e0_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="235" class="origin_image zh-lightbox-thumb" width="864" data-original="https://pic1.zhimg.com/v2-870bfa0358a1a8020627b5dabf62a8e0_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-870bfa0358a1a8020627b5dabf62a8e0_b.jpg" data-caption="" data-size="normal" data-rawwidth="864" data-rawheight="235" class="origin_image zh-lightbox-thumb lazy" width="864" data-original="https://pic1.zhimg.com/v2-870bfa0358a1a8020627b5dabf62a8e0_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-870bfa0358a1a8020627b5dabf62a8e0_b.jpg"/></figure><ol><li>在洞鉴（X-Ray）安全评估系统上，上传相应引擎升级包，进行升级</li><li>扫描策略-应急响应策略，选择相应的扫描策略开启任务</li><li>查看扫描结果：查看漏洞详情描述、受影响位置及修复方案</li></ol><h2>时间线</h2><ul><li>2020/01/26：长亭科技向IBM 官方报告此漏洞</li><li>2020/03/25：IBM 官方分配漏洞编号CVE-2020-4276，发布补丁PH21511</li><li>2020/03/26：长亭科技发现漏洞修补不当，再次与官方沟通确认漏洞情况</li><li>2020/04/09：IBM 官方再次分配漏洞编号CVE-2020-4362，发布补丁PH23853</li><li>2020/04/13:   长亭科技公开漏洞信息</li></ul><h2>参考链接</h2><a href="https://link.zhihu.com/?target=https%3A//www.ibm.com/support/pages/node/6118222" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Security Bulletin: Privilege Escalation Vulnerability in WebSphere Application Server (CVE-2020-4276)</a><a href="https://link.zhihu.com/?target=https%3A//www.ibm.com/support/pages/node/6174417" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">Security Bulletin: Privilege Escalation Vulnerability in WebSphere Application Server (CVE-2020-4362)</a><p></p>