<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>关于计价单位2 ——T-远期测度</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/74091260">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-582a24682bccd7ddf4d0bdd6325b96c6_r.jpg" alt=""></div><p><b>本系列专注“虚假理论”，与“预测”，“交易策略”，"期权策略"等贴近交易的内容毫不相关。不感兴趣的知友可以继续右上角了。、</b></p><p class="ztext-empty-paragraph"><br/></p><p><b>前言：</b></p><p>本系列第二章讨论的是远期测度和随机贴现因子问题，说到远期测度(T-forward measure）就不得不提远期债。</p><p>实现远期测度不难，只需要把贴现因子从货币市场的贴现因子换成无风险债券PV（注意这两者不一样）就可以了（或者说以债券价格作为贴现率的产品自然在T-远期测度下 <img src="https://www.zhihu.com/equation?tex=V%28t%29+%3D+P%28t%2CT%29E_t%5ET%28V%28T%29%29" alt="V(t) = P(t,T)E_t^T(V(T))" eeimg="1"/> 。但是单单这样讲就是去了意义，远期测度和中性测度最大的不同除了最明显贴现因子不同以外，在于这一测度的形成混入了债券波动率的期限结构。由于这涉及到了债券和远期债券自身收益的dynamic，所以脱离经典的HJM框架来谈远期测度是不现实的。</p><p>之前回答的答案：</p><a data-draft-node="block" data-draft-type="link-card" href="https://www.zhihu.com/question/59120463/answer/165876496" class="internal">HJM 模型框架（又称元模型）和一般的利率过程有什么本质区别？</a><p>是以瞬时远期率构建HJM框架的。而这一次为了解释远期测度，会参考AP红书第四章的部分，从远期债的收益这一角度再次构建HJM框架。（有的读者可能觉得"你这不是回字的另一种写法么，虚假理论。" 那你们右上角就好了，本文的内容就是自娱自乐，自我高潮的虚假理论）</p><p class="ztext-empty-paragraph"><br/></p><p><b>Bond and Forward Bond Dynamic ：</b></p><p>首先约定货币市场账户beta为：</p><p><img src="https://www.zhihu.com/equation?tex=d%5Cbeta%28t%29+%3D+r%28t%29%5Cbeta%28t%29dt%2C+~%5Cbeta%280%29+%3D1+%5Ctag1" alt="d\beta(t) = r(t)\beta(t)dt, ~\beta(0) =1 \tag1" eeimg="1"/> </p><p>令债全终值过程 <img src="https://www.zhihu.com/equation?tex=P_%7B%5Cbeta%7D%28t%2CT%29+%3D+P%28t%2CT%29%2F%5Cbeta%28t%29" alt="P_{\beta}(t,T) = P(t,T)/\beta(t)" eeimg="1"/> 为：</p><p><img src="https://www.zhihu.com/equation?tex=dP_%7B%5Cbeta%7D%28t%2CT%29+%3D+-P_%7B%5Cbeta%7D%28t%2CT%29%5Csigma_p%28t%2CT%29dW%28t%29+%5Ctag2" alt="dP_{\beta}(t,T) = -P_{\beta}(t,T)\sigma_p(t,T)dW(t) \tag2" eeimg="1"/> </p><p>其中 <img src="https://www.zhihu.com/equation?tex=%5Csigma_p%28t%2CT%29" alt="\sigma_p(t,T)" eeimg="1"/> 债券收益的波动率，可以由瞬时远期率的波动率构造。我们可以人为该波动率是t-adapted的，并且在到期时为0。</p><p>由于是终值，债券终值直接就是中性测度下的鞅。接下来会尝试推导AP红书第四章的部分中省略的大部分断言的计算（AP这本书作为参考书很好，但是作为学习书非常不友好，其省略了大量证明）。</p><p>由于 <img src="https://www.zhihu.com/equation?tex=P_%7B%5Cbeta%7D%28t%2CT%29%5Cbeta%28t%29+%3D++P%28t%2CT%29" alt="P_{\beta}(t,T)\beta(t) =  P(t,T)" eeimg="1"/> </p><p>使用伊藤乘法我们有：</p><p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Balign%7D++dP%28t%2CT%29++%26%3D+dP_%7B%5Cbeta%7D%28t%2CT%29%5Cbeta%28t%29+%5C%5C+%26%3D+P_%7B%5Cbeta%7D%28t%2CT%29d%5Cbeta%28t%29++%2B+%5Cbeta%28t%29dP_%7B%5Cbeta%7D%28t%2CT%29+%2B+0+%5C%5C+%26%3D+r%28t%29P_%7B%5Cbeta%7D%28t%2CT%29%5Cbeta%28t%29dt+-+P_%7B%5Cbeta%7D%28t%2CT%29%5Csigma_p%28t%2CT%29%5Cbeta%28t%29dW%28t%29+%5C%5C+%26%3Dr%28t%29P%28t%2CT%29dt+-+P%28t%2CT%29%5Csigma_p%28t%2CT%29dW%28t%29+%5Cend%7Balign%7D++%5Ctag3" alt="\begin{align}  dP(t,T)  &= dP_{\beta}(t,T)\beta(t) \\ &= P_{\beta}(t,T)d\beta(t)  + \beta(t)dP_{\beta}(t,T) + 0 \\ &= r(t)P_{\beta}(t,T)\beta(t)dt - P_{\beta}(t,T)\sigma_p(t,T)\beta(t)dW(t) \\ &=r(t)P(t,T)dt - P(t,T)\sigma_p(t,T)dW(t) \end{align}  \tag3" eeimg="1"/> </p><p>这里不得不吐槽一句，有些金融数学书籍和文章有个很不好的习惯，就是用 <img src="https://www.zhihu.com/equation?tex=dX_t%2FX_t" alt="dX_t/X_t" eeimg="1"/> 做notation去表示 <img src="https://www.zhihu.com/equation?tex=dln%28X_t%29" alt="dln(X_t)" eeimg="1"/> 而不是表达dX<i>t 除以X_t</i>的含义。他们虽然最后计算可能是正确的，但是会给人非常大的误解。AP系列非常好的避免了这个误解。而且注意， <img src="https://www.zhihu.com/equation?tex=dln%28X_t%29" alt="dln(X_t)" eeimg="1"/> 表示的才是X在t时刻的的瞬时收益， dX_t/X_t并不是，他只表达了X的dynamic。</p><p>接下来我们定义远期债：</p><p><img src="https://www.zhihu.com/equation?tex=P%28t%2CT%2CT%2B%5Ctau%29+%3D+P%28t%2CT%2B%5Ctau%29+%2FP%28t%2CT%29" alt="P(t,T,T+\tau) = P(t,T+\tau) /P(t,T)" eeimg="1"/> </p><p>他表示了在t时刻看来，T+\tau时刻到期的债券在T时刻的价值</p><p>为了求远期债的dynmiac，我们必须先求 <img src="https://www.zhihu.com/equation?tex=d%281%2FP%28t%2CT%29%29" alt="d(1/P(t,T))" eeimg="1"/> ：</p><p>令f =1/X 则 <img src="https://www.zhihu.com/equation?tex=f%27+%3D+-%5Cfrac%7B1%7D%7BX%5E2%7D%2C+~f%27%27+%3D+%5Cfrac%7B2%7D%7BX%5E3%7D" alt="f' = -\frac{1}{X^2}, ~f'' = \frac{2}{X^3}" eeimg="1"/> ,由伊藤公式得：</p><p><img src="https://www.zhihu.com/equation?tex=d%281%2FP%28t%2CT%29%29+%3D+%28-+%5Cfrac%7Br%28t%29%7D%7BP%28t%2CT%29%7D+%2B%5Cfrac%7B%5Csigma%5E2_p%28t%2CT%29%7D%7BP%28t%2CT%29%7D+%29dt+%2B%5Cfrac%7B%5Csigma_p%28t%2CT%29%7D%7BP%28t%2CT%29%7D+dW%28t%29+%5Ctag4" alt="d(1/P(t,T)) = (- \frac{r(t)}{P(t,T)} +\frac{\sigma^2_p(t,T)}{P(t,T)} )dt +\frac{\sigma_p(t,T)}{P(t,T)} dW(t) \tag4" eeimg="1"/> </p><p>由式3，4和伊藤乘法我们有：</p><p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Balign%7D++dP%28t%2CT%2C+T%2B%5Ctau%29++%26%3D+dP%28t%2CT%2B%5Ctau%29%2FP%28t%2CT%29+%5C%5C+%26%3D++P%28t%2CT%2B%5Ctau%29d%5B1%2FP%28t%2CT%29%5D+%2B+1%2FP%28t%2CT%29dP%28t%2CT%2B%5Ctau%29+%2B+d%5B1%2FP%28t%2CT%29%5DdP%28t%2CT%2B%5Ctau%29+%5C%5C+++%5Cend%7Balign%7D" alt="\begin{align}  dP(t,T, T+\tau)  &= dP(t,T+\tau)/P(t,T) \\ &=  P(t,T+\tau)d[1/P(t,T)] + 1/P(t,T)dP(t,T+\tau) + d[1/P(t,T)]dP(t,T+\tau) \\   \end{align}" eeimg="1"/> </p><p>我们分开计算： </p><p><img src="https://www.zhihu.com/equation?tex=+%5Cbegin%7Balign%7D+P%28t%2CT%2B%5Ctau%29d%5B1%2FP%28t%2CT%29%5D+%26%3D+%28-P%28t%2CT%2CT%2B%5Ctau%29r%28t%29+%2B+P%28t%2CT%2CT%2B%5Ctau%29%5Csigma%5E2_p%28t%2CT%29%29dt+%2BP%28t%2CT%2CT%2B%5Ctau%29%5Csigma_p%28t%2CT%29dW%28t%29+%5C%5C+dP%28t%2CT%2B%5Ctau%29%2FP%28t%2CT%29+%26%3D+P%28t%2CT%2CT%2B%5Ctau%29r%28t%29dt+-+P%28t%2CT%2CT%2B%5Ctau%29%5Csigma_p%28t%2CT%2B%5Ctau%29dW%28t%29+%5C%5C+d%5B1%2FP%28t%2CT%29%5DdP%28t%2CT%2B%5Ctau%29+%26%3D+P%28t%2CT%2CT%2B%5Ctau%29%5Csigma_p%28t%2CT%29%5Csigma_p%28t%2CT%2B%5Ctau%29dt+%5Cend%7Balign%7D" alt=" \begin{align} P(t,T+\tau)d[1/P(t,T)] &= (-P(t,T,T+\tau)r(t) + P(t,T,T+\tau)\sigma^2_p(t,T))dt +P(t,T,T+\tau)\sigma_p(t,T)dW(t) \\ dP(t,T+\tau)/P(t,T) &= P(t,T,T+\tau)r(t)dt - P(t,T,T+\tau)\sigma_p(t,T+\tau)dW(t) \\ d[1/P(t,T)]dP(t,T+\tau) &= P(t,T,T+\tau)\sigma_p(t,T)\sigma_p(t,T+\tau)dt \end{align}" eeimg="1"/> </p><p>最后我们有：</p><p><img src="https://www.zhihu.com/equation?tex=+%5Cbegin%7Balign%7D+dP%28t%2CT%2C+T%2B%5Ctau%29+%3D++%26-P%28t%2CT%2C+T%2B%5Ctau%29%5B%5Csigma_p%28t%2C+T%2B%5Ctau%29+-+%5Csigma_p%28t%2C+T%29%5D+%5Csigma_p%28t%2C+T%29dt++%5C%5C++%26-P%28t%2CT%2C+T%2B%5Ctau%29%5B%5Csigma_p%28t%2C+T%2B%5Ctau%29+-+%5Csigma_p%28t%2C+T%29%5D+dW%28t%29++%5Ctag5+%5Cend%7Balign%7D" alt=" \begin{align} dP(t,T, T+\tau) =  &-P(t,T, T+\tau)[\sigma_p(t, T+\tau) - \sigma_p(t, T)] \sigma_p(t, T)dt  \\  &-P(t,T, T+\tau)[\sigma_p(t, T+\tau) - \sigma_p(t, T)] dW(t)  \tag5 \end{align}" eeimg="1"/> </p><p>然后我们令(上一篇中的girsanov定理告诉我们这么做是可行的）：</p><p><img src="https://www.zhihu.com/equation?tex=dW%5ET%28t%29+%3D+%5Csigma_p%28t%2CT%29+%2B+dW%28t%29++%5Ctag6" alt="dW^T(t) = \sigma_p(t,T) + dW(t)  \tag6" eeimg="1"/> </p><p>当前所在的测度我们就称之为 T-远期测度 或 <img src="https://www.zhihu.com/equation?tex=Q%5ET" alt="Q^T" eeimg="1"/> 。他对应的RN导数为：</p><p><img src="https://www.zhihu.com/equation?tex=+%5Cbegin%7Balign%7D+%5Cvarsigma%28t%29+%3D+E_t%5EQ%28%5Cfrac%7BdQ%5ET%7D%7BdQ%7D%29+%26%3D+%5Cvarepsilon%28-%5Cint_0%5Et%5Csigma_p%28u%2CT%29dW%28u%29%29+%5C%5C+d%5Cvarsigma%28t%29%2F%5Cvarsigma%28t%29+%26%3D+-%5Csigma_p%28t%2CT%29dW%28t%29+%5Cend%7Balign%7D+%5Ctag7" alt=" \begin{align} \varsigma(t) = E_t^Q(\frac{dQ^T}{dQ}) &= \varepsilon(-\int_0^t\sigma_p(u,T)dW(u)) \\ d\varsigma(t)/\varsigma(t) &= -\sigma_p(t,T)dW(t) \end{align} \tag7" eeimg="1"/> </p><p>如此，我们就有了远期债是 <img src="https://www.zhihu.com/equation?tex=Q%5ET" alt="Q^T" eeimg="1"/> 下鞅的这个结论：</p><p><img src="https://www.zhihu.com/equation?tex=dP%28t%2CT%2C+T%2B%5Ctau%29+%3D+-P%28t%2CT%2C+T%2B%5Ctau%29%5B%5Csigma_p%28t%2C+T%2B%5Ctau%29+-+%5Csigma_p%28t%2C+T%29%5D+dW%5ET%28t%29++%5Ctag8" alt="dP(t,T, T+\tau) = -P(t,T, T+\tau)[\sigma_p(t, T+\tau) - \sigma_p(t, T)] dW^T(t)  \tag8" eeimg="1"/> </p><p class="ztext-empty-paragraph"><br/></p><p><b>Forward Rate Dynamic ：</b></p><p>讲到远期债，就不得不提远期率（forward rate）。可以认为，远期测度和远期债，远期率这三个概念是一体的。尤其是解析bond dyanmic的HJM框架也是从远期率构造来的。</p><p>我们首先知道凡是率都可以分为单利，复利和瞬时率这三种。我们知道Libor是远期单利，我们这里谈的远期率则是瞬时的远期率。</p><p>老生常谈的根据上面的远期债，Libor可以定义为：</p><p><img src="https://www.zhihu.com/equation?tex=1+%2B+%5Ctau+L%28t%2CT%2CT%2B%5Ctau%29+%3D+1%2FP%28t%2CT%2CT%2B%5Ctau%29+%5Ctag%7B9%7D" alt="1 + \tau L(t,T,T+\tau) = 1/P(t,T,T+\tau) \tag{9}" eeimg="1"/> </p><p>那么我们可以定义瞬时远期率f(t,T)为，极短tenor内的Libor：</p><p><img src="https://www.zhihu.com/equation?tex=+%5Clim_%7B%5Ctau+%5Crightarrow+0%7D%7BL%28t%2CT%2CT%2B%5Ctau%29+%7D+%3Df%28t%2CT%29+%5Ctag%7B10%7D+" alt=" \lim_{\tau \rightarrow 0}{L(t,T,T+\tau) } =f(t,T) \tag{10} " eeimg="1"/> </p><p>所有远期率可以都作为远期债在T至T+\tau的相对于T时刻的贴现率，区别只是贴现方式。单利如式9所示，贴现使用的是数乘。到期复利使用的则是指数。那么自然瞬时率使用的即是指数里的积分了：</p><p><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Balign%7D+P%28t%2CT%2CT%2B%5Ctau%29+%26%3D+e%5E%7B-%5Cint_T%5E%7BT%2B%5Ctau%7D+f%28t%2Cu%29du%7D+%5C%5C+or+~~f%28t%2CT%29+%26%3D+-%5Cfrac%7B%5Cpartial+lnP%28t%2CT%29%7D%7B%5Cpartial+T%7D+%5Ctag%7B11%7D+%5Cend%7Balign%7D" alt="\begin{align} P(t,T,T+\tau) &= e^{-\int_T^{T+\tau} f(t,u)du} \\ or ~~f(t,T) &= -\frac{\partial lnP(t,T)}{\partial T} \tag{11} \end{align}" eeimg="1"/> </p><p>有了式11，我们可以尝试使用bond dynamic去反项推导所对应的瞬时远期率过程（HJM的核心内容）</p><p>由伊藤公式我们有：</p><p><img src="https://www.zhihu.com/equation?tex=dlnP%28t%2C+T%29+%3D+%28r%28t%29+-+%5Cfrac%7B1%7D%7B2%7D%5Csigma%5E2_p%28t%2CT%29%29dt+-+%5Csigma_p%28t%2CT%29dW%28t%29+%5Ctag%7B12%7D" alt="dlnP(t, T) = (r(t) - \frac{1}{2}\sigma^2_p(t,T))dt - \sigma_p(t,T)dW(t) \tag{12}" eeimg="1"/> </p><p>(再次强调dln(X) 和dX/X的区别）</p><p>这个时候看起来们只需要对两边同时取T的微分就能得到远期率的dynamic了，实则不然，因为我们还没有讨论远期率和T-远期测度的关系。由Libor的定义我们知道他是 1/P(t,T,T+\tau)的和常数的线性函数。 我们对远期债的dynamic再次使用伊藤定理：</p><p><img src="https://www.zhihu.com/equation?tex=d%5B1%2FP%28t%2CT%2CT%2B%5Ctau%29+%5D+++%3D%5Cfrac%7B%5B%5Csigma_p%28t%2C+T%2B%5Ctau%29+-+%5Csigma_p%28t%2C+T%29%5D+%5Csigma_p%28t%2C+T%2B%5Ctau%29dt%5C+%2B+%5B%5Csigma_p%28t%2C+T%2B%5Ctau%29+-+%5Csigma_p%28t%2C+T%29%5D+dW%28t%29%7D%7BP%28t%2CT%2CT%2B%5Ctau%29%7D" alt="d[1/P(t,T,T+\tau) ]   =\frac{[\sigma_p(t, T+\tau) - \sigma_p(t, T)] \sigma_p(t, T+\tau)dt\ + [\sigma_p(t, T+\tau) - \sigma_p(t, T)] dW(t)}{P(t,T,T+\tau)}" eeimg="1"/> </p><p>同上节，令：</p><p><img src="https://www.zhihu.com/equation?tex=dW%5E%7BT%2B%5Ctau%7D%28t%29+%3D+%5Csigma_p%28t%2CT%2B%5Ctau%29+%2B+dW%28t%29++%5Ctag%7B13%7D" alt="dW^{T+\tau}(t) = \sigma_p(t,T+\tau) + dW(t)  \tag{13}" eeimg="1"/> </p><p>则我们可知1/P(t,T,T+\tau) 是 <img src="https://www.zhihu.com/equation?tex=Q%5E%7BT%2B%5Ctau%7D" alt="Q^{T+\tau}" eeimg="1"/> 下的鞅，进而知道Libor也是<img src="https://www.zhihu.com/equation?tex=Q%5E%7BT%2B%5Ctau%7D" alt="Q^{T+\tau}" eeimg="1"/> 下的鞅。（所以Libor也是一个远期测度下的und）</p><p>由于根据式10中瞬时远期率的定义，我们知道当\tau趋于0时，瞬时远期率是 <img src="https://www.zhihu.com/equation?tex=Q%5ET" alt="Q^T" eeimg="1"/> 下的鞅。</p><p>我们知道瞬时远期率是对数债券lnP(t, T)对到期日的偏导。直接对式12两边同时对T求偏导我们得到：</p><p><img src="https://www.zhihu.com/equation?tex=df%28t%2CT%29+%3D%5Cfrac%7B%5Cpartial%5Csigma_p%28t%2CT%29%7D%7B%5Cpartial+T%7D%5Csigma_p%28t%2CT%29dt+%2B+%5Cfrac%7B%5Cpartial%5Csigma_p%28t%2CT%29%7D%7B%5Cpartial+T%7DdW%28t%29+%5Ctag%7B14%7D" alt="df(t,T) =\frac{\partial\sigma_p(t,T)}{\partial T}\sigma_p(t,T)dt + \frac{\partial\sigma_p(t,T)}{\partial T}dW(t) \tag{14}" eeimg="1"/> </p><p>其中我们令 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B%5Cpartial%5Csigma_p%28t%2CT%29%7D%7B%5Cpartial+T%7D+%3D+%5Csigma_f%28t%2CT%29" alt="\frac{\partial\sigma_p(t,T)}{\partial T} = \sigma_f(t,T)" eeimg="1"/> 作为瞬时远期率的则有：</p><p><img src="https://www.zhihu.com/equation?tex=df%28t%2CT%29+%3D%5Csigma_f%28t%2CT%29%5Cint_t%5ET%5Csigma_f%28t%2Cu%29du+%2B+%5Csigma_f%28t%2CT%29dW%28t%29+%5Ctag%7B15%7D" alt="df(t,T) =\sigma_f(t,T)\int_t^T\sigma_f(t,u)du + \sigma_f(t,T)dW(t) \tag{15}" eeimg="1"/> </p><p>同时因为瞬时远期率是 <img src="https://www.zhihu.com/equation?tex=Q%5ET" alt="Q^T" eeimg="1"/> 下的鞅，我们可以先得出这样的结论：</p><p><img src="https://www.zhihu.com/equation?tex=df%28t%2CT%29+%3D%5Csigma_f%28t%2CT%29dW%5ET%28t%29+%5Ctag%7B16%7D+" alt="df(t,T) =\sigma_f(t,T)dW^T(t) \tag{16} " eeimg="1"/> </p><p>我们发现通过式14和式16所得出的结果与式6的测度变换方式吻合，因此验证了这个结论的正确性。其中式15是HJM文章中的主要结论。</p><p class="ztext-empty-paragraph"><br/></p><p class="ztext-empty-paragraph"><br/></p><p><b>后记：</b></p><p>本文标题是远期测度，但是实际上从bond dynamic出发重新推导了HJM框架的主要内容。这看上去只是“回字的另一种写法”，但是不从bond dynamic出发就很难理解什么时产品是T-远期测度下建模的，什么产品用T-远期测度贴现（反过来想尝尝会被人忽略，比如说一个远期债的衍生品，如果没反应过来还在中性测度下建模，则模型会出错）。</p><p>HJM框架可以是说是这个过程的副产品。 之所以称其为框架而不是模型，是因为它是表达bond dynamic与forward rate dynamic之间必然联系的结构，不随具体model和dynamic而改变。哪怕对bond 与forward rate 使用知乎用户最喜欢的神经网络进行建模，他们仍得满足这个关系。</p><p>最后按照惯例，本系列是“纯虚假理论”，是由一个不但理论功底不扎实也没有实践经验，还只会“唧唧歪歪装逼”的后台编写的。不指望能对从业者和学习者产生任何帮助，纯粹是笔者娱乐和消遣产物。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
