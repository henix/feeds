<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>迷思</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/</link>
<description>我的博客及微信公众号里的精华内容都会放在这里。 我的博客及微信公众号里的精华内容都会放在这里。</description>
<language>zh-cn</language>
<lastBuildDate>Sat, 26 Oct 2019 19:39:58 +0800</lastBuildDate>
<item>
<title>我的冥想盆</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-10-23-88189139.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/88189139&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-45083cd94fd11c9ab8aafdc3ad10bb05_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;有次在和同事 1:1 的时候，被提到了这样一个问题：你是如何能写出内容如此丰富的文字呢？&lt;/p&gt;&lt;p&gt;这个问题问得我有些楞。我虽然这两年来文章更新的频率断崖式下跌，但平胸而论，我要是想写，要是有时间去写，一天一篇文字，并不在话下。最近我给我们家小宝开课，顺手开启了一个比较私人的公众号，把课堂上的流水账记录下来（主要是想以后教小贝的时候可以直接捡现成的），一个月来，已经写下了三十多篇（质量参差不齐的）文章。&lt;/p&gt;&lt;p&gt;所以关键是「有野講」。&lt;/p&gt;&lt;p&gt;那问题来了，大家一天都是二十四小时，刨去工作睡觉，吃喝拉撒，剩下的时间都不多，如果努力的程度也差不多，凭什么我能输出更多的思想？&lt;/p&gt;&lt;p&gt;我想了又想，发现这和两件事有关。&lt;/p&gt;&lt;p&gt;第一是目的。这个我最近一个月感触最深。以前我也看李永乐老师，看妈咪说，看 3blue1brown，但都是抱着猎奇的心态，45° 斜躺在沙发上懒洋洋 1.5 倍速下看完视频，各种恍然大悟，各种哇靠牛逼，信息在头脑里打一圈转，丢失掉不少，剩下的就浅浅驻扎着。要说懂吧，是懂了，可真要我把同样的内容像他们那样讲给别人听，那几乎不可能。现在因为要给小宝上课，再看这些视频的时候，虽然还是 1.5 倍速，但我是正襟危坐，聚精会神，放在键盘上的双手随时准备按下暂停，cmd+shift+4 截图，然后在早已打开好的 vscode 中记录笔记。所以目的不一样，吸纳信息的质量就不一样，大脑全速运转，反复咂摸，没能充分理解的部分停下来思考，思考的同时还在想如果我要将其换个更通俗的说法讲给小宝听，该如何如何，就这么把信息拆解成知识，烙在脑海中。后来我想啊，那些我「看进去了」的视频，比如 Rich Hickey 的 Simple made easy，Scott Wlaschin 的 Railway oriented programming，Bret Victor 的 Inventing on Principle，Spotify Engineering culture 等，无不是我要写文章的时候发现的，我带着目的去看，脑子里清晰地知道我希望从中得到什么，所以看得认真，思考地认真，最后自然能将别人的思想和自己的思想融会贯通，输出的时候一切便自然地在笔尖流淌。&lt;/p&gt;&lt;p&gt;第二是笔记。所谓好记性不如烂笔头，流过大脑的信息，被手指这么一截胡，有价值的内容就不会白白流走。于是我们需要有个随时能记录知识，思考以及灵感的地方。我自己用的笔记系统经历了若干代，从 windows 时代的某个我已经忘记名字的笔记软件，到短暂尝试了 Trelby，到 scrivener，再到 evernote，都不尽如人意，最后到我自己的独家武器 —— 我称之为 pensieve 的工具集。pensieve 是邓布利多的冥想盆，用在这里恰如恰如其分。&lt;/p&gt;&lt;p&gt;我的 pensieve 工具集历经演进，目前包含这些组件：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;vscode + markdown all in one + markdown math + marp for vscode + plantuml。编辑和预览工具。&lt;/li&gt;&lt;li&gt;pandoc + Makefile + chrome-headless-render-pdf。编译系统，用于表现层 —— 任何我记录的内容可以被输出成 html，epub 和 pdf。&lt;/li&gt;&lt;li&gt;git + github。版本控制和存储系统。所有的内容我自己拥有，且随时随地可以在我的任何设备上访问。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;这套工具组合起来威力强大，且几乎不需要写什么代码 —— 嗯，仅仅需要少量的 Makefile 代码充当胶水，把一切粘合起来。它有良好的可伸缩性，小到随笔，大到写书，都能应付得过来。如果非要说缺点，就是对非程序员不够友好，毕竟不是每个人都懂 git 和 Makefile。&lt;/p&gt;&lt;p&gt;于是我的硬盘里的一个个冥想盆开始自发增长。我早期的公众号文章（以 2016 年为分水岭）和书（途客圈创业记，奇博士的管理课等），在一个叫 craftsman 的 repo 里，后来的公众号文章在 book_wechat 的 repo 里。我的天叔奇谈，在 book_tianshu 中，而我准备写给我孩子们的数学书，则放在 book_math 中：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5706f2180c8c551d58f41cefffd13c78_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;146&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-5706f2180c8c551d58f41cefffd13c78_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5706f2180c8c551d58f41cefffd13c78_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;146&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-5706f2180c8c551d58f41cefffd13c78_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-5706f2180c8c551d58f41cefffd13c78_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;这样，当我看 StrangeLoop 新上的视频，如 “Performance Matters” by Emery Berger，我就可以打开 book_wechat，开上一篇 md 开始记录有趣的内容，并思考，如果我写一篇关于 performance 的文章，我该从什么角度，选取什么内容来写；而当我跟着 Eddie Woo 学习初中数学的时候，我就打开 book_math 在合适的目录下（比如 algebra）揉进学到的知识，一边揉一边想如果把同样的内容教给小宝，如何简化，如何用图像辅助才能教得更好。就这样了，我边思考边写，想到什么写什么，不太管格式（偶尔用 ## 区隔跨度太大的内容），遇到引人深思的内容，不容易用语言表达清楚，就干脆截图，把拷下来的屏幕存贮到 repo 的 assets 下，然后在 md 中引用。如此这般。最后，在我需要回顾和对外输出内容的时候，我可以将其一气儿输出成 pdf，装在手机/ ipad 里，随时翻阅。有些内容，pdf 并不是最方便的形式（比如我做的《资治通鉴》胶片），且不太有隐私的问题，我就将其设置好 travis，每次 commit 就构建 html，然后自动部署到 netlify，于是有网络的地方就可以访问。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;当信息被转储成知识后，我再以我的方式，融合我的阅历，我的思考，将其表达出来，这便是我的知识。&lt;/p&gt;&lt;p&gt;所以，看上去并不是很难，对吧？&lt;/p&gt;&lt;hr/&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/tyrchen/unchained/tree/master/books&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;附上《天叔奇谈》的 PDF&lt;/a&gt;（现在已经有近一百五十页碎碎念，大概率对你无用），无他，就是秀一下有一个好的「冥想盆」+ 日拱一卒，会带来怎样的威力。&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-10-23-88189139</guid>
<pubDate>Wed, 23 Oct 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>就酱，在波特兰跑完人生第三个正式的马拉松</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-10-10-86015814.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/86015814&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-eaf108ca7f9ea1ecf70f5e62df55047b_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;报名&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;和波特兰马拉松结缘纯属偶然。&lt;/p&gt;&lt;p&gt;2014 年跑完北马，兴奋之余，想感受一下六大赛，结果报名芝加哥马拉松和纽约马拉松先后失败，只好退而求其次，报了波特兰马拉松。没想到，波特兰马拉松别具一格，全程跑下来，我的感觉是「波特兰马拉松，其实是以马拉松的名义，举办了一场全民音乐会」，于是深深地爱上了在这里比赛的感觉。&lt;/p&gt;&lt;p&gt;2016 年，我继续报名了波特兰马拉松，后来因为出差的缘故，提前取消了；2017 年，死心不改，报了名，也勉力训练着（有段时间几乎天天中午在旧金山的海边跑个四十来分钟），但因为自己觉得身体还没到可以参赛的水准，没去；2018 年，迁居西雅图地区，虽然离得更近了，可乱七八糟的事情太多，干脆没报名；2019 年，在镜子里看着自己日渐丰腴的身体，突然有了皇叔「慨然流涕」那样的心境：「吾常身不离鞍，髀肉皆消。今不复骑，髀里肉生。日月若驰，老将至矣」，于是便重新报名，重新训练，决意哪怕排除万难，也要跑上一跑。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;训练&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;对于马拉松来说，训练是比赛的一部分，比赛是训练的尾声。就像《英雄交响曲》中的英雄一样，在雄壮豪迈地迎接最终的胜利之前，要经历从踌躇满志，到万念俱灭，再到凤凰涅槃的三个阶段。这也是我在训练中经历的过程。&lt;/p&gt;&lt;p&gt;报名之后，大概是五月份的样子，我开始了第一次训练。公司门前有条小路，一路跑到头再折回来大概是 3.6km，我便拿这段距离重拾对跑步的感觉。虽然许久未跑，可我正处于曹刿口中「一鼓作气」的阶段，凭着对跑马的激情，就这么每天中午跑着，一点点加量。慢慢的，3.6km 升级到了 5km，停留了许久，在七月初的时候，升级到了 7km。随后小腿开始不适，每次跑完小腿侧面会有凸起的鼓包。恰好那时间前后，无意中看到了李永乐老师讲静脉曲张的视频，吓了我一大跳，因为我真有些静脉曲张早期的症状。随后，我跑得谨慎了许多，每次跑完后吃午饭的同时都要按摩小腿达半个小时，直至症状消退才作罢。就这样收着跑了一个多月，静脉曲张的症状没有好转的迹象。&lt;/p&gt;&lt;p&gt;所谓祸不单行，8 月 12 日风和日丽，我吃着火锅唱着歌，啊不，听着 podcast 跑着步，一不留神，脚磕在马路牙子上，重重摔倒，为了保护我手上握着的那来之不易的 P30 Pro（主要是怕回家跪搓板），我没有用双手缓冲一下，反而是用手臂和手背生生扛了下来，和水泥地来了个亲密接触。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-028ef49ee7d0c7747e1ba957e0b6fcad_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1023&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-028ef49ee7d0c7747e1ba957e0b6fcad_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-028ef49ee7d0c7747e1ba957e0b6fcad_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1023&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-028ef49ee7d0c7747e1ba957e0b6fcad_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-028ef49ee7d0c7747e1ba957e0b6fcad_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;周围经过的车都吓了一大跳。有司机探出头来表示关切。我摆摆手，就那么趴在地上，喘着粗气，又好气又好笑，任凭擦伤的好几块地方火辣辣的。说来也巧，兴许真的是否极泰来，自打那次跌了一跤，我小腿上的鼓包似乎有消亡的迹象。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;那周周末，我放开跑了个三小时的 LSD (Long Slow Distance)，不但并无大碍，还自我感觉良好。我觉得，这次马拉松稳了。&lt;/p&gt;&lt;p&gt;9 月份，我刻意练了很多上坡下坡 —— 反正公司附近到处都是起起伏伏的丘陵。2015 年那次跑马，大概 27 公里处的大坡我还记忆犹新，我希望这次我能够跑着上去，而非散步散过去。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;参赛&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;10 月 6 日的波特兰清晨，天气异常阴冷。跑前半小时，把外套寄存后，我在寒风中瑟瑟发抖，只能靠不断吃糖丸和热身来抵御冷风。枪响后大概四五分钟，我紧跟着 440 的兔子，迈过了起点。我觉得我能跟住这只兔子，从而有机会冲击我北马的最好成绩：4:48。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8813b0b06d94c4f2b47356b5e6d2ab2f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1410&quot; data-rawheight=&quot;1826&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1410&quot; data-original=&quot;https://pic4.zhimg.com/v2-8813b0b06d94c4f2b47356b5e6d2ab2f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8813b0b06d94c4f2b47356b5e6d2ab2f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1410&quot; data-rawheight=&quot;1826&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1410&quot; data-original=&quot;https://pic4.zhimg.com/v2-8813b0b06d94c4f2b47356b5e6d2ab2f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-8813b0b06d94c4f2b47356b5e6d2ab2f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;头几公里，440 的兔子配速几乎锁在 6’25，上坡时，降到大约 6’45。这次马拉松的线路和上回我参加的截然不同，几乎全程都是上上下下的，还好我针对上坡好好练习过，不然还真不好适应。跑了六七公里后，我觉得 440 的兔子速度压得有些过分 —— 或者是我自己自我感觉太好 —— 我就在第一个水站处，超了她。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;之后，几乎每个上坡，我都能超出一大票散步的人，然而，我始终连 420 的兔子的尾巴都没见着。反而，跑完半马之后（大约 15 mile 处）的一座桥上，我看到了迎面跑来的 340 的兔子。我当时手头没有地图，并不知道我们间实际有八公里的差距（5 miles），心中窃喜：难道我离四小时竟然不太远？&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-88efafbcee9303ce51a166042462571f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1730&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-88efafbcee9303ce51a166042462571f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-88efafbcee9303ce51a166042462571f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1730&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-88efafbcee9303ce51a166042462571f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-88efafbcee9303ce51a166042462571f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;原来这一切都是假象，还有很多路程要跑。过了桥，绕过一个居民区，大部队就进入大名鼎鼎的 Reed College。这是乔布斯的母校 —— 虽然他没上多久就退学了。我深深地记得，乔布斯在斯坦福的毕业典礼上那著名的 connecting the dots —— 乔布斯在 Reed College 学习的不知道有什么用的衬线字体，却阴差阳错被应用在了 Mac 上。Reed College 校园很美很安详，我们的到来打乱了学校的宁静，路边的学生们怪叫着给我们鼓劲。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;过了 Reed College，前面两个老爷爷引起了我的注意。老爷爷 A 追上老爷爷 B 后，和他并肩跑着，问：您多大了？老爷爷 B 洪亮地回答：65 了！您呢？老爷爷 A 自豪地说：69！比您痴长了几岁！随后两人爽朗地笑了。我看着两人的背影，羡慕得不得了 —— 要是我六十好几，还能有这样的体格参加马拉松，让一个后生感慨「都难以望其项背」，多好！&lt;/p&gt;&lt;p&gt;趁着又一个上坡，老爷爷们的速度下来了，我便超过他们，继续我自己的征途。也许是之前几个月训练的功效，也许是此次全马每 5km 我就补一包糖浆的作用，总之过了 32km，我还是游刃有余。老婆发来信息说她们已经停好车，在终点附近的河边玩耍等待我到来。我把沿途的景致发给她们先睹为快。这次波特兰马拉松，组织得相当不错，每个人都像顺丰快递的一件包裹，有一个 tracking url，于是家人可以打开这个 url，随时了解我的动态 —— 老婆对于我每个 mile 的配速，平均速度，预计到达终点的时间，比我自己感知到的还要精确。&lt;/p&gt;&lt;p&gt;一路上，我的配速，除去上厕所和大上坡这种不可抗力导致往下掉一掉，大多保持在 6’20 - 6’40 之间，稳得连我自己都感到吃惊。最后两三个 mile，我虽然一切安好，没有像上次那样，腿部抽筋，但脚底板生疼，有些忍无可忍。「停下来走走」的念头萦绕在我脑海中，不过很快另一个声音将它按了下去：这可能是我有史以来第一次全程都几乎稳在一个速度跑下来的马拉松啊！就差几公里了！我回想起之前在跑过一个居民区的时候，地上插的标语：“If it doesn’t challenge you, it doesn’t change you”，当时我咂摸了很久，此刻这句话化作鸡汤，沁人心扉。&lt;/p&gt;&lt;p&gt;这时老婆打来电话问最后三百米小宝想跟我跑，可不可以？&lt;/p&gt;&lt;p&gt;我说有何不可？先上车再买票，试试呗。&lt;/p&gt;&lt;p&gt;最后的一公里，华为的健康 app 已经在恭喜我完成了全马，可我离终点还有大概 600 米。我在欢呼的人群中疯狂搜索老婆孩子，终于，在不远处找到了。小宝和小贝兴奋地「爸爸」「爸爸」吼个不停，我冲过去，抄起两个娃一顿猛亲。抱着小贝，牵着小宝合了个影之后，我拉起小宝，做最后的冲刺。围观的群众看到我们两个手拉手跑向重点，喝彩声连绵不绝，到处都是向我竖起的大拇指。小宝兴奋极了，这样热烈的氛围，她也是第一次经历。当我们手拉手即将冲过终点时，主持人热情洋溢地播报：Here comes Tian Chen, from Issaquah! And his lovely daughter!（具体的词儿我也记不清楚了）&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b9998093893e247a475b73d786039ba7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1920&quot; data-rawheight=&quot;3075&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1920&quot; data-original=&quot;https://pic4.zhimg.com/v2-b9998093893e247a475b73d786039ba7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b9998093893e247a475b73d786039ba7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1920&quot; data-rawheight=&quot;3075&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1920&quot; data-original=&quot;https://pic4.zhimg.com/v2-b9998093893e247a475b73d786039ba7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-b9998093893e247a475b73d786039ba7_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-29e6872e3660174b388e5d5430fb99e3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1723&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-29e6872e3660174b388e5d5430fb99e3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-29e6872e3660174b388e5d5430fb99e3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1723&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-29e6872e3660174b388e5d5430fb99e3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-29e6872e3660174b388e5d5430fb99e3_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;小宝既开心又不解地问：爸爸，为什么人家会说你的名字，还知道你来自 Issaquah，却不提我的名字？&lt;br/&gt;&lt;/p&gt;&lt;p&gt;我笑着说：因为爸爸报名参赛了，你看我的胸牌：1707，人家一看这个就能查到我的报名信息，知道我的全名，以及我住在哪里。&lt;/p&gt;&lt;p&gt;她恍然大悟：我说嘛，那我下次也要报名，我想冲过终点的时候听到我的名字！&lt;/p&gt;&lt;p&gt;跨过终点的时候，我望了一眼记分牌，上面赫然写着 4:36。我知道，我的净成绩肯定要更好一些，说不定进入 4:30 呢！在休息区，小宝和我大快朵颐，有什么吃什么。我一遍绕着休息区走，一边吃吃喝喝，在连喝了两瓶水，确保轻微脱水的情况有所好转后，才做了些简单的拉伸，然后冲出去，和家人汇合。&lt;/p&gt;&lt;p&gt;后来我拿到了成绩，4:32！天道酬勤，我开心地像个一百斤的瘦子。毕竟，三十七岁的自己，终于追上了三十二岁的自己的脚步。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4aae01eadaea21bdff00329639c49cb1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;729&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-4aae01eadaea21bdff00329639c49cb1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4aae01eadaea21bdff00329639c49cb1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;729&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-4aae01eadaea21bdff00329639c49cb1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-4aae01eadaea21bdff00329639c49cb1_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;当我跑步的时候…&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;好像谈到跑步，就免不了谈村上春树 —— 唉，他大概今年也拿不了诺奖吧。&lt;/p&gt;&lt;p&gt;我之前和跑步有关的几篇，变着法子总要摘抄他的文字：“Pain is inevitable, suffering is optional”，进行自我鼓励。今年整个过程没有多少 pain，更谈不上 suffering。不过我还是很喜欢这碗鸡汤，时不时反刍回来让它的滋味在舌尖打个转。&lt;/p&gt;&lt;p&gt;当我跑步的时候，我总是任由思想天马行空。平日的中午跑步时，我脑海里时而冒出数学题 —— 比如根号二如何用连分数表示 —— 这是在准备未来给小宝的数学课；时而冒出吴王夫差为何不解决卧榻之患而急于黄池争霸的疑问 —— 这是我自己的十万个为什么。&lt;/p&gt;&lt;p&gt;这次波特兰马拉松，我全程都在回顾并思考一件事：究竟做什么事情让我感到最为快乐？或者说，我的人生的终极快乐是什么？&lt;/p&gt;&lt;p&gt;在我懂事的时候，哈雷彗星和神秘的太空是少儿科学画报的常客。那时候无论是在新疆还是酒泉，夏季的夜空，一条白带子裹着数不尽的星星，美轮美奂。长辈们对着夜空给我指点：这是北斗七星，那是织女星…夏天晚上在户外乘着凉，啃着西瓜，数着天上的星星，是我儿时享不尽的快乐。所以，打小我就有一颗成为天文学家的心。&lt;/p&gt;&lt;p&gt;长大以后，跟随父母南下广东，在珠三角灯红酒绿的城市群中，天上的星星日渐模糊起来。初高中同学聚会，大排档里懒散地抠着田螺聊着天，我的目光已经从远处的星星转向了近在咫尺穿着班尼路T恤真维斯仔裤的女同学 —— 情窦初开的小男生，跟自己心仪的女孩儿聊上几句天，还有什么比这更快乐的事情？&lt;/p&gt;&lt;p&gt;大学四年，打游戏和写代码是两大快乐。打游戏自己真不是那块料，所以后来热情消退；写代码不客气地说我算是系里执牛耳者，大二就开始周末出去凭着手艺赚钱 —— 那时领「工钱」的方式非常魔幻，每个月三十来张百元大钞扎个捆就那么递给我 —— 我感受到了钱攥在手心中的快乐。&lt;/p&gt;&lt;p&gt;大学毕业后，工作是快乐的源泉。负责的每件事，遇上的每个人，都是一个美丽新世界。就算自己住的窝连厕所都要轮流使用，刷牙的时候还能想着在 OSPF（一种路由协议）里优化路由表结构的方案，“Eureka”，“Eureka” 到乐开花。&lt;/p&gt;&lt;p&gt;工作一段时间，觉得充实的人生才是快乐的。于是，读书，充电，甚至在繁忙的工作中抽出时间读个学位，累成狗，但一天结束时合上日记，深吸一口气，感受每个毛孔散发出来的成长的喜悦，那是真的痛并快乐着。&lt;/p&gt;&lt;p&gt;之后人生的快乐，像走马灯似的换个不停，比当时日本首相换届还勤，我把它归成几类：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;积极向上的，成长的快乐：职场的成长，收入的成长，资产的成长，社交圈的成长，阅历的成长等&lt;/li&gt;&lt;li&gt;冒险和挑战自我的快乐：初尝禁果，初为人夫，初为人父，第一次管理团队，第一次创业，第一次出书，第一次跑马拉松，第一次出国，第一次出国定居，第一次成为两个娃的父亲等&lt;/li&gt;&lt;li&gt;放松心情，重塑活力的快乐：家庭生活的快乐，写代码的快乐，解决问题的快乐，分享知识的快乐，探索未知世界的快乐，写作的快乐，读书的快乐，跑步的快乐等&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;成长的快乐和挑战自我的快乐，有其保质期。在巅峰体验（peak experience）或者是目标达成后，快乐是逐渐衰退的。所以除非用鞭子不断地驱使自己，否则激情过去，是空洞的贤者时间。&lt;/p&gt;&lt;p&gt;那些并非为了达成某个目标，仅仅是单纯地放松心情的快乐，可以持续地非常久远。比如疲惫了一天之后投入家庭的怀抱，在饭桌上谈论各种有趣的话题；写一些和工作无关，仅仅为了好玩，或者「它应该存在」的代码和工具；还有，学到点什么东西，将其嚼碎了，形成自己的解读，再分享出去。&lt;/p&gt;&lt;p&gt;前些日子，我为了读《资治通鉴》方便，制作了资治通鉴的胶片版，可供我随时随地读上一个片段。其实我不止做了那一个 repo，后来我照葫芦画瓢，陆陆续续做了《史记》，《左传》，《孟子》，《论语》，《荀子》，《韩非子》，《老子》和《庄子》（&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//laozhuang.qiaopang.com&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;laozhuang.qiaopang.com&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;），《诗经》，《唐诗三百首》和《宋词三百曲》（&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//shici.qiaopang.com&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;shici.qiaopang.com&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;），算是自己的厕所读物。这些代码，这些花去的精力，与我开发能力上的精进并无任何帮助，好像也算不上像样的产品，但却是令我快乐的源泉，每每坐在马桶上，听着不解其意的《诗经》，回顾小时候全篇背下的《琵琶行》，听听韩非子解读《老子》，别有一番滋味。&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//shijing.qiaopang.com/16.html%235&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;小雅 鹿鸣之什&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//shici.qiaopang.com/01.html%2373&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;唐诗三百首&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//hanfeizi.qiaopang.com/21.html%2310&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;喻老&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;然而这还不算是我的终极快乐。很多次，不同的朋友们问我：如果有一天你退休了，你最想干什么？每次我的回答都差不多：教书育人。如果有大学看得起我，让我去当讲师，那再好不过；如果没有，也许我会自个儿讲点什么。那时我并没有意识到，这件我最想做的事情，其实就是我的终极快乐。&lt;/p&gt;&lt;p&gt;早在 Juniper 的时候，我就在我们北京的团队中，努力开展 BBL（Brown Bag Lecture）这种知识经验分享的活动；后来自己创业，在途客圈，类似的午间分享就几乎没有断过；随后我把它带入了 Tubi，带入了 ArcBlock，成为它们各自文化中的一部分。这样的活动，初期总是非常吃力的，没有人上的时候我会自己欣然顶上，分享我自己的知识。在我经历的一家家公司里，我一次次勉力打造一个知识和技能分享的氛围，说明这绝不是偶然，是因为我自己就深爱着这件事情，分享知识对我来说，是一个无比快乐的过程。&lt;/p&gt;&lt;p&gt;如今，我每天晚上跟小宝分享我的知识，比我忙乎自己的工作，忙乎个人的成长，还要不亦乐乎，这不恰恰说明了我能够从中获取更大的快乐么？&lt;/p&gt;&lt;p&gt;这难道不是我的终极快乐？&lt;/p&gt;&lt;p&gt;跑步的路上，整理着这样的思绪，我突然「顿悟」，仿佛聆听到了神谕。很多人喜欢引用村上春树描写他如何步入写作这条不归路时说的这句话：「我还清晰地记得那晴朗的天空，刚刚恢复了绿色的草坪的触感，以及棒球发出的悦耳声响。在那一刻，有什么东西静静地从天空中飘然落下，我明白无误地接受了它」。&lt;/p&gt;&lt;p&gt;我的感觉几乎一模一样。&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;其它有关我跑步的文章：&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202217285%26idx%3D1%26sn%3D03f5a8c6e5ffb106d805cc374f7bff27%26chksm%3D16f81559218f9c4f7adb1fa20b8f958aa91f0bb033b4cc03080881bc6427f59aa400c4b868b4%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2014-06-30：&lt;/a&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202217285%26idx%3D1%26sn%3D03f5a8c6e5ffb106d805cc374f7bff27%26chksm%3D16f81559218f9c4f7adb1fa20b8f958aa91f0bb033b4cc03080881bc6427f59aa400c4b868b4%26scene%3D21%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-124276f3b47c9fe994899a81a95ada78_180x120.jpg&quot; data-image-width=&quot;640&quot; data-image-height=&quot;360&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;谈谈跑步&lt;/a&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202355912%26idx%3D1%26sn%3Dc003319e4c2ad30d21aec952605fef60%26chksm%3D16fa36d4218dbfc21f88093ce01e5231cfea953220a23897c6380dc7b7bb46d461ab0d76c0ad%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2014-07-29：&lt;/a&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202355912%26idx%3D1%26sn%3Dc003319e4c2ad30d21aec952605fef60%26chksm%3D16fa36d4218dbfc21f88093ce01e5231cfea953220a23897c6380dc7b7bb46d461ab0d76c0ad%26scene%3D21%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-b68c31f654b63855b52a8b919b53f7a5_180x120.jpg&quot; data-image-width=&quot;800&quot; data-image-height=&quot;500&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;马拉松，突然变成一件严肃的事&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202599201%26idx%3D1%26sn%3D34f906dbc2fc91de821e261693ea978a%26chksm%3D16e6e93d2191602b5dceb7696153a5e1562d8a7290d2fbc1172039f81bd009148f0790091ba2%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2014-08-24：&lt;/a&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D202599201%26idx%3D1%26sn%3D34f906dbc2fc91de821e261693ea978a%26chksm%3D16e6e93d2191602b5dceb7696153a5e1562d8a7290d2fbc1172039f81bd009148f0790091ba2%26scene%3D21%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-7109e603e33e0c220ff3ac823e82123f_180x120.jpg&quot; data-image-width=&quot;800&quot; data-image-height=&quot;450&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;就酱紫跑了人生第一个马拉松&lt;/a&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D203056585%26idx%3D1%26sn%3D486e024a833e0289cc7c08dd5b048f39%26chksm%3D16efe7d521986ec37f8e1903a5d2eadfbfe37ac33202e504f47173fcd7555752e000d444ffc0%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2014-10-21：&lt;/a&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D203056585%26idx%3D1%26sn%3D486e024a833e0289cc7c08dd5b048f39%26chksm%3D16efe7d521986ec37f8e1903a5d2eadfbfe37ac33202e504f47173fcd7555752e000d444ffc0%26scene%3D21%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-235f74e80c99f66cf0a1834fdc8ea0ac_180x120.jpg&quot; data-image-width=&quot;800&quot; data-image-height=&quot;446&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;我就是那个跑了北马的SB&lt;/a&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D211373609%26idx%3D1%26sn%3D8e8029d5f757b1c185e31fc43b493c7e%26chksm%3D166ccc35211b4523475c233b45506d4957f9eda3aa913992f3206fbd8eb5860991002801ea8e%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2015-10-08：&lt;/a&gt;&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D211373609%26idx%3D1%26sn%3D8e8029d5f757b1c185e31fc43b493c7e%26chksm%3D166ccc35211b4523475c233b45506d4957f9eda3aa913992f3206fbd8eb5860991002801ea8e%26scene%3D21%23wechat_redirect&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-d18ee9e853afa450c0726e040716421f_180x120.jpg&quot; data-image-width=&quot;670&quot; data-image-height=&quot;360&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;就这样，在波特兰跑完了人生第二个马拉松&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-10-10-86015814</guid>
<pubDate>Thu, 10 Oct 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>换个姿势读《资治通鉴》？</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-09-08-81203463.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81203463&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d4c0e4d1c740883aae48ecffb9371a4d_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;起屠维大渊献。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;读过《通鉴》的朋友看到这个起手式会会心一笑。这就跟「地振高冈，一派溪山千古秀」一样，是《通鉴》里的黑话。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;作为一个通读过《史记》（《书》《表》除外）的程序员，《资治通鉴》这样的大部头我读起来还是觉得非常不方便。首先是时间上的开销很大 —— 一页纸往往要读上半小时到一小时，其中免不了查阅词典，了解生僻字词的读音和释义；其次是难以深度阅读 —— 大量的地名人名和时间的关系，无法很快厘清，因而对错综复杂的历史事件读之依旧是懵懵懂懂；再次，无论是实体书的阅读，还是电子书的阅读，笔记都很难处理，比如人物的图像，事件（主要是战争）的地图，无法和原文很好地一一对照。最后，三百万字，二百九十四卷的内容，往往令读者还未开始阅读便自我放弃了。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;可惜啊！隽美的文字，生动的典故，博大精深的出世入世之道，可以让人知兴替，明是非，鉴未来的浩瀚巨著，因为各种「不方便」便被我们放弃了！&lt;br/&gt;&lt;/p&gt;&lt;p&gt;于是我便萌生了制作《资治通鉴》胶片版的念头。我可阅读的时间往往比较碎片化，所以希望闲暇时可以读上一小段，这样不必抱着大部头望而兴叹；我希望文档本身是活的，帮助理解内容的佐料（注释，图片，地图等）可以不断以一种简单轻量的方式被添加进来；此外，文档本身应该是精美的，看着舒服。这便是这个胶片版的最初的目标。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;程序员干这种事情一定是效率为先：能用代码搞定的，一定不用蛮力。于是这个目标被细化成：&lt;br/&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;选取质量上乘的《资治通鉴》 txt 版本&lt;/li&gt;&lt;li&gt;将文档切分成 294 卷，每卷一个胶片&lt;/li&gt;&lt;li&gt;自动生成符合 marp 格式的胶片，做一些格式上的处理&lt;/li&gt;&lt;li&gt;为引文生成不同的格式&lt;/li&gt;&lt;li&gt;每页胶片都自动放置一个 audio tag，可以播放本页的语音素材，比如：臣光曰&lt;/li&gt;&lt;li&gt;找相熟的小伙伴们创作每一张胶片的语音素材为每一张胶片自动生成语音素材&lt;/li&gt;&lt;li&gt;通读之，添加注释，相关图片和地图&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;切分文档这种活，&lt;code&gt;csplit&lt;/code&gt; 可以很好胜任，连代码都不用写；为了进一步把文字做成语音素材和胶片，需要花些心思 —— 得写个简单的 script 把切出来的一卷卷内容转成一个 JSON 数组，供后续生成胶片或生成语音素材之用。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;这个 JSON 数组长这个样子，除了内容本身，还有是否生成 audio 素材的字段：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;183&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;658&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;183&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;658&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;语音素材我一开始考虑集网友之力来做，后来发现科大讯飞的 TTS 质量已属不错，几乎绝大多数的场景读音和断词都是对的，就决定自动生成。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;胶片用一个叫 marp 的工具制作 —— 因其支持丰富的 markdown 语法和扩展，满足我对图片排版，注释和脚注等的需求。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;最终做出来的 slides 效果如下：&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;607&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;607&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;606&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;606&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;手机上横屏观看的效果：&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;498&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;498&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;TTS 生成的语音效果也还是不错的，如定陶之战：&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/1152733522413346816&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg&quot; data-lens-id=&quot;1152733522413346816&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg&quot;/&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/1152733522413346816&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;目前前十卷的整理工作已经初步完成，大家可以自行翻阅。语音的生成因为有 API 数量的限制，目前仅完成到一百卷。欢迎大家边贡献边阅读，贡献可参考：&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//github.com/tyrchen/tongjian&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;github.com/tyrchen/tongjian&lt;/a&gt;；阅读可直接点击（注：原来的 github pages 链接坏了，因为这个 repo 渐渐变得太大，github pages 每次 build 都会 timeout，所以我切到 netlify 了）：&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//tongjian.qiaopang.com&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;资治通鉴&lt;/a&gt;&lt;p&gt;&lt;br/&gt;未来我会一卷卷往下翻阅，顺手整理相关笔记。itunes 和 google play 的 podcast 的自动生成也在计划之中，大家看了之后有什么想法可以和我分享。毕竟，独乐乐，不如众乐乐。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;b&gt;禅定时刻&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;605&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;605&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-09-08-81203463</guid>
<pubDate>Sun, 08 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>换个姿势读《资治通鉴》？</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-09-05-81203463.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/81203463&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d4c0e4d1c740883aae48ecffb9371a4d_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;起屠维大渊献。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;读过《通鉴》的朋友看到这个起手式会会心一笑。这就跟「地振高冈，一派溪山千古秀」一样，是《通鉴》里的黑话。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;作为一个通读过《史记》（《书》《表》除外）的程序员，《资治通鉴》这样的大部头我读起来还是觉得非常不方便。首先是时间上的开销很大 —— 一页纸往往要读上半小时到一小时，其中免不了查阅词典，了解生僻字词的读音和释义；其次是难以深度阅读 —— 大量的地名人名和时间的关系，无法很快厘清，因而对错综复杂的历史事件读之依旧是懵懵懂懂；再次，无论是实体书的阅读，还是电子书的阅读，笔记都很难处理，比如人物的图像，事件（主要是战争）的地图，无法和原文很好地一一对照。最后，三百万字，二百九十四卷的内容，往往令读者还未开始阅读便自我放弃了。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;可惜啊！隽美的文字，生动的典故，博大精深的出世入世之道，可以让人知兴替，明是非，鉴未来的浩瀚巨著，因为各种「不方便」便被我们放弃了！&lt;br/&gt;&lt;/p&gt;&lt;p&gt;于是我便萌生了制作《资治通鉴》胶片版的念头。我可阅读的时间往往比较碎片化，所以希望闲暇时可以读上一小段，这样不必抱着大部头望而兴叹；我希望文档本身是活的，帮助理解内容的佐料（注释，图片，地图等）可以不断以一种简单轻量的方式被添加进来；此外，文档本身应该是精美的，看着舒服。这便是这个胶片版的最初的目标。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;程序员干这种事情一定是效率为先：能用代码搞定的，一定不用蛮力。于是这个目标被细化成：&lt;br/&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;选取质量上乘的《资治通鉴》 txt 版本&lt;/li&gt;&lt;li&gt;将文档切分成 294 卷，每卷一个胶片&lt;/li&gt;&lt;li&gt;自动生成符合 marp 格式的胶片，做一些格式上的处理&lt;/li&gt;&lt;li&gt;为引文生成不同的格式&lt;/li&gt;&lt;li&gt;每页胶片都自动放置一个 audio tag，可以播放本页的语音素材，比如：臣光曰&lt;/li&gt;&lt;li&gt;找相熟的小伙伴们创作每一张胶片的语音素材为每一张胶片自动生成语音素材&lt;/li&gt;&lt;li&gt;通读之，添加注释，相关图片和地图&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;切分文档这种活，&lt;code&gt;csplit&lt;/code&gt; 可以很好胜任，连代码都不用写；为了进一步把文字做成语音素材和胶片，需要花些心思 —— 得写个简单的 script 把切出来的一卷卷内容转成一个 JSON 数组，供后续生成胶片或生成语音素材之用。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;这个 JSON 数组长这个样子，除了内容本身，还有是否生成 audio 素材的字段：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;183&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;658&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;658&quot; data-rawheight=&quot;183&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;658&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;语音素材我一开始考虑集网友之力来做，后来发现科大讯飞的 TTS 质量已属不错，几乎绝大多数的场景读音和断词都是对的，就决定自动生成。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;胶片用一个叫 marp 的工具制作 —— 因其支持丰富的 markdown 语法和扩展，满足我对图片排版，注释和脚注等的需求。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;最终做出来的 slides 效果如下：&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;612&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;607&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;607&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;606&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;606&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;手机上横屏观看的效果：&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;498&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;498&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;TTS 生成的语音效果也还是不错的，如定陶之战：&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/1152733522413346816&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg&quot; data-lens-id=&quot;1152733522413346816&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg&quot;/&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/1152733522413346816&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;&lt;br/&gt;&lt;br/&gt;目前前十卷的整理工作已经初步完成，大家可以自行翻阅。语音的生成因为有 API 数量的限制，目前仅完成到一百卷。欢迎大家边贡献边阅读，贡献可参考：&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//github.com/tyrchen/tongjian&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;github.com/tyrchen/tongjian&lt;/a&gt;；阅读可直接点击：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//tyrchen.github.io/tongjian&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;tyrchen.github.io/tongj&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ian&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;未来我会一卷卷往下翻阅，顺手整理相关笔记。itunes 和 google play 的 podcast 的自动生成也在计划之中，大家看了之后有什么想法可以和我分享。毕竟，独乐乐，不如众乐乐。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;b&gt;禅定时刻&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;605&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;605&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-09-05-81203463</guid>
<pubDate>Thu, 05 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>实习生娜娜</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-09-03-80581242.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80581242&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d97ea63c4b9b3cc132b5cba7ad5e89dc_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;我对实习生的要求，除去学习能力外，便是足够长的实习时间。所谓「足够长」，我的定义是至少两三个月。小于这个长度，往往还没有开始贡献有价值的工作，实习生便带着写满好话的评定拍屁股走人了。&lt;/p&gt;&lt;p&gt;娜娜本来原定是六月初来实习的。然而因为 EAD（Employment Authorization Document）办理过程令人发指的低效，她最终八月初才来报到。这个暑期，我们招募了三个实习生，一个打打酱油就提前离开了，一个干脆没来。所以对于娜娜的实习，我本是没有抱太大的希望，甚至略有抵触 —— 毕竟，一个准大三的孩子，四周的时间，能干点什么？&lt;/p&gt;&lt;p&gt;尽管如此，我还是和她制定了一个四周的计划。她自己带着一个 dApp 的想法而来，我们正好也希望实习生能够使用我们的 framework 制作简单的 dApp，于是一拍即合。她的 dApp 基于这样一个场景：散布在城市各处的自动售货机是个多方参与的生意 —— 设备方，场地方，运营方，供货方等。根据合同，这些参与方可以按照规定好的比例获得最终销售利润的分成。然而目前大家只能信任运营方提供的销售数据而无法验证其真伪。这是一个典型的 audit trail 的场景，和广告分账非常类似。传统的广告分账模式，广告商是不信任运营方的，因而当广告的 impression 产生时往往需要往独立的第三方的 tracking server 上发送数据来对账。而这种应用，用区块链表征的账本（ledger）再合适不过。&lt;/p&gt;&lt;p&gt;课题确定后，我给她的四周的安排是：第一周把需求和基础结构设计好，学习必要的区块链知识和 Forge framework 的使用；第二周把核心的 smart contract 撰写好用以支持 audit trail 的发送，并写个 simulator 来产生大量的数据；第三周在这些数据的基础上做个 webapp，进行账单的查询和销售情况的展示；第四周美化整个 webapp，使用户体验良好。与此同时，每周录一个小视频，来介绍当周所做的工作，顺便把视频录制过程中的文字脚本，稍加润色成为博客。这个「与此同时」是 marketing/PR 团队的要求，我本来觉得浪费时间，但是担心娜娜无法完成 dApp 的开发，有视频和博客作为保底的产出也算对她的实习有个交代，所以没有给驳回去。&lt;/p&gt;&lt;p&gt;在正式实习之前，娜娜已经 &lt;b&gt;主动&lt;/b&gt; 学习了我们的大部分文档，并且已经能够非常自如地介绍我们的产品 —— 这大大出乎了我的意料，所以在给她培训的时候，她领悟地很快，并且总能提出一些有深度的问题让我为之侧目。她来的时间也算幸运 —— 我们正好北京团队有个新同事和她前后脚报道，因而赶上了我们比较系统的，为期两周的 elixir 和 blockchain 培训。她之前用 Python 和 Django 做过简单的 webapp，因而我把她托付给同事 Riley，帮她更好地学习和使用我们的 python sdk。&lt;/p&gt;&lt;p&gt;很快我一天中有好些时间被她占据。她问很多问题，对架构和设计的疑问，以及对 smart contract 的组织，编写和调试方面的具体问题 —— 比如说商品销售的 audit trail 谁来发，发什么内容，之后是账本的状态更新，如何做，怎么做，怎么看日志等等。我们的 smart contract 是用 elixir 写的，这就意味着她在搞清楚这些问题后，至少还需要学习 elixir 的一个子集，才能开始撰写代码。&lt;/p&gt;&lt;p&gt;第一周的进展比预期慢点，但我已经有些欣赏这个小丫头了。她做事有条有理，一丝不苟。每周的视频，在我看来是锦上添花的 —— 有时间就好好搞搞，没时间就凑合一下，对 Marketing/PR 那边有些贡献和产出即可。结果她往往周四晚上就写好视频的脚本让我过目，然后周五花不少时间反复录制和修改。起初，录制好的视频主要由我们的设计师 Echo 花大力气来润色；后来，她师从 Echo，学习和琢磨出一些技巧，把 iMovie 下调校得差不多的视频给 Echo，每每质量上乘，Echo 几乎不用费多少功夫处理。&lt;/p&gt;&lt;p&gt;第二周娜娜已经渐入佳境了。很快 smart contract 调试好了，为了产生有意义的数据的 simulator 也做好了。在这个过程中，她发现了从 sdk 到 framework 里的一系列问题，反馈给团队。&lt;/p&gt;&lt;p&gt;第三周我很忙，白天没太多时间帮助她。我们简单确认了一下 webapp 的方案，她想用 plotly 的 dash 来做，我看了下得知 dash 是基于 flask 的一个可视化工具，觉得没太大（扩展性）问题，就让她放手去做。很快她遇到了新的问题：链上的数据虽然可信，但无法很方便地展示。这触及到 offchain 的逻辑了，我告诉她需要用一个 index db 来配合使用（forge 自己也提供 index db，我们一直在考虑怎么让这个 index db 可以被更好地使用起来）。&lt;/p&gt;&lt;p&gt;第三周的周六，我照例在公司工作（老婆孩儿们不在的单身待遇）。她也来到公司，花了一整天时间，到晚上近八点钟，把第三期的视频做了出来。这个视频制作的精良程度超出了我的想象，不光是形式和内容的组织，更重要的是对概念和思想的理解和阐释。比如她在介绍 check / verify 的区别时，用了机场过安检的两重步骤来类比处理 transaction 的 light check 和 full inspection，非常形象，一下子把复杂的事情具象化了。&lt;/p&gt;&lt;p&gt;最后这一周，当她的 webapp 初具形态时，已经震撼大家；之后，她又花了很大力气，像对待一个要上线的产品那样对其精雕细琢 —— 数据的模拟使用了 faker，webapp 的 css 也做了一些调整，报表的查询可以用日历来选择时间范围等。最终，周四的 all hands meeting 上，整个团队看到了一个惊艳的展示。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6d7b5afc7f42a1fd7844b2d5e4cd4c92_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3078&quot; data-rawheight=&quot;1580&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3078&quot; data-original=&quot;https://pic3.zhimg.com/v2-6d7b5afc7f42a1fd7844b2d5e4cd4c92_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-6d7b5afc7f42a1fd7844b2d5e4cd4c92_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3078&quot; data-rawheight=&quot;1580&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3078&quot; data-original=&quot;https://pic3.zhimg.com/v2-6d7b5afc7f42a1fd7844b2d5e4cd4c92_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-6d7b5afc7f42a1fd7844b2d5e4cd4c92_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3eafae9c399ae1153019f787fbfe4de4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1510&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3058&quot; data-original=&quot;https://pic1.zhimg.com/v2-3eafae9c399ae1153019f787fbfe4de4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3eafae9c399ae1153019f787fbfe4de4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3058&quot; data-rawheight=&quot;1510&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3058&quot; data-original=&quot;https://pic1.zhimg.com/v2-3eafae9c399ae1153019f787fbfe4de4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-3eafae9c399ae1153019f787fbfe4de4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;四周的实习结束了，娜娜给我们留下了这些成果：&lt;br/&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;一个质量不错的 vending machine dApp&lt;/li&gt;&lt;li&gt;四期高质量的视频，手把手介绍她是如何打造这个 dApp 的&lt;/li&gt;&lt;li&gt;四篇 engineering blog&lt;/li&gt;&lt;li&gt;提交了若干个重要的 issue&lt;/li&gt;&lt;li&gt;以及，最重要的，内部 BBL：Forge: the bad, the bad and the ugly&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;这个 BBL 是我让她做的一个讲座，请她吐槽作为一个准小白程序员，在使用 Forge 开发 dApp 时遇到的各种坑爹的情况。因为外部视频展现的是伟光正，所以内部吐槽就不必文饰，于是 the good, the bad and the ugly 中不需要 the good。她把四周来作为一个开发者遇到的所有问题和不爽都总结分享给大家，并形成成了一个文档（其中不少问题已经随着她提 bug 的时候修复了）。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;我们需要什么样的实习生？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;娜娜的这段实习无疑是非常成功的，它超乎了我们所有人的预期，包括娜娜自己。对娜娜而言，她学到了很多知识和经验，不光在代码上，还在其他诸多方面，验证和提升了自己的才华，并且得到了人生中非常宝贵的阅历；对我们而言，我们不仅得到了上述的那些成果，娜娜的这段实习还给我们打开了一扇窗，让我们产生更多的思考和总结。&lt;/p&gt;&lt;p&gt;其中最重要的一个思考是：如何发现和发掘下一个实习生娜娜？如何让这样看上去偶发的 serendipity 变成可以重复的模式？&lt;/p&gt;&lt;p&gt;通过这二十多天来的观察和交流，我发现她有着这些特质：&lt;/p&gt;&lt;p&gt;一，对所做事情的热忱（passion）。&lt;/p&gt;&lt;p&gt;passion 现在是个烂大街的词了，任何一个求职者都能用最真诚的语气表达出对你所奋斗的事情，所拼搏的行业的热情。但 passion 不是请客吃饭，不是做文章。passion 扎根于行动当中。娜娜在正式加入我们实习前就已经系统地自学了我们的产品，打个不恰当的比喻，就好像冰火岛上的张无忌，外功和内功心法都已了然于胸，就差人点拨 —— 这是她对所学之事的 passion；后来在做 dApp 的时候，她常常折腾到半夜一两点，不达目标不罢休，有点「锲而不舍，金石可镂」的意味 —— 这是她对所做之事的 passion。&lt;/p&gt;&lt;p&gt;二，勤于思考，善于表达。&lt;/p&gt;&lt;p&gt;不管在生活中还是职场里，表达能力的重要程度一定会位列三甲。好的表达能力体现出来的是一个人对概念的掌握，对内容的抽象和具象，对思路的逻辑化和条理化，以及这个人的亲和力。一个勤于思考的人不一定善于表达，但一个善于表达，能把复杂问题抽茧剥丝的人，一定是个勤于思考的人。这一点，你们看娜娜的几期视频便可窥得一二。&lt;/p&gt;&lt;p&gt;三，学习能力。&lt;/p&gt;&lt;p&gt;娜娜的学习能力挺让我佩服。从上文中对整个实习期的简单描述，相信大家也能得出相同的结论。她做的几期视频我一个个仔细看过，光是这几个视频，就能让我有士别三日当刮目相待的感觉。&lt;/p&gt;&lt;p&gt;四，朴素。&lt;/p&gt;&lt;p&gt;朴素用在一个女生身上，似乎不太对路，但我的确找不到更合适的词了。娜娜家境应该比较殷实（毕竟是留学生嘛），但她日常的穿着打扮非常朴素自然，跟我这自下而上的 Costco 风格有的一拼。朴素有朴素的好处，可以完完全全把心思放在自己认为重要的事情上，无需为旁的事儿分心。&lt;/p&gt;&lt;p&gt;所以，也许满足这些部分或者全部特质的人就是我们可以寻找的下一个娜娜。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;该给实习生提供何种挑战？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;从娜娜的实习经历来看，我们把原本可能是两三个月的挑战压缩到了一个月，并且在此之上还附着了很多额外的和市场活动相关的工作（如录制视频，撰写博客）。一开始，我们并没有抱着太大的希望，但事实告诉我们能力越大，责任越大压力越大，成就越大 —— 合适的有层次的工作能得到意料之外的产出。&lt;/p&gt;&lt;p&gt;娜娜的主要工作由几部分构成：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;开发 app&lt;/li&gt;&lt;li&gt;视频回顾开发 app 的历程&lt;/li&gt;&lt;li&gt;文字描述开发中学到的东西。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;这三件工作，单是第一件就足以压得她喘不过气来，然而她同时高质量完成了三件事，却仅仅比只做一件事多花了一点精力（同时获得了更多的成就感和满足感）。我们仔细看这三件事，是不是有种「撒一层土，夯实，再撒一层」的感觉？无心插柳的 2)，3) 成了 1) 这道大菜的精美佐餐，意外地，我们迫使娜娜以周为单位迭代，践行 build（开发 app） - measure（制作视频，把学到的解释给别人听，这是检验自己是否理解通透的试金石） - learn（文字总结） 的 feedback loop，一周又一周地螺旋前行。&lt;/p&gt;&lt;p&gt;这三件事同时做的另一个好处是提升影响力。实习生的实习工作往往是一个黑盒，学校和老师除了拿到一纸鉴定外，别无所知；而用人单位在招募应届毕业生时，看到的都是千篇一律地「在某某知名的不知名的公司做了某某某项目，用了某某某技术，实现了某某某成果」的八股文，无怪乎筛简历的一个私域秘籍是「一沓简历奋力一掷，最远者三为头三甲」。而我们无意间突破了这个桎梏，通过社交媒体将黑盒白盒化，使得娜娜们的实习工作可以很方便地被展示，被了解，也加强了她们脱颖而出的可能性。也许经过这段时间的历练，娜娜会把她学习的课程，个人的成长都以这种方式展现出来哩！&lt;/p&gt;&lt;p&gt;这次和娜娜一起的宝贵的学习经历让我开始反省之前我使用实习生的得与失。未来我们会更好地和实习生一道，为她/他制定一个有趣的，有挑战的，可以成就自我的实习方案。&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;娜娜的头三个视频可以在下文查阅，第四个视频下周会放出，请关注 arcblock 公众号的更新。&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/UraDu2_mxI2dtqYXydT0Uw&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-28deb8aadc6694edde7381732b37f65c_180x120.jpg&quot; data-image-width=&quot;1198&quot; data-image-height=&quot;676&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;网页链接&lt;/a&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/kGaG5tGbDsTtN9qqTHJraA&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-1aff4ac4d81e7cfba05c238940270db6_180x120.jpg&quot; data-image-width=&quot;1280&quot; data-image-height=&quot;718&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;网页链接&lt;/a&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/BZ6rcZUCYBAl0YZxq-Rfgg&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-29d52ba8294c93946fe1715a2dae4a6d_180x120.jpg&quot; data-image-width=&quot;1280&quot; data-image-height=&quot;722&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;网页链接&lt;/a&gt;&lt;p&gt;再次感谢我们的实习生娜娜。如果你对我们西雅图或者北京的区块链实习职位感兴趣，欢迎来人来函以及来而无往非礼也之洽谈。&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-09-03-80581242</guid>
<pubDate>Tue, 03 Sep 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>长日无痕（四）</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-07-25-75097584.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/75097584&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-36c8fc9486e94bb37c8f41d30b19ad61_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;（一）&lt;/p&gt;&lt;p&gt;&lt;br/&gt;一晃在美国呆了 1666 天，或者说，四年又二百零五天。如果一个人的职业生涯有四十年，我的十分之一已然耗散在了这片土地。回头看，刚来时的五年计划，完成得还不错：&lt;/p&gt;&lt;blockquote&gt;一晃在硅谷已经呆了两年半。&lt;br/&gt;两年半，在四十年左右的职业生涯中，仅占 1/16，似乎微不足道，但对于一个五年计划来说，它又举足轻重。14年底，当踏上这片土地时，我所考虑的是花上五年的时光，在此立足，然后融入，很简单的计划。&lt;br/&gt;立足是根本，这体现在「家」和「业」。庄子说：尧舜有天下，子孙无置锥之地。家人为了我的梦想而牺牲，我得为她们准备「置锥之地」。蛰伏了两年，攒了些钱，又薅了一圈长辈的羊毛后（唉，三十而立却未立），终于拍得一陋室。「家」，基本解决了。&lt;br/&gt;「业」并非一蹴而就。在美工作的异乡人共通的痛就是身份问题。国内的朋友总不理解：都成功肉身翻墙了，还矫情什么绿卡。这个中滋味只有身在其中的人才有感受。有时候稍不留意，要么 I94 过期（合法居留的时间），要么 EAD 过期（合法工作的时间），要么签证过期（合法入境的时间），白白惹上一身腥。就算你自己留意了，律师留意了，USCIS（移民局）的大爷们打个盹，你可能就要遭殃了。我的朋友曾经就遇到过 EAD 提前好几个月续签，结果过期两个月才给签回来的无妄之灾，两个月公司没法「雇佣」并给他发工资。&lt;br/&gt;我算是幸运，捡漏拿了个 O1a Visa，得以免除 PERM，直接走 EB1A，省下三五年为绿卡奋斗的时光。虽然在 485 上因为各种机缘巧合折腾了一年，但好歹在上个月终于拿到绿卡，算是圆满，十年内我不用愁跟入境，工作，居留等一切和身份有关的破事，可以把心思集中在事业上。&lt;br/&gt;&lt;br/&gt;摘自我 2017 年撰写的，未发表的《长日无痕 4.1》&lt;/blockquote&gt;&lt;p&gt;&lt;br/&gt;近五年时间里，我换了五个城市：Sunnyvale, Cupertino, San Jose, Redmond, Issaquah，以及两个州：California, Washington。6 月份准备英国签证时，表格里让我添加过去两年所有住过的地址，我惊奇地发现，2017.6 - 2019.6 间，我像逃犯似的换了四座城市，四个地址。本以为买了房子，有了立锥之地后，能安稳下来，结果发现「安稳」对我而言是奢望，自己的陋室的炕头还没有暖好，人就飞到了西雅图。&lt;/p&gt;&lt;p&gt;朋友们常常让我对比旧金山湾区和大西雅图地区。如果说找五个美国最适合中国人居住的地区，湾区和西雅图地区一定会榜上有名：宜人的气候，合适的收入支出比，不算温吞也并不激烈的工作环境，以及，与我们的肚子息息相关的，遍地的，口味还过得去的各地中华美食。对于程序员来说，这两地几乎是唯二的定居选择 —— 大大小小的科技公司，撑起了这两个地区的工作机会，撑出了亚裔的一片天，当然，也撑高了房价。&lt;/p&gt;&lt;p&gt;从税收的角度来说，华州免州收入税（income tax），从加州搬到华州，意味着工资单上冷不丁多出来 10% ；但因为不征州税，华州的消费税是西部之冠，比加州高一点点。&lt;/p&gt;&lt;p&gt;从总体生活成本上来说，西雅图地区比湾区相对低一些：还可以忍受的房价（七到八折），以及还算良心的房租（八折左右）。因为每月的开支居住是大头，所以西雅图地区生活上的月开销要比加州小不少。不过有得必有失 —— 西雅图地区的水果蔬菜价格（1.5倍），水电煤气（~2倍）等均高出湾区一大截。老婆总吐槽在湾区的大华超市，每周买个菜为了凑够 $30（有代金券）往往殚精竭虑，在这头的百家超市，随便买买就分分钟超过 $50。&lt;/p&gt;&lt;p&gt;养车的成本，西雅图地区要高不少，油价似乎差不太多，都是三四块钱之间浮动，主要高在了保险上。我用 metromile（基本费用 + 里程计费），从加州换到华州后，地址一改，保费几乎翻番。询过 Costco，Gecko 等保险，要比我 metromile 上的价格还高。好在养车在美国来说不是个事，养两辆车的开销可能还不到北京养一辆车的开销。&lt;/p&gt;&lt;p&gt;生活环境上两者各有千秋。美西是出了名的好山好水好寂寞，大家周末大部分时候过的是采菊东篱的田园生活。和湾区比，西雅图地区的山和水都离居住的地方更近 —— 偶尔我们晚上吃过饭，八点多开车十分钟晃悠到 Lake Sammamish State Park，娃儿们去 playground 撒欢，我和老婆倚在湖边赏花赏月赏秋水；周末半小时可达的地方有瀑布；三小时可达的地方有清朗隽秀的雪山，有美国最大的国家公园，有世界最大的温带雨林。&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3174c624803d74bf49ab0753ac7788d0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1600&quot; data-rawheight=&quot;1200&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1600&quot; data-original=&quot;https://pic1.zhimg.com/v2-3174c624803d74bf49ab0753ac7788d0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-3174c624803d74bf49ab0753ac7788d0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1600&quot; data-rawheight=&quot;1200&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1600&quot; data-original=&quot;https://pic1.zhimg.com/v2-3174c624803d74bf49ab0753ac7788d0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-3174c624803d74bf49ab0753ac7788d0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d64829d9dece4903a065a17238bca56_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1600&quot; data-rawheight=&quot;2133&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1600&quot; data-original=&quot;https://pic3.zhimg.com/v2-5d64829d9dece4903a065a17238bca56_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d64829d9dece4903a065a17238bca56_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1600&quot; data-rawheight=&quot;2133&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1600&quot; data-original=&quot;https://pic3.zhimg.com/v2-5d64829d9dece4903a065a17238bca56_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5d64829d9dece4903a065a17238bca56_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;但是西雅图雨多 —— 我来之前，同事马老师提醒我这儿 80% 的时间都在下雨，整个人都会抑郁的。呆了一年多，也许我是命好，总体感觉，糟糕的阴雨天气和爽朗的晴天大概一半一半。每年的 10 月到 4 月，连绵的阴雨像一堵无形的墙，把你按在屋子里限制外出 —— 也难怪，星爸爸诞生于斯，《暮光之城》落户于此。很多沐浴过加州阳光的人，在西雅图没有阳光的半年里，百无聊赖，心都如天气一般阴沉沉的。&lt;/p&gt;&lt;p&gt;我还好，不挑。加州的阳光，我很喜欢，把我从黑古氧化成了炭古；西雅图的阴冷，我也喜欢，把我从炭古还原回黑古。我这人对环境向来是随遇而安，只要有妻儿作伴就好 —— 就像东坡说的那样：「试问岭南好不好，却道，此心安处是吾乡」。&lt;/p&gt;&lt;p&gt;（二）&lt;/p&gt;&lt;p&gt;&lt;br/&gt;两周前回国出差，见了很多朋友。有些半年未见，有些一年多未见，普遍的，大家的肚腩又添了一圈年轮。也许我们真的是老了，八零后们饭桌上聊的话题，除了工作，创业，孩子，便是生老病死。马尔克斯说：「父母在时，你和死亡隔着一层垫子；父母离开后，你就直接坐在死亡上面了」。看着孩儿们一天天长大，突然发现，我们自己，也成了那层垫子，在向上下左右的交代中，一点点变薄。&lt;/p&gt;&lt;p&gt;在年复一年的 996 的「福报」荫护下，好些朋友们身体大不如前，体检报告上尽是些触目惊心的病症，让我那中度脂肪肝都不好意思拿出来丢人现眼。有个朋友戏称自己就像五年开了五十万公里还不走心保养的奥拓，挂挡哐哐哐卡齿轮，踩油门突突突冒黑烟。&lt;/p&gt;&lt;p&gt;996 压榨的是身体，还好，千百万年来继承的中华民族的勤劳基因还扛得住；人到中年的焦虑，折磨的是精神，那才是压倒骆驼的最后一根稻草。&lt;/p&gt;&lt;p&gt;勤勤恳恳做中国式好员工的朋友：经济好，没房的忧心房子，有房的忧心换（学区）房；经济不好，都在忧心自己还有没有机会「享受福报」。十多年前意气风发在论坛上激扬文字指点「三十五岁的程序员该何去何从」，真真自己到了这个岁数，发现新闻里生活中全是某某公司清理三十五岁以上的一线员工；某某公司计划未来中层不会提拔三十五岁以上的员工。三十五岁就仿佛一个魔咒，让上有老下有小驼着背的中年大叔在二十出头的小朋友面前挺不起腰杆。&lt;/p&gt;&lt;p&gt;兢兢业业做中国式好老板的朋友：经济好，增加人手加班加点拉新和留存齐飞，让销售数据和核心指标再上一个台阶，杀出一条血路，融到下一轮；经济不好，勒紧裤腰带多快好省熬过冬天熬死同行，熬到下一轮，趟出一片天。好与不好都是上刀上下火海，每天坐着过山车，在 high-low high-low 间狠狠地过着别人无法理解的日子 —— 正所谓知我者谓我心忧，不知我者谓我何求。&lt;/p&gt;&lt;p&gt;反正庙堂之上，江湖之远，大家都活成了范文正公：进亦忧，退亦忧；酒入愁肠，把一颗颗焦虑压栈，化作肥肚腩。&lt;/p&gt;&lt;p&gt;两个没有交集的朋友，前后脚得了甲状腺癌，打开领口的扣子给我看，脖子上的术后的刀疤触目惊心，让人心痛。&lt;/p&gt;&lt;p&gt;呜呼！长太息以掩涕兮！十年帝都梦，一把辛酸泪！&lt;/p&gt;&lt;p&gt;从北京回到西雅图后，许久未出现的返程时差折磨了我一周。上周日的凌晨，睡不着觉，在床上懒懒翻着朋友圈。突然，看到一条噩耗：一位朋友故去了。记得两年前同事 Chun 把他介绍给我时，他说自己上一段（在一家创业公司的）经历太累了，打算离开北京一段时间，回老家休养，所以想找个 remote 的职位。我和他聊了许久，很是中意，想把他拉来 Tubi，无奈当时 CTO 马老师觉得他英语不好，怕 remote 难以沟通，给否了。我们便与同事关系差之毫厘，成了微信上的点赞之交，偶尔聊两句。我微信上朋友加得不少，总能看到某某朋友转发的某某某的噩耗，但这样一个活生生的，我们生命线上有过交集的尚处壮年的朋友的故去，还是头一遭。凝视着他的头像，我还能清晰地回忆起当时我们坐在望京北路启明国际大厦梦想加的沙发座上，酣畅淋漓讨论 js-bridge 和各种前端圈奇淫技巧的情景。&lt;/p&gt;&lt;p&gt;心中烦闷，睡不着觉，我鬼使神差地打开了『复仇者联盟 3』。当看到年轻的蜘蛛侠搂在老迈的铁人身上，灰飞烟灭，嘴里喃喃道：I don’t wanna go。可怜小蜘蛛空有济世之才，却赍志而殁。那一刻，我泪如泉涌。&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_b.gif&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;540&quot; data-rawheight=&quot;260&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;540&quot; data-original=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_b.gif&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;540&quot; data-rawheight=&quot;260&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;540&quot; data-original=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-4f37ae414bc054311ceed3676c5076ec_b.gif&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;浑浑噩噩的，我胡乱写下了这样的文字：&lt;/p&gt;&lt;blockquote&gt;在生命的旅途中，我们一直和时间赛跑。疾病和死亡，用最决绝的方式，把我们拉偏赛道。在被病魔缠身之前，我们还算得上是时间的主人，可以自主选择这旅途是闲庭散步，还是奋力冲刺，是休养生息，还是蓄势待发；然而生病之后，这选择权被一步步剥夺：先是才干被输液管无情禁锢，接着进取心被痛苦慢慢摧残，随后影响力如潮水般退去，退去之后，也不知能不能遗下丁零知交；最后，就剩乐观还就着卑微的希望不屈地挺立着，和亲情一道，寻觅翻盘的机会。&lt;br/&gt;剥夺一个人对时间的选择权还不是最糟的。当灭霸的响指弹起，死神的镰刀挥下，一个人未来的时间一下子被清零，再无翻盘的可能。这才是最要命的。离去的永远离去，活着的被悲痛萦绕。&lt;/blockquote&gt;&lt;p&gt;我一向以一个乐观的傻叉自诩，但那个周日，我实在堵得慌。&lt;/p&gt;&lt;p&gt;（三）&lt;/p&gt;&lt;p&gt;&lt;br/&gt;现代中国人最不愿意谈论的话题，一个是性，一个是生死。&lt;/p&gt;&lt;p&gt;对于生死，古人们到是很坦诚。&lt;/p&gt;&lt;p&gt;孔子说「未知生，焉知死？」，知生之道便知死之道。对于生死，他首先是敬畏和珍爱生命的 —— 他说「危邦不入，乱邦不居」，他鄙视那些「暴虎冯河，死而无悔」轻视生命的人，不愿与之共事；在这个前提下，他「无求生以害仁，有杀身以成仁」。他也坦然面对死亡，当自己心爱的弟子伯牛颜渊离去时，他的反应是：「亡之，命矣夫！斯人也而有斯疾也！斯人也而有斯疾也！」，「噫！天丧予！天丧予！」，虽悲痛满怀，但接受天命。正因为如此，他「不怨天，不尤人」，当理想得不到申张，他「乘桴浮于海」。&lt;/p&gt;&lt;p&gt;孟子认为：生于忧患死于安乐。孔子「杀身成仁」，孟子「舍生取义」，成为儒家的道德标准。孔子「知天命」，孟子「修身以俟之」，积极进取，修身养性，面对自己的使命。对孟子而言，君子对自己的生命也是有焦虑的，不光是当下的焦虑，还是一生的焦虑：「是故君子有终身之忧，无一朝之患也。乃若所忧则有之：舜，人也；我，亦人也。舜为法于天下，可传于后世。我由未免为乡人也，是则可忧也。」那焦虑了该怎么办呢？「如舜而已矣」，像舜那样去做呗。有了这样的大格局，便不会有一朝一夕对个人境遇的忧虑。&lt;/p&gt;&lt;p&gt;老子对生死的态度是不蹈死地 —— 「出生入死。生之徒，十有三，死之徒，十有三。人之生生，动皆之死地，亦十有三。夫何故？以其生生之厚。盖闻善摄生者，陆行不遇兕虎，入军不被甲兵。兕无所投其角。虎无所搓其主爪。兵无所容其刃。夫何故？以其无死地。」这点和孔子不要「暴虎冯河」异曲同工。所以他建议我们清心寡欲，「居善地，心善渊，与善仁，言善信」，有自知之明，不争，像水那样柔弱，不要过分「坚强」—— 「故坚强者死之徒，柔弱者生之徒。是以兵强则灭，木强则折。强大处下，柔弱处上」。&lt;/p&gt;&lt;p&gt;对于死亡，庄子特别豁达。他说：「人生天地之间，如白驹过隙，忽然而已」。所以庄子亡妻，惠子凭吊时，却见他席地而坐鼓盆而歌。当庄子自己将要死时，他不让弟子厚葬，要「以天地为棺椁，以日月为连璧，星辰为珠玑，万物为赍送」，这不比厚葬还要牛逼么？弟子们惶恐，怕「乌鸢之食夫子」。庄子笑笑：「在上为乌鸢食，在下为蝼蚁食，夺彼与此，何其偏也！」&lt;/p&gt;&lt;p&gt;我们小时都背过《扁鹊见蔡桓公》这个讳疾忌医最后病入膏肓的故事。相较于韩非的这篇文章，太史公的《扁鹊仓公列传》更值得诵读。因为讲完故事，太史公还摆出了他自己的生命观：&lt;br/&gt;&lt;/p&gt;&lt;blockquote&gt;使圣人预知微，能使良医得蚤从事，则疾可已，身可活也。人之所病，病疾多；而医之所病，病道少。故病有六不治：骄恣不论於理，一不治也；轻身重财，二不治也；衣食不能适，三不治也；阴阳并，藏气不定，四不治也；形羸不能服药，五不治也；信巫不信医，六不治也。有此一者，则重难治也。&lt;/blockquote&gt;&lt;p&gt;这个生命观，放在现代也非常科学。&lt;/p&gt;&lt;p&gt;第一，有病要遵医理，不要骄恣轻视。&lt;br/&gt;第二，生命和钱财孰轻孰重，要有个谱。&lt;br/&gt;第三，别暴饮暴食，也不要为了风度不管温度。&lt;br/&gt;第四，要有良好的生活习惯，好好休息，少熬夜加班，放宽心，少担忧焦虑，让阴阳错乱，五脏功能不正常。&lt;br/&gt;第五，日常锻炼，强健体魄，别搞得身体羸弱，病恹恹的。&lt;br/&gt;第六，别 TM 折腾偏方，吃乱七八糟的药，做不知所谓的理疗，要找真正的医生而不是巫医大师之流。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;作为现代人，如果要为这个生命观加上点什么，那应该是：&lt;/p&gt;&lt;p&gt;第七，珍惜时间，向死而生。买点保险，指定好受益人；早立遗嘱，办理生前信托。&lt;br/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;br/&gt;&lt;b&gt;禅定时刻&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;《朗读者》第二季有期节目讲生命，建议大家看看。我很喜欢这个开场白：&lt;/p&gt;&lt;blockquote&gt;生命是多么深邃的话题，它包含着人世间一切最极致的体验。生命，可以是能够被毁灭但不能够被打败那般顽强，也可以是“亦余心之所善兮，虽九死其犹未悔”那般博大。生命如果有颜色，会不会看上去，就像梵高的《向日葵》和《星空》；生命如果有态度，是不是听上去，就是贝多芬的《田园》和《英雄》。生命的意义是如此厚重，无论我们怎样全力以赴都不为过，因为我们生而为人，生而为众生。&lt;/blockquote&gt;&lt;p&gt;你也可以翻看之前的《长日无痕》系列：&lt;br/&gt;&lt;br/&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D402251568%26idx%3D1%26sn%3Dc4fd5992187b720f199d16bc6766c558%26chksm%3D0d0c5d2c3a7bd43a1665108752e6dd5564aef050a9d529aaac3fc9a7bd8728192b0652e6bb1a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;长日无痕（一）&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D401790638%26idx%3D1%26sn%3D090edc5546fc699d65bf5b43e9eb3adf%26chksm%3D0d0754b23a70dda4bbed5f9edb7131e357ee91c59c11b449f912c69614b13901c52725470b29%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;长日无痕（二）&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649827437%26idx%3D1%26sn%3D816d53775282cb31d65c7f3947737110%26chksm%3D8704aa71b07323678f3858aa2e35a3594f44521e606ccd8e4efa705df7fc67efe6548769d008%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;长日无痕（三）&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-07-25-75097584</guid>
<pubDate>Thu, 25 Jul 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>沅有芷兮：类型系统的数学之美</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-06-15-69223872.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/69223872&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-3717ea2eee51cd779e0a6a582cc9afe2_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;最近两周在给 team 培训 rust。虽然去年汉东给我们北京的 team 做过一次 rust 讲座，我的好友旭东也跟我布道过不少 rust 的美妙之处，但我真正开始系统性学习 rust，也就是三周之前。对大多数人而言，rust 最令人兴奋的是所有权的概念，零成本抽象的能力，以及通过合适的约束巧妙解决内存安全和线程安全两大难题的优雅 —— 记得看过一个统计，linux kernel 里面这两类 bug 占据了 1/2 强。也就是说，你只要学会了 rust，就躺着消弭了 50% 的难啃的让 kernel developer 都闻之变色的 bug。&lt;/p&gt;&lt;p&gt;但对我来说，rust 的美妙之处在于其为如此底层的语言注入了如此高级的吸收了大量 Haskell 精髓的类型系统。如果你接触过 Haskell / F# / Scala，你大概能了解我的兴奋之处。我们所处的世界往往是鱼与熊掌不可兼得 —— Haskell 长于类型系统，但让程序员失去了对数据在内存中如何排布的控制；C 长于对数据在内存中的精确控制，但没有一个像样的类型系统。rust 几乎做到了二者兼得。虽然我的 haskell 之旅最终从入门走向了放弃，但就像冰火岛上对武功秘籍懵懵懂懂的无忌，那些 monad，monoid，senigroup，sum type，product type 等概念还是烙在我的脑海里，它们尘封着，等待一个契机，让自己重见天日。这个契机，便是 rust。&lt;/p&gt;&lt;p&gt;本文借用 rust，谈谈我对类型系统的一知半解。文章本身和 rust 并不太大，有其它编程语言经验的朋友想必也能读懂。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;primitive type&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;primitive type，基本类型。基本上每种编程语言都有 —— integer，string，bool，array，list/vector 等。它们就像元素周期表里的一个个元素，不多，但构成了我们这个花花世界。&lt;/p&gt;&lt;p&gt;基本类型没有什么好讲的，不过在我们深入下面的话提前，我们需要问自己一个问题：什么是类型？&lt;/p&gt;&lt;p&gt;对于 u8 来说，它是 [0, 255] 之间的一个整数，是一个集合，可以这么表述：&lt;code&gt;{ x | x ∈ [0, 255]}&lt;/code&gt;。 对于 String 来说，它是任意字符串的一个集合，&lt;code&gt;{x | x ∈ [&amp;#34;&amp;#34;, &amp;#34;a&amp;#34;, ..., &amp;#34;War and Pease&amp;#34;, ...]}&lt;/code&gt;。&lt;/p&gt;&lt;p&gt;所以，类型在数学上的意义是集合。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;product type&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;product type 是几乎我们所知道的编程语言都有的数据类型 —— 在某些语言中它被称作 record (delphi, erlang)，另一些语言中被称作 struct (elixir, rust, go) 或者 object (javascript)。我们平时在软件开发中，最离不开的数据类型就是 product type，就像分子把不同元素的原子组合起来一样，product type 大大丰富了类型的可能性，从而很好地辅助我们做 DDD (Domain Driven Design)。&lt;/p&gt;&lt;p&gt;我们看 product type 数学上的意义。product type，顾名思义，是不同类型的乘积。类型的乘积究竟是什么东西呢？ 假设 x 的定义域是集合 int，y 的定义域是集合 string，x * y 展开便是 (…, -2, -1, 0, 1, 2, …) * (“”, “a”, “ab”, “hello world”, …)，也就是说对于 int 里的任意一个值，都有 string 里的任意一个值与其配对，看起来有些眼熟对不对？这就是笛卡尔积 (Cartesian product)。如图所示：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-9de4e21697eb1282f8dd93a32a7931cb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1947&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2560&quot; data-original=&quot;https://pic4.zhimg.com/v2-9de4e21697eb1282f8dd93a32a7931cb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-9de4e21697eb1282f8dd93a32a7931cb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2560&quot; data-rawheight=&quot;1947&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2560&quot; data-original=&quot;https://pic4.zhimg.com/v2-9de4e21697eb1282f8dd93a32a7931cb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-9de4e21697eb1282f8dd93a32a7931cb_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;比如在 rust 里，我们可以这样为一个 user 建模：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nickname&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email_verified&lt;/span&gt;: &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个 User 类型的集合的取值范围，就是它内部的所有类型的笛卡尔积。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;sum type&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;笛卡尔积固然能帮助我们构建各式各样的复合类型，但它无法描述这样的场景：我们想为 User 添加一个 payment 的类型，它可以是信用卡，现金，微信，以及 ABT 其中的一种。自然，我们可以这样描述：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Payment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Creditcard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Wechat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Abt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但这样的类型并不完备 —— 如果用户选择了信用卡，那么需要信用卡号，过期时间，持卡人等信息，而选择 ABT，则需要钱包地址及其公钥。这该怎么办？我们需要类似于这样的类型：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;n&quot;&gt;Creditcard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CreditcardType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Abt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WalletType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在集合论中，这被称作 disjoint union（不相交集），表述为 A + B。 如图：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a307eefe209832b7da86e60f5eb7cc23_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1920&quot; data-rawheight=&quot;1920&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1920&quot; data-original=&quot;https://pic4.zhimg.com/v2-a307eefe209832b7da86e60f5eb7cc23_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a307eefe209832b7da86e60f5eb7cc23_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1920&quot; data-rawheight=&quot;1920&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1920&quot; data-original=&quot;https://pic4.zhimg.com/v2-a307eefe209832b7da86e60f5eb7cc23_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a307eefe209832b7da86e60f5eb7cc23_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;不相交集在数据类型中往往被称作 tagged union (C++) 或者 sum type (haskell, rust)，和 product type 相反的是，大部分编程语言没有 sum type。我们看 rust 是如何使用 sum type 来解决上面的问题的：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CreditcardInfo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expiration&lt;/span&gt;: &lt;span class=&quot;nc&quot;&gt;chrono&lt;/span&gt;::&lt;span class=&quot;n&quot;&gt;NaiveDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WalletType&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pk&lt;/span&gt;: &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CreditcardType&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Creditcard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CreditcardInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Wechat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AccountInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Abt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WalletType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;sum type 的美妙之处是它解决了类型系统中基本类型和复合类型潜在的不够严谨的问题，比如说这样一个函数：&lt;/p&gt;&lt;p&gt;&lt;b&gt; href=&amp;#34;&amp;#34;&amp;gt;fn div(x: f64, y: f64) -&amp;amp;gt; f64 { x / y }&lt;/b&gt;&lt;/p&gt;&lt;p&gt;从 type signature 上看，似乎没有问题，但在实现层面上，我们很快发现 &lt;code&gt;x / y&lt;/code&gt; 有约束条件：y 不能是 0。我们要么设计一种新的数据类型 non_zero_f64 把零从中排除出去（这在大多数语言里都很困难），从输入的角度让这个函数的 type signature 完备；要么让返回的结果是一种特殊的类型，它可能是 f64，可能为空。&lt;/p&gt;&lt;p&gt;由于大多数语言不支持 sum type，这种情况就只好用两种方式来解决：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;函数的返回值可能是 f64，可能是 null。如果一门语言不支持异常，那么就只好检查一下输入，当为 0 时返回 null。&lt;/li&gt;&lt;li&gt;函数的返回值依旧是 f64，但除零的时候会抛出异常。对于支持异常的语言，除了上一种方式，我们还可以抛出异常。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;第一种方式损害了类型的完备性，因为 type signature 不再有权威 —— 调用者不敢肯定自己一定会拿回一个 f64，所以只好也做相应的条件判断，把这种对于类型的泄露一层层传递出去。第二种方式也是对类型完备性的一种损伤，因为调用者需要知道并且选择处理或者不处理那些「意外」。因为意外不是返回类型的一部分，所以，额外的逻辑是必不可少的。&lt;/p&gt;&lt;p&gt;上面 div 函数的问题只是冰山的一角。我们除了学习写代码和写 PoC 的代码外，其余的时刻都不可能只为 happy ending 写代码，毕竟我们面对的不是童话世界。错误和意外几乎伴随着任何一次互动 —— 和 IO 的互动，和类库（别人的代码）的互动，和系统调用的互动等。Scott Wlaschin 在他著名的 Railway Oriented Programming 里把一个又一个这样的情况拎出来寻求解决之道，而 sum type，就是最佳的选择。&lt;/p&gt;&lt;p&gt;在 Rust 里，我们有类似于 Maybe Monad 的 Option：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Option&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;对于上面的函数，我们可以用 &lt;code&gt;Option&amp;lt;f64&amp;gt;&lt;/code&gt; 来完善其 type signature:&lt;/p&gt;&lt;p&gt;href=&amp;#34;&amp;#34;&amp;gt;fn div(x: f64, y: f64) -&amp;gt; Option&amp;lt;f64&amp;gt;;&lt;/p&gt;&lt;p&gt;当 y 为零，返回 None；不为零，返回 Some(x / y)。表面上看它似乎和上面第一种方式没有区别，但一个形式化完备的类型让很多事情变成了可能。这个函数可以被 pipe，被 compose，调用者不必担心类型的泄露 —— 所有信息都已经在 type signature 里面了，编译器可以做更合适更严格的检查，也可以适当优化 —— 更重要的是，围绕着这个类型，我们可以把一堆原本不断出现在用户代码中的对结果判断的 if else / try catch 抽象出来，成为 Option 类型的一组 behavior，这样让用户代码变得清晰。&lt;/p&gt;&lt;p&gt;同样的思路，在 Rust 里，exception 被抛弃，取而代之的是是 Result，也是一个 sum type:&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;和 IO 的互动，和别人家的代码的互动，大家都可以通过 Result 来完成。围绕着 Result，也有一组标准的 behavior 和宏，处理其结果。&lt;/p&gt;&lt;p&gt;围绕着编程语言是否需要 exception，exception 是良药还是毒药，有诸多争议，java / python 是建制派，C++ / haskell 是骑墙派，rust / go 是反对派，erlang / elixir 是无政府主义者，这里便不展开。你问我支持谁？我喜欢尤达大师对卢克说的那句经典台词：do or do not, there’s no try。这句话也蕴含了 erlang 的哲理：let it crash。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;generics type&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Generics type，或者说泛型，是让人又爱又恨的类型。它简化了代码，提升了抽象程度，但程序员为之付出的代价是陡升的学习曲线。抛开泛型的好坏不提，我们先看看泛型的数学意义是什么。还是以 Option 类型来说事：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Option&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;T 代表任意类型，Option 是 T 映射到这个 enum 的结果。所以换个角度，我们可以认为泛型是作用在类型上的一种特殊的函数，它接受一种或者多种类型，返回一种新的类型。我们知道，编译器在处理具体的数据时会将泛型展开，比如说 &lt;code&gt;Option&amp;lt;u8&amp;gt;&lt;/code&gt; 展开后就是：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Option&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这种展开可以无限制延伸下去，但彼此又并不想交，就好像 sum type：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;U8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;U16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VectorU8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VectorU16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;u16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个结果就很有意思了。我们知道 sum type 的数学意义是类型之和，我们把 primitive type 记作 X，那么这里就有 n 个 X，&lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; 可以是 &lt;code&gt;Option&amp;lt;T&amp;gt;&lt;/code&gt; 的一种类型，因而 &lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; 可以展开成 nX，类似 &lt;code&gt;Vector&amp;lt;T&amp;gt;&lt;/code&gt; 这样的类型也有 n 个，那么到现在为止展开的 Options 可以记作 nX + n _ nX，同理 HashMap&amp;lt;T, E&amp;gt; 是 n _ nX，而 n 个类似 HashMap&amp;lt;T, E&amp;gt; 展开的选项为 n _ n _ nX，以此类推我们可以得出泛型代表着：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;n + n^2 + n^3 + n^4 + ....&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;种数据类型的集合。这是一个等比级数，其结果是 &lt;code&gt;n(1 - n^n) / (1 - n)&lt;/code&gt;。&lt;/p&gt;&lt;p&gt;以上。&lt;br/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;我们 ArcBlock 还在招募 iOS 工程师和后端工程师，如果你对技术有热情，欢迎发送简历给我，tyr at &lt;a href=&quot;https://link.zhihu.com/?target=http%3A//arcblock.io&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;arcblock.io&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;。想了解更多关于 ArcBlock 和区块链的信息，可以戳：&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828178%26idx%3D1%26sn%3Dc5d0120098f2e51f12b16a05af4bd18b%26chksm%3D8704a94eb0732058916b6b04c20611bb5dd7fda3bf4bb0ff91ac14fc595f8ba5fd2ed79a5ba7%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ArcBlock 一周年&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828161%26idx%3D1%26sn%3Dba80c0212ecdd4e23c16263fb1cb8bb1%26chksm%3D8704a95db073204b3947117d1ea77d4ceb6650c0ae9279f0ce45fb2b706e7534e62847d42810%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;ABT network 部署记&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828088%26idx%3D1%26sn%3D3fd4d3c48dde5aaf6c0d70848d945af0%26chksm%3D8704a8e4b07321f21a73393a16a874d0f5c3cb9deae88f611a6af15e39ac55b3a1aff593c33a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;在程序中时间旅行&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828078%26idx%3D1%26sn%3D5a16285e2cd2253be306e14229e58254%26chksm%3D8704a8f2b07321e48b60aba5b07a3b065564efeb4f9a9113183691c2684d0c8c2090fc0da04b%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;区块链和数据库：致虚极，守静笃&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-06-15-69223872</guid>
<pubDate>Sat, 15 Jun 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>至暗时刻</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-05-23-66802111.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/66802111&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-93c4c58400414fb678288e0b4375a200_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;那美克星上，悟空在经历了游走生死边缘的地狱般严苛的训练后，终于以二十倍界王拳的力量直面弗利萨。然而，实力差距过分悬殊，悟空唯有兵行险着 —— 集全部力量于一体，发出了超级龟波气功。这几乎是他最后的希望。可惜，全力一搏并没有什么效果，反而狠狠激怒了弗利萨。力量耗尽，悟空几乎动弹不得，像一只待宰的羔羊：那是他的至暗时刻，甚至是整部《龙珠》的至暗时刻。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8ddb75c356314c6249b10c3c13b586ff_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;397&quot; data-rawheight=&quot;370&quot; class=&quot;content_image&quot; width=&quot;397&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8ddb75c356314c6249b10c3c13b586ff_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;397&quot; data-rawheight=&quot;370&quot; class=&quot;content_image lazy&quot; width=&quot;397&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-8ddb75c356314c6249b10c3c13b586ff_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;同样的情形，贝吉塔在不久前才遭遇过：高傲的赛亚人王子携死而复生后倍增的战斗力，信心爆棚。然而在和弗利萨缠斗一番后，他绝望地发现自己的力量相对于弗利萨的力量而言，就像江河之于大海。什么都完了，希望就像一只五彩缤纷的肥皂泡，嘭的一下在眼前破灭 —— 他那被恐惧牢牢占据的脑子里，只剩下一个悲哀的叹号。所以贝吉塔之后没有任何抵抗，呆若木鸡，任凭对方将自己肆意蹂躏践踏。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d2fc7d5755e2db3d957d1f6fe56d1aa_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;298&quot; data-rawheight=&quot;169&quot; class=&quot;content_image&quot; width=&quot;298&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5d2fc7d5755e2db3d957d1f6fe56d1aa_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;298&quot; data-rawheight=&quot;169&quot; class=&quot;content_image lazy&quot; width=&quot;298&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5d2fc7d5755e2db3d957d1f6fe56d1aa_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;好在悟空不是贝吉塔。面对让人窒息的黑暗，贝吉塔（以及大部分人）的勇气是一瞬间的闪念，而悟空是一辈子的执念。不管面对多么强大的敌人，他的心境还是第一次面对他那意欲消灭地球的哥哥拉提兹时一样：有点害怕，却又莫名兴奋。对悟空来说，&lt;b&gt;一个人可以被毁灭，但不能被打败&lt;/b&gt;。放弃从来不在他的字典中 —— 他用残存的一点点力量，勉力忍受着弗利萨一波又一波的打击，只求集中精神收集够那美克星和附近的星星上的元气，做最后的努力。最终，在界王看来足以毁灭这颗行星的元气弹制作完成，并成功击中弗利萨。尽管结局依旧惨烈 —— 几乎是全宇宙最后一丝希望的元气弹也未能击败弗利萨，但如果没有这份坚韧，悟空便无法熬到让人热血沸腾的，可能是《龙珠》里最高光的时刻：变身成为 &lt;b&gt;超级赛亚人&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;（二）&lt;/p&gt;&lt;p&gt;《指环王》三部曲里，有很多动人的时刻 —— 弗罗多和山姆登上摩多的坚毅果敢，阿拉贡对骷髅军团的谨守诺言，甘道夫大战炎魔后的起死回生。但最令我难忘的是圣盔谷内外一整夜的血腥鏖战。人族和精灵族一道浴血奋战，殚精竭虑，依然扛不住数万半兽人大军的前赴后继。外城破了，随后瓮城失守，接着内城也毫无悬念地被肆虐。城里幸存的老弱病残，拿得动武器的男子被分配了各式各样的，大多甚至不能称之为兵器的武器，瑟瑟发抖中准备最后的抵抗；而妇孺们在绝望地抽泣。宫殿内的诸位主角们，整饬好了盔甲，舒缓一下战斗了一整夜的筋骨，跨上战马，犹如《亮剑》里的骑兵连孙连长，悲壮地准备最后的，飞蛾扑火般的冲刺 —— 那是中土世界正义一方的至暗时刻。&lt;/p&gt;&lt;p&gt;在那一刻，谁也不知道，「希望」，是个什么东西。&lt;/p&gt;&lt;p&gt;直到 —— 承诺过「五天后第一缕阳光初现时回来」的甘道夫如期而至，身后是三千曾经被放逐的洛汗精骑。终于，光明刺穿黑暗；终于，白衣骑士们如潮水般冲垮半兽人大军。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ece8a9ef49150ab357c63968b4e5e16b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2548&quot; data-rawheight=&quot;1040&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2548&quot; data-original=&quot;https://pic4.zhimg.com/v2-ece8a9ef49150ab357c63968b4e5e16b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ece8a9ef49150ab357c63968b4e5e16b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2548&quot; data-rawheight=&quot;1040&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;2548&quot; data-original=&quot;https://pic4.zhimg.com/v2-ece8a9ef49150ab357c63968b4e5e16b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-ece8a9ef49150ab357c63968b4e5e16b_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;（三）&lt;/p&gt;&lt;blockquote&gt;文王拘而演《周易》；仲尼厄而作《春秋》；屈原放逐，乃赋《离骚》；左丘失明，厥有《国语》；孙子膑脚，《兵法》修列；不韦迁蜀，世传《吕览》；韩非囚秦，《说难》《孤愤》。&lt;br/&gt;&lt;br/&gt;—— 司马迁《报任安书》&lt;/blockquote&gt;&lt;p&gt;为李陵辩护而惨遭宫刑，自己的老朋友因为巫蛊之祸被判腰斩，向他求援他却无能为力。这是司马迁的至暗时刻。为了回复任安老友的请求，阐述他见死不救的苦衷，司马迁写下了这封情怀慷慨，跌宕奇伟，冠绝古今的书信。其中，他罗列了一堆先贤们的典故来阐述自己的心志：人固有一死，命运如此作贱，自己还隐忍苟活，是为了「&lt;b&gt;将以有为也&lt;/b&gt;」。&lt;/p&gt;&lt;p&gt;将以有为。老俞说「从绝望中寻找希望」，大抵是这个意思。而《至暗时刻》的主人公丘吉尔便深谙此道。&lt;/p&gt;&lt;p&gt;《至暗时刻》这部电影让我印象最深刻的是丘吉尔在地铁里和伦敦的居民们聊天的那个桥段 —— 虽然，大概率这是影视作品的虚构。丘吉尔对着嘴上满满 “confidence” 心头却七上八下的群众们说：&lt;b&gt;Lost causes… Lost causes are the only ones worth fighting for.&lt;/b&gt; 翻译过来就是：（面对纳粹的铁骑）有人说我们会注定失败。但 &lt;b&gt;注定失败才值得放手一搏&lt;/b&gt;。相比于那著名的 we shall never surrender 的下院演讲，这个片段更令人动容：这是镁光灯外，一个老人的掏心窝子的肺腑之言。&lt;/p&gt;&lt;p&gt;嗯，注定失败才值得放手一搏。等死，死国可乎？&lt;/p&gt;&lt;p&gt;最近有一个另一个老人以及他一手打造的伟大公司也在经历至暗时刻。人生七十古来稀，他却在此等高龄之际因为政治的原因先是爱女被拘，随后公司被「莫须有」地放进了黑名单，真真是前路茫茫，举步维艰 —— 欲渡黄河冰塞川，将登太行雪满山。面对激动的网民，唯恐天下不乱的媒体，老人冷静客观，心胸宽广，却又意志坚定，让人动容。他的这份平和的自信，让我相信，他和他的家人，他的公司能够熬过这至暗时刻，破茧成蝶，最终扶摇直上九万里。&lt;/p&gt;&lt;p&gt;和他相比，我们那微渺的「至暗时刻」又算得了什么呢？&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;谨以此文献给那些经历过，正在经历，或者未来将要经历至暗时刻的朋友们。pain is inevitable, suffering is optional。没有过不去的坎儿。&lt;/p&gt;&lt;p&gt;关于地铁里的对话，有条件上油管的可以看这个：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//youtu.be/Ts8WRHAQvk4%3Ft%3D41&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;youtu.be/Ts8WRHAQvk4?&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;t=41&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;。嫌长的可以直接跳到 41s 处。&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-05-23-66802111</guid>
<pubDate>Thu, 23 May 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>先知的选择</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-05-23-66801008.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/66801008&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-14bd4a4ef3213c6e34b7e09ff6b47188_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;五月十二日的公众号文章。忘记放在专栏了。&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;Oracle，不单是甲骨文，它还有先知的意思。在 Matrix 里，当 Neo 第一次见到先知，想确认自己是不是救世主 (the one) 时，先知并没有直接回答他的问题，而是抛给他一个新的问题：Morpheus 深信你是救世主，所以会赌上性命为了救你而牺牲，而无情的现实是你和 Morpheus 只有一个人能活下来，你该怎么选择？&lt;/p&gt;&lt;p&gt;Matrix 2 里，Neo 再一次找到先知来解决自己该做何种选择的困惑，先知却笃定：你不是来做选择的，你已经做出了选择；你来是为了了解，你为何这么选择。&lt;/p&gt;&lt;p&gt;在先知一次又一次的引导下，Neo 做了一次又一次选择。这些选择最终将 Neo 一步步引向救世主。因而当 Neo 排除万难，见到造物主时，他幡然醒悟：choice, the problem is choice!&lt;/p&gt;&lt;p&gt;选择似乎是我们生命中无可避免的事情 —— 每天从睁眼的那一刻起，我们就在不停地面临选择和做出选择，有些容易（去哪吃饭），有些艰难（要不要换工作），有些是倾尽一生的选择（选择自己的另一半，要几个孩子等）。&lt;/p&gt;&lt;p&gt;我的大女儿，聪慧绝伦，却常常纠结于如何选择。我们刻意用各种方式训练她做出自己的选择 —— 比如说，妈妈给她买个包作为礼物，同一款式不同花色，她喜欢的花色要比她并不那么喜欢的贵十元。如果她选便宜的，妈妈就全额帮她付讫；否则，她需要自己支付额外的十元 —— 这意味着，她小小的债务会继续累加。小丫头在商场里痛苦撕号让人于心不忍，但我们知道，这是让她成长的绝佳机会 —— 她必须学会鱼和熊掌不可兼得 —— 就像《星际穿越》里 Cooper 在摆脱黑洞的关键时刻做出选择时戏谑的：Newton’s third law. You got to leave something behind。&lt;/p&gt;&lt;p&gt;作为事后诸葛亮，我可以这么说，曾经的 “先知” Oracle 在 cloud computing 时代到来之际，在互联网公司纷纷去 IOE (IBM / Oracle / EMC) 化时，在 Amazon 用 DynamoDB，Aurora，Redshift 疯狂圈地之际，患得患失，并没有正确选择。如果你看看微软变革 windows 的坚决，拥抱 cloud computing 的果断，你就会为 Oracle 畏手畏脚，在 licensing 和 cloud computing 两边下注的优柔寡断而惋惜不已。&lt;/p&gt;&lt;p&gt;与之同病相怜的是即将被裁的上千名 Oracle 中国的工程师。裁员这事一个月前媒体已经放出风来，连我这种不太凑热闹的人，都赶了个场谈：&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828168%26idx%3D1%26sn%3D9cf299a6a9ad33d5ad169dbbd4fb6dd9%26chksm%3D8704a954b073204230a37c7ba07025f2266785f0e7079c58cfded57316b7269b9bb791ec6cbe%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Oracle  裁员，与其哀怨，不若放下&lt;/a&gt;。但是身在其中的人还是会心怀侥幸，甚至，更多地是不甘 —— 主动离开，万一 Oracle 中国随后裁员，拿不到离职补偿啊！当暴风真正来临的时候，当丰厚的离职补偿（据说是 N+6，N 是符合劳动法的 N，6 是员工实际工资）摆在桌上的时候，同一批人还是会心有不甘：N 为什么不是实际工资的 N 倍，我的马上到期的期权，RSU 怎么办？我再也找不到那么好的福利待遇了，怎么办？&lt;/p&gt;&lt;p&gt;这世界往往就是这么残酷，可是在残酷中不断选择，是成长的必经之路：&lt;/p&gt;&lt;p&gt;Ray Dalio 在回顾他的人生时说：&lt;/p&gt;&lt;blockquote&gt;Looking back on my own journey, I now see that time is like a river that carries us forward into encounters with reality that require us to make decisions. We can’t stop our movement down this river, and we can’t avoid the encounters. We can only approach them in the best possible way.&lt;/blockquote&gt;&lt;p&gt;其实看看 Oracle 美国给出的卑微的补偿和无情的做法：&lt;/p&gt;&lt;blockquote&gt;I spent 20 years with Sun/Oracle. When the hammer came down they called all engineering staff into the board room and we were told at 9:05 am. “Your jobs as you know then no longer exist”. We were then given our paperwork. &lt;br/&gt;Told to be at an hr appointment with someone we didn’t know and told of our payout. Most of us had spent 20+++ years there and where just about to enter retirement. I’m 60. Oh and they hired 4 people in India to replace every one of us at a fraction of the cost.&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.thelayoff.com/t/YfnpR8c&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;thelayoff.com/t/YfnpR8c&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/blockquote&gt;&lt;p&gt;Oracle 中国已经算得上良心 —— 当然站在被裁者的立场上，再良心也是丧尽天良。&lt;br/&gt;&lt;/p&gt;&lt;p&gt;再多的补偿，再好的 package 可以补得了一时，能补得了一世么？失望，惊讶以及愤怒之余，真得该好好思考一下，下一步该怎么选。毕竟三十多岁，人生才启动了三分之一。&lt;/p&gt;&lt;p&gt;乌龟大师在阿宝彷徨无措不知道是走是留的时候说：quit. don’t quit. noodles. don’t noodles. you’re too concerned with what was and what would be. There’s a saying - yesterday is a history, tomorrow is a mystery, but today is a gift, that is why it is called present.&lt;/p&gt;&lt;p&gt;别拉横幅了，该翻篇了，人生又不是只有一次 &lt;b&gt;危机&lt;/b&gt;。上次 Adobe 大裁员时，朋友圈还对拉横幅的满是同情，现在，一水的谴责。&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;随笔一篇。对工作和职业生涯迷茫的同学请戳：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828034%26idx%3D1%26sn%3D53044f7df0d285383e9ab37eed30435d%26chksm%3D8704a8deb07321c815e0a8db23a9175fe959889dcb7f291dcf2522be81e32cc863f402cab82c%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;银河系跳槽指南&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649827812%26idx%3D1%26sn%3D8b2389d4c7221cb439ab0e705dd6e8e9%26chksm%3D8704abf8b07322eee8aecb3bd6ad6f71f2673072feb0ed5b6f2f2fee97f0b0d11411526cc8ef%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;程序员的好日子什么时候才到头？&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649827713%26idx%3D2%26sn%3Dd744af9c02ebac9bfb1fd2114c5cc6a5%26chksm%3D8704ab9db073228bb3403f8b750e0d25946130c053bf09f5ff1569c91e23a1312f02bc502e78%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;如何选择工作&lt;/a&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-05-23-66801008</guid>
<pubDate>Thu, 23 May 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>ArcBlock 一周年</title>
<link>https://henix.github.io/feeds/zhuanlan.prattle/2019-05-05-64684140.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/64684140&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1a42c3c91ff6356c60675e7f2190fea5_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;（一）&lt;/p&gt;&lt;blockquote&gt;这是我开过的最艰难的一次长途了。从家到 springfield（中转站）570 英里，我早上 8:30 出发，下午 4:50 到。进入 Oregon 之后，天就跟漏了似的，一路时断时续的暴雨，有的山路已经形成洪流，车驶过的时候，轮胎被水流带着，方向盘都有些不听使唤。好在一路车少，有惊无险。 - 程序君 04/28/2018&lt;/blockquote&gt;&lt;p&gt;岁月如梭，光阴似箭，湾区的生活似乎就在昨天，而我成为华州的居民已经一年零一天了。这一年过得跌宕起伏，就像我只身驱车前往华州的旅途一样，前半程傲睨自若，势如破竹；后半程战战兢兢，如履薄冰。好在，最后一切安然。&lt;/p&gt;&lt;p&gt;三月份回湾区参加 Code BEAM 大会，重回 Tubi，见了很多老朋友。Tubi 一片欣欣向荣，全方位不断刷新自己的记录 —— 17 年底搬入的新办公室，仅仅一年多时光，便已已经捉襟见肘，整层楼明显超载；而北京办公室那边，更是不得了，趁着国内互联网公司一片哀嚎从高大上的 Wework 纷纷撤离之际又扩充了大片工位。我跟 haofei 调侃，Tubi 赶紧上市，我好在 Bellevue 买套房，结束租房生涯。回到家跟老婆聊种种往事，老婆打趣，从 Tubi 离开，你后悔过么？我笑笑，不后悔啊，虽然整个加密货币市场一地鸡毛，但是我们离一年前的初心，已经无比接近了。&lt;/p&gt;&lt;p&gt;是的，无比接近。&lt;/p&gt;&lt;p&gt;去年这个时候，我踌躇满志地写下了《&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649827999%26idx%3D1%26sn%3D5374d71f1baa677ffe6805d36fac2af0%26chksm%3D8704a883b07321953c6e713bb86a08ca546a18f661522bbbf89a8832fbdb897f82babdc7a11e%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;欢迎来到区块链的世界&lt;/a&gt;》，其中谈到了 ArcBlock 看到的机会：&lt;/p&gt;&lt;blockquote&gt;第一个方向，是围绕着数字资产的持有者和创造者的产品和应用 —— 已有的大饼如何切。有以下机遇：&lt;br/&gt;1. cryptocurrency 交易所。这目前是属于币安们的舞台，很快也会迎来纳斯达克等传统交易所。也许未来 DEX（去中心化交易所）会成为重要甚至主要的力量。&lt;br/&gt;2. 数字投行。谁来做区块链时代的高盛？摩根斯坦利？&lt;br/&gt;3. 数字投资。如果把 token 看做资产，那么，谁是区块链时代的富达，桥水？谁来帮用户管理数字资产，打造合适的 cryptocurrency portfolio，让其保值和增值？&lt;/blockquote&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;blockquote&gt;币安每天 $10B 的体量，已经可以和中小国家的证券交易所匹敌，足以说明问题。而若能做成区块链时代的桥水和高盛，想想都能流口水。&lt;br/&gt;第二个方向，用区块链取代现有的解决方案。有几个机遇：&lt;br/&gt;&lt;br/&gt;1. 去中心化金融科技。Fintech 领域也许是目前除了交易所外最成熟的应用领域，如 Ripple。&lt;br/&gt;2. 反欺诈。在电商，p2p lending，crowdfunding 等方向有很多机会。&lt;br/&gt;3. 数据保全。在知识产权，证书，身份（identity），供应链，以及用户的积分体系等等都有产生高质量用户的机会。&lt;br/&gt;4. 智能合约（smart contract）和分布式应用（Dapps）。这是吵得最凶，最滥，关注点最高的领域，但目前除了以太猫（crypto kitty）外，似乎没有太多实质的应用。这个领域需要足够好的思考和最够完善的基础设施才更容易出成果。&lt;br/&gt;5. 小额支付/点对点支付。这是一个很重要的方向，目前以我有限的想象力还很难看出有什么需要用区块链取代微信支付的小额支付场景。&lt;/blockquote&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;blockquote&gt;第三个方向，打造更好的，技术更领先，更快，更容易构建应用的公链，以取代「缓慢」，「buggy」的以太坊。这个方向市场巨大，成则雄霸天下；却也是异常拥挤的红海，几乎 90% 的区块链公司都把自己定位于一个更好的公链，最终的结果是一将功成万骨枯。&lt;br/&gt;第四个方向，是围绕打破区块链只是为技术极客设计的樊篱，让这个技术有更大的普惠性 —— 如何扩展这个大饼的边界。这是 ArcBlock 看中的方向。它有以下机遇：&lt;br/&gt;&lt;br/&gt;1. 打造能够给菜场大妈使用的区块链产品（首当其冲的必然是钱包应用），让「旧时王谢堂前燕，飞入寻常百姓家」。&lt;br/&gt;2. 打造产品为第一个和第二个方向的公司服务，成为淘金者身边的李维斯。&lt;br/&gt;3. 打造产品以及构建生态，桥接 real world 和 blockchain world —— 让 app 开发者可以简单嵌入一个 SDK 或者调用一些 API，使用 blockchain 的各种能力 —— app 开发者甚至不需要知道 blockchain tech 的存在。就像 app 开发者基本上都会使用 HTTP 来承载网络上的数据，有哪个 app developer 需要读 RFC2616 / RFC7540 呢？blockchain tech 终将需要发展到这一步。&lt;br/&gt;这里面的 2 和 3，就是 ArcBlock 的机会。ArcBlock 选择这个方向，是完完全全从用户的角度出发，因为历史一再证明，要想一门有使用场景的技术进入主流市场，简单易理解体验好是起码的要求，而对用户的简单则是对开发者的难题，有时甚至是难以逾越的天堑。ArcBlock 的壁垒将是对 2 和 3 的用户的需求的深刻理解，我们内部的服务提供能力，我们的 node 快速部署的能力，我们的 Blocklet 的 auto scaling 的能力，以及我们在追求正确方向和正确道路上打造出来的创新和学习能力 —— 这些都是冰山下面的部分，是风停了之后我们依旧能够前行的能力。&lt;/blockquote&gt;&lt;p&gt;一年过去了，同行者大多已经不知所踪，而我们依旧在这条路上深耕 —— 更重要的是，我们一步步，从技术上，从产品上，从思想上对链，对应用，对用户体验有了自己独特的洞见，并且将其付诸于产品之上。我们追求的不是大一统的公链，而是万链齐发的应用链，也就是我们提出的链网的概念，因而，我们费尽心思赋予每个应用构建自己的链的能力。我逢人便说，我们的 forge framework 之于区块链，就像 Ruby on Rails 之于 Web 2.0，它终将开启潘多拉魔盒，让区块链成为每个开发者触手可及的，去打造合适的应用的工具，而非币圈先行者们用于圈钱的禁脔。&lt;/p&gt;&lt;p&gt;（二）&lt;/p&gt;&lt;p&gt;这条路并非坦途。一年前，所谓的 dapp（decentralized app）大多就是一些简单的 smart contract，而这些 dapp 的极致代表是 cryptokitties，Fomo 3D 这样出奇制胜的游戏。真正和大家工作生活息息相关的应用，一个也没有。对于 dapp，我们心心念念的是，如何提供基础平台用区块链重塑 taobao，ebay，eventbrite 这样的交易相关的应用（区块链的强项），甚至 wordpress，discuz! 这样内容相关的应用。&lt;/p&gt;&lt;p&gt;这在当时是一个没有人可以（用技术 / 产品）回答的问题。以太坊及其继任者之所以无法回答这个问题，是因为 1) 公链把全网所有的数据糅杂在一起，不但拖累应用的表现，还严重影响应用的开发测试和部署。2) 以太坊的基础设施及 smart contract 的能力，还不足以高效完成足够复杂的业务逻辑。3) 开发者体验太差。&lt;/p&gt;&lt;p&gt;当然，饭要一口口吃，路要一步步走。比特币和以太坊作为最成功的两个区块链项目，值得我们深度学习和研究。我们并未像同期绝大多数项目那样，fork 一个以太坊，改头换面，宣称是自己的项目；相反，我们走了一条艰难的路：通过打造一个跨链的中间层，我们深入比特币和以太坊的奇妙的状态世界，理解他们的运行机理，为我们自己的框架做技术储备；同时，我们运营多条链的节点，学习他们的运作方式，从开发者的角度和节点用户的角度，找出其中的痛点和产品上可以精进的地方。&lt;/p&gt;&lt;p&gt;在这个过程中，我们做了大量的准备工作，有些甚至看上去和链毫无关系。比如我们做的一个代码自动化的项目 Goldorin，可以把 yaml 格式的 schema 描述转换成 GraphQL / Database 相关的代码（见我之前的文章：&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828040%26idx%3D1%26sn%3Df92d9e17f993668b05bc1ab1c84e153b%26chksm%3D8704a8d4b07321c24ea7947680432a99d43da4f5d0c6dadd941bc244bdeef2ae3ec75fac753b%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;如何在几十个 Repo 中游刃有余？&lt;/a&gt;），它的诞生仅仅是为了提高我们 API 的开发效率，却不料后来被应用到了我们的 ABT Chain Node 上，为 protobuf 接口自动生成 GraphQL 接口立下了汗马功劳。&lt;/p&gt;&lt;p&gt;再比如说，我们在边做边学的过程中，每周有一到数次的团队内部和外部的分享，一年下来，不知不觉已经累积了一百多次分享的素材（单单是对外的分享我们就做了二十多期，见：&lt;b&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.arcblock.io/zh/learning&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;arcblock.io/zh/learning&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/b&gt;），内容涵盖之广，外人可能很难想象：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a933dfaa0df1a018a5382c9c7c03fa1a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3094&quot; data-rawheight=&quot;1786&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;3094&quot; data-original=&quot;https://pic3.zhimg.com/v2-a933dfaa0df1a018a5382c9c7c03fa1a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a933dfaa0df1a018a5382c9c7c03fa1a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;3094&quot; data-rawheight=&quot;1786&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;3094&quot; data-original=&quot;https://pic3.zhimg.com/v2-a933dfaa0df1a018a5382c9c7c03fa1a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-a933dfaa0df1a018a5382c9c7c03fa1a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;这就好像柳传志所说的：撒一层土，夯实，再撒一层。&lt;/p&gt;&lt;p&gt;当我们的技术储备和对区块链的理解到达一定层次后，我们也并未立即撸起袖子开干。我们在 tendermint 上做了一个 ex_abci，提供 elixir 的 ABCI 的支持。tendermint 作为一个优秀的 p2p / PBFT consensus layer，定义了一套完善的接口，把区块链的实现和 p2p / consensus 分隔开，这和我们分层处理，屏蔽细节的思路不谋而合。在 ex_abci 的基础上，我们做了一个非常原始的区块链开发框架 —— 使用以太坊的 MPT（Merkle Patricia Tree）的思路管理链上的 state，使用 protobuf 定义 state 和 transaction，用 gRPC 提供对外的 RPC 服务。框架本身只提供最基础的 transaction 支持，比如 transfer，而更加丰富的 transaction 的支持交由 dapp 来完成。因为这个框架的目标是帮助开发者 &lt;b&gt;锻造&lt;/b&gt; 他们的应用 &lt;b&gt;链&lt;/b&gt;，因而取名 Forge：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5ab4e0f25513b44c9b600de28c15da1c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1366&quot; data-rawheight=&quot;768&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1366&quot; data-original=&quot;https://pic1.zhimg.com/v2-5ab4e0f25513b44c9b600de28c15da1c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5ab4e0f25513b44c9b600de28c15da1c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1366&quot; data-rawheight=&quot;768&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1366&quot; data-original=&quot;https://pic1.zhimg.com/v2-5ab4e0f25513b44c9b600de28c15da1c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-5ab4e0f25513b44c9b600de28c15da1c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;就着新鲜出炉的 Forge，我们尝试着构建了一个 PoC app —— 一个去中心化的 wordpress。我管它叫 Final Chapter。用户可以在 Final Chapter 里创建文章，endorse（顶）或者 repel（踩）一篇文章。正如你所猜到的那样，create_post / update_post / endorse / repel 都是自定义的 transaction。Final Chapter 前端使用 phoenix，后端使用 Forge，尽管仅仅是一个很原始的 PoC，但它验证了 Forge 的方向的正确性，以及其具备的无穷潜力。我们还意外地发现，巧妙使用 MPT，可以实现区块链世界的时间旅行 —— 一个用户可以在 Final Chapter 的时间轴上自由地翱翔 —— 就像《星际穿越》中，Cooper 在黑洞中进入的四维空间。。&lt;/p&gt;&lt;p&gt;于是，用户发表的文章有了自己的生命线，时间轴上经历的任何一次 update_post，都是一个不可磨灭的版本，同理，每个用户也有他们自己的，一步步迭代的版本，甚至，整个应用的全网数据，在每个 tick（一个区块产生的时间）里，都有独一无二的版本（想了解更多请参阅：&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D2649828088%26idx%3D1%26sn%3D3fd4d3c48dde5aaf6c0d70848d945af0%26chksm%3D8704a8e4b07321f21a73393a16a874d0f5c3cb9deae88f611a6af15e39ac55b3a1aff593c33a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;在程序中时间旅行&lt;/a&gt;）。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0e4d539b90750f54de2fcec37aa85e65_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1400&quot; data-rawheight=&quot;1448&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1400&quot; data-original=&quot;https://pic2.zhimg.com/v2-0e4d539b90750f54de2fcec37aa85e65_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0e4d539b90750f54de2fcec37aa85e65_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1400&quot; data-rawheight=&quot;1448&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1400&quot; data-original=&quot;https://pic2.zhimg.com/v2-0e4d539b90750f54de2fcec37aa85e65_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-0e4d539b90750f54de2fcec37aa85e65_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Forge 的 PoC 看上去是可行的，接下来我们便为其提供更加丰富的功能 ——&lt;/p&gt;&lt;p&gt;为了支持丰富的钱包类型，我们开发了 Mcrypto，开发者，甚至用户可以决定她在链上使用什么类型的钱包 —— 用 Secp256k1 还是 ED25519 算法制作密钥？用 sha2，sha3 还是以太坊使用的 keccak f1600 来做哈希？&lt;/p&gt;&lt;p&gt;为了让钱包的密钥可以像账户的密码一样为了安全起见不断更新，我们提供了 account migration 的能力。这样，当你的私钥有潜在泄露的风险时，你可以使用 account migration 把旧的密钥迁移到新的密钥 —— 你的朋友们依旧可以给你的旧的钱包地址发送交易，而相关的交易会自动转向新的地址。&lt;/p&gt;&lt;p&gt;为了让节点的升级可以像普通软件的升级一样无缝，我们提供了 auto upgrade node 的能力。当 upgrade 在网络中达成共识后，所有节点会在指定的高度一起停下来，自动更新为新的版本，并重新启动。&lt;/p&gt;&lt;p&gt;为了提供足够丰富的，开发者开箱可用的 transaction，我们开发了丰富的 transaction protocol，从账户的管理到资产的创建和管理，从链上的治理到跨链的支持，从简单的交易形态到非常复杂的交易方式。举个例子，如果你要开发一个应用来销售电影票，每张电影票都是一个 none fungible 的 token（在 Forge 里，我们称之为 asset），影院的管理者可以从销售电影票的过程中获得 token，而购票者付出了 token，得到了 ticket asset。之后这个 ticket asset 作为一个凭证可以在影院入口消费。这整个流程如果用区块链解决，非常具有挑战性（想想你怎么在以太坊上搞？）。类似的场景有很多，比如签证，比如门禁，都是一个机构可以发行 asset，用户可以通过付费或者一些前置条件来获取这些 asset，并且在合适的场合消费。对此，我们提供了类似自动售货机一样的 asset factory 来解决这一类问题。&lt;/p&gt;&lt;p&gt;不仅如此，我们的 transaction protocol 还可以 hot upgrade —— 也就是说，节点不必重启，一个新版本的 protocol 就可以部署至全网。&lt;/p&gt;&lt;p&gt;最后，我们力图让这一切都尽可能简单。我们提供了 forge-cli，两三条命令就可以让开发者运行自己的节点；我们提供了多种语言的 SDK，尽可能扫清开发者开发的障碍；我们的 ABT Chain Node，提供链上数据的可视化服务，对于节点的大部分操作都可以在 web 界面中完成；为了降低开发者大规模部署链上节点以及运营成本，我们开发了 forge-deploy 脚本，可以用两条命令在数分钟左右（取决于节点的数量）在 AWS 全球大部分 region 部署大量 spot instance；对于小白用户，我们还提供了 ABT Chain Node Desktop，可以直接安装使用。&lt;/p&gt;&lt;p&gt;所有这些，都绝非易事，我们需要在和时间赛跑的同时，解决一个又一个没有先例，解空间完全未知的问题，就像出塞三千里追击匈奴的窦将军，或者历经十七载西行求法的陈玄奘，全靠一个坚定的目标和初心，以及百折不挠的坚韧，才在迷途中杀出一条路。&lt;/p&gt;&lt;p&gt;（三）&lt;/p&gt;&lt;p&gt;记得在某一期的《朗读者》里，董卿说过：我们成为什么样的人，可能不在于我们的能力，而在于我们的选择。选择是一次又一次自我重塑的过程，让我们不断成长，不断完善 —— 如果说人生是一次不断选择的旅程，那么千帆阅尽，最终留下的，是一片属于自己的独一无二的风景。&lt;/p&gt;&lt;p&gt;我发现自己似乎在面对选择时，总是做出旁人看来最艰险的决定。&lt;/p&gt;&lt;p&gt;2010 年底，我在 Juniper 顺风顺水，本可在 engineering manager 的位置上一点点向上爬到养老，不用再面对诸如「35 岁的程序员还能不能写得动代码」的问题，我却选择了搭上移动互联网的班车去创业 —— 更确切的说，我把自己的人生赛道从通讯行业切换到了互联网行业。&lt;/p&gt;&lt;p&gt;两年后创业失败，面对很多新的机会，我没有立刻进入到下一个项目，而是选择重回 Juniper，一方面为赴美工作铺垫，另一方面也是停下来反思和复盘。尽管看上去我又重新回到了通讯行业，但我清楚地知道，我的未来还在于互联网，我的下一次创业也必然在互联网而非通讯领域。于是在 Juniper 略显悠闲（和创业相比）的工作生活中，我没有选择养生，而是写书来复盘创业的过程，总结经验教训；写公众号来扩大自己的个人品牌的影响力，从而某种程度上弥补我之前创业的一个痛点：影响力不够，进而很难招到合适的人。&lt;/p&gt;&lt;p&gt;2014 年底到了美国之后，面对更加悠闲的美国大公司养老式工作，我每天不到 7 点左右就奔赴公司，七小时工作之余（别笑，我觉得大部分老美每天能正儿八经工作五小时就不错了），我硬生生挤出来差不多另外七个小时去探索各种领域；没过多久，我便主动要求调到旧金山的 web security 的团队，尽管从汇报级别上来看，我从汇报给 Sr. Director，变成汇报给 Sr. Manager，很不符合常理，但 web security 贴近我中意的互联网。&lt;/p&gt;&lt;p&gt;2015 年底，Tubi 的机会出现，尽管降薪（不算 option，因为那时 Tubi 的 option 还几乎没有任何价值），并且放弃大量的 RSU，在扫清身份的障碍后，我还是义无反顾地加入了 Tubi。互联网，创业公司，已经验证过的商业模式，糟糕的工程能力，使得当时的 Tubi 对我来说，是天赐良缘（见我的文章：《&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzA3NDM0ODQwMw%3D%3D%26mid%3D400531816%26idx%3D1%26sn%3D029b1ef56ebd3ad7fdaa643913ba2513%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;缘分天注定&lt;/a&gt;》），是桑德伯格口中的 rocket ship —— 我一直很青睐桑德伯格的那句话：If you’re offered a seat on a rocket ship, don’t ask what seat. Just get on。&lt;/p&gt;&lt;p&gt;去年，同样的剧本发生 —— 经历了一番对未来趋势的详细研究，我深深地感到自己未来的赛道在于区块链，或者说，区块链背后的 web 3.0。于是，便有了我的 ArcBlock 一周年，以及这篇文章。&lt;/p&gt;&lt;p&gt;我不知道在另一个平行宇宙的自己，在每次面临人生的十字路口时，都放弃那条「少有人走的路」，而选择理性的 SWOT 分析下来更「正确」的路，将会是什么样。但肯定不会像我这样，以三十七岁高龄（在程序员的世界里，这已经算得上耆耆之年了），每天还花费五六个小时伏案疾书，写就千八百行代码。&lt;/p&gt;&lt;p&gt;当然不可避免的，也会少了很多很多可以给儿孙们讲睡前故事的素材。&lt;/p&gt;&lt;hr/&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;打个广告，我们的北京团队在招资深前端工程师，要求具备良好的 react 开发经验，对区块链技术感兴趣，能够快速学习。有意者请将简历发至：career at &lt;a href=&quot;https://link.zhihu.com/?target=http%3A//arcblock.io&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;arcblock.io&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;，标题注明你的名字，想申请的职位，以及来自程序人生（e.g. subject: 李雷 - 前端工程师 - 程序人生）。我们会优先处理。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;另外，北京时间下周三中午 1:00 我会详细介绍和演示用 Forge SDK 创建区块链应用，欢迎大家参与，报名请戳：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-47fc40cd8dbd09a4aec5c12212044d8c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;300&quot; data-rawheight=&quot;300&quot; class=&quot;content_image&quot; width=&quot;300&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-47fc40cd8dbd09a4aec5c12212044d8c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;300&quot; data-rawheight=&quot;300&quot; class=&quot;content_image lazy&quot; width=&quot;300&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-47fc40cd8dbd09a4aec5c12212044d8c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>陈天</author>
<guid isPermaLink="false">2019-05-05-64684140</guid>
<pubDate>Sun, 05 May 2019 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
