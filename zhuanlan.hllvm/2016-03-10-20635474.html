<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[新闻] Java也要有局部类型推导（var）了</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/20635474">原文</a></p>
请跳传送门：<a href="http://openjdk.java.net/jeps/286" data-editable="true" data-title="JEP 286: Local-Variable Type Inference">JEP 286: Local-Variable Type Inference</a><p>看来有希望赶上Java 10。诶终于啊。</p><p>等JEP 286完成之后，Java的局部类型推导就比C#的还要神奇了…看：</p><code lang="java">List&lt;String&gt; strs1 = new ArrayList&lt;String&gt;(); // Java 5 generics
List&lt;String&gt; strs2 = new ArrayList&lt;&gt;();       // Java 7 diamond syntax
var strs3 = new ArrayList&lt;String&gt;();          // JEP 286 var syntax</code><p>左边能推导到右边（Java 7 diamond），右边也能推导到左边（JEP 286 var），多欢乐 &gt;_&lt;</p><p>另外，C# 3.0里的var是个“<a href="https://msdn.microsoft.com/en-us/library/the35c6y.aspx">上下文相关关键字</a>”，也就是说只有在合适的地方写var才会被看作变量声明隐式声明类型的关键字，而其它地方（例如说作为变量名）则不算关键字而是普通标识符。JEP 286把这个设计基本找搬了，只是换了个名字叫做“reserved type name”。</p><p>========================================</p><br><p>另外Java 10还有希望看到<a href="http://openjdk.java.net/projects/valhalla/" data-editable="true" data-title="OpenJDK: Valhalla">Project Valhalla</a>的完成。到时候就可以写：</p><code lang="java">var xs = new ArrayList&lt;int&gt;(); // Valhalla: generics over value types
</code><p>好棒好棒 &gt;_&lt;|||</p><p>但Valhalla当前到了第三版原型的设计，把彻底的类型特化给抛弃了，改为只对value type做特化。泪奔啊。这就意味着当前的原型设计不让这样写：</p><code lang="java">  public static &lt;T, U&gt; T make(U arg0) {
    return new T(arg0);
  }</code><p>呜呜。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
