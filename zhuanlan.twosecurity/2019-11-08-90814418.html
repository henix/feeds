<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>苏轼的诗句中都有所描绘的一款渗透工具</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/90814418">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-551cf248119e45009511d743ef768ebf_b.jpg" alt=""></div><blockquote>桂棹兮兰桨，击空明兮溯流光。——《前赤壁赋》苏轼<br/>船是用桂木作棹 兰木作桨，划动在清明的河流中一直到了黄昏的时刻。。。</blockquote><h2>正文👇</h2><blockquote><b>溯光</b>，英文名“<b>TrackRay</b>”，意为逆光而行，追溯光源。</blockquote><p>溯光，是一个基于Java开发的插件化渗透测试框架，框架自带漏洞扫描功能，并集成了各大渗透工具：Metasploit、Nmap、Sqlmap、AWVS等。</p><p>支持多种语言的插件，包括的类型有“漏洞扫描插件”、“爬虫插件”、“独立应用插件”、“内部插件”、“无交互插件”和“可交互插件” 等插件类型。</p><p>项目在这里：<a href="https://link.zhihu.com/?target=https%3A//github.com/iSafeBlue/TrackRay" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/iSafeBlue/Tr</span><span class="invisible">ackRay</span><span class="ellipsis"></span></a> </p><h2>特点👊</h2><ul><li>提供 WEB 服务的接口，实现工具WEB界面化（点点鼠标就能搞渗透）</li><li>用浏览器即可使用（中文界面、清晰简洁）</li><li>集成 AWVS、SQLMap、NMap、Metasploit、Kunpeng、XRay 等安全工具（再也不愁到处找工具而烦恼）</li><li>内置的漏洞扫描器（一键式操作，漏洞一网打尽）</li><li>强大、易用、方便、开源（说直白点：免费）</li></ul><h2>使用😃＆配置😫</h2><p><b>可选择自己编译源码或者使用已经编译好的 jar 包</b></p><p>就先跳过编译过程吧，<a href="https://link.zhihu.com/?target=https%3A//github.com/iSafeBlue/TrackRay/releases/download/3.1.0/trackray-3.1.0.bin.zip" class=" wrap external" target="_blank" rel="nofollow noreferrer">jar 包下载</a></p><p><b>AWVS</b></p><p>打开 AWVS（没错，要你先安装好AWVS12），开启如下服务</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-282662410316291538de23fb20623c72_b.jpg" data-caption="" data-size="normal" data-rawwidth="1210" data-rawheight="45" class="origin_image zh-lightbox-thumb" width="1210" data-original="https://pic3.zhimg.com/v2-282662410316291538de23fb20623c72_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-282662410316291538de23fb20623c72_b.jpg" data-caption="" data-size="normal" data-rawwidth="1210" data-rawheight="45" class="origin_image zh-lightbox-thumb lazy" width="1210" data-original="https://pic3.zhimg.com/v2-282662410316291538de23fb20623c72_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-282662410316291538de23fb20623c72_b.jpg"/></figure><p>然后进入它的 web 界面，生成一个API密钥并复制</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-d791eebb45d1b876c207285f11106246_b.jpg" data-caption="" data-size="normal" data-rawwidth="999" data-rawheight="195" class="origin_image zh-lightbox-thumb" width="999" data-original="https://pic3.zhimg.com/v2-d791eebb45d1b876c207285f11106246_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-d791eebb45d1b876c207285f11106246_b.jpg" data-caption="" data-size="normal" data-rawwidth="999" data-rawheight="195" class="origin_image zh-lightbox-thumb lazy" width="999" data-original="https://pic3.zhimg.com/v2-d791eebb45d1b876c207285f11106246_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-d791eebb45d1b876c207285f11106246_b.jpg"/></figure><p>找到 application.properties 配置文件。</p><p>修改如下部分</p><div class="highlight"><pre><code class="language-text">awvs.host=https://127.0.0.1:3443
awvs.key=你的API KEY</code></pre></div><p><b>python</b></p><p>找到第三方库目录。</p><p>比如我的是 F:\python37\Lib\site-packages</p><p>同样需要修改 application.properties 配置文件。</p><p>修改 python.package.path 参数</p><div class="highlight"><pre><code class="language-properties">python.package.path=F:\python37\Lib\site-packages</code></pre></div><p><b>Maven</b></p><p>找到仓库位置，比如我的是：C:\Users\admin\.m2\repository</p><p>找到仓库目录后修改 application.properties 的 maven.repository.path 参数</p><div class="highlight"><pre><code class="language-text">maven.repository.path=C:\Users\admin\.m2\repository</code></pre></div><p><b>DNSLOG</b></p><p>这个是 DNSLOG 回显检测漏洞时需要的。</p><p>去 <a href="https://link.zhihu.com/?target=http%3A//ceye.io" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">ceye.io</span><span class="invisible"></span></a> 注册一个账号，拿到给你分配的域名和 TOKEN。（图中 的Identifier 和 API Token）</p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-f4fe5894a3bf027a0d5339de86234825_b.jpg" data-caption="" data-size="small" data-rawwidth="1020" data-rawheight="522" class="origin_image zh-lightbox-thumb" width="1020" data-original="https://pic2.zhimg.com/v2-f4fe5894a3bf027a0d5339de86234825_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-f4fe5894a3bf027a0d5339de86234825_b.jpg" data-caption="" data-size="small" data-rawwidth="1020" data-rawheight="522" class="origin_image zh-lightbox-thumb lazy" width="1020" data-original="https://pic2.zhimg.com/v2-f4fe5894a3bf027a0d5339de86234825_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-f4fe5894a3bf027a0d5339de86234825_b.jpg"/></figure><p>然后修改配置文件</p><div class="highlight"><pre><code class="language-text">#ceye.io
ceye.io.token=******
ceye.io.identifier=****.ceye.io</code></pre></div><p><b>msf 和 sqlmapapi</b></p><p>win系统，要找到 metasploit 和 sqlmap 的目录分别执行</p><div class="highlight"><pre><code class="language-bash">msfrpcd -U 用户名 -P 密码 -S -f
python sqlmapapi.py -s</code></pre></div><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-74aff86cb114ef8e8f65116a379ae347_b.jpg" data-caption="" data-size="normal" data-rawwidth="1457" data-rawheight="75" class="origin_image zh-lightbox-thumb" width="1457" data-original="https://pic4.zhimg.com/v2-74aff86cb114ef8e8f65116a379ae347_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-74aff86cb114ef8e8f65116a379ae347_b.jpg" data-caption="" data-size="normal" data-rawwidth="1457" data-rawheight="75" class="origin_image zh-lightbox-thumb lazy" width="1457" data-original="https://pic4.zhimg.com/v2-74aff86cb114ef8e8f65116a379ae347_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-74aff86cb114ef8e8f65116a379ae347_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-25037a893fa2cd02809457f323d93549_b.jpg" data-caption="" data-size="normal" data-rawwidth="706" data-rawheight="106" class="origin_image zh-lightbox-thumb" width="706" data-original="https://pic2.zhimg.com/v2-25037a893fa2cd02809457f323d93549_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-25037a893fa2cd02809457f323d93549_b.jpg" data-caption="" data-size="normal" data-rawwidth="706" data-rawheight="106" class="origin_image zh-lightbox-thumb lazy" width="706" data-original="https://pic2.zhimg.com/v2-25037a893fa2cd02809457f323d93549_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-25037a893fa2cd02809457f323d93549_b.jpg"/></figure><p>启动成功后修改配置文件</p><div class="highlight"><pre><code class="language-properties">#msfrpc
metasploit.host=127.0.0.1:55553
metasploit.user=msf
metasploit.pass=msf

#sqlmap api
sqlmap.root=http://127.0.0.1:8775/</code></pre></div><p><b>end</b></p><p>把上面那些乱七八糟的都弄好了之后，就可以运行了（我太难了。。。）</p><p>保存配置文件，然后执行命令，让它跑起来（终于。。。）</p><div class="highlight"><pre><code class="language-bash">java -jar trackray.jar</code></pre></div><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-5b51b38b083520332ef46b3e8ea0a454_b.jpg" data-caption="" data-size="small" data-rawwidth="1059" data-rawheight="469" class="origin_image zh-lightbox-thumb" width="1059" data-original="https://pic1.zhimg.com/v2-5b51b38b083520332ef46b3e8ea0a454_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-5b51b38b083520332ef46b3e8ea0a454_b.jpg" data-caption="" data-size="small" data-rawwidth="1059" data-rawheight="469" class="origin_image zh-lightbox-thumb lazy" width="1059" data-original="https://pic1.zhimg.com/v2-5b51b38b083520332ef46b3e8ea0a454_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-5b51b38b083520332ef46b3e8ea0a454_b.jpg"/></figure><p>然后，访问 <a href="https://link.zhihu.com/?target=http%3A//127.0.0.1%3A8080/login" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">127.0.0.1:8080/login</span><span class="invisible"></span></a> ，成败在此一举。</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-dd77951c4d90244311086725c5097b69_b.jpg" data-caption="" data-size="normal" data-rawwidth="1492" data-rawheight="645" class="origin_image zh-lightbox-thumb" width="1492" data-original="https://pic2.zhimg.com/v2-dd77951c4d90244311086725c5097b69_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-dd77951c4d90244311086725c5097b69_b.jpg" data-caption="" data-size="normal" data-rawwidth="1492" data-rawheight="645" class="origin_image zh-lightbox-thumb lazy" width="1492" data-original="https://pic2.zhimg.com/v2-dd77951c4d90244311086725c5097b69_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-dd77951c4d90244311086725c5097b69_b.jpg"/></figure><p>（登录界面还挺好看的。。。）</p><p>用户名及密码在配置文件里面有</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-46d3e31f0a6f15bcc496e4d21bfba922_b.jpg" data-caption="" data-size="normal" data-rawwidth="215" data-rawheight="62" class="content_image" width="215"/></noscript><img src="https://pic3.zhimg.com/v2-46d3e31f0a6f15bcc496e4d21bfba922_b.jpg" data-caption="" data-size="normal" data-rawwidth="215" data-rawheight="62" class="content_image lazy" width="215" data-actualsrc="https://pic3.zhimg.com/v2-46d3e31f0a6f15bcc496e4d21bfba922_b.jpg"/></figure><p>侧边目录，包括扫描仪、控制台、MSF、API、APPS</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-46ae6250f872a13b4a89e5bf7e5924bf_b.jpg" data-caption="" data-size="normal" data-rawwidth="219" data-rawheight="384" class="content_image" width="219"/></noscript><img src="https://pic4.zhimg.com/v2-46ae6250f872a13b4a89e5bf7e5924bf_b.jpg" data-caption="" data-size="normal" data-rawwidth="219" data-rawheight="384" class="content_image lazy" width="219" data-actualsrc="https://pic4.zhimg.com/v2-46ae6250f872a13b4a89e5bf7e5924bf_b.jpg"/></figure><p>先来看看控制台</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-d2bd983571c0abbfdfb3f50ae4019538_b.jpg" data-caption="" data-size="normal" data-rawwidth="478" data-rawheight="559" class="origin_image zh-lightbox-thumb" width="478" data-original="https://pic1.zhimg.com/v2-d2bd983571c0abbfdfb3f50ae4019538_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-d2bd983571c0abbfdfb3f50ae4019538_b.jpg" data-caption="" data-size="normal" data-rawwidth="478" data-rawheight="559" class="origin_image zh-lightbox-thumb lazy" width="478" data-original="https://pic1.zhimg.com/v2-d2bd983571c0abbfdfb3f50ae4019538_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-d2bd983571c0abbfdfb3f50ae4019538_b.jpg"/></figure><p>功能齐全，管理插件非常方便。</p><p>API 插件，里面自带了一些常见漏洞检测的API可供使用。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-6234aee63fbb3828c7e09741c968af9b_b.jpg" data-caption="" data-size="normal" data-rawwidth="401" data-rawheight="900" class="content_image" width="401"/></noscript><img src="https://pic4.zhimg.com/v2-6234aee63fbb3828c7e09741c968af9b_b.jpg" data-caption="" data-size="normal" data-rawwidth="401" data-rawheight="900" class="content_image lazy" width="401" data-actualsrc="https://pic4.zhimg.com/v2-6234aee63fbb3828c7e09741c968af9b_b.jpg"/></figure><p>创建一个扫描试试。。。</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-7fdfd52714018d98920cfc3bbb61772e_b.jpg" data-caption="" data-size="normal" data-rawwidth="1136" data-rawheight="321" class="origin_image zh-lightbox-thumb" width="1136" data-original="https://pic3.zhimg.com/v2-7fdfd52714018d98920cfc3bbb61772e_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-7fdfd52714018d98920cfc3bbb61772e_b.jpg" data-caption="" data-size="normal" data-rawwidth="1136" data-rawheight="321" class="origin_image zh-lightbox-thumb lazy" width="1136" data-original="https://pic3.zhimg.com/v2-7fdfd52714018d98920cfc3bbb61772e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-7fdfd52714018d98920cfc3bbb61772e_b.jpg"/></figure><p>APPS 里面则是一些附带功能，有些可以自己用，有的需要 API 接口，比如刚才配置的 sqlmapapi。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-75dbd982c2a5c0fa4730c598bee565e7_b.jpg" data-caption="" data-size="normal" data-rawwidth="214" data-rawheight="518" class="content_image" width="214"/></noscript><img src="https://pic4.zhimg.com/v2-75dbd982c2a5c0fa4730c598bee565e7_b.jpg" data-caption="" data-size="normal" data-rawwidth="214" data-rawheight="518" class="content_image lazy" width="214" data-actualsrc="https://pic4.zhimg.com/v2-75dbd982c2a5c0fa4730c598bee565e7_b.jpg"/></figure><p>好了，溯光就简单介绍到这里，后面会搭建靶场对其进行使用分析，同时期待它的再次更新迭代（目前3.1.0），向作者致敬。更多资讯请关注 <a href="https://link.zhihu.com/?target=https%3A//twosecurity.cn/%3Fquery_ref%3DqGLdXm" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a> 进行了解，最近推出了一系列免费的网络安全技能包，学它涨姿势。（双十一超多优惠）</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-096913e6552422f2b0569cdb3711c7cb_b.jpg" data-caption="" data-size="normal" data-rawwidth="607" data-rawheight="326" class="origin_image zh-lightbox-thumb" width="607" data-original="https://pic4.zhimg.com/v2-096913e6552422f2b0569cdb3711c7cb_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-096913e6552422f2b0569cdb3711c7cb_b.jpg" data-caption="" data-size="normal" data-rawwidth="607" data-rawheight="326" class="origin_image zh-lightbox-thumb lazy" width="607" data-original="https://pic4.zhimg.com/v2-096913e6552422f2b0569cdb3711c7cb_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-096913e6552422f2b0569cdb3711c7cb_b.jpg"/></figure><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
