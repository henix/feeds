<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>大个子 Kotlin，一招就把 Java 打趴下了</title>
</head>
<body>
<p><a href="https://mp.weixin.qq.com/s?timestamp=1560433704&amp;src=3&amp;ver=1&amp;signature=doYi7d-WAzJ6*PAPL0x*Fzxuz66fmt48L4d7CLok99h862i0WTcAFu7u-zbGsBHw**zLR0ipcXoeAMcul4nWLyCXohSnu3o1wrBvvS3x76E*rFhspYFjbGkQ1gG6ptCL535angOgwuMvKYBHbWJPa4M**LNXtuyTxfkdXIPATHY=">原文</a></p>
<div id="js_top_ad_area" class="top_banner"></div><div class="rich_media_inner">

        
        
		<div id="page-content" class="rich_media_area_primary">

		  <div class="rich_media_area_primary_inner">

            
                          
                        

            <div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">
                    
                    
                    
            大个子 Kotlin，一招就把 Java 打趴下了
                      </h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                            <span class="rich_media_meta rich_media_meta_text">
                                                <span id="js_author_name" class="rich_media_meta_link" data-rewardsn="" data-timestamp="" data-canreward="0">Tankery</span>
                                            </span>
                                        
                                                                                                            <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" id="js_name">
                        FlyTheCode                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">FlyTheCode</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">FlyTheCode</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">希望有一天，代码能如风一般飞奔在原野。</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text"></em>





                </div>
                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">时间过得很快，Kotlin 已经快八岁了，他已经长大，翅膀硬了，所以 Google 在最近的 IO 大会上宣布 Kotlin First，Java 惨遭冷遇！</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">再看看从上一次 IO 大会到如今的成长速度，在排名前 1000 的活跃应用中，已经有近一半的应用使用 Kotlin。</p><p style="text-align: center;"><img class="rich_pages" data-ratio="0.5609375" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_jpg/zF3LiaNuTWoVzODTClDqpACcSXJKykuUHKa6lQIuUyU1S2lTvmIVaRqahgoK8ocBMeiaql51oHWPzqkbYCNXHxhQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="1280" style=""></p><p style="text-align: center;"><span style='font-family: -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;text-align: justify;'><br></span></p><p style="text-align: center;"><span style='font-family: -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;text-align: justify;'>各种迹象都表明，至少在 Android 开发的领域，Kotlin 才是未来，Java 越来越成为过去式了。Kotlin 到底何德何能，在短短几年间，撼动 Java 积累了 20 多年的地位？</span></p><h2 style="box-sizing: inherit;line-height: 35.09px;font-size: 2.2rem;margin-top: 2.37333rem;margin-bottom: 1.424rem;">大个子 Kotlin</h2><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 是个大高个，大到什么程度？比 Java 大。因为他 100% 兼容 Java。Java 能做的，他都能做，他能做的，Java 做不到。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 和 Java 一样，也是编译型的，类型安全的 JVM 语言。Kotlin 编译器最终是将 Kotlin 编译成 JVM 字节码。这也就是为何 Kotlin 可以完全兼容 Java 的原因了。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 是个大高个，是因为他功能极度丰富。我们简单对比一下关键字就能略见一斑：</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Java 有 50 多个关键字。Kotlin 的硬性关键字 (Hard Keywords) 有 25 个，在特定场景下的关键字有接近 50 个，再加上各种内置函数，分分钟上百个单词不成问题，学好 Kotlin，英语词汇量又上一个台阶。。再来看看同是 Google 主推的服务器语言 Go，只有 25 个关键字。。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 这么大，你想掌控他可不容易。这不是因为他的语法有多新奇，也不是因为编程方式有多大变化，只是因为要记住的东西太多太多，同一件事情，可能有好几种方式来实现，大家同样是写 Kotlin，却感觉是在写不同的语言。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">所以你看，Kotlin 有它的问题，但为何那些优秀的开发者们，还是趋之若鹜？</p><h2 style="box-sizing: inherit;line-height: 35.09px;font-size: 2.2rem;margin-top: 2.37333rem;margin-bottom: 1.424rem;">美男 Kotlin</h2><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 很高大，但不是那种中年发福的高大，他高大，但五官端正，身材匀称。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">为什么说他匀称？这里暂且按下不表，我们先通过几个代码片段，来熟悉熟悉 Kotlin。</p><p style="text-align: center;"><img class="rich_pages" data-copyright="0" data-ratio="0.33302411873840443" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_jpg/zF3LiaNuTWoVzODTClDqpACcSXJKykuUHyTtphKYVMupUg2k3xH4F0WAw3JQ1ZYISD3EYIBszyyqibCBchC3cIlw/640?wx_fmt=jpeg" data-type="jpeg" data-w="1078" style=""></p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">上图是 Android 官网用于介绍 Kotlin 的图片，其语法可以一窥一二。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Null safe，大家已经耳熟能详；内建的 lambda 支持，比 Java 8 补丁似的支持更加完美；直接在字符串中引用变量，不需要分号，都让我们少写了很多没什么用的样板代码。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">下面来通过一个例子，看看如何用 Kotlin 的方式来 coding。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">首先来看一个 Java 片段：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">public</span> <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">class</span> <span class="nc" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">TicketUtil</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>    <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">public</span> <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">static</span> <span class="kt" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">int</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="kt" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">int</span> <span class="n" style="box-sizing: inherit;">age</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">)</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">&gt;=</span> <span class="mi" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">)</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>            <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="mi" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">;</span> <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Adults price</span><br>        <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>            <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="mi" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">;</span>  <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Kids price</span><br>        <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br>    <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br><br><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">final</span> <span class="kt" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">int</span> <span class="n" style="box-sizing: inherit;">age</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">=</span> <span class="mi" style="box-sizing: inherit;color: rgb(0, 153, 153);">20</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">;</span><br style="box-sizing: inherit;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">final</span> <span class="kt" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">int</span> <span class="n" style="box-sizing: inherit;">price</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">=</span> <span class="n" style="box-sizing: inherit;">TicketUtil</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">getPrice</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">);</span><br style="box-sizing: inherit;"><span class="n" style="box-sizing: inherit;">Log</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">d</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Price of age "</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">+</span> <span class="n" style="box-sizing: inherit;">age</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">+</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">" is "</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">+</span> <span class="n" style="box-sizing: inherit;">price</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">);</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">然后很轻松的，直接转换成 Kotlin 语法看看：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">object</span> <span class="nc" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">TicketUtil</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">):</span> <span class="n" style="box-sizing: inherit;">Int</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>            <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span>  <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Adults price<br></span>        <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="p" style="box-sizing: inherit;">{</span><br>            <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span>   <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Kids price<br></span>        <span class="p" style="box-sizing: inherit;">}</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br><br><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">20</span><br style="box-sizing: inherit;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">price</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">TicketUtil</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">)</span><br style="box-sizing: inherit;"><span class="n" style="box-sizing: inherit;">Log</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">d</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Price of age $age is $price"</span><span class="p" style="box-sizing: inherit;">)</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">就这样？？？删了几个分号，把类型从前置挪到末尾，把几个修饰符去掉？</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">你看，这就是我要说的，一百个人有一百种 Kotlin 的编写方式。你可以一直像写 Java 一样去写 Kotlin，然后抱怨为何 Kotlin 不支持 static 函数？！</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">接下来，我们通过几次迭代，用 Kotlin 的方式来写代码。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">首先，Kotlin 支持类型推断，无用的类型定义，都可以去掉了：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">..</span><span class="p" style="box-sizing: inherit;">.</span><br><br><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">20</span><br style="box-sizing: inherit;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">price</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">TicketUtil</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">)</span><br style="box-sizing: inherit;"><span class="n" style="box-sizing: inherit;">Log</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">d</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Price of age $age is $price"</span><span class="p" style="box-sizing: inherit;">)</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">其次，<code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">if-else</code> 在 Java 中只是个声明（statement），而在 Kotlin 中，它也是表达式（expression）。表达式是有类型，有值的。所以我们可以把 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">return</code> 提出来：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">object</span> <span class="nc" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">TicketUtil</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">):</span> <span class="n" style="box-sizing: inherit;">Int</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>           <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span>  <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Adults price<br></span>        <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="p" style="box-sizing: inherit;">{</span><br>           <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span>   <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Kids price<br></span>        <span class="p" style="box-sizing: inherit;">}</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">..</span><span class="p" style="box-sizing: inherit;">.</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">再者，如果函数体内只有一个表达式，Kotlin 支持用表达式函数体 (expression body) 的方式来定义：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">object</span> <span class="nc" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">TicketUtil</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">=</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>            <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span> <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Adults price<br></span>        <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="p" style="box-sizing: inherit;">{</span><br>            <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span>  <span class="c1" style="box-sizing: inherit;color: rgb(85, 139, 47);font-style: italic;">// Kids price<br></span>        <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">..</span><span class="p" style="box-sizing: inherit;">.</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">最后，去掉那些括号，和无用的 Util 类：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">=</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="p" style="box-sizing: inherit;">)</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span><br><br><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">20</span><br style="box-sizing: inherit;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">val</span> <span class="py" style="box-sizing: inherit;">price</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">)</span><br style="box-sizing: inherit;"><span class="n" style="box-sizing: inherit;">Log</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">d</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Price of age $age is $price"</span><span class="p" style="box-sizing: inherit;">)</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">你看，到了这里，你会发现，用 Kotlin 写出来的代码，确实很简洁，只要不影响理解，能去掉的东西 Kotlin 坚决不留。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">是的，Kotlin 少写很多代码。但为什么我要说他“匀称”？</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">从前面的例子，你可能也发现这里面和 Java 很不一样的地方，<code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">if-else</code> 是表达式！</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">而且，<code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">when</code> (对应 Java 的 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">switch</code>) 是表达式，<code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">try-catch</code> 是表达式，就连 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">throw</code> 也是表达式。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这样就可以让我们能非常方便的写出下面这样的代码：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">=</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span><span class="p" style="box-sizing: inherit;">)</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">12</span><span class="p" style="box-sizing: inherit;">)</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">throw</span> <span class="n" style="box-sizing: inherit;">IllegalArgumentException</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Not allowed!"</span><span class="p" style="box-sizing: inherit;">)</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">或者用 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">when</code> 表达式可以更清晰，简洁：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">getPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">=</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">when</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span><br>        <span class="n" style="box-sizing: inherit;">age</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">12</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">throw</span> <span class="n" style="box-sizing: inherit;">IllegalArgumentException</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Not allowed!"</span><span class="p" style="box-sizing: inherit;">)</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这就是匀称，Kotlin 的语法是协调、统一的。当然，表达式只是小小的一个点，Kotlin 的协调和统一，也在更多的地方得到体现。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">比如，<code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">lambda</code> 函数。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;"><code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">lambda</code> 在 Java 8 中也得以支持。但是以类似打补丁的方式支持的。要使用 Lambda，你得先定义一个 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">interface</code>。多么勉强的设定。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">在 Kotlin 中，这一切得以重新设计。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 的 lambda 函数是有类型的。比如 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">{ a: Int -&gt; a * 10 }</code> 是一个 lambda 表达式，它的类型是 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">(Int) -&gt; Int</code>。再比如 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">{ 10 }</code> 的类型是 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">() -&gt; Int</code>。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这就让你在定义 lambda 参数时，不需要再去定义一个冗余的，毫无意义的 interface，而是可以直接使用函数类型：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">printPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">age</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">,</span> <span class="n" style="box-sizing: inherit;">getPrice</span><span class="p" style="box-sizing: inherit;">:</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="n" style="box-sizing: inherit;">Int</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">Log</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">d</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Price of age $age is ${getPrice(age)}"</span><span class="p" style="box-sizing: inherit;">)</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">然后你可以这样去调用：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="n" style="box-sizing: inherit;">printPrice</span><span class="p" style="box-sizing: inherit;">(</span><span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">30</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">when</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">it</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">18</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">100</span><br>        <span class="n" style="box-sizing: inherit;">it</span> <span class="p" style="box-sizing: inherit;">&gt;=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">12</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">50</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">else</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">throw</span> <span class="n" style="box-sizing: inherit;">IllegalArgumentException</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Not allowed!"</span><span class="p" style="box-sizing: inherit;">)</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">注意这么几个亮点：</p><ul style="" class=" list-paddingleft-2"><li><p>lambda 函数的类型，可以直接定义在函数参数中。</p></li><li><p>当 lambda 函数的输入只有一个参数时，可以省略掉参数定义，用 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;">it</code> 代替</p></li><li><p>当 lambda 作为最后一个参数时，调用时可以被挪到括号外，让调用的代码变得更为优雅</p></li></ul><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">另外，上面的例子，展示了 Kotlin 中，高阶函数的使用方式。高阶函数，是将一个函数作为另一个函数的参数去使用的一种技巧。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">通过 lambda 表达式的统一定义，以及语法设计上的一些小细节，让 lambda，得以用一种统一、协调的方式呈现出来。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">后面我们还将看到，lambda 是如何和 Kotlin 其他部分融合，创造出更多优雅的用法。</p><h2 style="box-sizing: inherit;line-height: 35.09px;font-size: 2.2rem;margin-top: 2.37333rem;margin-bottom: 1.424rem;">一招制胜 Kotlin</h2><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Kotlin 很健壮，一招就把 Java 打趴下了，这一招是什么？我认为，是扩展函数 （Extension Functions）。</p><blockquote style="box-sizing: inherit;margin-top: 20px;margin-bottom: 20px;padding-left: 1.5rem;border-left-width: 5px;border-left-color: rgb(51, 105, 30);"><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">注：下面的好几个示例，都来源于 Jake Wharton 15 年的一个演讲，Android Development with Kotlin，强烈建议听一听，受益匪浅。</p></blockquote><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">在项目中我们经常遇到一种情况，标准库、或者其他第三方库的内置函数不够用。比如你有一个 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">Date</code> 对象，你想知道它是否是周五（<span style="box-sizing: inherit;text-decoration:line-through;">因为马上就周末啦</span>）。在 Java 里面，可能就得写一个 DateUtil 的类，用静态函数来判断是否周五：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">public</span> <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">class</span> <span class="nc" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">DateUtil</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>    <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">public</span> <span class="kd" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">static</span> <span class="kt" style="box-sizing: inherit;color: rgb(68, 85, 136);font-weight: bold;">boolean</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">isFriday</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">Date</span> <span class="n" style="box-sizing: inherit;">date</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">)</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">return</span> <span class="n" style="box-sizing: inherit;">date</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">getDay</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">()</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">==</span> <span class="mi" style="box-sizing: inherit;color: rgb(0, 153, 153);">5</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">;</span><br>    <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br><br><span class="n" style="box-sizing: inherit;">Log</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">d</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"The day is friday? "</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">+</span> <span class="n" style="box-sizing: inherit;">DateUtil</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">isFriday</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">theDay</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">));</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">而 Kotlin 提供了一种扩展现有类型的方式，扩展函数 （Extension Functions），使得你可以像调用成员方法一般，调用扩展函数：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">Date</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">isFriday</span><span class="p" style="box-sizing: inherit;">()</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">day</span> <span class="p" style="box-sizing: inherit;">==</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">5</span><br><br><span class="n" style="box-sizing: inherit;">Log</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">d</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">TAG</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"The day is friday? ${theDay.isFriday()}"</span><span class="p" style="box-sizing: inherit;">)</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">扩展函数，让 JVM 上的静态语言，也能拥有像动态语言一般，扩展语言特性的能力。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这还不够，下面通过一个例子，来看看 扩展函数 + lambda 表达式 + 高阶函数 能够发挥多么大的威力。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">Android 最麻烦的一个场景，莫过于数据库操作了。如果是使用原生的数据库操作方式，有一大堆的事情要做。下面的代码，希望从数据库中删除一条记录：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="n" style="box-sizing: inherit;">db</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">beginTransaction</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">();</span><br style="box-sizing: inherit;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">try</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>    <span class="n" style="box-sizing: inherit;">db</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">delete</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"users"</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"first_name = ?"</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">,</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">new</span> <span class="n" style="box-sizing: inherit;">String</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">[]</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Tankery"</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">});</span><br>    <span class="n" style="box-sizing: inherit;">db</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">setTransactionSuccessful</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">();</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">finally</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>    <span class="n" style="box-sizing: inherit;">db</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">endTransaction</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">();</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">我们可以看到，为了能在事务 (transaction) 中执行一个数据库操作。我们需要注意在任何情况下，都能调用 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">endTransaction</code>，所以需要 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">try-catch</code> 起来。另外在操作结束之后，要记得 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">setTransactionSuccessful</code>，以确保事务能被正常提交。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这太复杂了，很容易出错。那么看看能否使用扩展函数，封装这个 API，让调用者能够少些代码，安全正确的调用。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">第一个版本：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">SQLiteDatabase</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">:</span> <span class="p" style="box-sizing: inherit;">()</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="n" style="box-sizing: inherit;">Unit</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">beginTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">try</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">()</span><br>        <span class="n" style="box-sizing: inherit;">setTransactionSuccessful</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">finally</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">endTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br><br><span class="n" style="box-sizing: inherit;">db</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">db</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">delete</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"users"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"first_name = ?"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="n" style="box-sizing: inherit;">arrayOf</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Tankery"</span><span class="p" style="box-sizing: inherit;">))</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">看起来已经简单多了。但是有个不太好的风格是，我们在 lambda 函数体中使用了 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">db</code> 这个变量，这使得 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">db</code> 的引用变得复杂，容易出错。因此作出一点修改：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">SQLiteDatabase</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">:</span> <span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">SQLiteDatabase</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="n" style="box-sizing: inherit;">Unit</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">beginTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">try</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">(</span><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">this</span><span class="p" style="box-sizing: inherit;">)</span><br>        <span class="n" style="box-sizing: inherit;">setTransactionSuccessful</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">finally</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">endTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br><br><span class="n" style="box-sizing: inherit;">db</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">it</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">delete</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"users"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"first_name = ?"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="n" style="box-sizing: inherit;">arrayOf</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Tankery"</span><span class="p" style="box-sizing: inherit;">))</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">让 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">db</code> 本身，成为输入函数的参数，将 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">db</code> 的引用解耦了。更安全，但还是麻烦，每个操作都需要加上 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">it</code>。我们可以更进一步，使用<span style="box-sizing: inherit;">高阶扩展函数</span>：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">fun</span> <span class="nf" style="box-sizing: inherit;color: rgb(153, 0, 0);font-weight: bold;">SQLiteDatabase</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">:</span> <span class="n" style="box-sizing: inherit;">SQLiteDatabase</span><span class="p" style="box-sizing: inherit;">.()</span> <span class="p" style="box-sizing: inherit;">-&gt;</span> <span class="n" style="box-sizing: inherit;">Unit</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">beginTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">try</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">this</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">func</span><span class="p" style="box-sizing: inherit;">()</span><br>        <span class="n" style="box-sizing: inherit;">setTransactionSuccessful</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">finally</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">endTransaction</span><span class="p" style="box-sizing: inherit;">()</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br><br><span class="n" style="box-sizing: inherit;">db</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">inTransaction</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">delete</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"users"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"first_name = ?"</span><span class="p" style="box-sizing: inherit;">,</span> <span class="n" style="box-sizing: inherit;">arrayOf</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Tankery"</span><span class="p" style="box-sizing: inherit;">))</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这里，将扩展函数作为参数，也就是说，lambda 函数的定义，是一个扩展函数。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">扩展函数的好处是什么？在函数体内的代码，就像在类的成员方法中使用一样，可以直接调用类的其他方法或变量。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">也就是说，当一个 lambda 函数是扩展函数时，调用者可以像定义成员函数一样，定义 lambda 函数！</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">我们再通过一个例子，来看看经过高阶扩展函数的改造，可以变成怎样的代码。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">在 Android 的 UI 中，我们很多时候都需要使用 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">RecyclerView</code>，我们经常会写这样的代码：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="n" style="box-sizing: inherit;">recyclerView</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">=</span> <span class="n" style="box-sizing: inherit;">findViewById</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">R</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">id</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">the_id</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">);</span><br style="box-sizing: inherit;"><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">if</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">recyclerView</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">!=</span> <span class="kc" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">null</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">)</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">{</span><br>    <span class="n" style="box-sizing: inherit;">recyclerView</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">setLayoutManager</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">new</span> <span class="n" style="box-sizing: inherit;">LinearLayoutManager</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">context</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">));</span><br>    <span class="n" style="box-sizing: inherit;">listAdapter</span> <span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">=</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">new</span> <span class="n" style="box-sizing: inherit;">MyAdapter</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">();</span><br>    <span class="n" style="box-sizing: inherit;">recyclerView</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">.</span><span class="na" style="box-sizing: inherit;color: rgb(0, 128, 128);">setAdapter</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">(</span><span class="n" style="box-sizing: inherit;">listAdapter</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">);</span><br style="box-sizing: inherit;"><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">零碎，冗余，还容易出错（因为 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">recyclerView</code> 和 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">listAdapter</code> 是成员变量，你无法保证他们不会被其他方法修改）。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">再看看 Kotlin 代码：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="n" style="box-sizing: inherit;">recyclerView</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">findViewById</span><span class="p" style="box-sizing: inherit;">&lt;</span><span class="n" style="box-sizing: inherit;">RecyclerView</span><span class="p" style="box-sizing: inherit;">&gt;(</span><span class="n" style="box-sizing: inherit;">R</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">id</span><span class="p" style="box-sizing: inherit;">.</span><span class="n" style="box-sizing: inherit;">the_id</span><span class="p" style="box-sizing: inherit;">)</span><span class="o" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">?.</span><span class="n" style="box-sizing: inherit;">apply</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">layoutManager</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">LinearLayoutManager</span><span class="p" style="box-sizing: inherit;">(</span><span class="n" style="box-sizing: inherit;">context</span><span class="p" style="box-sizing: inherit;">)</span><br>    <span class="n" style="box-sizing: inherit;">adapter</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">MyAdapter</span><span class="p" style="box-sizing: inherit;">().</span><span class="n" style="box-sizing: inherit;">apply</span> <span class="p" style="box-sizing: inherit;">{</span> <span class="n" style="box-sizing: inherit;">listAdapter</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="k" style="box-sizing: inherit;color: rgb(0, 0, 0);font-weight: bold;">this</span> <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;"><code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">apply</code> 是 Kotlin 标准库的内置函数。让你可以为某个对象，定义一个函数体，在这个函数体中，可以直接使用 this 对象的方法。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">而通过 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">?.apply</code> 这样的调用，确保函数体被执行时，一定是非空的，而且可以像在 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">RecyclerView</code> 内一样，直接调用 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">layoutManager</code> 和 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">adapter</code> 的 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">setter</code> 函数。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">并且，通过 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">apply</code> ，将 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">MyAdapter</code> 的 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">RecyclerView</code> 赋值，以及 <code class="highlighter-rouge" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;padding: 0.15rem 0.5rem;border-radius: 0.25rem;background: rgba(240, 240, 240, 0.8);">listAdapter</code> 的赋值，都统一起来，整洁、优雅。而每一个 apply 内部，都能确保当前环境中的变量是一致的，不会被修改。这样的使用方式，在多线程环境，将更加具有优势。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">再来看另一个例子。使用高阶扩展函数，我们甚至可以用声明式的语法，来定义 layout：</p><pre class="highlight" style="box-sizing: inherit;font-family: monospace, monospace;font-size: 0.8rem;padding: 1.25rem;background: rgba(240, 240, 240, 0.8);margin-bottom: 1.5625rem;overflow: scroll;"><code style="box-sizing: inherit;font-family: monospace, monospace;font-size: 1em;"><span class="n" style="box-sizing: inherit;">verticalLayout</span> <span class="p" style="box-sizing: inherit;">{</span><br>    <span class="n" style="box-sizing: inherit;">padding</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="n" style="box-sizing: inherit;">dip</span><span class="p" style="box-sizing: inherit;">(</span><span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">30</span><span class="p" style="box-sizing: inherit;">)</span><br>    <span class="n" style="box-sizing: inherit;">editText</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">hint</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Name"</span><br>        <span class="n" style="box-sizing: inherit;">textSize</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">24f</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br>    <span class="n" style="box-sizing: inherit;">editText</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">hint</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Password"</span><br>        <span class="n" style="box-sizing: inherit;">textSize</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">24f</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br>    <span class="n" style="box-sizing: inherit;">button</span><span class="p" style="box-sizing: inherit;">(</span><span class="s" style="box-sizing: inherit;color: rgb(221, 17, 68);">"Login"</span><span class="p" style="box-sizing: inherit;">)</span> <span class="p" style="box-sizing: inherit;">{</span><br>        <span class="n" style="box-sizing: inherit;">textSize</span> <span class="p" style="box-sizing: inherit;">=</span> <span class="m" style="box-sizing: inherit;color: rgb(0, 153, 153);">26f</span><br>    <span class="p" style="box-sizing: inherit;">}</span><br style="box-sizing: inherit;"><span class="p" style="box-sizing: inherit;">}</span><br></code></pre><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">这就是扩展函数的威力。它让你的冗余代码大大减少，并让你的代码更加优雅、健壮。</p><hr style="box-sizing: content-box;height: 0px;overflow: visible;"><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">好了，大高个 Kotlin 的故事，到这里就讲完了。但这仅仅是开始，从门缝中看到的一点点光，还有很多优秀的特性值得细细去体会。我也特意隐去了很多细节，那些 Google 一下就能知道的细节，就随着大家的使用而慢慢的了解吧。笔者也仅仅是一个 Kotlin 初学者，希望在后面，能够和 Kotlin 碰撞出更多美妙的火花。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">大家如果喜欢（或者即使不喜欢。。），我将来可能会再写一篇，介绍一下 Kotlin Coroutine，可能会更加让人震撼吧（因为我已经从一些文章中看到了 Coroutine 的精彩）。</p><p style="box-sizing: inherit;margin-top: 1rem;margin-bottom: 1rem;">如果你也期待的话，点点关注。如果觉得不错，欢迎分享给更多朋友。有任何想法，欢迎留言讨论~</p><p><br></p><section class="col s12" style="box-sizing: border-box;float: left;min-height: 1px;width: 639px;margin-left: auto;left: auto;right: auto;"></section><p><br></p><p><br></p>
                </div>
                <script nonce="1371655740" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    (function(){
                        if (navigator.userAgent.indexOf("WindowsWechat") != -1){
                            var link = document.createElement('link');
                            var head = document.getElementsByTagName('head')[0];
                            link.rel = 'stylesheet';
                            link.type = 'text/css';
                            link.href = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/winwx464c32.css";
                            head.appendChild(link);
                        }
                    })();
                </script>

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                                                    <div class="reward-author" style="display: none;" id="js_reward_author">Tankery</div>
                                                                                    <p>
                        <a class="reward_button" id="js_reward_link" href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="##" id="js_reward_total"></a> <span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                    </div>
                </div>
                                <div class="reward_qrcode_area reward_area tc" id="js_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                                        <p class="reward_tips"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" id="js_reward_qrcode_img"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                                                
                
                            </div>
                                    
                        


                        
            <ul id="js_hotspot_area" class="article_extend_area"></ul>


            

            


<div class="rich_media_tool" id="js_toobar3">

            <a class="media_tool_meta meta_primary" id="js_view_source" href="##">阅读原文</a>
        <div id="js_read_area3" class="media_tool_meta tips_global_primary meta_primary" style="display:none;">

    <span id="readTxt">阅读</span>

    <span id="readNum3"></span>
    </div>


    <span style="display:none;" class="media_tool_meta meta_extra meta_praise" id="like_old">
        <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum_old"></span>
    </span>

      
    <span class="media_tool_meta meta_extra meta_share" style="display: none;">
        <button class="share_btn" id="js_share_btn">分享</button>
    </span>
    <span style="display:none;" class="media_tool_meta meta_extra meta_like" id="like3">
        <button class="like_btn" id="js_like_btn"> 
          <span id="js_like_wording"> 在看</span><span class="like_num" id="likeNum3"></span>
        </button>
    </span>

      <div style="display:none">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-dialog_haokan">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title" id="educate_title">已同步到看一看</strong></div>
        <div class="weui-dialog__bd">
        </div>
        <div class="weui-dialog__ft" id="educate_btn" style="display: none">
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" id="js_cancel">取消</a>
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_confirm">发送</a>
        </div>
        <div class="weui-dialog__ft" id="educate_btn2" style="display: none">
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_acknowledge">我知道了</a>
        </div>
        </div>
    </div>

    
    </div>

<div style="display: none;" id="js_like_educate" class="like_skin_primary like_comment_primary_pop">
  <div id="js_like_educate_wrapper" class="like_comment_primary_wrp like_comment_primary_pos_top">
    <div class="like_comment_primary_inner">
      <div class="like_comment_primary_hd">
        <h4 class="like_comment_primary_title">
          朋友会在“发现-看一看”看到你“在看”的内容        </h4>
        <button id="js_b_like_confirm" class="like_comment_primary_btn">确定</button>
      </div>
      <div class="like_comment_primary_bd">
        <img class="pic_haokan" src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_haokan4516f7.png">
      </div>
    </div>
  </div>
  <div class="like_comment_primary_mask" id="js_mask_3"></div>
</div>

  
  <div class="like_comment_wrp" id="js_a_like_comment" style="display: none;">
    <div class="like_comment_inner">
      <div class="like_comment_hd" style="display:none" id="js_like_title"></div>
      <div class="like_comment_bd">
        <div class="tips_global_primary like_comment_tips">
          <i class="weui-icon-success"></i><i class="icon-success-primary"></i>已同步到看一看<a href="javascript:;" class="like_comment_share_link" id="js_a_like_comment_share">写下你的想法</a>
        </div>
      </div>
      <div class="like_comment_ft">
        <span id="js_a_like_comment_msg" class="like_comment_msg" style="visibility:hidden">最多200字，当前共<span id="js_a_like_current_cnt"></span>字</span>
        <button class="like_comment_btn" disabled id="js_a_like_confirm">发送</button>
      </div>
    </div>
  </div>

<div id="js_like_toast" style="display: none;">
  <div class="weui-mask_transparent"></div>
  <div class="weui-toast">
    <i class="weui-icon-success-no-circle weui-icon_toast"></i>
    <p class="weui-toast__content" id="js_toast_msg">已发送</p>
  </div>
</div>


<div style="display: none;" id="js_b_comment_panel" class="like_comment_primary_pop">
  <div class="like_comment_primary_wrp" id="js_b_wrp">
    <div class="like_comment_primary_inner">
      <div class="like_comment_primary_hd">
        <h4 class="like_comment_primary_title">
          朋友将在看一看看到        </h4>
        <button id="js_b_like_confirm" class="like_comment_primary_btn">确定</button>
      </div>
      <div id="js_b_comment_text_first" class="like_comment_primary_bd">
        <span class="tips_global_primary">
          写下你的想法...        </span>
      </div>
    </div>
  </div>
  <div class="like_comment_primary_mask" id="js_mask_1"></div>
</div>

<div style="display: none;" id="js_b_comment_final">
  <div class="like_comment_primary_wrp editing" id="js_comment_wrp">
    <div class="like_comment_primary_inner">
      <div class="like_comment_primary_hd">
        <button class="like_comment_primary_cancel" id="js_b_comment_cancel">取消</button>
        <h4 class="like_comment_primary_title"> 发布到看一看 </h4>
        <button class="like_comment_primary_btn" id="js_b_comment_confirm">确定</button>
      </div>
      <div class="like_comment_primary_bd">
        <textarea class="like_comment_textarea weui-textarea" placeholder="写下你的想法..." id="js_b_comment_text_second"></textarea>
      </div>
      <span class="like_comment_msg" id="js_b_like_comment_msg" style="visibility: hidden;">最多200字，当前共<span id="js_b_like_current_cnt"></span>字</span>
    </div>
  </div>
  <div class="like_comment_primary_mask" id="js_mask_2"></div>
</div>

<div id="js_loading" style=" display: none;">
    <div class="weui-mask_transparent"></div>
    <div class="weui-toast">
        <i class="weui-loading weui-icon_toast"></i>
        <p class="weui-toast__content">发送中</p>
    </div>
</div>



                        <div class="rich_media_tool" id="js_sg_bar">

                                <a class="media_tool_meta meta_primary" href="https://blog.tankery.me/development/big-kotlin" target="_blank">阅读原文</a>
                                
            </div>
                      </div>
        </div>

        <div class="rich_media_area_primary sougou" id="sg_tj" style="display:none"></div>


        
        <div class="rich_media_area_extra">
          <div class="rich_media_area_extra_inner">
              
              <div id="js_share_appmsg">
              </div>

              
  
      <div class="mpda_bottom_container" id="js_bottom_ad_area"></div>
                
              <div id="js_iframetest" style="display:none;"></div>
                            
                            
              <div class="rich_media_extra rich_media_extra_discuss" id="js_cmt_container" style="display:none">
                

                
                <div class="discuss_mod" id="js_friend_cmt_area" style="display:none">
                  
                  
                  
                </div>

                                <div class="discuss_mod" id="js_cmt_area" style="display:none">
                </div>
                              </div>
          </div>
        </div>

        
        <div id="js_pc_qr_code" class="qr_code_pc_outer" style="display:none;">
            <div class="qr_code_pc_inner">
                <div class="qr_code_pc">
                    <img id="js_pc_qr_code_img" class="qr_code_pc_img">
                    <p>微信扫一扫<br>关注该公众号</p>
                </div>
            </div>
        </div>
    </div>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
