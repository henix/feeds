<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>走进 racket(lisp) 的世界</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/19906432">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/b209039ec6664454209203e4d71a5e5a_r.jpg" alt=""></div><p>上周追着看了个大牛的好几篇文章，发现一个叫racket的语言出镜率颇高 —— 这已经是我十月来第三次从各种大牛的文章中接触这个词。就如「惊天魔盗团」里那个被催眠的法国人，当生活中多次出现和赌博相关的场景，Las Vegas自然而然成为他的下一个旅游目的地。而racket，在上个周末，便成了我的Las Vegas。</p><br><p>我对编程语言的接触大致分成三种「境界」：</p><br><ul><li><p>浅尝辄止：了解一下语言设计的理念，基本功能，使用场景，写写一些基本的程序。如ruby，io，scala，clojure，object c，lua，haskell。</p></li><li><p>爱不释手：学习了全部语法，看作者编写的书，遇到项目时会想想能不能用xxx实现，怎么实现。如golang，erlang。</p></li><li><p>日常使用：只要是需要写代码的地方，下手首先想到的就是TA。如python。当然，C也是我日常使用的语言，只不过C是工作语言而已。javascript大抵也能归到此类，但也是迫于形势。</p></li></ul><p>从一开始看racket的文档起，我就把它定位为一个「浅尝辄止」的周末语言，因为有clojure的前车 —— 学会了基本的语法后便无法继续深入 —— 我并未对自己深入了解racket有任何企盼。</p><br><p>racket是一个lisp [<a href="#_footnote_1" data-editable="true" data-title="1">1</a>] 家族的语言，祖上是common lisp [<a href="#_footnote_2" data-editable="true" data-title="2">2</a>] 对立的阵营scheme [<a href="#_footnote_3" data-editable="true" data-title="3">3</a>]，起初为教学的目的而创立。</p><br><p>racket在osx/linux/windows下都有各自的安装包，在其官网上下载安装即可。racket自带了一个有REPL功能的简单的IDE DrRacket，方便初学者领略语言的魅力。同时，也提供了详尽的在线文档以及供初学者入门的 An Introduction to Racket with Pictures，和进阶的 How to Design Programs。</p><br><p>这一切都不禁让我想起十年前学习Python的场景：windows下的IDE + beginner’s guide + dive into python，何其相似！</p><br><p>为了进一步讨好初学者，让racket的学习寓教于乐，DrRacket可以直接和各种各样的图形图片打交道，比如说这样：</p><br><img src="https://pic4.zhimg.com/d773fd30a4b8e34a68db2cf41c439b2f_r.jpg" data-rawwidth="862" data-rawheight="574"><br><br><p>此外，racket的作者们还开发了一套htdp [<a href="#_footnote_4" data-editable="true" data-title="4">4</a>]库，用于教学。比如你可以很方便地，几行代码完成一个火箭起飞的动画，这是其它语言很难想象的。</p><br><p>初学racket，我自己是这么一步步读下来的：</p><br><ul><li><p>官网 An Introduction to Racket with Pictures</p></li><li><p>第三方 Learn racket in Y Minutes - Learn X in Y Minutes</p></li><li><p>电子书：How to design programs / Realm of Racket</p></li><li><p>其它官方文档</p></li></ul><p>学了一个周末下来，发现自己对它已经到了爱不释手的阶段。我对racket的喜爱，有以下几个原因：</p><br><p>首先，racket的文档系统非常完备，为初学者考虑了几乎一切可能。其所有文档（包括社区里介绍racket的文档）基本都是用racket撰写的语言（或者说DSL）scribble所写，统一度非常高，且代码中所有出现的语法单元都会link到官方文档的解释页面，赞不绝口啊！别看racket在程序员的渗透率非常低，其文档的质量不输于Python这样的公众情人！</p><br><p>其次，优秀的学习平台DrRacket。如今，一门语言如果没有REPL，学习的曲线会高很多。racket在支持REPL的基础上，还提供了一个可以调试的IDE。像lisp这样能够编写macro的语言，如果无法调试macro，简直就是一场灾难，当时玩clojure进行不下去也是稍微复杂一点的macro总写不对有关（我的功力实在有限），但DrRacket的 "Macro Stepper" 是个救星。此外，在DrRacket里，你还可以这么写代码：</p><br><img src="https://pic4.zhimg.com/19637fe3cd537bb83ef5fe59d6155e32_r.jpg" data-rawwidth="786" data-rawheight="1204"><br><p>满满地都是爱啊！</p><br><p>再次，不得不说说scribble。这是racket自带的文档系统，同时也是racket设计出来的语言。如markdown，asciidoc一样，scribble语言可以用来书写文档，并进一步被编译成html，pdf等多种格式。和markdown等不同地是，在scribble里，你可以混入racket代码，做各种各样的事情：比如说在文档中嵌入plot。由于程序君还没有写过复杂的基于scribble的文档，所以无法说得更多。但是，单单看racket本身的文档（全为scribble生成），就能感受到它的强大。</p><br><p>接下来是plot和slideshow。也许更深入地了解后我会写篇「plot技术哪家强」的文章。在racket里，plotting直白地不能再直白了，你只需学一下racket的基本语法，就可以上手了，比python的matplotlib容易不少（当然，功能性还没有太多比较，单看文档，应该差不太多），比如一条 y=sin(x) 的曲线：</p><br><img src="https://pic2.zhimg.com/94a5e972e13719eaacc7dfc3e12395ac_r.jpg" data-rawwidth="926" data-rawheight="886"><br><p>是不是很简单？除了 sin 函数外，你只需要给出坐标系x轴的范围 (- pi) pi，一切就OK了。再来一个：</p><br><img src="https://pic2.zhimg.com/5b69ebf6570c0f27c8ae42ad64470cd8_r.jpg" data-rawwidth="1170" data-rawheight="998"><br><p>由于racket的plot太过亲民，使用它时我已经脱离了使用matplotlib那种非必要情况不去使用的「高级趣味」—— 我竟然在看plot文档的过程中把初高中的基本公式都过了一遍！这真的很有意思，墙裂建议大伙儿试试。想想 z = (x + y)^2 这样一个简单的公式，一个年过三十的「老骨头」，第一次一睹其三维图的真面目，是怎样一个泪奔的场景！</p><br><p>slideshow模块可以让你直接用racket写slides。虽然我一直用markdown（最近改成了asciidoc）+ reveal.js的标配来写slides，但racket的slideshow模块绝对值得一试。</p><br><p>racket的其它优点，都或多或少跟lisp有关，这个我觉得自己不必多讲。如果你看过「黑客与画家」，就知道Paul Graham近乎偏执地把一切溢美之词都给了lisp，说它是最有表现力的语言，说lisp是自己公司成功的"secret weapon"。对于lisp的优点，比如说一切皆为表达式，一切表达式皆可计算为一个值或一个list，语言可以在任何时候（读取，编译，执行）可用等等，可以看阮一峰的博文「为什么Lisp语言如此先进」[<a href="#_footnote_5" data-editable="true" data-title="5">5</a>]，这里就不赘述。</p><br><p>我的racket之旅刚刚开始，希望这份热情随着自己对 define-syntax 的深入了解能够继续下去。等有了更多的心得后，在撰文表述。:)</p><br><p>如果您觉得这篇文章不错，请点赞。多谢！</p><br><p>欢迎订阅公众号『程序人生』（搜索微信号 programmer_life）。每篇文章都力求原汁原味，早8点与您相会。</p><br><a href="#_footnoteref_1" data-editable="true" data-title="1">1</a>. LISt Processor的缩写，基于λ演算创建，是一个函数式编程语言<br><a href="#_footnoteref_2" data-editable="true" data-title="2">2</a>. 由于lisp语言过于灵活，很容易创建新的语言，所以其方言众多，common lisp是统一lisp所做的努力之一<br><a href="#_footnoteref_3" data-editable="true" data-title="3">3</a>. scheme是MIT引入的lisp的一种方言，遵循极简主义，强调小的语言核心<br><a href="#_footnoteref_4" data-editable="true" data-title="4">4</a>. how to design programs的缩写<br><a href="#_footnoteref_5" data-editable="true" data-title="5">5</a>. <a href="http://www.ruanyifeng.com/blog/2010/10/why_lisp_is_superior.html" data-editable="true" data-title="为什么Lisp语言如此先进？（译文）">为什么Lisp语言如此先进？（译文）</a>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
