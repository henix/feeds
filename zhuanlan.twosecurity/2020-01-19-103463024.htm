<div class="title-image"><img src="https://pic3.zhimg.com/v2-7212301c3ccb617020a93eb1cc52f733_b.jpg" alt=""></div><p>小王喜欢搞事情，有一天他发现顶着自己的真实 IP 去搞事情会被发现，于时他开始学习如何隐藏自己的真实 IP。</p><p>小王在网上找了个 IP 代理工具，本以为可以肆无忌惮的搞事情，没想到才用了 5 分钟就要收费，5 毛钱的辣条都要纠结半天的小王当然不乐意了。</p><p>进过小王的不懈努力，他终于找到了他心中的那个“她”。</p><h2>Stowaway</h2><p>这是一个面向渗透测试者的多跳代理工具，使用 go 语言开发，用户可使用它将外部流量通过多个节点代理至内网，并实现管理功能。（已兼容 Windows）</p><p>项目地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/ph4ntonn/Stowaway" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/ph4ntonn/Sto</span><span class="invisible">waway</span><span class="ellipsis"></span></a></p><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="263" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="263" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg"/></figure><blockquote>此工具仅限于安全研究和教学，用户承担因使用此工具而导致的所有法律和相关责任！ 作者不承担任何法律和相关责任！</blockquote><h2>特点</h2><ul><li>一目了然的节点管理</li><li>多平台适配</li><li>多级 socks5 流量代理转发</li><li>ssh 代理连接</li><li>远程交互式 shell</li><li>上传及下载文件</li><li>节点间流量以 AES-256(CBC模式) 进行加密</li></ul><h2>使用方法</h2><p>Stowaway 分为 admin 端 和 agent 端 两种形式。</p><blockquote>不想编译的同学可以直接用 release 下编译完成的程序。<br/>下载：<a href="https://link.zhihu.com/?target=https%3A//github.com/ph4ntonn/Stowaway/releases" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/ph4ntonn/Sto</span><span class="invisible">waway/releases</span><span class="ellipsis"></span></a></blockquote><p><b>Admin 端</b></p><div class="highlight"><pre><code class="language-text">./stowaway admin -l 9999 -s 123
  命令解析：
  admin代表以admin模式启动
  -l 参数代表监听端口
  -s 参数代表节点通信加密密钥(admin端与agent端必须一致!)</code></pre></div><p><b>agent 端</b></p><div class="highlight"><pre><code class="language-text">./stowaway agent -m 127.0.0.1:9999 -l 10000 --startnode -s 123 -r
  命令解析：
  agent代表以agent端模式启动
  -m 代表上一级节点的地址
  -l 代表监听端
  -s 参数代表节点通信加密密钥(admin端与agent端必须一致!)
  --startnode 代表此节点是agent端的第一个节点（第一个节点必须加上--startnode选项！若无--startnode表示为普通节点，命令与startnode一致）
  -r 代表以反向模式启动（即下级节点需要本节点主动连接而不是等待下级节点主动连接到本节点，若正向连接可以去除此选项）</code></pre></div><h2>测试</h2><p>下载地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/ph4ntonn/Stowaway/releases" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/ph4ntonn/Sto</span><span class="invisible">waway/releases</span><span class="ellipsis"></span></a></p><p>一个简单的例子（以一个 admin 端三个 agent 端为例）：</p><p>Admin 端：</p><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="263" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="263" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-3f5cf7089e996d36ce08613e671791dc_b.jpg"/></figure><p>Startnode 端：</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-b16b22798e13a2b80942d970ca634986_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="70" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic3.zhimg.com/v2-b16b22798e13a2b80942d970ca634986_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-b16b22798e13a2b80942d970ca634986_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="70" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic3.zhimg.com/v2-b16b22798e13a2b80942d970ca634986_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-b16b22798e13a2b80942d970ca634986_b.jpg"/></figure><p>第一个普通 Node (设置为反向连接模式)：</p><figure data-size="small"><noscript><img src="https://pic1.zhimg.com/v2-507219e39c87f4d169e2ef02ef9f10f4_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="60" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-507219e39c87f4d169e2ef02ef9f10f4_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-507219e39c87f4d169e2ef02ef9f10f4_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="60" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic1.zhimg.com/v2-507219e39c87f4d169e2ef02ef9f10f4_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-507219e39c87f4d169e2ef02ef9f10f4_b.jpg"/></figure><p>此时，进入（use 命令，本例中为 use 1）此节点的上级节点（即 startnode），利用命令connect 127.0.0.1:10001 即可将此反向模式节点加入网络</p><p>第二个普通Node：</p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-ce8daf103aa5998900d3d54dba435419_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="72" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-ce8daf103aa5998900d3d54dba435419_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-ce8daf103aa5998900d3d54dba435419_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="72" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-ce8daf103aa5998900d3d54dba435419_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-ce8daf103aa5998900d3d54dba435419_b.jpg"/></figure><p>连入完成后，admin 端查看节点：</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-6b5c42522a44b0e008c380e5baea34f6_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="414" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic3.zhimg.com/v2-6b5c42522a44b0e008c380e5baea34f6_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-6b5c42522a44b0e008c380e5baea34f6_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="414" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic3.zhimg.com/v2-6b5c42522a44b0e008c380e5baea34f6_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-6b5c42522a44b0e008c380e5baea34f6_b.jpg"/></figure><p>此时在 admin 端操控第二个普通 node 节点：</p><figure data-size="small"><noscript><img src="https://pic2.zhimg.com/v2-bf1e7c4cdc77c45554a05eb05e6fa83d_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="420" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-bf1e7c4cdc77c45554a05eb05e6fa83d_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-bf1e7c4cdc77c45554a05eb05e6fa83d_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="420" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-bf1e7c4cdc77c45554a05eb05e6fa83d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-bf1e7c4cdc77c45554a05eb05e6fa83d_b.jpg"/></figure><p>打开远程 shell：</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-090728877ae777a45fbf3c7f8e89eae2_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="439" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic3.zhimg.com/v2-090728877ae777a45fbf3c7f8e89eae2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-090728877ae777a45fbf3c7f8e89eae2_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="439" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic3.zhimg.com/v2-090728877ae777a45fbf3c7f8e89eae2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-090728877ae777a45fbf3c7f8e89eae2_b.jpg"/></figure><p>此时就可以在 admin 端操纵第二个普通节点的 shell</p><p>打开 socks5 代理：</p><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-f4cf99d9ccbccf162e8d8829d5c1b863_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="395" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic4.zhimg.com/v2-f4cf99d9ccbccf162e8d8829d5c1b863_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-f4cf99d9ccbccf162e8d8829d5c1b863_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="395" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic4.zhimg.com/v2-f4cf99d9ccbccf162e8d8829d5c1b863_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-f4cf99d9ccbccf162e8d8829d5c1b863_b.jpg"/></figure><p>此时用户即可以将 admin 端的 7777 端口作为 socks5 代理端口，将流量代理至第二个普通 node 节点（当想关闭 socks 服务时，在节点模式下输入 stopsocks 即可关闭与此节点相关的 socks 代理服务）</p><p>打开 ssh：</p><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-6e91d1b8234710cb7872e2faabd7912f_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="394" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic4.zhimg.com/v2-6e91d1b8234710cb7872e2faabd7912f_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-6e91d1b8234710cb7872e2faabd7912f_b.jpg" data-caption="" data-size="small" data-rawwidth="640" data-rawheight="394" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic4.zhimg.com/v2-6e91d1b8234710cb7872e2faabd7912f_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-6e91d1b8234710cb7872e2faabd7912f_b.jpg"/></figure><p>此时第二个普通节点会作为ssh客户端,(此节点)会发起ssh连接来访问指定的 ssh 服务，并将 ssh 数据回传至 admin 端</p><p>PS: 在 ssh 模式下，你可以用 pwd 来判断自己所处的文件夹（好吧，其实就是没法把 banner 传回来。。）</p><p>上传/下载文件：</p><figure data-size="small"><noscript><img src="https://pic3.zhimg.com/v2-08d5b0f6db3c01ebdce78963e104fcaa_b.jpg" data-caption="" data-size="small" data-rawwidth="1414" data-rawheight="810" class="origin_image zh-lightbox-thumb" width="1414" data-original="https://pic3.zhimg.com/v2-08d5b0f6db3c01ebdce78963e104fcaa_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-08d5b0f6db3c01ebdce78963e104fcaa_b.jpg" data-caption="" data-size="small" data-rawwidth="1414" data-rawheight="810" class="origin_image zh-lightbox-thumb lazy" width="1414" data-original="https://pic3.zhimg.com/v2-08d5b0f6db3c01ebdce78963e104fcaa_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-08d5b0f6db3c01ebdce78963e104fcaa_b.jpg"/></figure><figure data-size="small"><noscript><img src="https://pic4.zhimg.com/v2-ec0a993999df6ed76f8f0074e1cfcccf_b.jpg" data-caption="" data-size="small" data-rawwidth="1414" data-rawheight="814" class="origin_image zh-lightbox-thumb" width="1414" data-original="https://pic4.zhimg.com/v2-ec0a993999df6ed76f8f0074e1cfcccf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-ec0a993999df6ed76f8f0074e1cfcccf_b.jpg" data-caption="" data-size="small" data-rawwidth="1414" data-rawheight="814" class="origin_image zh-lightbox-thumb lazy" width="1414" data-original="https://pic4.zhimg.com/v2-ec0a993999df6ed76f8f0074e1cfcccf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-ec0a993999df6ed76f8f0074e1cfcccf_b.jpg"/></figure><p>上传下载功能命令为 upload/download 后加文件路径（注意要在节点模式下使用）,此时就可以上传文件至指定节点/下载指定节点的文件</p><div class="highlight"><pre><code class="language-text">具体的命令使用可输入 help 查询</code></pre></div><p><a href="https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a>的网络安全技能包又更新了！学 Python 的也能当黑客了，多实战沉浸式体验，让你回味无穷。</p><p>这个春节，让你从 程序猿→黑客x程序员 PLUS！</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg" data-caption="" data-size="normal" data-rawwidth="3058" data-rawheight="1720" class="origin_image zh-lightbox-thumb" width="3058" data-original="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg" data-caption="" data-size="normal" data-rawwidth="3058" data-rawheight="1720" class="origin_image zh-lightbox-thumb lazy" width="3058" data-original="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-718b79371d6ca42244a942f02f2b537c_b.jpg"/></figure><p>更多有关渗透测试的内容请前往<a href="https://link.zhihu.com/?target=https%3A//www.baidu.com/link%3Furl%3DOcGTJIGtwpNYrGru7tSszpEf10ZQ0xIE7SvER9ejNcCar00KI-fG2lu214M4WKPc%26wd%3D%26eqid%3Da24dabb2002f492b000000065e13d46a" class=" wrap external" target="_blank" rel="nofollow noreferrer">二向箔安全</a>进行学习，最近推出了“挖洞”班，想了解更多资讯的，可咨询客服微信 <b>twosecurity02</b></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg" data-caption="" data-size="normal" data-rawwidth="3041" data-rawheight="2000" class="origin_image zh-lightbox-thumb lazy" width="3041" data-original="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-2222e29c6decda168e1be1f049d93ccf_b.jpg"/></figure>