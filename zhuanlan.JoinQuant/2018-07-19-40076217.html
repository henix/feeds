<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>【全新量化入门系列4】下单、函数、API</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/40076217">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-1723cee3751db07a44616844517a0f95_b.jpg" alt=""></div><p>本文是<a href="https://link.zhihu.com/?target=https%3A//www.joinquant.com/post/13153" class=" wrap external" target="_blank" rel="nofollow noreferrer">《量化交易零基础入门教程》</a>中的一篇，点击链接可查看该系列详情。</p><h2>摘要</h2><ul><li>函数与API</li><li>函数使用方法</li><li>如何看API文档</li><li>自定义函数方法</li><li>常用的下单函数</li></ul><p class="ztext-empty-paragraph"><br/></p><p><b>1</b></p><p><b>前言</b></p><p class="ztext-empty-paragraph"><br/></p><p>我们继续以前文策略代码为例进行讲解，如下：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-807bac8f1d5fde1923db5bcedc39b685_b.jpg" data-caption="" data-size="normal" data-rawwidth="710" data-rawheight="124" class="origin_image zh-lightbox-thumb" width="710" data-original="https://pic2.zhimg.com/v2-807bac8f1d5fde1923db5bcedc39b685_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-807bac8f1d5fde1923db5bcedc39b685_b.jpg" data-caption="" data-size="normal" data-rawwidth="710" data-rawheight="124" class="origin_image zh-lightbox-thumb lazy" width="710" data-original="https://pic2.zhimg.com/v2-807bac8f1d5fde1923db5bcedc39b685_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-807bac8f1d5fde1923db5bcedc39b685_b.jpg"/></figure><p>通过前文讲解，现在这段代码中就剩这句下单语句还没讲了。为了理解这条语句，需要学习下python中函数的知识。</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-cf26a1afa567c3f9f61065779c47d0fe_b.jpg" data-caption="" data-size="normal" data-rawwidth="725" data-rawheight="35" class="origin_image zh-lightbox-thumb" width="725" data-original="https://pic3.zhimg.com/v2-cf26a1afa567c3f9f61065779c47d0fe_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-cf26a1afa567c3f9f61065779c47d0fe_b.jpg" data-caption="" data-size="normal" data-rawwidth="725" data-rawheight="35" class="origin_image zh-lightbox-thumb lazy" width="725" data-original="https://pic3.zhimg.com/v2-cf26a1afa567c3f9f61065779c47d0fe_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-cf26a1afa567c3f9f61065779c47d0fe_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p><b>  2  </b></p><p><b>函数与API</b></p><p class="ztext-empty-paragraph"><br/></p><p>函数是封装好的，可重复使用的 ，用来实现专一功能的代码段。函数能使代码易于维护与交流，提高编写策略的效率。通俗的理解是，<b>把一系列代码指令包起来就是一个函数</b>，起个名字就是函数名，之后用这个函数名，就知道这个名字指代那被包起来的一系列代码指令了。</p><p class="ztext-empty-paragraph"><br/></p><p>Python语言自带了许多内建函数，比如之前见过的print()、type()都是Python自带的函数，可以直接用。你也可以自己创建函数自己用，这被叫做自定义函数。比如如下这段框架代码其实就是自定义了一个名为period的函数，该函数内包了一个聚宽系统自带的函数order()：</p><p class="ztext-empty-paragraph"><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-ff4e03902a36738548fffa6b0b580f29_b.jpg" data-caption="" data-size="normal" data-rawwidth="652" data-rawheight="54" class="origin_image zh-lightbox-thumb" width="652" data-original="https://pic2.zhimg.com/v2-ff4e03902a36738548fffa6b0b580f29_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-ff4e03902a36738548fffa6b0b580f29_b.jpg" data-caption="" data-size="normal" data-rawwidth="652" data-rawheight="54" class="origin_image zh-lightbox-thumb lazy" width="652" data-original="https://pic2.zhimg.com/v2-ff4e03902a36738548fffa6b0b580f29_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-ff4e03902a36738548fffa6b0b580f29_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p>order()的准确称谓其实是API（application programming interface，即应用程序编程接口），API的含义与函数有所不同，解释起来略复杂。不过实际使用中跟函数几乎没有差别，可以理解成聚宽平台基于python封装而成的函数。在聚宽的API文档中你可以看到除order()外其他API。</p><p class="ztext-empty-paragraph"><br/></p><p><b>3</b></p><p><b>使用一个函数</b></p><p class="ztext-empty-paragraph"><br/></p><p>在使用函数的时候，通常需要提供一些参数(也有可能不需要)，函数根据提供的参数，执行一系列的函数作者设计好的操作，往往也会根据提供的参数返回结果（也可能返回为空，即不返回），如下：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-8d8033fb52d3c636e16a3582bea7a3e9_b.jpg" data-caption="" data-size="normal" data-rawwidth="795" data-rawheight="251" class="origin_image zh-lightbox-thumb" width="795" data-original="https://pic2.zhimg.com/v2-8d8033fb52d3c636e16a3582bea7a3e9_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-8d8033fb52d3c636e16a3582bea7a3e9_b.jpg" data-caption="" data-size="normal" data-rawwidth="795" data-rawheight="251" class="origin_image zh-lightbox-thumb lazy" width="795" data-original="https://pic2.zhimg.com/v2-8d8033fb52d3c636e16a3582bea7a3e9_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-8d8033fb52d3c636e16a3582bea7a3e9_b.jpg"/></figure><p>可见，函数的功能多种多样，需要参数、返回的结果亦不尽相同，所以具体怎么用需要看函数作者提供的说明文档，或者看函数内的设计代码自己推断。函数内的代码不见得看得到，看到不一定看得懂，想看懂也可能很辛苦。所以一般函数的用法要看函数作者提供的说明文档。</p><p class="ztext-empty-paragraph"><br/></p><p>聚宽设计的函数(如前文所说准确叫法是API)的用法都写在API文档里，位置在聚宽网站导航栏-帮助-API文档。</p><p class="ztext-empty-paragraph"><br/></p><p>接下来以order为例讲下文档怎么看。在API文档中找到 order - 按股数下单的说明，如下：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-a1e450b9474ee5ce18017bf7d2d1e8ac_b.jpg" data-caption="" data-size="normal" data-rawwidth="1078" data-rawheight="671" class="origin_image zh-lightbox-thumb" width="1078" data-original="https://pic1.zhimg.com/v2-a1e450b9474ee5ce18017bf7d2d1e8ac_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-a1e450b9474ee5ce18017bf7d2d1e8ac_b.jpg" data-caption="" data-size="normal" data-rawwidth="1078" data-rawheight="671" class="origin_image zh-lightbox-thumb lazy" width="1078" data-original="https://pic1.zhimg.com/v2-a1e450b9474ee5ce18017bf7d2d1e8ac_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-a1e450b9474ee5ce18017bf7d2d1e8ac_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p>可以看到，order可接受的参数有5个,分别是security，amount，style，side，pindex，这五个参数的名字与含义是函数作者设计的。意思是你使用order提供参数的时候，被提供参数将按提供的顺序依次对应这5个参数。比如下面的写法就是错误的。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-0992ade7feaa443747a8865cd98dceb7_b.jpg" data-caption="" data-size="normal" data-rawwidth="764" data-rawheight="52" class="origin_image zh-lightbox-thumb" width="764" data-original="https://pic4.zhimg.com/v2-0992ade7feaa443747a8865cd98dceb7_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-0992ade7feaa443747a8865cd98dceb7_b.jpg" data-caption="" data-size="normal" data-rawwidth="764" data-rawheight="52" class="origin_image zh-lightbox-thumb lazy" width="764" data-original="https://pic4.zhimg.com/v2-0992ade7feaa443747a8865cd98dceb7_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-0992ade7feaa443747a8865cd98dceb7_b.jpg"/></figure><p>不按顺序提供参数的正确写法如下：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-cf9ab4455d864323d93421e6e3c64f57_b.jpg" data-caption="" data-size="normal" data-rawwidth="793" data-rawheight="73" class="origin_image zh-lightbox-thumb" width="793" data-original="https://pic4.zhimg.com/v2-cf9ab4455d864323d93421e6e3c64f57_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-cf9ab4455d864323d93421e6e3c64f57_b.jpg" data-caption="" data-size="normal" data-rawwidth="793" data-rawheight="73" class="origin_image zh-lightbox-thumb lazy" width="793" data-original="https://pic4.zhimg.com/v2-cf9ab4455d864323d93421e6e3c64f57_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-cf9ab4455d864323d93421e6e3c64f57_b.jpg"/></figure><p>可以发现有些参数后面有等号，如style=None，含义style参数不提供的话，会被默认是None，其他的side=&#39;long&#39;, pindex=0也是一样的道理，如果不提供会被默认是等号后面的内容。所以前文order()只写了两个参数也不会错。注意，security和amount后面没有等号，即没有默认值，则必须提供参数不能省略。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-f184723ab351c92239d50ddd843c0c8b_b.jpg" data-caption="" data-size="normal" data-rawwidth="706" data-rawheight="68" class="origin_image zh-lightbox-thumb" width="706" data-original="https://pic4.zhimg.com/v2-f184723ab351c92239d50ddd843c0c8b_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-f184723ab351c92239d50ddd843c0c8b_b.jpg" data-caption="" data-size="normal" data-rawwidth="706" data-rawheight="68" class="origin_image zh-lightbox-thumb lazy" width="706" data-original="https://pic4.zhimg.com/v2-f184723ab351c92239d50ddd843c0c8b_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-f184723ab351c92239d50ddd843c0c8b_b.jpg"/></figure><p>细说下order的各个参数:</p><p>1. security 标的代码，数据类型要求是字符串，想知道 基金、期货、指数的代码都是什么，可以在这里看聚宽数据,比如聚宽数据-向下滚动页面-点击指数数据，可以看到各指数的代码。特别的是股票代码目前没有页面，但只需在平时使用的股票代码后面加后缀就好了，深交所（深交所股票0开头）股票代码后缀为.XSHE,如000001.XSHE,上交所股票代码（上交所股票6开头）后缀为.XSHG 如600000.XSHG。</p><p class="ztext-empty-paragraph"><br/></p><p>2. amount 交易数量, 正数表示买入, 负数表示卖出，没什么可说的。</p><p class="ztext-empty-paragraph"><br/></p><p>3. style参数决定下的订单是市价单还是限价单，默认是None代表市价单。目前就用默认吧，限价单以后讲。</p><p class="ztext-empty-paragraph"><br/></p><p>4. side参数决定是开空单还是多单，默认为多单，股票只能多单，股指期货等其他品类可以开空单。</p><p class="ztext-empty-paragraph"><br/></p><p>5. pindex参数是在多资金仓位时选择资金仓位的，股票一般用不到。</p><p class="ztext-empty-paragraph"><br/></p><p>6. 根据说明文档，order函数是有返回值的，如果创建订单成功, 则返回Order对象, 失败则返回None。有返回值不一定要用，比如前文的例子都没用到这个返回值，实际上策略做的相当完备的时候才可能用到。一般用法是，根据返回值是否是None，判断是否下单成功，成功时，根据返回值可以查询订单或取消订单等。不过具体实现方法、以及Order对象是什么，还需要学习很多的知识，后续可能会讲到。<br/></p><p><b>4</b></p><p><b>自定义函数</b></p><p class="ztext-empty-paragraph"><br/></p><p>Python 定义函数使用 def 关键字，一般格式如下：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-c17eec76874b6feaf99cdb560998c3bb_b.jpg" data-caption="" data-size="normal" data-rawwidth="630" data-rawheight="56" class="origin_image zh-lightbox-thumb" width="630" data-original="https://pic4.zhimg.com/v2-c17eec76874b6feaf99cdb560998c3bb_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-c17eec76874b6feaf99cdb560998c3bb_b.jpg" data-caption="" data-size="normal" data-rawwidth="630" data-rawheight="56" class="origin_image zh-lightbox-thumb lazy" width="630" data-original="https://pic4.zhimg.com/v2-c17eec76874b6feaf99cdb560998c3bb_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-c17eec76874b6feaf99cdb560998c3bb_b.jpg"/></figure><p>函数名即为该函数起的名字，函数体即包在函数中的一系列操作的代码，参数列表即使用函数需要提供的参数，比如一个根据圆半径求周长的函数如下：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-be7817291ff0367505d5123254312df0_b.jpg" data-caption="" data-size="normal" data-rawwidth="672" data-rawheight="108" class="origin_image zh-lightbox-thumb" width="672" data-original="https://pic1.zhimg.com/v2-be7817291ff0367505d5123254312df0_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-be7817291ff0367505d5123254312df0_b.jpg" data-caption="" data-size="normal" data-rawwidth="672" data-rawheight="108" class="origin_image zh-lightbox-thumb lazy" width="672" data-original="https://pic1.zhimg.com/v2-be7817291ff0367505d5123254312df0_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-be7817291ff0367505d5123254312df0_b.jpg"/></figure><p>return的含义是结束函数的运行并返回一个值，如上例子中就是返回了算好的周长l。如果return后什么也不写就是返回None即空，如果不写return，函数体运行完后，自动return None。</p><p class="ztext-empty-paragraph"><br/></p><p>至此，你应该意识到，函数内部是相对独立的，数据想进来要通过参数传进来，想出去要通过返回值传出去，函数从获得参数到返回值的过程中所产生的数据与变量中没通过返回值传出去的，在函数运行结束后（即返回值后）都将被计算机释放不再存储。如果想函数间通用某变量可以考虑用之前讲的全局变量。</p><p class="ztext-empty-paragraph"><br/></p><p>如前文讲使用函数时看到的，可以用等号给参数附加默认值，而且可以用逗号分隔分隔多个参数，例子如下:</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-731a9116257bf9f1f7019d2d2d1510ab_b.jpg" data-caption="" data-size="normal" data-rawwidth="658" data-rawheight="103" class="origin_image zh-lightbox-thumb" width="658" data-original="https://pic4.zhimg.com/v2-731a9116257bf9f1f7019d2d2d1510ab_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-731a9116257bf9f1f7019d2d2d1510ab_b.jpg" data-caption="" data-size="normal" data-rawwidth="658" data-rawheight="103" class="origin_image zh-lightbox-thumb lazy" width="658" data-original="https://pic4.zhimg.com/v2-731a9116257bf9f1f7019d2d2d1510ab_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-731a9116257bf9f1f7019d2d2d1510ab_b.jpg"/></figure><p>在返回值的时候可以返回多个变量，例子如下:</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-3bd9881c2ab619a800bbf67690173f8b_b.jpg" data-caption="" data-size="normal" data-rawwidth="652" data-rawheight="123" class="origin_image zh-lightbox-thumb" width="652" data-original="https://pic4.zhimg.com/v2-3bd9881c2ab619a800bbf67690173f8b_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-3bd9881c2ab619a800bbf67690173f8b_b.jpg" data-caption="" data-size="normal" data-rawwidth="652" data-rawheight="123" class="origin_image zh-lightbox-thumb lazy" width="652" data-original="https://pic4.zhimg.com/v2-3bd9881c2ab619a800bbf67690173f8b_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-3bd9881c2ab619a800bbf67690173f8b_b.jpg"/></figure><p>使用自定义函数的方法跟前文讲的使用函数的方法一致，需要说明的是定义函数的代码放的位置，如下：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-59fddd122108cfeef6def3260483d779_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="381" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-59fddd122108cfeef6def3260483d779_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-59fddd122108cfeef6def3260483d779_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="381" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-59fddd122108cfeef6def3260483d779_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-59fddd122108cfeef6def3260483d779_b.jpg"/></figure><p class="ztext-empty-paragraph"><br/></p><p><b>5</b></p><p><b>常用的下单函数</b></p><p class="ztext-empty-paragraph"><br/></p><p>常用的下单函数有四个，使用方法和order()差不多，可能有人自己看API文档就能学会了。接下来我们分别介绍下基本用法，同样的不讲style，side，pindex这三个参数。</p><p class="ztext-empty-paragraph"><br/></p><p>order(security,amount)，刚刚细讲过，含义是买卖一定数量的（单位：股）股票。security是股票代码，amount是数量，amount为负数时就是代表卖出了，需要知道的是，国内股票买入最小单位是1手即100股。例子如下：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-58bf3b5b112549c0b658a712f8ae216a_b.jpg" data-caption="" data-size="normal" data-rawwidth="675" data-rawheight="90" class="origin_image zh-lightbox-thumb" width="675" data-original="https://pic3.zhimg.com/v2-58bf3b5b112549c0b658a712f8ae216a_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-58bf3b5b112549c0b658a712f8ae216a_b.jpg" data-caption="" data-size="normal" data-rawwidth="675" data-rawheight="90" class="origin_image zh-lightbox-thumb lazy" width="675" data-original="https://pic3.zhimg.com/v2-58bf3b5b112549c0b658a712f8ae216a_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-58bf3b5b112549c0b658a712f8ae216a_b.jpg"/></figure><p>order_target(security,amount)，含义是通过买卖，将股票仓位调整至一定数量（单位：股）。security是股票代码，amount是数量。例子如下：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-d875acd6f7bc3c8f5d24c29dd0976a61_b.jpg" data-caption="" data-size="normal" data-rawwidth="686" data-rawheight="73" class="origin_image zh-lightbox-thumb" width="686" data-original="https://pic2.zhimg.com/v2-d875acd6f7bc3c8f5d24c29dd0976a61_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-d875acd6f7bc3c8f5d24c29dd0976a61_b.jpg" data-caption="" data-size="normal" data-rawwidth="686" data-rawheight="73" class="origin_image zh-lightbox-thumb lazy" width="686" data-original="https://pic2.zhimg.com/v2-d875acd6f7bc3c8f5d24c29dd0976a61_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-d875acd6f7bc3c8f5d24c29dd0976a61_b.jpg"/></figure><p>order_value(security,value)，含义是买卖一定价值量（单位：元）股票。security是股票代码，value是价值量。value为负数时就是代表卖出了。例子如下：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-e1dfac5305fcc5e525c28c992d2f9157_b.jpg" data-caption="" data-size="normal" data-rawwidth="685" data-rawheight="140" class="origin_image zh-lightbox-thumb" width="685" data-original="https://pic4.zhimg.com/v2-e1dfac5305fcc5e525c28c992d2f9157_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-e1dfac5305fcc5e525c28c992d2f9157_b.jpg" data-caption="" data-size="normal" data-rawwidth="685" data-rawheight="140" class="origin_image zh-lightbox-thumb lazy" width="685" data-original="https://pic4.zhimg.com/v2-e1dfac5305fcc5e525c28c992d2f9157_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-e1dfac5305fcc5e525c28c992d2f9157_b.jpg"/></figure><p>order_target_value(security,value)，通过买卖，将股票仓位调整至一定价值量（单位：元）。security是股票代码，value是价值量。例子如下：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-7df722fed93a9b9e218c2a92a0a63600_b.jpg" data-caption="" data-size="normal" data-rawwidth="781" data-rawheight="72" class="origin_image zh-lightbox-thumb" width="781" data-original="https://pic1.zhimg.com/v2-7df722fed93a9b9e218c2a92a0a63600_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-7df722fed93a9b9e218c2a92a0a63600_b.jpg" data-caption="" data-size="normal" data-rawwidth="781" data-rawheight="72" class="origin_image zh-lightbox-thumb lazy" width="781" data-original="https://pic1.zhimg.com/v2-7df722fed93a9b9e218c2a92a0a63600_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-7df722fed93a9b9e218c2a92a0a63600_b.jpg"/></figure><p>读者在尝试练习使用这些语句的时候，可以点击运行回测，通过查看回测结果页中的交易详情来看语句的执行效果，同时也可以看下日志。如下：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-d79f9dfd1a8823dbacfa7230c2a45952_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="554" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic3.zhimg.com/v2-d79f9dfd1a8823dbacfa7230c2a45952_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-d79f9dfd1a8823dbacfa7230c2a45952_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="554" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic3.zhimg.com/v2-d79f9dfd1a8823dbacfa7230c2a45952_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-d79f9dfd1a8823dbacfa7230c2a45952_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-0f0d05ee4828179730555f9f517790e1_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="525" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-0f0d05ee4828179730555f9f517790e1_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-0f0d05ee4828179730555f9f517790e1_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="525" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-0f0d05ee4828179730555f9f517790e1_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-0f0d05ee4828179730555f9f517790e1_b.jpg"/></figure><p>股票拆分合并和分红，交易的税费，下单导致成交价向不利的方向波动，这些因素系统都是默认考虑并仿真处理的了，具体的详情以及下的订单系统是如何模拟真实情况撮合成交的，可以看下API文档订单处理。其实新手不用太关注 这些订单处理的细节，不核心，目前也不容易理解，可以等以后自己比较熟悉了再看。</p><p class="ztext-empty-paragraph"><br/></p><p><b>6</b></p><p><b>自测与自学</b></p><p class="ztext-empty-paragraph"><br/></p><ul><li>实践下本文中的例子。</li><li>搜索了解下移动平均线（MA，均线）的计算方法。</li><li>搜索了解下市价单、限价单的含义。</li><li>自定义一个可计算包含若干数list中数的平均值的函数。</li><li>即如果你定义的函数为pjs()，那么执行pjs([1,3,4,6])后，应该返回平均数3.5。【提示：len()可用来计算list的长度，用法如len([1,2,3,4])】。</li></ul>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
