<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>参数调优——研究平台新功能！</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/28017827">原文</a></p>
<div class="title-image"><img src="https://pic3.zhimg.com/v2-ca51aea215a74dfac3db600dc0c57b92_r.jpg" alt=""></div><p>我相信，大家都曾经幻想过一件事情——<b>批量跑回测</b>，最常见的有一个均线策略，然后到底是5日、10日、20日、30日、60日中的<b>哪个均线的收益率更好</b>？</p><p><br></p><p>验证这个想法就需要在回测代码中<b>不断修改参数再跑回测</b>，能不能有一样工具可以帮助我们自动更改参数运行回测，直接返回结果呢？</p><p><br></p><p><b>答案：目前线上已支持研究平台运行回测，提供策略模版、参数调优模版！</b></p><p><br></p><img src="https://pic3.zhimg.com/v2-feb2a5674be9f9d963b0dd3cb9c60fd5_r.png" data-rawwidth="692" data-rawheight="256"><p>（策略模版入口） </p><p><br></p><p>我们可以看到策略形式与回测并无太大差异，不同的是在运行回测前会传入一系列的参数，这些参数将帮助我们<b>确定回测的区间</b>、<b>佣金</b>、<b>初始资金</b>等。我们可以通过输入 <b>%%rqalpha -h </b>命令获取命令参数及对应意义。</p><p><br></p><img src="https://pic2.zhimg.com/v2-23b16a13912e0e930878dad57149f4ff_r.png" data-rawwidth="613" data-rawheight="563"><p>（部分命令参数）</p><p><br></p><img src="https://pic1.zhimg.com/v2-9b7855423abddb87599cafc8cc5cede7_r.png" data-rawwidth="661" data-rawheight="367"><p>（股票策略模版） </p><p><br></p><h2><b>参数调优</b></h2><p><br></p><p>我们直接通过<b>默认的参数调优模版</b>进行讲解，首先模版内会<b>导入所需运行的模块</b>，同时设置了线程数（由于运行回测所需资源较大，研究平台只能同时运行2个线程）。</p><p><br></p><p>设置回测参数，回测日期范围、运行回测类型、频率、基准合约、初始回测资金都在会config的‘base’下，其余的设置一般情况下不需要作更改。</p><p><br></p><img src="https://pic1.zhimg.com/v2-4c26b807c17a9d28cc7d30b07cb72baa_r.png" data-rawwidth="406" data-rawheight="617"><p>（回测参数）</p><p><br></p><p>参数调优的<b>核心逻辑在于不同的参数组成一个队列进行回测</b>，依次返回回测结果。调优模版中就是将建立了一个<b>双均线的队列</b>，并发运行回测部分代码一般情况下也不需要修改。</p><p><br></p><img src="https://pic3.zhimg.com/v2-f8fbdfec0a8e965c864de3c4f8154ca6_r.png" data-rawwidth="533" data-rawheight="148"><p>（建立参数队列）</p><img src="https://pic4.zhimg.com/v2-55d0873f8df8dcc4a134bd3c64d4f0cd_r.png" data-rawwidth="595" data-rawheight="471"><p>（并发运行回测代码）</p><p><br></p><img src="https://pic3.zhimg.com/v2-b112f0e939bfb815a6acc16edec06191_r.png" data-rawwidth="398" data-rawheight="445"><p>（回测结果）</p><p><br></p><p>最终我们可以通过打印获得参数调优的结果，找到参数中的“真爱”。参数调优虽好，但<b>小心过度拟合哦！</b></p><p><br></p><p><a href="https://www.ricequant.com/community/topic/3639//3?utm_source=zhihu">一键传送，克隆期货参数调优模版</a></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
