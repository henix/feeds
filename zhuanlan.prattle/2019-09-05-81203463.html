<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>换个姿势读《资治通鉴》？</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/81203463">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-d4c0e4d1c740883aae48ecffb9371a4d_b.jpg" alt=""></div><p>起屠维大渊献。</p><p><br/>读过《通鉴》的朋友看到这个起手式会会心一笑。这就跟「地振高冈，一派溪山千古秀」一样，是《通鉴》里的黑话。<br/></p><p>作为一个通读过《史记》（《书》《表》除外）的程序员，《资治通鉴》这样的大部头我读起来还是觉得非常不方便。首先是时间上的开销很大 —— 一页纸往往要读上半小时到一小时，其中免不了查阅词典，了解生僻字词的读音和释义；其次是难以深度阅读 —— 大量的地名人名和时间的关系，无法很快厘清，因而对错综复杂的历史事件读之依旧是懵懵懂懂；再次，无论是实体书的阅读，还是电子书的阅读，笔记都很难处理，比如人物的图像，事件（主要是战争）的地图，无法和原文很好地一一对照。最后，三百万字，二百九十四卷的内容，往往令读者还未开始阅读便自我放弃了。<br/></p><p>可惜啊！隽美的文字，生动的典故，博大精深的出世入世之道，可以让人知兴替，明是非，鉴未来的浩瀚巨著，因为各种「不方便」便被我们放弃了！<br/></p><p>于是我便萌生了制作《资治通鉴》胶片版的念头。我可阅读的时间往往比较碎片化，所以希望闲暇时可以读上一小段，这样不必抱着大部头望而兴叹；我希望文档本身是活的，帮助理解内容的佐料（注释，图片，地图等）可以不断以一种简单轻量的方式被添加进来；此外，文档本身应该是精美的，看着舒服。这便是这个胶片版的最初的目标。</p><p><br/>程序员干这种事情一定是效率为先：能用代码搞定的，一定不用蛮力。于是这个目标被细化成：<br/></p><ul><li>选取质量上乘的《资治通鉴》 txt 版本</li><li>将文档切分成 294 卷，每卷一个胶片</li><li>自动生成符合 marp 格式的胶片，做一些格式上的处理</li><li>为引文生成不同的格式</li><li>每页胶片都自动放置一个 audio tag，可以播放本页的语音素材，比如：臣光曰</li><li>找相熟的小伙伴们创作每一张胶片的语音素材为每一张胶片自动生成语音素材</li><li>通读之，添加注释，相关图片和地图</li></ul><p>切分文档这种活，<code>csplit</code> 可以很好胜任，连代码都不用写；为了进一步把文字做成语音素材和胶片，需要花些心思 —— 得写个简单的 script 把切出来的一卷卷内容转成一个 JSON 数组，供后续生成胶片或生成语音素材之用。</p><p><br/>这个 JSON 数组长这个样子，除了内容本身，还有是否生成 audio 素材的字段：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg" data-caption="" data-size="normal" data-rawwidth="658" data-rawheight="183" class="origin_image zh-lightbox-thumb" width="658" data-original="https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg" data-caption="" data-size="normal" data-rawwidth="658" data-rawheight="183" class="origin_image zh-lightbox-thumb lazy" width="658" data-original="https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-4ab5c479298564f3e5c6d33dfdae2a17_b.jpg"/></figure><p><br/>语音素材我一开始考虑集网友之力来做，后来发现科大讯飞的 TTS 质量已属不错，几乎绝大多数的场景读音和断词都是对的，就决定自动生成。</p><p><br/>胶片用一个叫 marp 的工具制作 —— 因其支持丰富的 markdown 语法和扩展，满足我对图片排版，注释和脚注等的需求。</p><p><br/>最终做出来的 slides 效果如下：<br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="612" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="612" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-7d98568328d770142efa3ce988a1f074_b.jpg"/></figure><p><br/><br/></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="607" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="607" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-a450782ea98719585c7ae8940a3b2139_b.jpg"/></figure><p><br/><br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="606" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="606" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-04b4a2dc6902eaa3aebc3f0d0deb1b48_b.jpg"/></figure><p><br/><br/>手机上横屏观看的效果：<br/><br/></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="498" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="498" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-863cffeea79799f6e889826fd74ffb58_b.jpg"/></figure><p><br/>TTS 生成的语音效果也还是不错的，如定陶之战：<br/><br/></p><a class="video-box" href="https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/1152733522413346816" target="_blank" data-video-id="" data-video-playable="true" data-name="" data-poster="https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg" data-lens-id="1152733522413346816"><img class="thumbnail" src="https://pic3.zhimg.com/v2-82eb176ec72dc2ba4d0838e99604bbba.jpg"/><span class="content"><span class="title"><span class="z-ico-extern-gray"></span><span class="z-ico-extern-blue"></span></span><span class="url"><span class="z-ico-video"></span>https://www.zhihu.com/video/1152733522413346816</span></span></a><p><br/><br/>目前前十卷的整理工作已经初步完成，大家可以自行翻阅。语音的生成因为有 API 数量的限制，目前仅完成到一百卷。欢迎大家边贡献边阅读，贡献可参考：<a href="https://link.zhihu.com/?target=http%3A//github.com/tyrchen/tongjian" class=" wrap external" target="_blank" rel="nofollow noreferrer">github.com/tyrchen/tongjian</a>；阅读可直接点击：<a href="https://link.zhihu.com/?target=https%3A//tyrchen.github.io/tongjian" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">tyrchen.github.io/tongj</span><span class="invisible">ian</span><span class="ellipsis"></span></a>。</p><p><br/>未来我会一卷卷往下翻阅，顺手整理相关笔记。itunes 和 google play 的 podcast 的自动生成也在计划之中，大家看了之后有什么想法可以和我分享。毕竟，独乐乐，不如众乐乐。</p><p><br/><b>禅定时刻</b></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="605" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="605" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-d7687aa4f0c0e65ae40bced16b33e791_b.jpg"/></figure><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
