<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>用sbt-best-practice为Scala库设置Travis CI上的持续集成和持续交付</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/22371242">原文</a></p>
<p>Github上有很多 Scala 开源库。它们都有自动测试的功能。</p><p><br></p><p>比如 README 页面上有个小图标（build passing）表示当前版本是否通过了测试。</p><figure><noscript><img src="https://pic3.zhimg.com/8e8fa025d59af31425ede63348dd370a_b.png" data-rawwidth="2276" data-rawheight="918" class="origin_image zh-lightbox-thumb" width="2276" data-original="https://pic3.zhimg.com/8e8fa025d59af31425ede63348dd370a_r.jpg"></noscript><img src="https://pic3.zhimg.com/8e8fa025d59af31425ede63348dd370a_b.png" data-rawwidth="2276" data-rawheight="918" class="origin_image zh-lightbox-thumb lazy" width="2276" data-original="https://pic3.zhimg.com/8e8fa025d59af31425ede63348dd370a_r.jpg" data-actualsrc="https://pic3.zhimg.com/8e8fa025d59af31425ede63348dd370a_b.png"></figure><p><br></p><p><br></p><p>再如，每当有人提交 Pull Request 的时候，也会有个小勾勾报告这次修改能不能通过测试。</p><figure><noscript><img src="https://pic2.zhimg.com/916699913e7dbf3895d424feb3695d19_b.png" data-rawwidth="2352" data-rawheight="1404" class="origin_image zh-lightbox-thumb" width="2352" data-original="https://pic2.zhimg.com/916699913e7dbf3895d424feb3695d19_r.jpg"></noscript><img src="https://pic2.zhimg.com/916699913e7dbf3895d424feb3695d19_b.png" data-rawwidth="2352" data-rawheight="1404" class="origin_image zh-lightbox-thumb lazy" width="2352" data-original="https://pic2.zhimg.com/916699913e7dbf3895d424feb3695d19_r.jpg" data-actualsrc="https://pic2.zhimg.com/916699913e7dbf3895d424feb3695d19_b.png"></figure><p><br></p><p><br></p><p>还有，这些库还会发布到 Maven 中心仓库，我如果要在自己的项目使用它们的话，只要在自己的 sbt 配置中添加依赖就可以自动下载了。</p><p>这些自动测试和发布功能属于持续集成和持续交付，可以用 <a href="http://link.zhihu.com/?target=https%3A//travis-ci.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Travis CI</a> 和 <a href="http://link.zhihu.com/?target=https%3A//github.com/ThoughtWorksInc/sbt-best-practice" class=" wrap external" target="_blank" rel="nofollow noreferrer">sbt-best-practice</a> 实现。</p><p>Travis CI 是个持续集成服务。一旦你的 Github 仓库启用了 Travis CI ，每当有人在仓库推送代码或者提交 Pull Request 时，就会触发 Travis CI 执行一段脚本。</p><p>对于 Scala 项目来说，一般用 <a href="http://link.zhihu.com/?target=http%3A//www.scala-sbt.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">sbt</a> 管理构建过程，所以我们会希望 Travis CI 被触发以后，执行测试和发布的 sbt 任务。这样就可以完成题主要求的所有功能了。</p><p>第一步：启用 Travis CI</p><p>Travis CI 的构建过程配置在 .travis.yml 文件中。Scala 库的 .travis.yml 应该写成这样：</p><p><br></p><div class="highlight"><pre><code class="language-yaml"><span></span><span class="c1"># 告诉 Travis CI 应该用已经安装了 Scala 的系统镜像来执行本文件中配置的脚本</span>
<span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">scala</span>

<span class="c1"># 应执行 sbt test 任务来进行自动测试</span>
<span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sbt test</span>

<span class="c1"># 如果存在 deploy.sbt 文件，就执行 sbt "release with-defaults" 任务来进行自动发布</span>
<span class="l l-Scalar l-Scalar-Plain">deploy</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">skip_cleanup</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">script</span>
  <span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">sbt "release with-defaults"</span>
  <span class="l l-Scalar l-Scalar-Plain">on</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">-e ./deploy.sbt</span>
    <span class="l l-Scalar l-Scalar-Plain">all_branches</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div><p>有了 .travis.yml，你还需要访问<a href="http://link.zhihu.com/?target=https%3A//travis-ci.org/profile" class=" wrap external" target="_blank" rel="nofollow noreferrer">你在 Travis CI 的 Profile 页面</a>，为 Github 仓库启用 Travis CI。</p><figure><noscript><img src="https://pic2.zhimg.com/bec2d73be3f0489403b57835aebc7221_b.png" data-rawwidth="684" data-rawheight="384" class="origin_image zh-lightbox-thumb" width="684" data-original="https://pic2.zhimg.com/bec2d73be3f0489403b57835aebc7221_r.jpg"></noscript><img src="https://pic2.zhimg.com/bec2d73be3f0489403b57835aebc7221_b.png" data-rawwidth="684" data-rawheight="384" class="origin_image zh-lightbox-thumb lazy" width="684" data-original="https://pic2.zhimg.com/bec2d73be3f0489403b57835aebc7221_r.jpg" data-actualsrc="https://pic2.zhimg.com/bec2d73be3f0489403b57835aebc7221_b.png"></figure><p>然后，CI 会自动执行 sbt test 测试每次提交。此外，CI 还会检测 deploy.sbt 是否存在，如果存在，就执行 sbt "release with-defaults" 任务来进行自动发布。</p><p>第二步：添加 Sbt 插件</p><p>sbt test 和 sbt "release with-defaults" 两个任务由 Sbt 插件提供。编辑project/plugins.sbt ，启用 <a href="http://link.zhihu.com/?target=https%3A//github.com/ThoughtWorksInc/sbt-best-practice" class=" wrap external" target="_blank" rel="nofollow noreferrer">sbt-best-practice</a> 插件，这些任务就会自动配置好。</p><p><br></p><div class="highlight"><pre><code class="language-text"><span></span>addSbtPlugin("com.thoughtworks.sbt-best-practice" % "sbt-best-practice" % "latest.release")
</code></pre></div><p>添加测试框架</p><p>对于自动测试，你还需要添加测试框架依赖并编写自己的测试用例。</p><p>在 Scala 社区，常用的测试框架有 <a href="http://link.zhihu.com/?target=http%3A//junit.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JUnit</a> 、<a href="http://link.zhihu.com/?target=http%3A//www.scalatest.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">ScalaTest</a>、<a href="http://link.zhihu.com/?target=https%3A//etorreborre.github.io/specs2/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Specs2</a> 和 <a href="http://link.zhihu.com/?target=https%3A//github.com/lihaoyi/utest" class=" wrap external" target="_blank" rel="nofollow noreferrer">µTest</a>。</p><p>以 µTest 为例，编辑或创建 build.sbt:</p><p><br></p><div class="highlight"><pre><code class="language-scala"><span></span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.lihaoyi"</span> <span class="o">%%</span> <span class="s">"utest"</span> <span class="o">%</span> <span class="s">"0.4.3"</span> <span class="o">%</span> <span class="s">"test"</span>

<span class="n">testFrameworks</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">TestFramework</span><span class="o">(</span><span class="s">"utest.runner.Framework"</span><span class="o">)</span>
</code></pre></div><p>这样一来，在 src/test/scala 编写的测试用例就会被 sbt test 所执行了。</p><p>第三步：提供自动发布时的项目信息开源许可证</p><p>要发布到 Maven 中心仓库的软件必须是开源软件。你需要准备一个 LICENSE 文件。比如我们常用的 Apache License 的内容可以在这里找到：<a href="http://link.zhihu.com/?target=https%3A//www.apache.org/licenses/LICENSE-2.0" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://www.</span><span class="visible">apache.org/licenses/LIC</span><span class="invisible">ENSE-2.0</span><span class="ellipsis"></span></a></p><p>组织名和项目名</p><p>当然，你还需要指定库的名称。 sbt 项目用组织名外加项目名的组合作为唯一标识。编辑或创建 build.sbt 设置如下：</p><p><br></p><div class="highlight"><pre><code class="language-scala"><span></span><span class="n">organizatio</span> <span class="o">:=</span> <span class="s">"com.thoughtworks.q"</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">"q"</span>
</code></pre></div><p>版本号</p><p>版本号应该保存在 version.sbt 中：</p><p><br></p><div class="highlight"><pre><code class="language-scala"><span></span><span class="n">version</span> <span class="n">in</span> <span class="nc">ThisBuild</span> <span class="o">:=</span> <span class="s">"1.0.0-SNAPSHOT"</span>
</code></pre></div><p>第四步：设置自动发布时的密码、密钥等鉴权机制申请 Sonatype 帐号</p><p>Maven 中心仓库中的大部分软件都是从 <a href="http://link.zhihu.com/?target=http%3A//www.sonatype.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sonatype</a> 上同步过来的。所以，只要你把项目发布到 Sonatype ，就会自动发布到 Maven 中心仓库。</p><p>首先，你需要注册一个 Sonatype 帐号：</p><p><a href="http://link.zhihu.com/?target=https%3A//issues.sonatype.org/secure/Signup%21default.jspa" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">issues.sonatype.org/sec</span><span class="invisible">ure/Signup!default.jspa</span><span class="ellipsis"></span></a></p><p>然后，填写表单，申请权限以发布项目到 Sonatype ：</p><p><a href="http://link.zhihu.com/?target=https%3A//issues.sonatype.org/secure/CreateIssue.jspa%3Fissuetype%3D21%26pid%3D10134" class=" wrap external" target="_blank" rel="nofollow noreferrer">https://issues.sonatype.org/secure/CreateIssue.jspa?issuetype=21&amp;amp;pid=10134</a> </p><figure><noscript><img src="https://pic4.zhimg.com/b6194475835107f913616c38a663a583_b.png" data-rawwidth="1072" data-rawheight="1285" class="origin_image zh-lightbox-thumb" width="1072" data-original="https://pic4.zhimg.com/b6194475835107f913616c38a663a583_r.jpg"></noscript><img src="https://pic4.zhimg.com/b6194475835107f913616c38a663a583_b.png" data-rawwidth="1072" data-rawheight="1285" class="origin_image zh-lightbox-thumb lazy" width="1072" data-original="https://pic4.zhimg.com/b6194475835107f913616c38a663a583_r.jpg" data-actualsrc="https://pic4.zhimg.com/b6194475835107f913616c38a663a583_b.png"></figure><p>你可以参照我申请时的格式来填写：</p><p><a href="http://link.zhihu.com/?target=https%3A//issues.sonatype.org/browse/OSSRH-22779" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">issues.sonatype.org/bro</span><span class="invisible">wse/OSSRH-22779</span><span class="ellipsis"></span></a></p><p>生成和上传 PGP 密钥</p><p>发布到 Sonatype 的软件必须用 PGP 签名。所以你得生成一对 PGP 密钥。</p><p>你可以用 <a href="http://link.zhihu.com/?target=https%3A//www.gnupg.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">GnuPG</a> 来生成密钥。</p><p><br></p><div class="highlight"><pre><code class="language-bash"><span></span>gpg --gen-key
gpg --export --armor --output pubring.asc
gpg --export-secret-keys --armor --output secring.asc
</code></pre></div><p>填写密钥所需的信息，其中一个步骤需要填写加密口令，直接按回车填写空口令即可。<br>当前目录就会出现私钥文件 secring.asc 和公钥文件 pubring.asc 。</p><p>接下来，你需要上传公钥。</p><p>访问 <a href="http://link.zhihu.com/?target=https%3A//pgp.mit.edu/" class=" wrap external" target="_blank" rel="nofollow noreferrer">MIT PGP Key Server</a> ，把 pubring.asc 的内容粘贴到 “Enter ASCII-armored PGP key here:” 处，然后点击“Submit this key to the keyserver!”。</p><figure><noscript><img src="https://pic1.zhimg.com/481bd96062fd239e8a4b124a7a75ada0_b.png" data-rawwidth="732" data-rawheight="1063" class="origin_image zh-lightbox-thumb" width="732" data-original="https://pic1.zhimg.com/481bd96062fd239e8a4b124a7a75ada0_r.jpg"></noscript><img src="https://pic1.zhimg.com/481bd96062fd239e8a4b124a7a75ada0_b.png" data-rawwidth="732" data-rawheight="1063" class="origin_image zh-lightbox-thumb lazy" width="732" data-original="https://pic1.zhimg.com/481bd96062fd239e8a4b124a7a75ada0_r.jpg" data-actualsrc="https://pic1.zhimg.com/481bd96062fd239e8a4b124a7a75ada0_b.png"></figure><p>生成 Github Personal Access Token</p><p>在发布 Scala 库时， CI 会通过 sbt-best-practice 插件会自动给 Github 仓库中的版本设置一个版本 tag 。<br>所以需要为 CI 设置 Github 仓库的修改权限。这可以通过 Github Personal Access Token 实现。</p><p>访问 <a href="http://link.zhihu.com/?target=https%3A//github.com/settings/tokens/new" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sign in to GitHub · GitHub</a> ，然后填写 Token description 并勾选public_repo 权限。</p><figure><noscript><img src="https://pic3.zhimg.com/f20404b12f59ccfefef28ef4dbe18262_b.png" data-rawwidth="1151" data-rawheight="1190" class="origin_image zh-lightbox-thumb" width="1151" data-original="https://pic3.zhimg.com/f20404b12f59ccfefef28ef4dbe18262_r.jpg"></noscript><img src="https://pic3.zhimg.com/f20404b12f59ccfefef28ef4dbe18262_b.png" data-rawwidth="1151" data-rawheight="1190" class="origin_image zh-lightbox-thumb lazy" width="1151" data-original="https://pic3.zhimg.com/f20404b12f59ccfefef28ef4dbe18262_r.jpg" data-actualsrc="https://pic3.zhimg.com/f20404b12f59ccfefef28ef4dbe18262_b.png"></figure><p>Github 会生成一段类似 74bf3a944382ec8e07625a6e55eb05a416ca585d 的 Personal Access Token 。请保存这段 Personal Access Token 供稍后使用。</p><p>创建一个 Secret Gist 保存所有密码和密钥</p><p>上述所有的这些密码和密钥都可以通过 Sbt 来设置。但是，我觉得你恐怕不会愿意把你的密码放在公共仓库中。</p><p>所以我建议你把密码和密钥放在只有自己才知道的 Secret Gist 中。然后把 Secret Gist 的 URL 设置在 Travis CI 的秘密环境变量中。那么， CI 运行 sbt 任务时，就可以读取环境变量访问 Secret Gist 获得所有这些密码和密钥。</p><p>访问 <a href="http://link.zhihu.com/?target=https%3A//gist.github.com/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">gist.github.com/</span><span class="invisible"></span></a> ，点击“Add file”按钮，添加三个文件：</p><p>secret.sbt</p><div class="highlight"><pre><code class="language-scala"><span></span><span class="c1">// 此处应填写刚才生成的 Github Personal Access Token</span>
<span class="n">githubCredential</span> <span class="n">in</span> <span class="nc">Global</span> <span class="o">:=</span> <span class="nc">PersonalAccessToken</span><span class="o">(</span><span class="s">"74bf3a944382ec8e07625a6e55eb05a416ca585d"</span><span class="o">)</span>

<span class="c1">// 此处应填写你刚才注册 Sonatype 时使用的帐号和密码</span>
<span class="n">credentials</span> <span class="n">in</span> <span class="nc">Global</span> <span class="o">+=</span> <span class="nc">Credentials</span><span class="o">(</span><span class="s">"Sonatype Nexus Repository Manager"</span><span class="o">,</span> <span class="s">"oss.sonatype.org"</span><span class="o">,</span> <span class="s">"你的 Sonatype 帐号"</span><span class="o">,</span> <span class="s">"你的 Sonatype 密码"</span><span class="o">)</span>

<span class="k">val</span> <span class="n">currentDirectory</span> <span class="k">=</span> <span class="n">file</span><span class="o">(</span><span class="n">sourcecode</span><span class="o">.</span><span class="nc">File</span><span class="o">()).</span><span class="n">getParentFile</span>

<span class="n">pgpSecretRing</span> <span class="o">:=</span> <span class="n">currentDirectory</span> <span class="o">/</span> <span class="s">"secring.asc"</span>

<span class="n">pgpPublicRing</span> <span class="o">:=</span> <span class="n">currentDirectory</span> <span class="o">/</span> <span class="s">"pubring.asc"</span>

<span class="n">pgpPassphrase</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Array</span><span class="o">.</span><span class="n">empty</span><span class="o">)</span>
</code></pre></div><p>secring.asc</p><p>请把 GnuPG 生成的 secring.asc 内容复制到此处。</p><p>pubring.asc</p><p>请把 GnuPG 生成的 pubring.asc 内容复制到此处。</p><p>最后点击“Create secret gist”按钮，生成这个 Secret Gist 。</p><p>请记下新生成的 Secret Gist 网址，类似 <a href="http://link.zhihu.com/?target=https%3A//gist.github.com/Atry/xxxxxxxxxxxxxxxxxxxx" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">gist.github.com/Atry/xx</span><span class="invisible">xxxxxxxxxxxxxxxxxx</span><span class="ellipsis"></span></a></p><p>创建 Travis CI 的秘密环境变量</p><p>在你的 Travis CI 项目设置面板中添加 SECRET_GIST 环境变量，设为你刚生成的 Secret Gist 网址 <a href="http://link.zhihu.com/?target=https%3A//gist.github.com/Atry/xxxxxxxxxxxxxxxxxxxx" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">gist.github.com/Atry/xx</span><span class="invisible">xxxxxxxxxxxxxxxxxx</span><span class="ellipsis"></span></a></p><figure><noscript><img src="https://pic3.zhimg.com/7f572b7c22dc3a135ff2c3f443f6cf3a_b.png" data-rawwidth="1072" data-rawheight="843" class="origin_image zh-lightbox-thumb" width="1072" data-original="https://pic3.zhimg.com/7f572b7c22dc3a135ff2c3f443f6cf3a_r.jpg"></noscript><img src="https://pic3.zhimg.com/7f572b7c22dc3a135ff2c3f443f6cf3a_b.png" data-rawwidth="1072" data-rawheight="843" class="origin_image zh-lightbox-thumb lazy" width="1072" data-original="https://pic3.zhimg.com/7f572b7c22dc3a135ff2c3f443f6cf3a_r.jpg" data-actualsrc="https://pic3.zhimg.com/7f572b7c22dc3a135ff2c3f443f6cf3a_b.png"></figure><p>创建 deploy.sbt 读取 SECRET_GIST 环境变量</p><p>deploy.sbt 包含了发布 Scala 库时的设置。我们启用 Travis 和 SonatypeRelease ，然后读取 SECRET_GIST 环境变量并加载 Secret Gist 中的 secret.sbt 文件</p><p><br></p><div class="highlight"><pre><code class="language-scala"><span></span><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">Travis</span><span class="o">)</span>

<span class="n">enablePlugins</span><span class="o">(</span><span class="nc">SonatypeRelease</span><span class="o">)</span>

<span class="k">lazy</span> <span class="k">val</span> <span class="n">secret</span> <span class="k">=</span> <span class="n">project</span> <span class="n">settings</span><span class="o">(</span><span class="n">publishArtifact</span> <span class="o">:=</span> <span class="kc">false</span><span class="o">)</span> <span class="n">configure</span> <span class="o">{</span> <span class="n">secret</span> <span class="k">=&gt;</span>
  <span class="n">sys</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">"SECRET_GIST"</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">gitUri</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">secret</span><span class="o">.</span><span class="n">addSbtFilesFromGit</span><span class="o">(</span><span class="n">gitUri</span><span class="o">,</span> <span class="n">file</span><span class="o">(</span><span class="s">"secret.sbt"</span><span class="o">))</span>
    <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span>
      <span class="n">secret</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>日常使用注意事项</p><p>关于 deploy.sbt.disabled</p><p>把 .travis.yml 、 project/plugins.sbt 、 LICENSE 、 build.sbt 、 deploy.sbt 几个文件推送到 Git 仓库后， CI 会触发自动测试和自动发布。每次发布成功后，sbt-best-practice 会自动把 deploy.sbt 改名为 deploy.sbt.disabled ，因此，如果将来再有提交，就只会触发自动测试，而不会触发自动发布。如果你想发布下一个新版本，手动把deploy.sbt.disabled 改名为 deploy.sbt 就能触发 CI 执行自动发布流程了。</p><p>关于版本号</p><p>一旦触发发布，CI 会自动修改 version.sbt 中记录的版本号。比如你的仓库中原本版本号是 1.0.0-SNAPSHOT ，触发自动发布时， CI 会首先把版本号改为 1.0.0 然后标上 GIT tag，然后再把版本号改为 1.0.1-SNAPSHOT 。如果你希望下次发布的版本号是 1.5.0 ，那么你需要在触发下一次自动发布以前，手动把 version.sbt 中记录的版本号改为 1.5.0-SNAPSHOT 。</p><p>相关链接</p><ul><li><a href="http://link.zhihu.com/?target=http%3A//scala-lang.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Scala</a> - 一门多范式的编程语言，也是本文的涉及的全部技术的基础。</li><li><a href="http://link.zhihu.com/?target=https%3A//github.com/ThoughtWorksInc/scala-project-template" class=" wrap external" target="_blank" rel="nofollow noreferrer">scala-project-template</a> - Scala项目模板，类似本文描述的结构，但改用私有 Git 仓库来保存密码而非 Secret Gist，因此 deploy.sbt 内容稍有不同。</li><li><a href="http://link.zhihu.com/?target=https%3A//github.com/ThoughtWorksInc/Q.scala" class=" wrap external" target="_blank" rel="nofollow noreferrer">Q.scala</a> - 完整设置了自动测试和发布的 Scala 库。</li><li><a href="http://link.zhihu.com/?target=http%3A//www.scala-sbt.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sbt</a> - Simple Build Tool, Scala 社区最为广泛实用的构建工具。</li><li><a href="http://link.zhihu.com/?target=https%3A//github.com/ThoughtWorksInc/sbt-best-practice" class=" wrap external" target="_blank" rel="nofollow noreferrer">sbt-best-practice</a> - Sbt 插件，提供了本文提及的全部发布功能。</li><li><a href="http://link.zhihu.com/?target=https%3A//github.com/lihaoyi/utest" class=" wrap external" target="_blank" rel="nofollow noreferrer">µTest</a> - 一个简单好用的 Scala 测试框架。</li><li><a href="http://link.zhihu.com/?target=https%3A//travis-ci.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Travis CI</a> - 为 Github 项目提供了持续集成服务。除了 Travis CI ，其他持续集成方案还有我司的 <a href="http://link.zhihu.com/?target=https%3A//www.go.cd/" class=" wrap external" target="_blank" rel="nofollow noreferrer">GoCD</a> 、 <a href="http://link.zhihu.com/?target=https%3A//jenkins.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Jenkins</a> 、 <a href="http://link.zhihu.com/?target=https%3A//www.atlassian.com/software/bamboo" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bamboo</a> 等。相比这些方案，Travis CI 很精简，完全省略了 pipeline 的概念，我很喜欢。开源项目可以免费使用 Travis CI。我见过的开源项目中最常见的持续集成服务就是 Travis CI。</li></ul>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
