<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>汉诺塔杂谈（一）</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/36075202">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-928c2e7b1e1a19f50cce37834fa2d528_r.jpg" alt=""></div><p>法国数学家卢卡斯（Edouard Lucas）在1883年提出了一个数学游戏：</p><p>传说在世界中心贝拿勒斯（在印度北部）的圣庙里，一块黄铜板上有三根宝石柱。印度教的主神大梵天在创造世界的时候，在其中一根柱上从下到上地穿好了由大到小的64片金盘。大梵天命令僧侣们将圆盘从下面<b>开始按大小顺序重新摆放在另一根柱子上</b>，并且规定，在小圆盘上不能放大圆盘，在三根柱子之间一次只能移动一个圆盘。</p><p>预言说——当这些盘子移动完毕时，世界就将在一声霹雳中消灭，而梵塔、庙宇和众生也都将<b>同归于尽，尘归尘，土归土</b>。</p><p>这个传说又称作<b>梵天寺之塔问题(Tower of Brahma puzzle)</b>，而且有若干变体：其一是寺院的地点位于越南河内，因此该问题也常被称作“<b>河内塔</b>”或“<b>汉诺塔（Tower of Hanoi）</b>”。</p><hr><p>下面考虑该问题的一般形式：假设有 <equation>n</equation> 个圆盘，最初自下而上、自大而小地穿在A柱上（如下图所示），每次按规则移动一个圆盘，最终将所有圆盘移动到C柱上。</p><img src="https://pic3.zhimg.com/v2-62f8246d7a1c955f1b7206171cca14ce_r.jpg" data-caption="" data-size="normal" data-rawwidth="673" data-rawheight="243" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>先考虑最简单的情况：</p><p>(1) 只有一个盘子，那么问题太简单了，下图就好。</p><img src="https://pic2.zhimg.com/v2-1574981681e9b1c5971ecf53048389c1_r.jpg" data-caption="" data-size="normal" data-rawwidth="736" data-rawheight="305" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>(2) 只有两个盘子，下图把所有可能的移动方法逐一画出，</p><img src="https://pic1.zhimg.com/v2-949b608938fa8fc600e12dd0b7130902_r.jpg" data-caption="" data-size="normal" data-rawwidth="696" data-rawheight="602" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>然后的话，就枚举吧，得到解法是：1(A)→B、<b>2(A)→C</b>、1(B)→C。</p><p>观察到其中第二步是<b>必须</b>的。</p><p>(3) 有3个盘子的话，那么一定需要把3号盘子从A移到C：</p><img src="https://pic2.zhimg.com/v2-0a36561f7262126e684822ced267017b_r.jpg" data-caption="" data-size="normal" data-rawwidth="791" data-rawheight="235" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>而要这么做的话，1和2不能“挡3号盘子的路”，所以必须是下述情况：</p><img src="https://pic3.zhimg.com/v2-bb9905a9e5c8e6dccdaad98c72841163_r.jpg" data-caption="" data-size="normal" data-rawwidth="791" data-rawheight="235" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>然后，下图左，然后，下图右。</p><img src="https://pic4.zhimg.com/v2-dd903772a247c87e0ba6bc4a9c60239c_r.jpg" data-caption="" data-size="normal" data-rawwidth="1674" data-rawheight="239" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p><br></p><p>回到该问题的一般形式，注意到：其中最大的盘子位于A柱的最底部，而要将其移动到C柱，<b>必须</b>先将A柱上所有其他盘子移到B柱上（这是一个类似于自己的子问题）；接着将最大的盘子从A柱移到C柱，之后不必再管它；最后再将刚才移到B柱上的盘子移到C柱上（这又是一个子问题）。</p><img src="https://pic4.zhimg.com/v2-c9c7a57c0b53404142ad05d8d52d39eb_r.jpg" data-caption="" data-size="normal" data-rawwidth="535" data-rawheight="264" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>于是得到<b>递归</b>算法，其形式化描述为：</p><p><b>Hanoi</b> (<b><i>n</i></b>, <b>source</b>, <b>dest</b>, <b>by</b>)</p><p><b>Imput: </b>圆盘数<i>n</i>。</p><p><b>1.</b> <b>If </b>(<i>n</i>=1) <b>then</b> </p><p><b>1.1.</b>  <b>Print </b>(Move disk from source to dest) </p><p><b>2.</b> <b>Else </b></p><p><b>2.1.</b> <b>Hanoi </b>(<i>n</i>-1, source, by, dest)</p><p><b>2.2.</b> <b>Print</b> (Move disk from source to dest)</p><p><b>2.3.</b> <b>Hanoi </b>(<i>n</i>-1, by, dest, source)</p><p>下面是我写的Prolog语言的代码：</p><code lang="prolog">?-hanoi(4).

hanoi(N) :- 	
	move(N,left,middle,right),
	write(" "),nl.

move(1,A,_,C) :- inform(A,C), !.
move(N,A,B,C) :- 
	N1:= N - 1,			%注意这里的赋值
	move(N1,A,C,B),
	inform(A,C),
	move(N1,B,A,C).

inform(Loc1, Loc2):-
	write("Move disk from "),
	write(Loc1),
	write(" to "),
	write(Loc2), nl.</code><hr><p>用 <equation>T(n)</equation> 表示移动 <equation>n</equation> 个圆盘所需要的步数。根据算法先把前面 <equation>n-1</equation> 个盘子转移到<i>B</i>上；然后把第 <equation>n</equation> 个盘子转到<i>C</i>上；最后再一次将<i>B</i>上的 <equation>n-1</equation> 个盘子转移到<i>C</i>上。得到递推关系 <equation>T(n)=2T(n-1)+1</equation> 。</p><p>为求解 <equation>T(n)=2T(n-1)+1</equation> ， <equation>T(1)=1</equation> 。可使用<b>倒推法</b>：</p><p><equation>T(n) = 2T(n-1)+1</equation>  </p><p><equation>= 2(2T(n-2)+1)+1 =2\times 2T(n-2)+2+1</equation> </p><p><equation>= 2\times2(2T(n-3)+1)+2+1 = 2^3T(n-3)+2^2+2+1</equation> </p><p><equation>= \dots\dots</equation> </p><p><equation>= 2^{n-1}T(1)+2^{(n-1)-1}+…+2^2+2+1</equation> </p><p><equation>= 2^{n-1}+2^{(n-1)-1}+…+2^2+2+1</equation> </p><p><equation>= 2^n-1</equation> </p><hr><p>回到最初的汉诺塔问题，要将64片金盘重新摆放在另一根柱子上，最少需要 <equation>2^{64}-1</equation> 步，即使僧侣每秒钟移动一步而且每次移动都是正确的方法，那么也需要 <equation>5.8\times 10^{11} </equation> 年，即<b>5千多亿年</b>！</p><p>所以这时候用马三立老先生在《情绪与健康》中的一句台词来说就是——“<b>别害怕，好好活着，没关系！</b>”。</p><a href="http://www.iqiyi.com/w_19rraelfpt.html" data-draft-node="block" data-draft-type="link-card" data-image="v2-263556889c427c2803b0f944cee3b28f" data-image-width="120" data-image-height="160" data-image-size="120x160">动漫相声马三立 王凤山 《情绪与健康》</a><p>（目前只能找到这个卡通的）1：31时候马老的台词。</p><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
