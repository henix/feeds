<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>递归函数（九）：最小不动点定理</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/34604220">原文</a></p>
<h2><b>回顾</b></h2><p>上文我们讨论了集合上的偏序结构，之所以谈论它们是因为，<br>完全偏序集上的连续函数具有最小不动点，这称之为最小不动点定理，<br>除了集合论的一些知识之外，我们还要讨论到底什么是连续函数，以及什么是完全偏序集。</p><h2><b>有向子集与完全偏序</b></h2><img src="https://pic4.zhimg.com/v2-798a5d7b110884184ff24d74e9a1378b_r.jpg" data-caption="" data-size="normal" data-rawwidth="246" data-rawheight="197"><p>偏序集 <equation>(D,\leqslant )</equation> 的非空子集 <equation>S\subseteq D</equation> 叫做<b>有向子集</b>（directed subset），<br>当且仅当，对于 <equation>S</equation> 中的任意元素 <equation>a,b\in S</equation> ，<br>存在 <equation>S</equation> 中的一个元素 <equation>c</equation> ，有 <equation>a\leqslant c</equation> 且 <equation>b\leqslant c</equation> 。</p><p>如果一个偏序集 <equation>(D,\leqslant )</equation> 的每个有向子集 <equation>S\subseteq D</equation> 都有上确界（记为 <equation>\bigvee S</equation> ），<br>就称它是一个<b>有向完全偏序集</b>，<br>此外，如果它还有最小元，就称它是一个<b>完全偏序集</b>。</p><p>注意，完全偏序集并不是每一个子集都有上确界，<br>而是它的每一个有向子集都有上确界。</p><h2><b>连续函数</b></h2><img src="https://pic1.zhimg.com/v2-1540a3cecd3b2e0877758d2ddfb0401f_r.jpg" data-caption="" data-size="normal" data-rawwidth="228" data-rawheight="124"><p>假设 <equation>(D,\leqslant )</equation> 与 <equation>(E,\leqslant )</equation> 是完全偏序集， <equation>f:D\rightarrow E</equation> 是集合上定义的一个函数，<br>如果 <equation>S\subseteq D</equation> ，则 <equation>f(S)</equation> 为 <equation>E</equation> 的子集，其中 <equation>f(S)=\lbrace f(d)|\ d\in S \rbrace</equation> 。</p><p>对于任意的 <equation>d,d'\in D</equation> ，如果 <equation>d\leqslant d'</equation> 就有 <equation>f(d)\leqslant f(d')</equation> ，我们就说 <equation>f</equation> 是<b>单调的</b>。<br>可以看出，如果 <equation>f</equation> 是单调的，且 <equation>S</equation> 是 <equation>D</equation> 的有向子集，那么 <equation>f(S)</equation> 也是 <equation>E</equation> 的有向子集。</p><p>如果 <equation>f</equation> 是单调的，且对于任意有向子集 <equation>S\subseteq D</equation> ，有 <equation>f(\bigvee S)=\bigvee f(S)</equation> ，<br>就称 <equation>f</equation> 是<b>连续的</b>。</p><h2><b>连续函数集上的偏序结构</b></h2><img src="https://pic3.zhimg.com/v2-222b5763dca58d03cdca2d16977a654d_r.jpg" data-caption="" data-size="normal" data-rawwidth="500" data-rawheight="251"><p>完全偏序集 <equation>(D,\leqslant )</equation> 到 <equation>(E,\leqslant )</equation> 的连续函数，也可以定义出一个偏序结构，<br>我们称 <equation>f\leqslant g</equation> ，当且仅当对于每一个 <equation>d\in D</equation> ，我们有 <equation>f(d)\leqslant g(d)</equation> 。<br>这样我们就得到了一个<b>元素为连续函数</b>的偏序集， <equation>(D\rightarrow E,\leqslant )</equation> 。</p><p>可以证明， <equation>(D\rightarrow E,\leqslant )</equation> 也是一个完全偏序集。（证略</p><h2><b>最小不动点定理</b></h2><img src="https://pic1.zhimg.com/v2-f19cc00b5a9f0b65494bc8bd66858f57_r.jpg" data-caption="" data-size="normal" data-rawwidth="683" data-rawheight="72"><p>如果 <equation>(D,\leqslant )</equation> 是一个完全偏序集，且 <equation>f:D\rightarrow D</equation> 是连续的，<br>则 <equation>f</equation> 有<b>最小不动点</b>， <equation>fix_D\ f=\bigvee \lbrace f^n(\perp )|\ n\geqslant 0 \rbrace</equation> 。</p><p>因为 <equation>\perp</equation> 是 <equation>D</equation> 中的最小元，且 <equation>f(\perp )\in D</equation> ，所以， <equation>\perp \leqslant f(\perp )</equation> ，<br>因为 <equation>f</equation> 是连续的，所以 <equation>f</equation> 也一定是单调的，所以， <equation>f(\perp )\leqslant f^2(\perp )</equation> ，<br>继而， <equation>f^n(\perp )\leqslant f^{n+1}(\perp )</equation> ，对于任意的 <equation>n\geqslant 0</equation> 都成立。</p><p><equation>\lbrace f^n(\perp )|\ n\geqslant 0 \rbrace</equation> 构成了一个全序集，<br>所以，它是完全偏序集 <equation>(D\rightarrow E,\leqslant)</equation> 的一个有向子集，必有上确界。</p><p>设 <equation>a</equation> 是上确界， <equation>a=\bigvee \lbrace f^n(\perp )|\ n\geqslant 0 \rbrace</equation> ，则 <b><equation>a</equation> 是 <equation>f</equation> 的不动点</b>。<br>因为由 <equation>f</equation> 的连续性， <equation>f(a)=f(\bigvee \lbrace f^n(\perp )|\ n\geqslant 0 \rbrace )=\bigvee \lbrace f^{(n+1)}(\perp )|\ n\geqslant 0 \rbrace</equation> ，<br>而 <equation>\lbrace f^n(\perp ) \rbrace</equation> 与 <equation>\lbrace f^{(n+1)}(\perp ) \rbrace</equation> 有同样的上确界，所以 <equation>f(a)=a</equation> ，即 <equation>a</equation> 是 <equation>f</equation> 的不动点。</p><p>其次， <b><equation>a</equation> 是 <equation>f</equation> 的最小不动点</b>，<br>假设 <equation>b=f(b)</equation> 是 <equation>f</equation> 的任意不动点，因为 <equation>\perp \leqslant b</equation> ，所以 <equation>f(\perp )\leqslant f(b)</equation> ，<br>类似的，对于任意的 <equation>n\geqslant 0</equation> ， <equation>f^n(\perp )\leqslant f^n(b)</equation> 。</p><p>而 <equation>b</equation> 是 <equation>f</equation> 的不动点，所以 <equation>f^n(b)=b</equation> ，因此 <equation>b</equation> 是集合 <equation>\lbrace f^n(\perp )|\ n\geqslant 0 \rbrace</equation> 的上界。<br>由于集合的最小上界是 <equation>a</equation> ，所以有 <equation>a\leqslant b</equation> 。</p><h2><b>后继函数的不动点</b></h2><img src="https://pic1.zhimg.com/v2-85a40c8188217b5e65567daefb51447b_r.jpg" data-caption="" data-size="normal" data-rawwidth="342" data-rawheight="147"><code lang="haskell">succ :: Int -&gt; Int
succ n = n+1</code><p>在第七篇中，我们说<code class="inline">fix</code>可以得到任意函数的不动点，<br>那么这个<code class="inline">succ</code>函数呢？它有没有不动点？<code class="inline">fix succ</code>是什么？</p><p>现在我们有了<b>最小不动点定理</b>，<br>就得验证<code class="inline">succ</code>所指称的数学函数，是不是一个完全偏序集上的连续函数，<br>如果是的话，它就有不动点。</p><p>在第四篇为了表示计算的不可终止性，我们对自然数集进行了扩充， <equation>N\cup \lbrace \perp \rbrace</equation> ，<br>然后用这个集合作为程序中<code class="inline">Int</code>类型的值的解释。</p><p>然而， <equation>N\cup \lbrace \perp \rbrace</equation> 不是一个完全偏序集，原因是它没有上界，<br>如果我们额外加入一个比其他的自然都大的元素 <equation>+\infty</equation> ，<br>则我们就得到了一个<b>完全偏序集</b>， <equation>N\cup \lbrace \perp \rbrace\cup \lbrace +\infty \rbrace</equation> 。</p><p>然后，我们看<code class="inline">succ</code>连续吗？<br>首先，它是单调的，如果我们再定义 <equation>succ(+\infty )=+\infty</equation> ，<br>就有 <equation>succ(\bigvee N)=\bigvee succ(N)</equation> ，因此，<code class="inline">succ</code>是一个连续函数。</p><p>根据最小不动点定理，<code class="inline">succ</code>的<b>最小不动点</b>是， <equation>fix\ succ=\bigvee \lbrace succ^n(\perp )|\ n\geqslant 0 \rbrace</equation> 。</p><p>由于 <equation>succ(\perp )=\perp</equation> ，即对于非终止的输入<code class="inline">succ</code>的计算也不会终止，所以 <equation>succ^n(\perp )=\perp</equation> ，<br>因此， <equation>fix\ succ=\bigvee \lbrace succ^n(\perp )|\ n\geqslant 0 \rbrace =\perp</equation> ，<br>即，<code class="inline">succ</code>的最小不动点是 <equation>\perp</equation> ，<code class="inline">fix succ</code>的<b>计算不会终止</b>。</p><h2><b>求解阶乘函数</b></h2><p>上一篇中，我们证明了阶乘函数<code class="inline">fact</code>是以下函数的不动点，<code class="inline">fact = fix g</code>，</p><code lang="haskell">g :: (Int -&gt; Int) -&gt; Int -&gt; Int
g f n = case n of
  1 -&gt; 1
  _ -&gt; n * f (n-1)</code><p>现在我们来看一下，如何运用最小不动点定理来得到这个答案。<br>为了避免篇幅过长，关于<code class="inline">g</code>函数的连续性证明暂略，<br>我们直接使用公式， <equation>fix\ g=\bigvee \lbrace g^n(\perp )|\ n\geqslant 0 \rbrace</equation> ，<br>即，<code class="inline">g</code>函数的<b>最小不动点</b>，就是集合 <equation>D=\lbrace g^n(\perp )|\ n\geqslant 0 \rbrace</equation> 的<b>上确界</b>。</p><p>我们先来看一下这个集合 <equation>D</equation> 中有哪些元素，<br>其中， <equation>g(\perp )\in D</equation> ，我们将 <equation>\perp</equation> 传入 <equation>g</equation> 中，看看会得到什么，</p><code lang="haskell">f1 = \n -&gt; case n of 
  1 -&gt; 1
  _ -&gt; ...</code><p>这个函数能计算<code class="inline">f1 1</code>，但是不能计算<code class="inline">f1 2</code>，恰好是<code class="inline">fact</code>函数有限展开的一阶项。</p><p>我们再来看 <equation>g^2(\perp )\in D</equation> ，它等于 <equation>g(f1)</equation> ，</p><code lang="haskell">f2 = \n -&gt; case n of 
  1 -&gt; 1
  _ -&gt; n * f1 (n-1)</code><p>这个函数能计算<code class="inline">f2 1</code>以及<code class="inline">f2 2</code>，但是不能计算<code class="inline">f2 3</code>，<br>恰好是<code class="inline">fact</code>函数展开的二阶项。</p><p>由此，我们看出了规律， <equation>g^n(\perp )\in D</equation> 就是<code class="inline">fact</code>函数有限展开的第 <equation>n</equation> 阶项。<br>上一篇中，我们已经证明了，当 <equation>n\rightarrow \infty</equation> 时，它就是<code class="inline">fact</code>函数，<br>考虑到 <equation>f1,f2,\cdots</equation> 这些函数的序关系，因此，我们有 <equation>fact=\bigvee \lbrace g^n(\perp )|\ n\geqslant 0 \rbrace</equation> 。</p><p>即，<code class="inline">fact</code>函数就是<code class="inline">g</code>函数的最小不动点。</p><h2><b>总结</b></h2><p>到此为止，我想这个系列的文章已经讨论完了，<br>本系列文章一直围绕着递归函数和不动点进行分析，<br>在内容上可以分为两个部分，前半部分主要与可计算性理论有关，<br>后半部分与不动点定理有关，希望对大家有所帮助。</p><hr><h2><b>参考</b></h2><p><a href="https://zh.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9B%86%E5%90%88">有向集合</a><br><a href="https://zh.wikipedia.org/wiki/%E5%AE%8C%E5%85%A8%E5%81%8F%E5%BA%8F">完全偏序</a><br><a href="https://en.wikipedia.org/wiki/Kleene_fixed-point_theorem">Kleene fixed-point theorem</a><br><a href="https://book.douban.com/subject/1761918/">Foundations for Programming Languages</a></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
