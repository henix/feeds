<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>简单多样化，资产配置的优秀基准</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/46971981">原文</a></p>
<div class="title-image"><img src="https://pic3.zhimg.com/v2-91339cbde94a3172bed635fb1005d85e_r.jpg" alt=""></div><h2><b>摘要</b></h2><p>简单多样化是一个客观的比较基准；任何复杂的资产配置方法都需要至少要在统计上显著战胜简单多样化才能被称之为有效。</p><h2><b>1 引言</b></h2><p><b>资产配置（Asset Allocation） 在量化投资中无处不在。</b>投资者需要把资金配置在不同的资产中，比如股票、债券、商品期货等；多因子选股策略需要决定使用哪些因子以及资金在这些因子中的配置比例（每一个因子就是一个投资组合）；Fund of Fund（FOF）需要调研大量的基金从而在相关性低的基金之间进行配置。</p><p><b>科学的资产配置对于投资的成功至关重要。</b></p><p>然而由于每种资产的收益存在不确定性（风险），且不同资产之间的相关性也不同，因此在几十年前人们并不知道应该怎么“科学”配置，直到马科维茨的 Modern Portfolio Theory （MPT）横空出世（Markowitz 1952）。</p><p>MPT 使用 mean-variance optimization 确定最佳的配置权重，在数学上十分优雅。然而在实战中，MPT 却因在样本外的表现很差而声名狼藉。<b>这是因为优化结果对于输入异常敏感，而仅使用历史样本数据进行均值和协方差进行估计的估计误差（estimation error）非常大。</b>如何减少 estimation error 就成了学术界关注的重点。</p><p>改进仅使用样本历史数据的 mean-variance optimization 的努力主要有以下几个方向：</p><ol><li><b>贝叶斯收缩：</b>在金融领域，最重要的是 prediction 是否准确，而不是参数估计是否 unbiased。使用历史数据进行参数估计是 unbiased，但是 estimation error 很大。在贝叶斯方法中，对于收益率均值（以及协方差，主要是均值）<b>假设有一个先验，然后采用 shrinkage 的方法得到后验</b>。这个先验往往是基于某种 data generating process 假设的，因此是 biased 的，但是这种方法可以改善 estimation error。（需要贝叶斯收缩背景知识的小伙伴请参考<a href="https://zhuanlan.zhihu.com/p/38614373">《收益率预测的贝叶斯收缩》</a>、<a href="https://zhuanlan.zhihu.com/p/38282835">《Black-Litterman 模型 —— 贝叶斯框架下的资产配置利器》</a>。）</li><li><b>“猜不出就绕过去”：</b>名字比较草根、是我起的，但方法绝对靠谱。MPT 最被诟病的是它计算出来的配置权重非常离谱（可能会很大或者很小）；往往对均值的一点点改变都能造成权重的剧烈变化。<b>Chopra and Ziemba（1993）的研究表明，收益率期望的误差对资产配置的影响比协方差误差的影响高一个数量级。</b>但是预测期望是非常难的，所以索性就不猜期望了，而把预测的重点放在协方差矩阵的改进中。著名的 minimum-variance portfolio 就是这样一个例子，它只需要估计协方差矩阵，并以最小化 variance 为目标构建最优组合。</li><li><b>“从群众中来、到群众中去”：</b>传统的 MPT 是无约束优化。当资产间相关性为负或者一些资产的预期收益率为负时，最优的权重可能会出现小于零（做空）的情况。无约束优化给了 mean-variance optimization 更大的出错空间，且做空在现实中也有很强的限制。为此，在很多研究中都在最优化时加上了<b>权重非负的限制（shortsale constraint）</b>，这种贴近实际的做法虽然在数学上的目标函数没有无约束优化好，但却大大改善了配置在样本外的效果。</li></ol><p>这些对 MPT 的改进方法在学术期刊的论文中至少都获得了很好的效果，但是它们在实战中又如何呢？为了客观的评价它们的效果，需要选择一个合适的基准。这个基准就是 —— <b>简单多样化（naïve diversification）</b>。</p><p><b>简单多样化又称为 1/N 法，即我们把资金平均的分配到 N 个待配置的资产中（配合适当的再平衡）。</b>简单多样化背后的含义是：<b>不预测不同投资组合或者投资策略未来表现的相对强弱，以期实现样本外最大的随机性、到达“最大熵”的状态，使得配置结果在样本外的适应性更强。</b></p><p>毫无疑问，简单多样化是一个客观的基准。<b>任一个复杂的资产配置算法如果要宣称有效，至少都要在样本外、从统计上显著的战胜简单多样化的配置结果。</b>这里，战胜意味着考虑了更高换手率造成的交易成本后仍能够带来更高的风险收益比，如夏普率。</p><p>长期以来关注公众号的小伙伴可能会有印象：我其实非常喜欢简单多样化。这一点在<a href="https://mp.weixin.qq.com/s/PlOMPjmt8NrWZqMBmNgL9A">《多个因子配置实证》</a>、<a href="https://zhuanlan.zhihu.com/p/38315648">《你用因子、他也用因子；你没赚钱、他却赚钱了》</a>均有体现。当然，这种观点的主观情绪太浓厚，咱们还要用数据说话。</p><p>在金融领域顶刊 Review of Financial Studies 于 2009 年发表的一篇文章中，DeMiguel et al. (2009) 使用了 7 个股票数据集（大部分都是来自美股）比较了简单多样化和 14 种基于 MPT 的资产配置方法。孰优孰劣了？一起来看看。</p><h2><b>2 资产配置方法与数据集</b></h2><p>假设  <equation>\mu</equation>  和  <equation>\Sigma</equation>  分别代表 N 个资产的收益率均值向量和协方差矩阵、 <equation>\gamma</equation> 表示投资者的风险厌恶系数，则 mean-variance optimization 求解如下最优化问题得到最优配置 <equation>\omega</equation> ：</p><p><equation>\displaystyle\max_\omega \omega^T\mu-\frac{\gamma}{2}\omega^T\Sigma \omega</equation> </p><p>如果考虑所有资产的权重之和加起来等于 1 这个约束条件，则上述问题的最优解为：</p><p><equation>\displaystyle w^\star = \frac{\Sigma^{-1}\mu}{\mathbf{1}_N\Sigma^{-1}\mu}</equation> </p><p>其中 <equation>\mathbf{1}_N = [1, 1, …, 1]^T</equation> 。值得一提的是，MPT 是单期资产配置算法，它假设投资者仅对下一期的最优资产配置感兴趣。接下来，本文介绍一些有代表性的改进资产配置方法（更多的可见 DeMiguel et al. 2009）。对它们的描述、分类以及参考文献如下表所示。</p><img src="https://pic1.zhimg.com/v2-d048de848aa189307384bba8b627bd9c_r.jpg" data-caption="" data-size="normal" data-rawwidth="890" data-rawheight="636" data-watermark="watermark" data-original-src="v2-d048de848aa189307384bba8b627bd9c" data-watermark-src="v2-83a453e3c984bfe547b1e526978fbeb2" data-private-watermark-src=""><p>模型 0 和模型 1 无需多言，对其他模型的简单说明如下：</p><p><b>Bayes-Stein：</b>贝叶斯收缩的开山鼻祖（Stein 1955），它的收益率均值先验是 sample global minimum-variance portfolio、收缩以最小化 estimation error 为目标。</p><p><b>Bayesian Data-and-Model：</b>以给定的资产定价模型（比如 CAPM 或者 Fama-French 三因子模型）为先验进行收缩。对先验有很强的结构性假设，具体请参考 Pastor (2000) 及 Pastor and Stambaugh (2000)。这种方法需要指定选为先验的资产定价模型。</p><p><b>Minimum-variance：</b>该方法仅需估计协方差矩阵，它的数学描述是：</p><p><equation>\displaystyle \min_\omega \omega^T\Sigma\omega, ~~~\mbox{s.t. }~~~\mathbf{1}_N^T\omega=1</equation> </p><p><b>Value-weighted market portfolio：</b>对于给定的股票数据集，构建一个“market”组合，通过 buy-and-hold 策略作为这种配置方法。该方法的换手率为零。</p><p><b>Missing-factor model：</b>该方法由 MacKinlay and Pastor (2000) 提出。它的动机是收益率由 <b>factor 未知</b>的资产定价模型来决定。因此，在使用 mean-variance optimization 框架时，假设收益率均值仍然来自样本数据，但是对协方差进行修正，以反映这个未知的 factor 模型。它对  <equation>\Sigma</equation>  的修正为：</p><p><equation>\displaystyle\Sigma= \nu\mu\mu^T+\sigma^2I_N</equation> </p><p>其中 <equation>\nu</equation> 、 <equation>\sigma^2</equation> 都是标量，它们和 <equation>\mu</equation> 一起通过 maximum-likelihood 估计得到。</p><p>第 7、8、9 种方法分别为第 1、2、4 种方法加上了 shortsale 约束，即要求配置权重非负。Jagannathan and Ma (2003) 指出，<b>对 minimum-variance 加上 shortsale 权重相当于收缩协方差矩阵。</b>因此方法 9 也代表了一大类收缩协方差矩阵的配置方法，例如 Ledoit and Wolf (2004)。</p><p>下面再来看看用到的数据集。在考察的 7 个股票数据集中，除了第 3 个之外均来自美股。下表对它们进行了总结。</p><img src="https://pic2.zhimg.com/v2-7f9085999abf547533a1f62a346bde17_r.jpg" data-caption="" data-size="normal" data-rawwidth="902" data-rawheight="583" data-watermark="watermark" data-original-src="v2-7f9085999abf547533a1f62a346bde17" data-watermark-src="v2-c82753d501a4b10bf29cc2a2c738fa90" data-private-watermark-src=""><p>表中唯一可能造成困惑的地方是，它使用 x + y 的形式表示了资产个数 N。例如，第一个数据集的 N = 10 + 1 = 11。这么做的原因是 Bayesian Data-and-Model 这个模型需要使用给定的因子模型（资产定价模型）作为先验。因此上述表达式中加号后面的数字代表了因子的个数。</p><p><b>特别需要说明的是，这些因子投资组合除了在 Bayesian Data-and-Model 模型中计算先验外；在所有实验中，它们也都作为独立的资产参与配置。</b>举例来说，在第一个数据集中，参与配置的不仅仅是 10 个 S&amp;P 500 sectors 投资组合，而且也包括了 US equity market portfolio 这个作为因子的组合，因此一共有 11 个资产参与资产配置。</p><p>这 7 个数据集中用于计算先验的因子分别为：</p><ul><li><b>数据集 1：</b>US equity market portfolio</li><li><b>数据集 2：</b>US equity market portfolio</li><li><b>数据集 3：</b>World Index</li><li><b>数据集 4：</b>US equity market portfolio</li><li><b>数据集 5：</b>MKT（来自 Fama-French 三因子中的市场组合）</li><li><b>数据集 6：</b>MKT、SMB、HML（来自 Fama-French 三因子）</li><li><b>数据集 7：</b>MKT、SMB、HML、UMD（来自 Fama-French 三因子和 UMD 动量因子）</li></ul><h2><b>3 评价指标</b></h2><p>除了简单多样化外，上述所有这些配置算法（包括 sample-based mv 和其他 8 个改进方法）都需要使用历史数据来计算参数。在实证中，DeMiguel et al. (2009) 采用月频数据并使用长度为 120 个月的滚动窗口进行参数估计，按月调仓以评价不同配置方法在样本内的表现。</p><p>评价指标包括以下三个：</p><p><b>夏普率：</b>夏普率的定义大家都熟悉，无需过多介绍。这里想说明的是，不同策略的夏普率都是未知夏普率的一个样本点，它们的取值自然会有不同。为了检验不同策略的效果是否有差别需要在统计上检验夏普率是否显著不同。在统计上检验两个夏普率差别的方法请参考 Jobson and Korkie (1981) 以及 Memmel (2003)。</p><p><b>Certain-equivalent return (CEQ，确定性等值收益率)：</b>它是与给定的风险投资组合等价的无风险收益率。换句话说，对于给定风险偏好的投资者，投资收益为 CEQ 的无风险资产和投资该风险投资组合没有区别。因此，CEQ 的表达式为（μ 和 σ 均使用样本外数据）：</p><p><equation>\displaystyle \mu-\frac{1}{2}\gamma\sigma^2</equation> </p><p>同样，为了比较不同策略的 CEQ 是否不同，也需要从统计上进行检验。</p><p><b>换手率：</b>mv 以及改进的方法较简单多样化来说有更多的主动投资，因此平均来说有更高的换手率。高换手率的直接结果是更高的交易成本。因此，为了评价不同资产配置的效果，换手率也是一个必要的指标。</p><p>下一节就来看看实证结果。</p><h2><b>4 实证结果</b></h2><p>下表显示了不同资产配置策略在不同数据集上的夏普率。从第二列开始，每一列代表了一个数据集（由于数据集 6 和数据集 5 的效果很接近，因此被省略了）；每一行是一个策略，由策略名的缩写表示。其中 mv (in sample) 代表了在整段数据上开天眼计算均值和协方差矩阵后使用 mean-variance optimization的 表现，因此它是样本内的表现，相当于所有样本外表现的上限。其他所有非括号内的数字都是不同策略的<b>样本外</b>夏普率。括号中的数字表示样本外，给定策略和简单多样化策略夏普率差值的 p-value。</p><img src="https://pic1.zhimg.com/v2-fa871349c66e29546ea0802deb5b08db_r.jpg" data-caption="" data-size="normal" data-rawwidth="807" data-rawheight="548" data-watermark="watermark" data-original-src="v2-fa871349c66e29546ea0802deb5b08db" data-watermark-src="v2-8057fb746fa5e33c2fac40ee8b09b5f6" data-private-watermark-src=""><p>以第一个数据集 S&amp;P sectors 为例，简单多样化即 1/N 策略的样本外夏普率是 0.1876，而 mv 样本内的夏普率高达 0.3848，其样本外的夏普率仅有 0.0794。0.0794 下方括号内的数字表示 mv 和 1/N 这两个策略样本外夏普率差值的 p-value —— 0.12。</p><p>观察表中数据不难发现如下结论：</p><ol><li>所有策略的样本外的夏普率都不如开天眼的 mv in-sample 夏普率，这说明<b>所有这些方法都存在 estimation error</b>。</li><li>除了最后一个数据集外，1/N 均战胜了 mv（大部分 p-value 比较低），<b>说明仅仅基于历史样本数据的、不经任何改进的 mean-variance optimization 确实不好使</b>，这也解释了它为什么在实战中名声不好。</li><li>基于贝叶斯收缩的方法（bs 和 dm）并没有显著的改进 mv。DeMiguel et al. (2009) 观察到 bs 和 mv 的结果接近，这可能和滚动窗口的长度有关，导致收缩后的权重和 mv 的权重很接近（即先验的作用很微弱）。<b>而对于 dm，它是否有效和待配置的资产以及被选为先验的因子密切相关。</b>比如，dm 在最后一个四因子为先验的数据集上战胜了 1/N，但是同样的表现并没有出现在其他数据集上。</li><li>对于 min、vw、mp 这三个不猜收益率均值的配置方法，min 在 4 个数据集上战胜了 1/N，不过大部分的 p-value 都不算小。而 vm 以及 mp 这两个方法基本上都败给了简单多样化。</li><li>mv-c 和 bs-c 的效果可以理解为仅仅加入了不能做空的限制（bs 对收益率的收缩很微弱）。从结果来看，<b>仅仅加入做空的限制并不能带来更高的夏普率</b>。这两个方法也不如 1/N 法。</li><li>最后来看看 min-c。它在最小化 variance 的同时加上做空限制，相当于对协方差矩阵进行贝叶斯收缩。<b>这种“收缩”+“限制”的组合拳在 4 个数据集上战胜了简单多样化，同时也是这几种改进方法中最好的。</b></li></ol><p>下表是以 CEQ 为评价指标的结果。它传递出的信息和夏普率一致，且结果更加偏向于简单多样化策略 —— <b>如果考虑 CEQ 的话，这些策略更难以战胜简单多样化。</b></p><img src="https://pic3.zhimg.com/v2-2d34dfebec5ad0ce1913076801ea53fe_r.jpg" data-caption="" data-size="normal" data-rawwidth="790" data-rawheight="546" data-watermark="watermark" data-original-src="v2-2d34dfebec5ad0ce1913076801ea53fe" data-watermark-src="v2-7691c5c0fc80c223c71818d2f2f8e3f3" data-private-watermark-src=""><p>最后是换手率。下表中，1/N 那一行的结果是绝对的换手率，其他策略的结果是相对于 1/N 策略的相对换手率。首先，我们被仅仅基于样本数据的 mv 策略的相对换手率震惊了。<b>由于 mean-variance optimization 对输入数据异常敏感，它经常求解出令人难以理解的“最优权重”。由于马科维茨的资产配置是单期配置，因此不同期之间的最优权重可能完全不同，这导致了非常不切实际的巨大的换手率。</b></p><img src="https://pic4.zhimg.com/v2-01dedc38c02085c7abeaa74655369f8c_r.jpg" data-caption="" data-size="normal" data-rawwidth="810" data-rawheight="422" data-watermark="watermark" data-original-src="v2-01dedc38c02085c7abeaa74655369f8c" data-watermark-src="v2-656f31c8b64e7d39832200a552d0e173" data-private-watermark-src=""><p>其他几种方法有效的降低了换手率，特别是最后三种加上做空限制的方法。它们直接把优化问题变成约束优化，从根儿上限制了求解空间，使得最优权重更加合理、不同期之间的最优权重相对连续，有效的降低了换手率。</p><p>即便如此，除了 vm 这种方法是 buy-and-hold 因此换手率为零外，其他配置策略的换手率均高于简单多样化。<b>从夏普率以及 CEQ 的分析可知，复杂配置策略并不能持续的战胜简单多样化；考虑到由此造成的潜在更高的交易成本，它们和简单多样化比起来就更难言有优势了。</b></p><p>实证结果有些令人失望，因为这些复杂配置方法都不能显著战胜简单多样化。为了研究资产个数 N、参数估计窗口长度 M 对 mean-variance 和 1/N 方法的影响，DeMiguel et al. (2009) 根据 Kan and Zhou (2007) 的思路进行了理论分析。</p><p>为此，他们定义了 expected loss 函数：</p><p><equation>\displaystyle L(x^\star,\hat x)=\frac{1}{2\gamma}S^2(x^\star)-\mbox{E}\left[\frac{1}{2\gamma}S^2(\hat x)\right]</equation> </p><p>其中 <equation>S^2(x^\star)</equation> 是未知最优权重  <equation>x^\star</equation>  实现的最优夏普率的平方（也是未知的），而 <equation>S^2(\hat x)</equation> 是在给定权重下夏普率的平方。最优夏普率平方和实现的夏普率平方的期望之间差别就是 expected loss。</p><p>DeMiguel et al. (2009) 指出 mean-variance 要想战胜简单多样化的前提条件是 M 足够大，以及 N 足够小。<b>这意味着，当参数估计的窗口很大（从 DeMiguel et al. 2009 的结果来看，M 非常大，长过很多实际中资产的历史数据）以及待配置的资产数量较少时，基于 mean-variance 的配置方法才有希望战胜简单多样化。</b></p><p>DeMiguel et al. (2009) 通过蒙特卡洛仿真模拟收益率数据验证了上述观点（下表）。</p><img src="https://pic3.zhimg.com/v2-6cdae16540f81b2a47bc972e01a002f8_r.jpg" data-caption="" data-size="normal" data-rawwidth="778" data-rawheight="512" data-watermark="watermark" data-original-src="v2-6cdae16540f81b2a47bc972e01a002f8" data-watermark-src="v2-d1437a4646b6b03e18790443c4098ed5" data-private-watermark-src=""><h2><b>5 结语</b></h2><p>又到了总结的时间了。</p><p><b>有必要强调的是，本文和 DeMiguel et al. (2009)</b> <b>都没有主张一定要用简单多样化进行资产配置。</b>如果对未来的判断很准确，那么以此为先验是可以战胜简单多样化的，比如大名鼎鼎的 Black-Litterman 方法。另外，风险平价也是一种资产配置方法，它也是以准确的主观判断为前提的（因为需要构建夏普率相当、且相关性很低的不同大类资产，见<a href="https://zhuanlan.zhihu.com/p/38301218">《你真的搞懂了风险平价吗？》</a>）。</p><p><b>但是，对未来准确判断谈何容易？大部分投资者擅长的仅仅是使用历史数据外推而已。</b></p><p>DeMiguel et al. (2009) 传递出来的两个清晰的观点是：</p><ol><li><b>仅仅使用历史样本数据，即便是改进的基于 mean-variance 的方法也很难战胜简单多样化。</b></li><li><b>简单多样化是一个客观的比较基准；任何复杂的资产配置方法都需要至少要在统计上显著战胜简单多样化才能被称之为有效。</b>比如一个大类资产轮动策略，它的业绩比较基准不应该是股票或者债券这种单一投资标的，而应该是基于其投资组合的简单多样化策略的效果。如果该策略无法战胜简单多样化，那它就没有带来超额收益。</li></ol><p>在投资中，资产配置是最核心的问题（没有之一，相信很多人会认同）。这个问题值得我们持续的探索。</p><img src="https://pic4.zhimg.com/v2-4db13db783cba1e40a865c5b085fa170_r.jpg" data-caption="" data-size="normal" data-rawwidth="835" data-rawheight="385" data-watermark="watermark" data-original-src="v2-4db13db783cba1e40a865c5b085fa170" data-watermark-src="v2-282901e43af0fd2df66250982d2d25d6" data-private-watermark-src=""><p><br></p><p><b>参考文献</b></p><ul><li>Chopra, V. K. and W. T. Ziemba (1993). The effort of errors in means, variances, and covariances on optimal portfolio choice. <i>Journal of Portfolio Management</i>, Vol. 19(2), 6 – 11</li><li>DeMiguel, V., L. Garlappi, and R. Uppal (2009). Optimal versus naïve diversification: how inefficient is the 1/N portfolio strategy? <i>Review of Financial Studies</i>, Vol. 22(5), 1915 – 1953.</li><li>Jagannathan, R. and T. Ma (2003). Risk reduction in large portfolios: why imposing the wrong constraints helps. <i>Journal of Finance</i>, Vol. 58(4), 1651 – 1683.</li><li>Jobson, J. D. and R. Korkie (1981). Performance hypothesis testing with the Sharpe and Treynor measures. <i>Journal of Finance</i>, Vol. 36(4), 889 – 908.</li><li>Kan, R. and G. Zhou (2007). Optimal portfolio choice with parameter uncertainty. <i>Journal of Financial and Quantitative Analysis</i>, Vol. 42(3), 621 – 656.</li><li>Ledoit, O. and M. Wolf (2004). A well-conditioned estimator for large-dimensional covariance matrices. <i>Journal of Multivariate Analysis</i>, Vol. 88(2), 365 – 411.</li><li>Markowitz, H. (1952). Portfolio Selection. <i>Journal of Finance</i>, Vol. 7(1), 77 – 91.</li><li>MacKinlay, A. C. and L. Pastor (2000). Asset pricing models: implications for expected returns and portfolio selection. <i>Review of Financial Studies</i>, Vol. 13(4), 883 – 916.</li><li>Memmel, C. (2003). Performance hypothesis testing with the Sharpe ratio. <i>Finance Letters</i>, Vol. 1(1), 21 – 23.</li><li>Pastor, L. (2000). Portfolio selection and asset pricing models. <i>Journal of Finance</i>, Vol. 55(1), 179 – 223.</li><li>Pastor, L. and R. F. Stambaugh (2000). Comparing asset pricing models: an investment perspective. <i>Journal of Financial Economics</i>, Vol. 56(3), 335 – 381.</li><li>Stein, C. (1955). <i>Inadmissibility of the usual estimator for the mean of a multivariate normal distribution</i>. In 3rd Berkeley Symposium on Probability and Statistics, 197 – 206.</li></ul><p><br></p><p><br></p><p>原创不易，请保护版权。如需转载，请联系获得授权，并注明出处，谢谢。已委托“维权骑士”(<a href="http://rightknights.com">维权骑士_免费版权监测/版权保护/版权分发</a>) 为进行维权行动。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
