<div class="title-image"><img src="https://pic2.zhimg.com/v2-d7a5ae402d3ed570f4258aae06d70794_b.jpg" alt=""></div><p></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-37fc3cc4e57451d49f0f844e2cc35a26_b.jpg" data-caption="" data-size="normal" data-rawwidth="900" data-rawheight="500" class="origin_image zh-lightbox-thumb" width="900" data-original="https://pic3.zhimg.com/v2-37fc3cc4e57451d49f0f844e2cc35a26_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-37fc3cc4e57451d49f0f844e2cc35a26_b.jpg" data-caption="" data-size="normal" data-rawwidth="900" data-rawheight="500" class="origin_image zh-lightbox-thumb lazy" width="900" data-original="https://pic3.zhimg.com/v2-37fc3cc4e57451d49f0f844e2cc35a26_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-37fc3cc4e57451d49f0f844e2cc35a26_b.jpg"/></figure><h2>概述</h2><p>本篇基于光大证券研报《基于阻力支撑相对强度(RSRS)的市场择时》，给出了RSRS斜率指标择时，以及在斜率基础上的标准化指标择时策略。</p><h2>一、 阻力支撑相关概念</h2><p>阻力位是指指标<b>价格上涨时可能遇到的压力</b>，即交易者认为卖方力量开始反超买方，从而价格<b>难以继续上涨</b>或从此<b>回调下跌</b>的价位；支撑位则是交易者认为买方力量开始反超卖方，从而<b>止跌</b>或<b>反弹上涨</b>的价位。</p><p>常见的确定阻力支撑位的方法有，<b>布林带上下轨突破策略</b>（突破上轨建仓买入，突破下轨卖出平仓）和<b>均线策略</b>（如超过20日均线建仓买入，低于20日均线卖出平仓）。然而，布林带突破策略在<b>震荡期间</b>出现了<b>持续亏损</b>，均线策略<b>交易成本巨大</b>，且在震荡期间的<b>回撤很大</b>。</p><h2>二、阻力支撑相对强度（RSRS）</h2><p>阻力支撑相对强度(Resistance Support Relative Strength, RSRS)是另一种阻力位与支撑位的运用方式，它不再把阻力位与支撑位当做一个定值，而是看做一个<b>变量</b>，反应了交易者对目前市场状态顶底的一种<b>预期判断</b>。</p><p>我们按照不同市场状态分类来说明支撑阻力相对强度的应用逻辑：</p><p><b>1.市场在上涨牛市中：</b><br/>如果支撑明显强于阻力，牛市持续，价格加速上涨<br/>如果阻力明显强于支撑，牛市可能即将结束，价格见顶<br/><b>2. 市场在震荡中：</b><br/>如果支撑明显强于阻力，牛市可能即将启动<br/>如果阻力明显强于支撑，熊市可能即将启动<br/><b>3.市场在下跌熊市中：</b><br/>如果支撑明显强于阻力，熊市可能即将结束，价格见底<br/>如果阻力明显强于支撑，熊市持续，价格加速下跌</p><p>每日最高价和最低价是一种阻力位与支撑位，它是当日全体市场参与者的交易行为所认可的阻力与支撑。一个很自然的想法是建立最高价和最低价的线性回归，并计算出斜率。即：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-3f868046fd8340b3bf26c7a1f9cc6817_b.jpg" data-caption="" data-size="normal" data-rawwidth="307" data-rawheight="48" class="content_image" width="307"/></noscript><img src="https://pic4.zhimg.com/v2-3f868046fd8340b3bf26c7a1f9cc6817_b.jpg" data-caption="" data-size="normal" data-rawwidth="307" data-rawheight="48" class="content_image lazy" width="307" data-actualsrc="https://pic4.zhimg.com/v2-3f868046fd8340b3bf26c7a1f9cc6817_b.jpg"/></figure><p>当斜率值很大时，支撑强度大于阻力强度。</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-3ce45263e6be6be239e42807ebcdc8ba_b.jpg" data-size="normal" data-rawwidth="330" data-rawheight="247" class="content_image" width="330"/></noscript><img src="https://pic3.zhimg.com/v2-3ce45263e6be6be239e42807ebcdc8ba_b.jpg" data-size="normal" data-rawwidth="330" data-rawheight="247" class="content_image lazy" width="330" data-actualsrc="https://pic3.zhimg.com/v2-3ce45263e6be6be239e42807ebcdc8ba_b.jpg"/><figcaption>阻力渐小，上方上涨空间大</figcaption></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-129886443d5615db50e2368248c5d109_b.jpg" data-size="normal" data-rawwidth="352" data-rawheight="250" class="content_image" width="352"/></noscript><img src="https://pic2.zhimg.com/v2-129886443d5615db50e2368248c5d109_b.jpg" data-size="normal" data-rawwidth="352" data-rawheight="250" class="content_image lazy" width="352" data-actualsrc="https://pic2.zhimg.com/v2-129886443d5615db50e2368248c5d109_b.jpg"/><figcaption>支撑渐强，下跌势头欲止</figcaption></figure><p>当斜率值很小时，阻力强度大于支撑强度。</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-2cec1f5998a13389af97fce5381a7690_b.jpg" data-size="normal" data-rawwidth="347" data-rawheight="242" class="content_image" width="347"/></noscript><img src="https://pic1.zhimg.com/v2-2cec1f5998a13389af97fce5381a7690_b.jpg" data-size="normal" data-rawwidth="347" data-rawheight="242" class="content_image lazy" width="347" data-actualsrc="https://pic1.zhimg.com/v2-2cec1f5998a13389af97fce5381a7690_b.jpg"/><figcaption>阻力渐强，上涨势头渐止</figcaption></figure><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-4aeaa71f3709532fe25f069f10dcce22_b.jpg" data-size="normal" data-rawwidth="332" data-rawheight="255" class="content_image" width="332"/></noscript><img src="https://pic3.zhimg.com/v2-4aeaa71f3709532fe25f069f10dcce22_b.jpg" data-size="normal" data-rawwidth="332" data-rawheight="255" class="content_image lazy" width="332" data-actualsrc="https://pic3.zhimg.com/v2-4aeaa71f3709532fe25f069f10dcce22_b.jpg"/><figcaption>支撑渐送，下方下跌空间渐大</figcaption></figure><h2>三、阻力支撑相对强度（RSRS）指标择时策略</h2><p>第一种方法是直接将斜率作为指标值。当日RSRS斜率指标择时策略如下：<br/>1、取前N日最高价与最低价序列。（N = 18）<br/>2、将两个序列进行OLS线性回归。<br/>3、将拟合后的β值作为当日RSRS斜率指标值。<br/>4、当RSRS斜率大于S(buy)时，全仓买入，小于S(sell)时，卖出平仓。（S(buy)=1,S(sell)=0.8）</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-8537962e2702093334e8c84b2ee4b603_b.jpg" data-caption="" data-size="normal" data-rawwidth="1323" data-rawheight="471" class="origin_image zh-lightbox-thumb" width="1323" data-original="https://pic4.zhimg.com/v2-8537962e2702093334e8c84b2ee4b603_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-8537962e2702093334e8c84b2ee4b603_b.jpg" data-caption="" data-size="normal" data-rawwidth="1323" data-rawheight="471" class="origin_image zh-lightbox-thumb lazy" width="1323" data-original="https://pic4.zhimg.com/v2-8537962e2702093334e8c84b2ee4b603_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-8537962e2702093334e8c84b2ee4b603_b.jpg"/></figure><p>由于市场处于不同时期时，斜率的均值有比较大的波动。因此，直接采用斜率均值作为择时指标并不太合适。我们尝试下面的方法。</p><p class="ztext-empty-paragraph"><br/></p><p>第二种方法是在斜率基础上进行标准化，取标准分作为指标值。RSRS斜率标准分指标择时策略如下：</p><p>1、取前M日的RSRS斜率时间序列。（M = 600）</p><p>2、计算当日RSRS斜率的标准分RSRS(std)：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-b73f3a081611773e543823e3287088ff_b.jpg" data-size="normal" data-rawwidth="237" data-rawheight="85" class="content_image" width="237"/></noscript><img src="https://pic4.zhimg.com/v2-b73f3a081611773e543823e3287088ff_b.jpg" data-size="normal" data-rawwidth="237" data-rawheight="85" class="content_image lazy" width="237" data-actualsrc="https://pic4.zhimg.com/v2-b73f3a081611773e543823e3287088ff_b.jpg"/><figcaption>其中μM为前M日的斜率均值，σM为前M日的标准差</figcaption></figure><p>3、若RSRS(std)大于S(buy)，则全仓买入；若RSRS(std)小于S(sell)，则卖出平仓。（S(buy)=0.7,S(sell)=−0.7）</p><p><b>注：benchmark和标的股票均为沪深300指数，尝试N取自10-30，M取自400-800，发现N=18，M=600时收益率最高。</b></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-becedb8ec4ff0c1942bec2faf662be1c_b.jpg" data-caption="" data-size="normal" data-rawwidth="1185" data-rawheight="465" class="origin_image zh-lightbox-thumb" width="1185" data-original="https://pic1.zhimg.com/v2-becedb8ec4ff0c1942bec2faf662be1c_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-becedb8ec4ff0c1942bec2faf662be1c_b.jpg" data-caption="" data-size="normal" data-rawwidth="1185" data-rawheight="465" class="origin_image zh-lightbox-thumb lazy" width="1185" data-original="https://pic1.zhimg.com/v2-becedb8ec4ff0c1942bec2faf662be1c_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-becedb8ec4ff0c1942bec2faf662be1c_b.jpg"/></figure><p>该策略从2010-01-01至2017-12-15，开平仓35次，<b>总收益186.67%</b>，<b>年化收益14.58%</b>，胜率0.556，盈亏比4.568，<b>最大回撤20.031%</b>。</p><p class="ztext-empty-paragraph"><br/></p><h2>四、RSRS右偏标准分交易策略</h2><p>在使用斜率量化阻力支撑相对强度时，其量化效果很大程度上受拟合本身效果的影响。我们<b>将RSRS标准分与决定系数相乘得到RSRS修正标准分</b>，以此降低绝对值很大，但拟合效果很差的RSRS标准分对策略的影响。通过这种变换，修正RSRS标准分有明显的向正态修正的效果，如下图所示：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-53fb766c6039f3247aa3d23a9e2e59be_b.jpg" data-size="normal" data-rawwidth="421" data-rawheight="270" class="origin_image zh-lightbox-thumb" width="421" data-original="https://pic3.zhimg.com/v2-53fb766c6039f3247aa3d23a9e2e59be_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-53fb766c6039f3247aa3d23a9e2e59be_b.jpg" data-size="normal" data-rawwidth="421" data-rawheight="270" class="origin_image zh-lightbox-thumb lazy" width="421" data-original="https://pic3.zhimg.com/v2-53fb766c6039f3247aa3d23a9e2e59be_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-53fb766c6039f3247aa3d23a9e2e59be_b.jpg"/><figcaption>RSRS标准分分布情况，其尾部较厚</figcaption></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-25d06e5bff33244b259c95d196c5b355_b.jpg" data-size="normal" data-rawwidth="409" data-rawheight="261" class="content_image" width="409"/></noscript><img src="https://pic2.zhimg.com/v2-25d06e5bff33244b259c95d196c5b355_b.jpg" data-size="normal" data-rawwidth="409" data-rawheight="261" class="content_image lazy" width="409" data-actualsrc="https://pic2.zhimg.com/v2-25d06e5bff33244b259c95d196c5b355_b.jpg"/><figcaption>RSRS修正标准分，可以看出修正后更加接近于正态分布</figcaption></figure><p>然而，修正标准分在预测性上的改善效果主要体现于标准分左侧，在做多策略中，左侧预测性改善对择时策略帮助并不大。我们<b>将RSRS修正标准分与RSRS斜率值相乘得到RSRS右偏标准分</b>。其分布如下图，可以看出右偏标准分左侧较薄，而右侧较厚。</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-c2cef9d94b9c8c24f14a3544f80b4f25_b.jpg" data-caption="" data-size="normal" data-rawwidth="432" data-rawheight="269" class="origin_image zh-lightbox-thumb" width="432" data-original="https://pic2.zhimg.com/v2-c2cef9d94b9c8c24f14a3544f80b4f25_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-c2cef9d94b9c8c24f14a3544f80b4f25_b.jpg" data-caption="" data-size="normal" data-rawwidth="432" data-rawheight="269" class="origin_image zh-lightbox-thumb lazy" width="432" data-original="https://pic2.zhimg.com/v2-c2cef9d94b9c8c24f14a3544f80b4f25_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-c2cef9d94b9c8c24f14a3544f80b4f25_b.jpg"/></figure><p>同时给出如下RSRS右偏标准分交易策略（取值来自研报）：<br/>1、计算RSRS右偏标准分RSRS(rightdev)（N = 16, M = 300）<br/>2、若RSRS(rightdev)大于S(buy)时，全仓买入；若RSRS(rightdev)小于S(sell)时，卖出平仓。（S(buy)=0.7,S(sell)=−0.7）</p><p>采用研报的参数值，得到策略情况如下：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-afb45bc5fa9ef9ee7ab67f4f46c9f252_b.jpg" data-caption="" data-size="normal" data-rawwidth="1313" data-rawheight="479" class="origin_image zh-lightbox-thumb" width="1313" data-original="https://pic3.zhimg.com/v2-afb45bc5fa9ef9ee7ab67f4f46c9f252_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-afb45bc5fa9ef9ee7ab67f4f46c9f252_b.jpg" data-caption="" data-size="normal" data-rawwidth="1313" data-rawheight="479" class="origin_image zh-lightbox-thumb lazy" width="1313" data-original="https://pic3.zhimg.com/v2-afb45bc5fa9ef9ee7ab67f4f46c9f252_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-afb45bc5fa9ef9ee7ab67f4f46c9f252_b.jpg"/></figure><p>基准和标的股票仍然选定沪深300指数，时间选取2010-01-01至2017-12-17。<b>总收益率为209.03%</b>，年化收益<b>15.70%</b>，胜率0.6，<b>最大回撤24.989%</b>，开平仓29次。</p><p>通过不断尝试调整参数值，我们希望得到一个更好的策略表现。N取值在10-30之间时，<b>N=18依然表现最佳</b>；但是M取值较大时，收益率有提升的趋势，特别当M从750变为800时，总收益率从190%跃升至250%左右。由于平台的数据从2005年开始，M值设为1200时将会超出数据范围。在可以取到的M值中，<b>M = 1100时策略表现最佳</b>：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-a9a2473ebe20653e66e8ae3cf1f33778_b.jpg" data-caption="" data-size="normal" data-rawwidth="1321" data-rawheight="464" class="origin_image zh-lightbox-thumb" width="1321" data-original="https://pic1.zhimg.com/v2-a9a2473ebe20653e66e8ae3cf1f33778_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-a9a2473ebe20653e66e8ae3cf1f33778_b.jpg" data-caption="" data-size="normal" data-rawwidth="1321" data-rawheight="464" class="origin_image zh-lightbox-thumb lazy" width="1321" data-original="https://pic1.zhimg.com/v2-a9a2473ebe20653e66e8ae3cf1f33778_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-a9a2473ebe20653e66e8ae3cf1f33778_b.jpg"/></figure><p><b>总收益率为290.12%</b>，<b>年化收益19.24%</b>，胜率0.636，<b>最大回撤17.775%</b>，开平仓28次。</p><p>无论从收益率、胜率上，还是从最大回撤上，上述参数值都比研报中给出的参数值表现要好。这可能由于计算标准分的方法不同。其研报中计算的标准分并没有用到时间区间之外的数据：M=600时，回测前600天并没有600个斜率数据来计算标准分，比如回测第50天就只使用了50个斜率数据进行标准化，这使得<b>回测前期信号相对不稳定</b>。而我们计算标准分时，固定了移动窗口的值，所有日期的标准分采用了相同个数的数据来计算。</p><h2>五、RSRS指标配合量价数据优化策略</h2><p>为了规避掉在大熊市买入的情况，我们尝试在开仓时，加入一个对目前市场状态的判断，过滤掉下跌行情中的开仓。下面给出基于价格趋势和基于交易量趋势两种优化。</p><h2>1. RSRS指标 + 价格优化交易策略</h2><p>一个直接的想法是从近期历史价格趋势进行判断，在回测中，使用前1日的20日均线值和3日前的20日均线值的相对大小牌判断近期市场状态。策略如下（取值来自研报）：<br/>1、计算RSRS右偏标准分指标RSRS(rightdev)。（N = 18, M = 600）<br/>2、若RSRS(rightdev)大于S(buy)，同时满足前1日的MA20的值大于前3日的MA20的值，则全仓买入。（S(buy)=0.7）<br/>3、若RSRS(rightdev)小于S(sell)，同时满足前1日的MA20的值小于前3日的MA20的值，则卖出平仓。（S(sell)=−0.7）</p><p>采用研报的参数值，得到策略情况如下：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-5d2ea7968b1871d92f280cf71871a0d2_b.jpg" data-caption="" data-size="normal" data-rawwidth="1309" data-rawheight="470" class="origin_image zh-lightbox-thumb" width="1309" data-original="https://pic3.zhimg.com/v2-5d2ea7968b1871d92f280cf71871a0d2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-5d2ea7968b1871d92f280cf71871a0d2_b.jpg" data-caption="" data-size="normal" data-rawwidth="1309" data-rawheight="470" class="origin_image zh-lightbox-thumb lazy" width="1309" data-original="https://pic3.zhimg.com/v2-5d2ea7968b1871d92f280cf71871a0d2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-5d2ea7968b1871d92f280cf71871a0d2_b.jpg"/></figure><p><b>总收益率为200.22%</b>，<b>年化收益15.27%</b>，胜率0.818，<b>最大回撤17.616%</b>，开平仓12次。</p><p>调整参数发现，N = 18, M = 200时，策略表现略好于之前：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-2e7d97d4b243834868c9a9628f911681_b.jpg" data-caption="" data-size="normal" data-rawwidth="1313" data-rawheight="463" class="origin_image zh-lightbox-thumb" width="1313" data-original="https://pic2.zhimg.com/v2-2e7d97d4b243834868c9a9628f911681_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-2e7d97d4b243834868c9a9628f911681_b.jpg" data-caption="" data-size="normal" data-rawwidth="1313" data-rawheight="463" class="origin_image zh-lightbox-thumb lazy" width="1313" data-original="https://pic2.zhimg.com/v2-2e7d97d4b243834868c9a9628f911681_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-2e7d97d4b243834868c9a9628f911681_b.jpg"/></figure><p><b>总收益率为213.85%</b>，<b>年化收益15.93%</b>，胜率0.889，<b>最大回撤15.156%</b>，开平仓10次。</p><p class="ztext-empty-paragraph"><br/></p><h2>2. RSRS指标 + 交易量相关性优化交易策略</h2><p>很多研究表明市场涨跌与交易量有明显的正相关性，因此我们尝试采用交易量与修正标准分的相关性来过滤误判信号。在相关性为正时，给出买入信号。策略如下（取值来自研报）：<br/>1、计算RSRS右偏标准分指标RSRS(rightdev)。（N = 18, M = 600）<br/>2、若RSRS(rightdev)大于S(buy)，同时满足前10日交易量与RSRS修正标准分之间的相关性为正，则全仓买入。（S(buy)=0.7）<br/>3、若RSRS(rightdev)小于S(sell)，则卖出平仓。（S(sell)=−0.7）</p><p>采用研报的参数值，得到策略情况如下：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-a8e68a9d924782d1ac274f8ee2794fcc_b.jpg" data-caption="" data-size="normal" data-rawwidth="1324" data-rawheight="464" class="origin_image zh-lightbox-thumb" width="1324" data-original="https://pic1.zhimg.com/v2-a8e68a9d924782d1ac274f8ee2794fcc_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-a8e68a9d924782d1ac274f8ee2794fcc_b.jpg" data-caption="" data-size="normal" data-rawwidth="1324" data-rawheight="464" class="origin_image zh-lightbox-thumb lazy" width="1324" data-original="https://pic1.zhimg.com/v2-a8e68a9d924782d1ac274f8ee2794fcc_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-a8e68a9d924782d1ac274f8ee2794fcc_b.jpg"/></figure><p><b>总收益率为169.43%</b>，<b>年化收益13.67%</b>，胜率0.636，<b>最大回撤12.210%</b>，开平仓22次。</p><p>调整参数发现，N = 18, M = 200时，从收益率上看远好于研报参数值：</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-2450f8ce011325bc24f849462af426ae_b.jpg" data-caption="" data-size="normal" data-rawwidth="1320" data-rawheight="462" class="origin_image zh-lightbox-thumb" width="1320" data-original="https://pic3.zhimg.com/v2-2450f8ce011325bc24f849462af426ae_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-2450f8ce011325bc24f849462af426ae_b.jpg" data-caption="" data-size="normal" data-rawwidth="1320" data-rawheight="462" class="origin_image zh-lightbox-thumb lazy" width="1320" data-original="https://pic3.zhimg.com/v2-2450f8ce011325bc24f849462af426ae_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-2450f8ce011325bc24f849462af426ae_b.jpg"/></figure><p><b>总收益率为238.05%</b>，<b>年化收益17.05%</b>，胜率0.714，<b>最大回撤16.459%</b>，开平仓20次。</p><p class="ztext-empty-paragraph"><br/></p><h2>后记</h2><p>对于上述介绍的策略，还可以尝试配合其他量化指标过滤交易信号，也可以进一步调整买入卖出阈值（S(buy),S(sell)），还可以将第五部分中的RSRS右偏标准分换为标准分或修正标准分，不断尝试是否能够得到更好的策略表现。</p>