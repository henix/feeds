<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>回首2019，展望2020</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/100932424">原文</a></p>
<p>2019年就这样结束了，最后一个2010后也出生了，如果我有二宝的话，也注定是2020后了。或许20年后，我的大宝会对二宝说“你们这群脑残的20后&#34;......这一年换了两份工作，然后年底又面试了新的工作，2020年开始去新的公司上班，又做回期货了，可能会做期权和股票。下面简单回顾一下2019年。</p><p><b>一、CTA策略回顾</b></p><p>我2016年起就一直做商品CTA的中低频交易，辗转了几家公司，有私募，有券商自营，后来2019年4月起去了一家做数字货币为主的公司，担任投资总监，但目前也已经离开了。</p><p>这是私募排排网上一家颇为典型的中低频CTA策略的走势图：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-f0a34fa4365d3bfd62f19c4f979ed889_b.jpg" data-caption="" data-size="normal" data-rawwidth="863" data-rawheight="306" class="origin_image zh-lightbox-thumb" width="863" data-original="https://pic2.zhimg.com/v2-f0a34fa4365d3bfd62f19c4f979ed889_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-f0a34fa4365d3bfd62f19c4f979ed889_b.jpg" data-caption="" data-size="normal" data-rawwidth="863" data-rawheight="306" class="origin_image zh-lightbox-thumb lazy" width="863" data-original="https://pic2.zhimg.com/v2-f0a34fa4365d3bfd62f19c4f979ed889_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-f0a34fa4365d3bfd62f19c4f979ed889_b.jpg"/></figure><p>可以看出，全年最高收益去到了10%左右，但最后回撤到了2%左右，不同产品杠杆不同，收益率不同，但形状差不多的。如果按收益/回撤那就不大好了，比如最大的时候收益11%，然后回撤到0%，于是最大回撤就是11%，但最终收益只有2.2%，因此收益/回撤只有20%了。人们一般要求年化收益/最大回撤3倍的话，铁定不可能了。</p><p>当然，我个人认为年化收益/最大回撤这样的指标是不靠谱的，因为这对年限长的产品不利，年限拉长，年化收益一般比较稳定，但最大回撤会一直增加，这样很不利的。或许累计收益/最大回撤靠谱一些，或者夏普比靠谱一些。</p><p>2019年1月-3月CTA中低频策略整体处于回撤期，而那时候我的仓位较重，5、6倍杠杆，所以比较受伤，加上是年初，因此压力比较大。当时我做CTA的条件是这样的：</p><ul><li>电脑4G内存400G硬盘，回测优化经常死机；</li><li>要对接恒生O32系统，没有测试系统，修改程序直接实盘账户测试，而且只有一个账户，没有给我一些几万几十万的小账户测试程序；</li><li>夜盘不能下单。</li></ul><p><b>所以对比策略走势的时候，请用相同的配置</b>。你不能用20T内存2000T硬盘研究的策略，跟我4G内存400G硬盘研究的策略对比，说实话，这没意义。我一向是最客观的。好比瑞典科学家怒怼施一公，“如果我们有中国这样的体量，随便送500人上月球”。</p><p>后来拿了年终奖，就离开了，算止盈了。年终奖有递延20%，离开之后所以也经常能收到原公司给的钱，这点比知乎量化厚道。<b>所以我一向推荐券商自营，就算你炒了老板鱿鱼，他也会一直给你钱</b>。我也从来没怎么说过之前东家的坏话，不是说之前的领导多么有人格魅力，更多看在钱的份上吧。而且这应该是国企自身的制度规定，钱不是公司领导的，更不是部门领导的，留下来对自己没好处，不如花出去。可能公司就是这么规定的，对离职员工要继续发钱，发完为止；按领导的话说，“<b>离开的也是自家人，也要团结。</b>”</p><p><b>二、期货数据整理</b></p><p>去了新公司之后，我重新研究了之前的CTA策略，从最基础的数据整理开始，整理了2010年以来的10年历史分笔数据，对比了几个不同的数据提供商，纠正了他们不少错误，也发现了历史上很多数据特殊的地方。毕竟我2016年才开始系统性接触，之前的不大了解。比如有一些需要注意的：</p><ul><li>2010年6月以前上期所的数据14：10-14：20是休市，很多数据提供商脑补了；</li><li>2010年某天PTA连续涨停而停牌，因此PTA连续合约数据正常来说要缺失一天；</li><li>郑商所很多成交额数据顺序有问题，比如累计成交额前面比后面大；</li><li>大商所切割K线需要注意，因为毫秒是0-999，只有过了时间才能切割。因此回测一定要下根K线开盘价，因为只有这个到来了才能切割旧的K线。一些行情软件对时间四舍五入处理，14:59.786、14:59.886都按15:00处理，会比较奇葩。</li><li>每小节结束后还会有行情，比如10：15：01.560等，有些直接切掉了。但过去10年数据未发现超过2秒的，最多1秒多，因此小节结束可以用11:30:02、15:00:02、23:00:02来切割。</li><li>某天夜盘21：07一些只有白天交易的品种突然发神经发了几笔行情；</li><li>豆粕期权上市时大豆夜盘暂停交易；</li><li>2016年11月部分品种5分钟成交额超过2^31，32位数据溢出，因此要使用64位计算；python可能没问题，但如果是R的话，data.table默认32位，读入数据的时候需要特殊处理一下。如果你的电脑本身就是32位，就注定没办法了。</li></ul><p>不同行情软件提供商处理数据方法不同，有的喜欢脑补数据，比如节假日没有夜盘的它也脑补了。当然，夜盘结束时间经常改变，用第三方数据可以知道什么时候改变了，否则自己处理历史数据很难知道。应该来说2017年以来的数据基本不会有啥问题，越早期的问题越多。</p><p><b>三、CTA策略研究</b></p><p>其实我之前研究CTA中低频的时候并没有太多滚动向前优化，因为效果总是不大好。只有在做日内的时候，或者使用分笔数据的时候，滚动向前优化效果才比较好，实盘效果也好。比如之前发过的日内半年的交易：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-400c955e43296e4b8e4a4631fe87c0c0_b.jpg" data-caption="" data-size="normal" data-rawwidth="562" data-rawheight="439" class="origin_image zh-lightbox-thumb" width="562" data-original="https://pic1.zhimg.com/v2-400c955e43296e4b8e4a4631fe87c0c0_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-400c955e43296e4b8e4a4631fe87c0c0_b.jpg" data-caption="" data-size="normal" data-rawwidth="562" data-rawheight="439" class="origin_image zh-lightbox-thumb lazy" width="562" data-original="https://pic1.zhimg.com/v2-400c955e43296e4b8e4a4631fe87c0c0_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-400c955e43296e4b8e4a4631fe87c0c0_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-be8b2766f44113169300a3935b428c97_b.png" data-caption="" data-size="normal" data-rawwidth="495" data-rawheight="69" class="origin_image zh-lightbox-thumb" width="495" data-original="https://pic4.zhimg.com/v2-be8b2766f44113169300a3935b428c97_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-be8b2766f44113169300a3935b428c97_b.png" data-caption="" data-size="normal" data-rawwidth="495" data-rawheight="69" class="origin_image zh-lightbox-thumb lazy" width="495" data-original="https://pic4.zhimg.com/v2-be8b2766f44113169300a3935b428c97_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-be8b2766f44113169300a3935b428c97_b.png"/></figure><p>跟上面的中低频对比，效果自然是好多了。但这只是策略类别不同导致的，可能我自己做中低频也不会更好。比如收益/回撤是4.72倍，如果年化收益/最大回撤就是8.85倍了，会比中低频的好很多，同期5月底以来中低频是亏钱的。</p><p>中低频CTA我从2016做到2019，其实基本上是每个月优化好参数挑好策略就放去交易，但一直没有做很严格的滚动向前优化，因为做过几次，结果都不大好。</p><p>比如从“上帝视角”挑选几个趋势好的品种，这样滚动几年下来效果自然是好的，但如果放开品种，效果又不好了。而且之前还用了一些机器学习预测模型来做，难以跟踪。</p><p>后来换了一种思路：之前总是针对单个品种来研究，比如单个品种做好了再组合全部品种。后来改变了一下，更多是从单个因子角度考虑，比如一个因子对10个品种表现都好，那么这10个因子的等权投资组合就作为这个因子的投资组合，然后再用一些投资组合理论来组合不同因子的策略。</p><p>这样发现效果好挺多的，最起码完全滚动的样本外也能有不错的效果。这里我是按年滚动，因为默认每年元旦放假会平完仓位，所有品种又重新开始了。其实可以更进一步地，可以春节、劳动节、国庆作为滚动优化的分割点。关键在于一个因子（或策略）要对应多个品种，最终是<b>针对每个策略进行投资组合优化，而不是针对每个品种进行投资组合优化。</b></p><p>因为如果针对品种来做投资组合优化的话，很多时候，都是肉眼主观看哪个品种最近表现好不好，保留好的删除差的，但可能就会完全错过某些品种。比如铁矿，2019年连涨8个月，但它之前横盘了8个月，几乎所有铁矿的策略都回撤了8个月，这个品种铁定不会入选，这样就会错过它的大涨行情。但如果是选策略的话，一个策略对应多个品种，这时候挑选的标准不会很高，铁矿还是可能入选的，这样这个品种就会保留下来。</p><p>当然，中低频CTA似乎全市场都没有太好的，听说元盛都被赎回了很多，要做好的话可能需要结合更多基本面数据。上海钢联向我推荐过它们的基本面数据API接口，拿了3年历史数据测试。这玩意低配要20万，高配一年200、300万，说实话，有点鸡肋。</p><p>我不大明白他们的商业模式是怎么想的，<b>如果卖两三千块钱，我很容易说服上万粉丝买他们的产品，他们年入就能达到2、3000万</b>，其实分发1万个对他们服务器并没有太大压力，1万这个量对互联网行业来说太小了，大的服务都是上亿用户的。但他们每个卖20、30万，其实要卖100个也挺难的，200、300万的卖10个都难。我好歹是“量化投资与机器学习”公众号评选的2019年度量化网红啊！1万粉丝小菜一碟。</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-668adca5adbc3faa993ee74533f3201b_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="589" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic4.zhimg.com/v2-668adca5adbc3faa993ee74533f3201b_r.jpg"/></noscript><img src="https://pic4.zhimg.com/v2-668adca5adbc3faa993ee74533f3201b_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="589" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic4.zhimg.com/v2-668adca5adbc3faa993ee74533f3201b_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-668adca5adbc3faa993ee74533f3201b_b.jpg"/></figure><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-a1b24b591693ea4cd6f364238febf435_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="589" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic2.zhimg.com/v2-a1b24b591693ea4cd6f364238febf435_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-a1b24b591693ea4cd6f364238febf435_b.jpg" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="589" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pic2.zhimg.com/v2-a1b24b591693ea4cd6f364238febf435_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-a1b24b591693ea4cd6f364238febf435_b.jpg"/></figure><p>而且他们这种API真没啥用，别人收到之后也是可以转发的，或者同一台服务器交易多个账户。穿透没用啊，本来就是期货公司的服务器，多几个账户很正常啊，而且用的都是不同的appID。</p><p><b>四、数字货币研究</b></p><p>2019年4月加入了一家做数字货币为主的公司担任投资总监，2019年12月31日离开，正好待了9个月。数字货币从4月开始从3000多涨到13000，到现在跌回到7000左右，可谓跌宕起伏。</p><p>我还是用CTA中低频的套路做数字货币，主要是Bitmex的永续合约，手续费比较高，万分之7.5，但滑点并不高，比如比特币1万的价格价差只有0.5，类似万分之0.5的买卖价差，而且挺活跃，经常处于最小价差。</p><p>由于手续费非常高，开平就是千分之1.5，因此其实也做不了太高频，持仓1、2天就算短了。跟期货CTA类似，可以加入一些过滤波动率的条件，太低波动就空仓不交易，否则无法覆盖交易成本。</p><p>这玩意怎么说呢，目前国家政策不是很支持。更重要的品种比较少，比如BTC自己可以占50%，加上ETH可以占70%，剩下的都是小币种，孙宇晨的波场币可以排第10，老说孙宇晨是骗子，那排在孙宇晨后面的几百个币算什么？</p><p><b>五、一些面试经历</b></p><p>其实我面试了几家公司，但一般大公司不缺钱，他们招量化更多是为了储备，其实并不着急赚钱的。而且大券商的领导眼中似乎技术并不重要，总觉得国外的跟国内的差不多，自己随便招点人也能培养。但如果领导不懂，招的人不懂，全靠他们自己摸索，又有业绩压力，各类资源又不给力的话，其实要做好也不容易。</p><p>比如广发证券固定收益部也招量化，但其实国内的固定收益跟国外的固定收益不大一样，可能国外的固定收益非常量化，模型非常复杂，神马随机波动率都是1990年代的东西了，但国内的固定收益没有这些。因为国内券商的固收太赚钱了，不靠这些也躺赚，有这些也没啥用。</p><p>比如面试是这样的：</p><p>面试官：你为什么想来我们公司啊？</p><p>我：因为你们是离我家最近的金融公司了，我住XXX地铁站，离这走路10分钟，我宝宝快两岁了，带娃方便。</p><p>面试官：你有什么本事啊？</p><p>我：2015年做股指高频的时候每天成交额全国前50名，每天都有几百亿吧。</p><p>面试官：那赚不赚钱啊？</p><p>我：每天100万以上，本金2、300万。</p><p>面试官：那岂不是印钞机吗？</p><p>我：那时候需要套利编码才能做，但自己的账户没有申请套利编码，只能用产品户做。等到想申请套利编码的时候，就不让做了。你不相信的话，问你们隔壁部门的XXX领导，或者之前公司的XXX领导，他们都去过我当时的公司。</p><p>面试官：那商品高频也能做啊？</p><p>我：当时能做，但现在那种策略有点难，现在的交易成本是当时的8倍，但价差没变。</p><p>面试官：那你现在做什么呢？</p><p>我：所以做商品CTA，中低频和日内。其实我对中低频不是很有信心的，日内其实更稳定，容量也可以的，每年几千万甚至几亿没问题，这个挺难估算。但之前在券商自营不能做夜盘，我的策略需要夜盘才行，所以在券商没做，离开券商才做的。3月份离开券商，5月份开始半年翻一倍。</p><p>面试官：那你的策略这么牛逼你都不用工作啦？</p><p>我：你也看到，最大回撤其实也有20%了，收益哪怕100%，也才5倍，如果要赚1000万，可能要回撤200万，我也不想承受。如果在公司做，比如一年赚1个亿，我分10%就有1000万，而且对自己来说不会亏损，还有基本工资。</p><p>面试官：我看你怎么换工作这么频繁，基本一年一换？</p><p>我：其实每次换工作都不同原因的。比如在期货公司的时候做高频，期货公司限制比较大，做不出来，所以2015年3月去了私募，就做出来了；但后来高频不让做了，2016年10月就换了一家管理规模大一些的私募做总低频CTA，不过在深圳；后来我结婚了，所以需要回广州，2017年月来了广州的一家私募；但2017年是CTA过去10几年来最差的一年，元盛都亏钱的，我其实没亏，但其它做股票的神操作亏了几千万，加上公司租了广州最高最贵的写字楼几千平方，又没了几千万，就开不下去了，所以我觉得私募不稳定，2018年4月就去了券商自营；但之前说了，券商夜盘不能下单，电脑配置4G内存，还没有测试环境测试程序，又不让小规模资金单独账户测试，这活没法干，所以又去了现在的公司；但现在的公司做数字货币，但现在国家打压，觉得有法律风险，所以想走。总之我觉得这些原因都挺有道理吧，换做是别人也会这么做的，但区别在于我都能立刻找到下家，别人可能就未必了。而且我待的公司和部门很多都不存在了，即使存在也不做期货量化了，我之所以可以这么多年坚持下来做期货量化，就是因为换的频繁，每次都能及时止损止盈，否则早就被拍死了。</p><p>面试官：我觉得你的经历挺传奇的。回去等消息吧。</p><p>然后就没有然后了。</p><p><b>六、未来展望</b></p><p>其实2020年反而是让我看到希望的一年。比如期货的策略可以进一步扩展，日内的可以扩展到其它品种，可以使用不同的模型，增加5档行情等等，前景广阔；隔夜的CTA可以加入基本面的API，应该能更有效果；另外新加入的公司主要做期权起家，我也可以学习一下期权；其实我的期货策略可以移植到股票，T+0/1/2/3/4应该都可以。</p><p>对于蓝筹股持仓1、2年的其实弄个周内平仓趋势增强也是挺有市场的，太高频持仓1-3分钟的我还真弄不来，但即使弄出来的市场需求也不大，因为大家愿意持仓2、3年的都是蓝筹股，真正有增强需求的也是这些股票。但这些股票持有1-3分钟铁定覆盖不了成本的。那些小票T的再厉害，除非是自建底仓对冲的，或者做指数增强的，普通的股票私募公募集中持有少量股票好几年，这些股票一般不满足T+0增强的要求，要T+N（n&lt;=5）才行。</p><p>说实话，当网红之后要找证券公司、期货公司合作真不难，不用自己去找，都是他们主动找上门，但我又是个比较懒散的人，所以很多时候推进速度并不是很快。但我比其它机构的好处在于可以很快拍板，毕竟只有1个人，销售、技术、研发、客服都是1个人。</p><p><b>七、总结</b></p><p>其实每次换工作我都怕找不到工作，但每次都能找到，而且很快找到，基本都是让我满意的工作。很多时候招我的公司或部门都是急着要招个人赚钱发工资的，那种招个人养着作为储备的反而不会招我。其实我是希望被作为储备的，招我来给其他人发工资我觉得压力挺大啊。</p><p>一般初创的公司会有一定的缓冲期，比如老板预留了半年、1年、3年、5年不赚钱的，比如马云就预留了云服务10年不赚钱，每年投入10个亿，这么看其实没啥压力的，老板都不急着赚钱，你着急啥呢？10年之后哪怕还不赚钱，你阿里10年也赚了1、2套房了。很多老板没有马云有钱，按张一鸣的说法，就是没能做到延迟满足，巴不得招个人第一年就赚钱，甚至第一个月就赚钱，急功近利，这个不可取。板凳要坐10年冷，要有10年不赚钱的耐心，才能做大事啊。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
