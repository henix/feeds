<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ICLR 2018 | 阿里巴巴论文：基于交替方向法的循环神经网络多比特量化</title>
</head>
<body>
<p><a href="https://mp.weixin.qq.com/s?timestamp=1525750003&amp;src=3&amp;ver=1&amp;signature=DQAX*cUGN0BZgdOVLmP8-20O4Bp6d58IK1ze2iQ-Kw-Feur01E2fN2A-CgiwAFEi3uLMS27*MRERZuAtntp9*3fw0X46nmmH5pcrInk4b8Jv3YLyDeW683AVK*etyCQZ72jUrxZxtujoet9lnWUvCQQqsylcLffxfuq55dQv71Q=">原文</a></p>
<div class="rich_media_inner">
                        
        
        <div id="page-content" class="rich_media_area_primary">
            
                        <div id="img-content">
                
                <h2 class="rich_media_title" id="activity-name">
                    ICLR 2018 | 阿里巴巴论文：基于交替方向法的循环神经网络多比特量化                                    </h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <em id="post-date" class="rich_media_meta rich_media_meta_text">2018-04-28</em>

                                        <a class="rich_media_meta rich_media_meta_link rich_media_meta_nickname" href="##" id="post-user">机器之心</a>
                    <span class="rich_media_meta rich_media_meta_text rich_media_meta_nickname">机器之心</span>


                    <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                        <div class="profile_inner">
                            <strong class="profile_nickname">机器之心</strong>
                            <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                            <p class="profile_meta">
                            <label class="profile_meta_label">微信号</label>
                            <span class="profile_meta_value">almosthuman2014</span>
                            </p>

                            <p class="profile_meta">
                            <label class="profile_meta_label">功能介绍</label>
                            <span class="profile_meta_value">专业的人工智能媒体和产业服务平台</span>
                            </p>
                            
                        </div>
                        <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                            <i class="profile_arrow arrow_out"></i>
                            <i class="profile_arrow arrow_in"></i>
                        </span>
                    </div>
                </div>
                                
                
                
                
                                                
                                                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <section style="max-width: 100%;line-height: 28.4444px;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-id="85660" data-custom="rgb(117, 117, 118)" data-color="rgb(117, 117, 118)" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-id="85660" data-custom="rgb(117, 117, 118)" data-color="rgb(117, 117, 118)" style="max-width: 100%;border-width: 0px;border-style: initial;border-color: currentcolor;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="margin-top: 2em;padding-top: 0.5em;padding-bottom: 0.5em;max-width: 100%;border-style: solid none;text-decoration: inherit;border-top-color: rgb(204, 204, 204);border-bottom-color: rgb(204, 204, 204);border-top-width: 1px;border-bottom-width: 1px;box-sizing: border-box !important;word-wrap: break-word !important;"><p style="margin-top: -1.2em;max-width: 100%;min-height: 1em;font-family: inherit;text-align: center;line-height: 1.75em;border-width: initial;border-style: initial;border-color: currentcolor;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(255, 255, 255);background-color: rgb(117, 117, 118);box-sizing: border-box !important;word-wrap: break-word !important;">机器之心发布</span></p><section data-style="white-space: normal; text-align: left;font-size: 14px;line-height: 1.5em; color: rgb(12, 12, 12);" style="padding: 16px 16px 10px;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">作者：徐晨等</strong></span></p></section></section></section></section></section></section></section></section></section></section></section></section><p><br></p><blockquote><p style="text-align: justify;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">ICLR 2018 将于 4 月 30 日在加拿大温哥华开幕，之前机器之心对此届大会的<a href="http://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650740794&amp;idx=1&amp;sn=c10ed671fca9bf4a09ee3352f407f79f&amp;chksm=871adc44b06d5552171d3215d3670482dc87a5c73ecb076a2e2c58e873e8949519ed770f2ead&amp;scene=21#wechat_redirect" target="_blank">三篇获奖论文</a>分别进行了介绍。在这篇文章中，我们介绍了阿里巴巴的一篇 ICLR 2018论文。</span></p></blockquote><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.18388625592417063" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhj3PBsmk5fUibw7H7njt6bmnbZ0cesWy3Bgux04ibicYzRMYb60dqFCUdQ/640?wx_fmt=png" data-type="png" data-w="1055" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(123, 12, 0);box-sizing: border-box !important;word-wrap: break-word !important;">论文原文地址：https://arxiv.org/abs/1802.00150 </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong>引言</strong></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">循环神经网络 (RNN) 在语言模型、机器翻译、语音识别、生成图像标题等很多应用上都取得了非常好的效果。然而，这些模型常常是建立在高维的嵌入 (embedding) 或者多层的循环单元中，包含了大量的参数，使得无法在资源有限的移动端部署。此外，RNN 的计算依赖于与当前的隐状态，只能被顺序执行，因此在执行推断时会造成比较大的延时。在拥有大规模并发请求的服务器端，比如语音识别或者机器翻译等应用，为了满足线上苛刻的响应时间要求，需要部署大量的机器。在这项工作中，我们考虑通过量化参数到二值 {-1,+1} 上来解决上述问题。考虑将模型的权重量化成 1 比特，相对于全精度，直接带来 32 倍的内存压缩。而对 1 比特参数的矩阵乘法，如果不考虑具体实现，相对于全精度乘法，理论上也会带来 32 倍的加速。然而，如果把模型的权重和激活都量化成 1 比特，在循环神经网络中，会带来很大的精度损失。因此，很自然的折中方案就是采用多比特量化（如图 1 所示）。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.5183845690174804" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhTLoXaNlRf31F9iaXBV9qgQjquiaRyXy6lEK5iaVceBh0PvRHEM3wLP3LA/640?wx_fmt=png" data-type="png" data-w="1659" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 1 多比特量化乘法示意</span></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">现有的多比特量化方法</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">1) 均匀 (Uniform) 量化采用下列的 k 比特量化方案:</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.19793103448275862" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhWhJ0pGgoOYCzC2k8Ja6L3sWVVwtcL62mhevibic51yhWusRTDNxEZZAw/640?wx_fmt=png" data-type="png" data-w="1450" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 256px;visibility: visible !important;height: 51px;" width="403px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">这样基于规则的量化方法非常容易实现, 但是对于非均匀数据的量化效果很差，而非均匀分布数据在深度神经网络却更为常见。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">2) 均衡 (Balanced) 量化通过数据预处理来解决均匀量化的弊端。该方法首先产生 2^k 个间隔，每个间隔大致包含等量的数据。然后该方法将每个间隔的中心线性映射到对应的量化编码中。尽管看起来更有效，但是该方法还是基于规则，而这种规则并不能保证对所有的数据分布都起效果。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">3) 贪婪法 (Greedy) 近似通过去解下面的带离散约束的分解问题来实现量化: </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.156957928802589" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhOh0Kzhd7KgXsoje9Rst6ic4kIMr4sx79qthSHerSQJiaxFeF8R32ZicDg/640?wx_fmt=png" data-type="png" data-w="1236" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 412px !important;visibility: visible !important;" width="412px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">对于 k=1, 上述问题存在闭式解。贪婪近似通过逐步量化余量 (residue) 并将其推广到 k 比特 (k&gt;1) 的情形：</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.15121136173767752" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhTicsGwFNol0rQmUaAIFAxgVicFbulaehQXYK5zjrH4rSYxt3pmkxXqyw/640?wx_fmt=png" data-type="png" data-w="1197" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 450px !important;visibility: visible !important;" width="450px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">每个子步都有最优解</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.15288788221970556" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhichdmYg44LxsmGL4EqiaGKQNnlCM5E06HCjq3ut5mO4rdZGkrcVrkBDA/640?wx_fmt=png" data-type="png" data-w="883" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 436px !important;visibility: visible !important;" width="436px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">贪婪法非常高效，尽管不能得到一个高精度的解，但是将量化问题建模成一个优化问题的形式还是非常具有启发性的。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">4) 改进版 (Refined) 贪婪近似进一步拓展贪婪法以降低量化误差。在上述第 j 步最小化问题中，该方法加上额外一步最小二乘来修正系数</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.0808720112517581" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhhQN7mYHeCdK1wiaBHrudybQus9tBicTfxCib3SAyI55JC0gw4K1Ooz89Q/640?wx_fmt=png" data-type="png" data-w="1422" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 457px !important;visibility: visible !important;" width="457px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">在原文量化卷积神经网络权重的实验中，修正版贪婪法被证实比原始的贪婪法更有效。然而，正如我们下面要讲的，修正版的贪婪法在量化精度方面仍然不能令人满意。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">除了上述通用的多比特量化方案以外，还有文章还提出了三值量化，与 1 比特的二值量化相比，三值量化多了可行状态 0。三值量化通过解如下问题</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p><img class="" data-copyright="0" data-ratio="0.132013201320132" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA6lbLg8RLCb0gvmOPTebab39NgZ39SgX4Axn979CQ3jsOXJbCtqQYtQ/640?wx_fmt=png" data-type="png" data-w="606" style=""></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">来实现编码。然而，原文并未提出一种高效的解法，相反，作者通过经验，将小于</span><img class="" data-copyright="0" data-ratio="0.4189189189189189" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAZ7xBdibQJ66Lia6IoAA6a0j6g7SyFs9jXxtHcr6FfBwbg9Vt9ZkYUx8w/640?wx_fmt=png" data-type="png" data-w="148" style="width: 55px;height: 24px;"><span style="font-size: 15px;">的元素设成 0, 并对剩余元素采用如上所述的二值量化。三值量化其实本质上等价于此处的 2 比特量化，唯一不同的地方在于多了一个</span><img class="" data-copyright="0" data-ratio="0.3191489361702128" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAF41nfNXjXUC0OqnlC8mWmcKKGCNicLWKsMPZ6LS1CnDXllqnsd4QQwA/640?wx_fmt=png" data-type="png" data-w="94" style="width: 71px;height: 22px;"><span style="font-size: 15px;">的约束。当二值编码被固定以后，最优系数</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 20px;height: 20px;"><span style="font-size: 15px;">(或者</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">) 类似地可以通过最小二乘得到。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">基于交替方向法的多比特量化方案</span></strong></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">接下来将介绍本文提出的量化方法，同样我们也是通过解上述的优化问题来实现量化。为了简单起见，首先考虑 k = 2 的情形，如果</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">和</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">已知且满足</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">≥</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">，那么可行编码即被限制为以下四种情况</span><img class="" data-copyright="0" data-ratio="0.08856088560885608" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAogNvGtzRQjWjYGj3lZ850zvmWJwRAM00xvef1oUIelRHkBeuyaIYLg/640?wx_fmt=png" data-type="png" data-w="542" style="width: 261px;height: 24px;"><span style="font-size: 15px;">。对于 w 中的任意元素 w, 其编码都是通过最小二乘来确定。我们相应地可以将整个坐标轴分成四份，落在某个区间上的 w 分别对应其中一个量化编码。由最近邻条件可得区间的边界即为量化编码的中间值，也就是</span><img class="" data-copyright="0" data-ratio="0.53125" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA0Eibic0oaKGM2lUpux6InyKSoyS92dgOmnkuWiaB0arWk2rMcoIPeR3wg/640?wx_fmt=png" data-type="png" data-w="64" style="width: 24px;height: 20px;"><span style="font-size: 15px;">、0 以及</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">。下图给出一个示意。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.18524332810047095" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhVTThIP2VY0Ww729RFgWBEMH0miazmscd2ulibyF08zHPZibQlK3bxfBQg/640?wx_fmt=png" data-type="png" data-w="1274" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 2 当实系数固定时，最优 2 比特编码示意</span></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">对于任意 k 比特量化问题，假设</span><img class="" data-copyright="0" data-ratio="0.5294117647058824" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAzEpH9xvBCg2eb0JZRC6dmYPdzicatMVWmbQvA02iauflUQEl3I9ahAWQ/640?wx_fmt=png" data-type="png" data-w="102" style="width: 48px;height: 25px;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">已知，我们可以类似地将整个坐标轴分成 </span></p><p><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 22px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">个区间，其边界同样通过相邻可行编码的中点来划分。如果直接将待量化的实数 w 与所有区间边界进行比较以确定对应编码，总共需要</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 22px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">次，当 k 比较大，这种操作非常不经济。事实上，我们可以利用可行编码全集 v 中元素单调递增的性质，将 v 均匀分成两个子集:</span><img class="" data-copyright="0" data-ratio="0.3617021276595745" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAowcTkCuicqDX0BzQBNTsVSEcFWXrMBJ8PYiaMEZCOTHJxG8qjSBvgtRw/640?wx_fmt=png" data-type="png" data-w="94" style="width: 55px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">和</span><img class="" data-copyright="0" data-ratio="0.29508196721311475" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAvic1DNjUNLW8vI0d0L1ZhibcMAiaRwOok4n4icRNHh41eunTYIaADSKC3g/640?wx_fmt=png" data-type="png" data-w="122" style="width: 73px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其中 m 表示 v 的长度。如果</span><img class="" data-copyright="0" data-ratio="0.18471337579617833" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA41XbzY4bhAcXNyHpZertA9hpXVhEaUWhAkydkMYINqmIdKZGRh09TQ/640?wx_fmt=png" data-type="png" data-w="314" style="width: 121px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其可行编码即被限制在子集</span><img class="" data-copyright="0" data-ratio="0.3181818181818182" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPADgib6gRicaRLGicibhKlTgk3MfwloXCoiaLlXYaw6YU9cbtnycUZ8XVnvwA/640?wx_fmt=png" data-type="png" data-w="88" style="width: 44px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> 上。相反如果</span><img class="" data-copyright="0" data-ratio="0.1360544217687075" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA2cRB8ZWV6y1l9dJJnsw3oJgBdgVicODQk65SsvDScZVD7b2dPGY4Ncg/640?wx_fmt=png" data-type="png" data-w="294" style="width: 175px;height: 24px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其可行编码即被限制在子集</span><img class="" data-copyright="0" data-ratio="0.2631578947368421" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAaLK4WCFfxXzkk5Obu5bHeibE74aU90JZunhdkb5icZJXRmiakwwnKx6Ng/640?wx_fmt=png" data-type="png" data-w="114" style="width: 61px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">上。通过递归地将可行编码子集均匀划分，我们只需要 k 次比较就可以得到最优编码。该过程可以看成是一个二叉搜索树，我们在下图中给出了一个 k=2 时的简单示意。一旦得到量化编码，即可将其一一映射到对应的二值向量</span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" width="37px" style="text-align: justify;box-sizing: border-box !important;word-wrap: break-word !important;width: 37px !important;visibility: visible !important;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.40606060606060607" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhP7DonusAxXSaxtMJPiaLMribNrnrNibicSVnUaXbunHhcBYwo0heovnoXw/640?wx_fmt=png" data-type="png" data-w="990" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 3 二叉搜索树将</span></span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 21px;height: 21px;"><span style="font-style: italic;color: rgb(136, 136, 136);font-size: 12px;">次比较降为 k 次比较</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">基于上面的发现，我们重新来考虑上一节中介绍的改进版贪婪近似。经过最小二乘修正实系数之后，二值编码 </span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 33px !important;visibility: visible !important;" width="33px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">不再是最优，而该方法却仍将其固定。为了进一步改进，交替最小化实系数和二值编码变成了一个很自然的选择。一旦用二叉搜索树得到最优的</span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 36px !important;visibility: visible !important;" width="36px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 可以将其固定，并采用最小二乘更新</span><img class="" data-copyright="0" data-ratio="0.5223880597014925" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhYGSJcwHSzyJHhYrviccvMhrmOrckZoiapPbW2AvLpu9PZchwgmJvKHfQ/640?wx_fmt=png" data-type="png" data-w="67" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 40px !important;visibility: visible !important;" width="40px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">。在真实实验中，以贪婪法得到的解作初始化，我们发现只需要两步交替迭代就足以得到高精度的解。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">实验结果</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.3125393824826717" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhVodjLefoDfe5Jf65swjL0xkIOn5WlqaN7zNJObibtE3YxoE3dnTMWjA/640?wx_fmt=png" data-type="png" data-w="1587" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 1 不同方法近似 PTB 数据集上训练好的 LSTM 的权重。其中 FP 表示全精度</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.28281068524970965" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhwLuqibkicdLXNY94ktWicjNaGia6UeaQ8ibNWzryUNqgYiaOUFEq5HeD2bHQ/640?wx_fmt=png" data-type="png" data-w="1722" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 2 不同方法近似 PTB 数据集上训练好的 GRU 的权重</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="font-size: 15px;text-align: justify;">我们在语言模型上进行量化实验，分别测试了 LSTM 和 GRU 两种架构。因为</span>实验是去预测下一个单词，其效果采用单字复杂度来衡量 (perplexity per word, 简写成 PPW)。为了检验所有的算法量化精度，我们首先对训练好的全精度权重做近似 (没有量化激活或者重训练)，结果如表 1 和表 2 所示。注意到均匀量化和均衡量化是基于规则的，其目标并不在于最小化误差，因此这两种方法会得到差很多的结果。我们还在其他数据集上重复了上述实验，对于两种循环神经网络结构 LSTM 和 GRU，结果都与此处相似。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.23432343234323433" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhS6HOeg4ORSrXryibtQibte2FBtw4c1KRjJpX2wH1EJmTTyF04zAwDG5g/640?wx_fmt=png" data-type="png" data-w="1818" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 3 PTB 数据集上多比特量化 LSTM 和 GRU 的测试 PPW，其中均匀量化和均衡量化为现有论文中的结果，改进版贪婪法为我们自己实现的结果。</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.17312206572769953" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhqCnTjq6UQjd8XxicCAyacSWQJVUfHl7ictQ62TTrmBSuEZs3nAvE4IjQ/640?wx_fmt=png" data-type="png" data-w="1704" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 4 WikiText-2 数据集上多比特量化 LSTM 和 GRU 的测试 PPW。</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.17146212566059893" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhAiapoQgQ69yWiczcpoUSXSgfRErDN4FP2iaN0l2ibzERalVUjbThRXnv1A/640?wx_fmt=png" data-type="png" data-w="1703" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 5 Text-8 数据集上多比特量化 LSTM 和 GRU 的测试 PPW</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">我们还进行了权重和激活同时量化的实验，结果如表 3、4 和 5 所示。从中可以看到，本文提出的交替方向法明显好过现有其他量化方法。即使与表现最好的改进版贪婪法相比，交替方向法实现类似的精度大概可以少用一个比特。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">我们还在 CPU 中实现了矩阵向量的二值乘法，其结果如表 6 所示。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.297029702970297" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUh107Y2wJx1QmIvzMbKyeD1VhFepNPtbtSgZtfso29mUOmjxAh9ibewPg/640?wx_fmt=png" data-type="png" data-w="1616" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 6 CPU 中二值乘法与全精度乘法的时间比较</span></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">小结</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">在这个工作中，我们主要考虑神经网络的多比特量化压缩加速问题。我们发现，如果编码的实系数固定，那么离散的二值编码 {-1,+1} 可以通过二叉搜索树高效的求解。基于这个发现，我们相应地提出交替方向法。我们将该方法用于量化语言模型中的 LSTM 和 GRU 结构，与全精度模型相比，通过 2 比特量化，我们可以减少约 16 倍的内存消耗，以及在 CPU 上实现约 6 倍的真实推断加速，而只产生少量的准确率损失。通过 3 比特量化，该方法在准确率上可以实现几乎没有损失甚至超过原始模型，并减少约 10.5 倍的内存消耗，以及在 CPU 上实现约 3 倍的真实推断加速。这些结果都远远优于现有量化方法的结果。 <img class="" data-ratio="0.3287671232876712" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8Zfpicd40EribGuaFicDBCRH6IOu1Rnc4T3W3J1wE0j6kQ6GorRSgicib0fmNrj3yzlokup2jia9Z0YVeA/640?wx_fmt=png" data-type="png" data-w="73" style="font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;width: 48px !important;" width="48px"></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;text-align: justify;line-height: 25.6px;font-family: 微软雅黑;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(62, 62, 62);line-height: 25.6px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);box-sizing: border-box !important;word-wrap: break-word !important;">本文为机器之心发布，<strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">转载请联系本公众号获得授权</span></strong></span></strong>。</span></strong><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="margin-bottom: 5px;max-width: 100%;min-height: 1em;font-size: 18px;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);line-height: 25.6px;font-family: 微软雅黑;text-align: justify;box-sizing: border-box !important;word-wrap: break-word !important;">✄------------------------------------------------</span></p><p style="margin-bottom: 5px;max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(217, 33, 66);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">加入机器之心（全职记者/实习生）：hr@jiqizhixin.com</span></strong></p><p style="max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(217, 33, 66);line-height: 1.6;font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">投稿或寻求报道：editor@jiqizhixin.com</span></strong></p><p style="max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 12px;color: rgb(217, 33, 66);line-height: 1.6;box-sizing: border-box !important;word-wrap: break-word !important;">广告&amp;商务合作：bd@jiqizhixin.com</span></strong></p><p><br></p>
                </div>
                <script nonce="751282532" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    (function(){
                        if (navigator.userAgent.indexOf("WindowsWechat") != -1){
                            var link = document.createElement('link');
                            var head = document.getElementsByTagName('head')[0];
                            link.rel = 'stylesheet';
                            link.type = 'text/css';
                            link.href = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg/page_mp_article_improve_winwx3d171e.css";
                            head.appendChild(link);
                        }
                    })();
                </script>
                
                
                                
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display:none;"></div>

                
                                <div class="reward_area tc" id="js_preview_reward" style="display:none;">
                    <p id="js_preview_reward_wording" class="tips_global reward_tips" style="display:none;"></p>
                    <p>
                        <a class="reward_access" id="js_preview_reward_link" href="##"><span class="icon-reward"></span>赞赏</a>

                    </p>
                </div>
                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x3534dd.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
                        
            <ul id="js_hotspot_area" class="article_extend_area"></ul>


            
                        <div class="rich_media_tool" id="js_toobar3">
                
                                
                                            <div id="js_read_area3" class="media_tool_meta tips_global meta_primary" style="display:none;">阅读 <span id="readNum3"></span></div>

                <span style="display:none;" class="media_tool_meta meta_primary tips_global meta_praise" id="like3">
                    <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum3"></span>
                </span>

                <a id="js_report_article3" style="display:none;" class="media_tool_meta tips_global meta_extra" href="##">投诉</a>

            </div>


                        <div class="rich_media_tool" id="js_sg_bar">
                
                                
                                
            </div>
                    </div>

        <div class="rich_media_area_primary sougou" id="sg_tj" style="display:none"></div>

        
        <div class="rich_media_area_extra">

            
                        <div class="mpda_bottom_container" id="js_bottom_ad_area"></div>
                        
            <div id="js_iframetest" style="display:none;"></div>
                        
                        
            <div class="rich_media_extra rich_media_extra_discuss" id="js_friend_cmt_area" style="display:none">
              
              
              
            </div>

                        <div class="rich_media_extra rich_media_extra_discuss" id="js_cmt_area" style="display:none">
            </div>
                    </div>

        
        <div id="js_pc_qr_code" class="qr_code_pc_outer" style="display:none;">
            <div class="qr_code_pc_inner">
                <div class="qr_code_pc">
                    <img id="js_pc_qr_code_img" class="qr_code_pc_img">
                    <p>微信扫一扫<br>关注该公众号</p>
                </div>
            </div>
        </div>
    </div><div id="img-content">
                
                <h2 class="rich_media_title" id="activity-name">
                    ICLR 2018 | 阿里巴巴论文：基于交替方向法的循环神经网络多比特量化                                    </h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <em id="post-date" class="rich_media_meta rich_media_meta_text">2018-04-28</em>

                                        <a class="rich_media_meta rich_media_meta_link rich_media_meta_nickname" href="##" id="post-user">机器之心</a>
                    <span class="rich_media_meta rich_media_meta_text rich_media_meta_nickname">机器之心</span>


                    <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                        <div class="profile_inner">
                            <strong class="profile_nickname">机器之心</strong>
                            <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                            <p class="profile_meta">
                            <label class="profile_meta_label">微信号</label>
                            <span class="profile_meta_value">almosthuman2014</span>
                            </p>

                            <p class="profile_meta">
                            <label class="profile_meta_label">功能介绍</label>
                            <span class="profile_meta_value">专业的人工智能媒体和产业服务平台</span>
                            </p>
                            
                        </div>
                        <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                            <i class="profile_arrow arrow_out"></i>
                            <i class="profile_arrow arrow_in"></i>
                        </span>
                    </div>
                </div>
                                
                
                
                
                                                
                                                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <section style="max-width: 100%;line-height: 28.4444px;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-id="85660" data-custom="rgb(117, 117, 118)" data-color="rgb(117, 117, 118)" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-id="85660" data-custom="rgb(117, 117, 118)" data-color="rgb(117, 117, 118)" style="max-width: 100%;border-width: 0px;border-style: initial;border-color: currentcolor;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="margin-top: 2em;padding-top: 0.5em;padding-bottom: 0.5em;max-width: 100%;border-style: solid none;text-decoration: inherit;border-top-color: rgb(204, 204, 204);border-bottom-color: rgb(204, 204, 204);border-top-width: 1px;border-bottom-width: 1px;box-sizing: border-box !important;word-wrap: break-word !important;"><p style="margin-top: -1.2em;max-width: 100%;min-height: 1em;font-family: inherit;text-align: center;line-height: 1.75em;border-width: initial;border-style: initial;border-color: currentcolor;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(255, 255, 255);background-color: rgb(117, 117, 118);box-sizing: border-box !important;word-wrap: break-word !important;">机器之心发布</span></p><section data-style="white-space: normal; text-align: left;font-size: 14px;line-height: 1.5em; color: rgb(12, 12, 12);" style="padding: 16px 16px 10px;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">作者：徐晨等</strong></span></p></section></section></section></section></section></section></section></section></section></section></section></section><p><br></p><blockquote><p style="text-align: justify;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">ICLR 2018 将于 4 月 30 日在加拿大温哥华开幕，之前机器之心对此届大会的<a href="http://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650740794&amp;idx=1&amp;sn=c10ed671fca9bf4a09ee3352f407f79f&amp;chksm=871adc44b06d5552171d3215d3670482dc87a5c73ecb076a2e2c58e873e8949519ed770f2ead&amp;scene=21#wechat_redirect" target="_blank">三篇获奖论文</a>分别进行了介绍。在这篇文章中，我们介绍了阿里巴巴的一篇 ICLR 2018论文。</span></p></blockquote><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.18388625592417063" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhj3PBsmk5fUibw7H7njt6bmnbZ0cesWy3Bgux04ibicYzRMYb60dqFCUdQ/640?wx_fmt=png" data-type="png" data-w="1055" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(123, 12, 0);box-sizing: border-box !important;word-wrap: break-word !important;">论文原文地址：https://arxiv.org/abs/1802.00150 </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong>引言</strong></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">循环神经网络 (RNN) 在语言模型、机器翻译、语音识别、生成图像标题等很多应用上都取得了非常好的效果。然而，这些模型常常是建立在高维的嵌入 (embedding) 或者多层的循环单元中，包含了大量的参数，使得无法在资源有限的移动端部署。此外，RNN 的计算依赖于与当前的隐状态，只能被顺序执行，因此在执行推断时会造成比较大的延时。在拥有大规模并发请求的服务器端，比如语音识别或者机器翻译等应用，为了满足线上苛刻的响应时间要求，需要部署大量的机器。在这项工作中，我们考虑通过量化参数到二值 {-1,+1} 上来解决上述问题。考虑将模型的权重量化成 1 比特，相对于全精度，直接带来 32 倍的内存压缩。而对 1 比特参数的矩阵乘法，如果不考虑具体实现，相对于全精度乘法，理论上也会带来 32 倍的加速。然而，如果把模型的权重和激活都量化成 1 比特，在循环神经网络中，会带来很大的精度损失。因此，很自然的折中方案就是采用多比特量化（如图 1 所示）。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.5183845690174804" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhTLoXaNlRf31F9iaXBV9qgQjquiaRyXy6lEK5iaVceBh0PvRHEM3wLP3LA/640?wx_fmt=png" data-type="png" data-w="1659" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 1 多比特量化乘法示意</span></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">现有的多比特量化方法</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">1) 均匀 (Uniform) 量化采用下列的 k 比特量化方案:</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.19793103448275862" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhWhJ0pGgoOYCzC2k8Ja6L3sWVVwtcL62mhevibic51yhWusRTDNxEZZAw/640?wx_fmt=png" data-type="png" data-w="1450" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 256px;visibility: visible !important;height: 51px;" width="403px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">这样基于规则的量化方法非常容易实现, 但是对于非均匀数据的量化效果很差，而非均匀分布数据在深度神经网络却更为常见。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">2) 均衡 (Balanced) 量化通过数据预处理来解决均匀量化的弊端。该方法首先产生 2^k 个间隔，每个间隔大致包含等量的数据。然后该方法将每个间隔的中心线性映射到对应的量化编码中。尽管看起来更有效，但是该方法还是基于规则，而这种规则并不能保证对所有的数据分布都起效果。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">3) 贪婪法 (Greedy) 近似通过去解下面的带离散约束的分解问题来实现量化: </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.156957928802589" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhOh0Kzhd7KgXsoje9Rst6ic4kIMr4sx79qthSHerSQJiaxFeF8R32ZicDg/640?wx_fmt=png" data-type="png" data-w="1236" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 412px !important;visibility: visible !important;" width="412px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">对于 k=1, 上述问题存在闭式解。贪婪近似通过逐步量化余量 (residue) 并将其推广到 k 比特 (k&gt;1) 的情形：</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.15121136173767752" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhTicsGwFNol0rQmUaAIFAxgVicFbulaehQXYK5zjrH4rSYxt3pmkxXqyw/640?wx_fmt=png" data-type="png" data-w="1197" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 450px !important;visibility: visible !important;" width="450px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">每个子步都有最优解</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.15288788221970556" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhichdmYg44LxsmGL4EqiaGKQNnlCM5E06HCjq3ut5mO4rdZGkrcVrkBDA/640?wx_fmt=png" data-type="png" data-w="883" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 436px !important;visibility: visible !important;" width="436px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">贪婪法非常高效，尽管不能得到一个高精度的解，但是将量化问题建模成一个优化问题的形式还是非常具有启发性的。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">4) 改进版 (Refined) 贪婪近似进一步拓展贪婪法以降低量化误差。在上述第 j 步最小化问题中，该方法加上额外一步最小二乘来修正系数</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.0808720112517581" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhhQN7mYHeCdK1wiaBHrudybQus9tBicTfxCib3SAyI55JC0gw4K1Ooz89Q/640?wx_fmt=png" data-type="png" data-w="1422" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 457px !important;visibility: visible !important;" width="457px"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">在原文量化卷积神经网络权重的实验中，修正版贪婪法被证实比原始的贪婪法更有效。然而，正如我们下面要讲的，修正版的贪婪法在量化精度方面仍然不能令人满意。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">除了上述通用的多比特量化方案以外，还有文章还提出了三值量化，与 1 比特的二值量化相比，三值量化多了可行状态 0。三值量化通过解如下问题</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p><img class="" data-copyright="0" data-ratio="0.132013201320132" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA6lbLg8RLCb0gvmOPTebab39NgZ39SgX4Axn979CQ3jsOXJbCtqQYtQ/640?wx_fmt=png" data-type="png" data-w="606" style=""></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">来实现编码。然而，原文并未提出一种高效的解法，相反，作者通过经验，将小于</span><img class="" data-copyright="0" data-ratio="0.4189189189189189" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAZ7xBdibQJ66Lia6IoAA6a0j6g7SyFs9jXxtHcr6FfBwbg9Vt9ZkYUx8w/640?wx_fmt=png" data-type="png" data-w="148" style="width: 55px;height: 24px;"><span style="font-size: 15px;">的元素设成 0, 并对剩余元素采用如上所述的二值量化。三值量化其实本质上等价于此处的 2 比特量化，唯一不同的地方在于多了一个</span><img class="" data-copyright="0" data-ratio="0.3191489361702128" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAF41nfNXjXUC0OqnlC8mWmcKKGCNicLWKsMPZ6LS1CnDXllqnsd4QQwA/640?wx_fmt=png" data-type="png" data-w="94" style="width: 71px;height: 22px;"><span style="font-size: 15px;">的约束。当二值编码被固定以后，最优系数</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 20px;height: 20px;"><span style="font-size: 15px;">(或者</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">) 类似地可以通过最小二乘得到。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">基于交替方向法的多比特量化方案</span></strong></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">接下来将介绍本文提出的量化方法，同样我们也是通过解上述的优化问题来实现量化。为了简单起见，首先考虑 k = 2 的情形，如果</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">和</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">已知且满足</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">≥</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA7gokIXxU5qxS34Tu2YVhDMf19wax3KNzWgm3JAJnBiaNgYKhWzNNZrw/640?wx_fmt=png" data-type="png" data-w="28" style="width: 20px;height: 20px;"><span style="font-size: 15px;">，那么可行编码即被限制为以下四种情况</span><img class="" data-copyright="0" data-ratio="0.08856088560885608" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAogNvGtzRQjWjYGj3lZ850zvmWJwRAM00xvef1oUIelRHkBeuyaIYLg/640?wx_fmt=png" data-type="png" data-w="542" style="width: 261px;height: 24px;"><span style="font-size: 15px;">。对于 w 中的任意元素 w, 其编码都是通过最小二乘来确定。我们相应地可以将整个坐标轴分成四份，落在某个区间上的 w 分别对应其中一个量化编码。由最近邻条件可得区间的边界即为量化编码的中间值，也就是</span><img class="" data-copyright="0" data-ratio="0.53125" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA0Eibic0oaKGM2lUpux6InyKSoyS92dgOmnkuWiaB0arWk2rMcoIPeR3wg/640?wx_fmt=png" data-type="png" data-w="64" style="width: 24px;height: 20px;"><span style="font-size: 15px;">、0 以及</span><img class="" data-copyright="0" data-ratio="0.7894736842105263" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAVlgCwb1mmp67WezWmSFjVULj8bVfGv8aqobNtjAboHA0bib6bY72mxA/640?wx_fmt=png" data-type="png" data-w="38" style="width: 21px;height: 20px;"><span style="font-size: 15px;">。下图给出一个示意。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.18524332810047095" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhVTThIP2VY0Ww729RFgWBEMH0miazmscd2ulibyF08zHPZibQlK3bxfBQg/640?wx_fmt=png" data-type="png" data-w="1274" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 2 当实系数固定时，最优 2 比特编码示意</span></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">对于任意 k 比特量化问题，假设</span><img class="" data-copyright="0" data-ratio="0.5294117647058824" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAzEpH9xvBCg2eb0JZRC6dmYPdzicatMVWmbQvA02iauflUQEl3I9ahAWQ/640?wx_fmt=png" data-type="png" data-w="102" style="width: 48px;height: 25px;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">已知，我们可以类似地将整个坐标轴分成 </span></p><p><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 22px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">个区间，其边界同样通过相邻可行编码的中点来划分。如果直接将待量化的实数 w 与所有区间边界进行比较以确定对应编码，总共需要</span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 22px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">次，当 k 比较大，这种操作非常不经济。事实上，我们可以利用可行编码全集 v 中元素单调递增的性质，将 v 均匀分成两个子集:</span><img class="" data-copyright="0" data-ratio="0.3617021276595745" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAowcTkCuicqDX0BzQBNTsVSEcFWXrMBJ8PYiaMEZCOTHJxG8qjSBvgtRw/640?wx_fmt=png" data-type="png" data-w="94" style="width: 55px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">和</span><img class="" data-copyright="0" data-ratio="0.29508196721311475" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAvic1DNjUNLW8vI0d0L1ZhibcMAiaRwOok4n4icRNHh41eunTYIaADSKC3g/640?wx_fmt=png" data-type="png" data-w="122" style="width: 73px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其中 m 表示 v 的长度。如果</span><img class="" data-copyright="0" data-ratio="0.18471337579617833" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA41XbzY4bhAcXNyHpZertA9hpXVhEaUWhAkydkMYINqmIdKZGRh09TQ/640?wx_fmt=png" data-type="png" data-w="314" style="width: 121px;height: 22px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其可行编码即被限制在子集</span><img class="" data-copyright="0" data-ratio="0.3181818181818182" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPADgib6gRicaRLGicibhKlTgk3MfwloXCoiaLlXYaw6YU9cbtnycUZ8XVnvwA/640?wx_fmt=png" data-type="png" data-w="88" style="width: 44px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> 上。相反如果</span><img class="" data-copyright="0" data-ratio="0.1360544217687075" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPA2cRB8ZWV6y1l9dJJnsw3oJgBdgVicODQk65SsvDScZVD7b2dPGY4Ncg/640?wx_fmt=png" data-type="png" data-w="294" style="width: 175px;height: 24px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 其可行编码即被限制在子集</span><img class="" data-copyright="0" data-ratio="0.2631578947368421" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAaLK4WCFfxXzkk5Obu5bHeibE74aU90JZunhdkb5icZJXRmiakwwnKx6Ng/640?wx_fmt=png" data-type="png" data-w="114" style="width: 61px;height: 20px;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">上。通过递归地将可行编码子集均匀划分，我们只需要 k 次比较就可以得到最优编码。该过程可以看成是一个二叉搜索树，我们在下图中给出了一个 k=2 时的简单示意。一旦得到量化编码，即可将其一一映射到对应的二值向量</span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" width="37px" style="text-align: justify;box-sizing: border-box !important;word-wrap: break-word !important;width: 37px !important;visibility: visible !important;"><span style="text-align: justify;max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"> </span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.40606060606060607" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhP7DonusAxXSaxtMJPiaLMribNrnrNibicSVnUaXbunHhcBYwo0heovnoXw/640?wx_fmt=png" data-type="png" data-w="990" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-style: italic;box-sizing: border-box !important;word-wrap: break-word !important;">Figure 3 二叉搜索树将</span></span><img class="" data-copyright="0" data-ratio="1" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8H2Xghj59KZqesWzoictPPAA4nrA9z8MRWQ0P97KR9QN4LtKygntb8LLUHrLaU2phfBvP1nujfSFg/640?wx_fmt=png" data-type="png" data-w="44" style="width: 21px;height: 21px;"><span style="font-style: italic;color: rgb(136, 136, 136);font-size: 12px;">次比较降为 k 次比较</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">基于上面的发现，我们重新来考虑上一节中介绍的改进版贪婪近似。经过最小二乘修正实系数之后，二值编码 </span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 33px !important;visibility: visible !important;" width="33px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">不再是最优，而该方法却仍将其固定。为了进一步改进，交替最小化实系数和二值编码变成了一个很自然的选择。一旦用二叉搜索树得到最优的</span><img class="" data-copyright="0" data-ratio="0.5833333333333334" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhQvPbYFp6PthCBX4gzCEATcalSCTwX6HcYgvDY4lMJ2hK1icGbRrT1jQ/640?wx_fmt=png" data-type="png" data-w="72" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 36px !important;visibility: visible !important;" width="36px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">, 可以将其固定，并采用最小二乘更新</span><img class="" data-copyright="0" data-ratio="0.5223880597014925" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhYGSJcwHSzyJHhYrviccvMhrmOrckZoiapPbW2AvLpu9PZchwgmJvKHfQ/640?wx_fmt=png" data-type="png" data-w="67" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 40px !important;visibility: visible !important;" width="40px"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">。在真实实验中，以贪婪法得到的解作初始化，我们发现只需要两步交替迭代就足以得到高精度的解。</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">实验结果</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.3125393824826717" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhVodjLefoDfe5Jf65swjL0xkIOn5WlqaN7zNJObibtE3YxoE3dnTMWjA/640?wx_fmt=png" data-type="png" data-w="1587" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 1 不同方法近似 PTB 数据集上训练好的 LSTM 的权重。其中 FP 表示全精度</span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.28281068524970965" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhwLuqibkicdLXNY94ktWicjNaGia6UeaQ8ibNWzryUNqgYiaOUFEq5HeD2bHQ/640?wx_fmt=png" data-type="png" data-w="1722" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 2 不同方法近似 PTB 数据集上训练好的 GRU 的权重</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="font-size: 15px;text-align: justify;">我们在语言模型上进行量化实验，分别测试了 LSTM 和 GRU 两种架构。因为</span>实验是去预测下一个单词，其效果采用单字复杂度来衡量 (perplexity per word, 简写成 PPW)。为了检验所有的算法量化精度，我们首先对训练好的全精度权重做近似 (没有量化激活或者重训练)，结果如表 1 和表 2 所示。注意到均匀量化和均衡量化是基于规则的，其目标并不在于最小化误差，因此这两种方法会得到差很多的结果。我们还在其他数据集上重复了上述实验，对于两种循环神经网络结构 LSTM 和 GRU，结果都与此处相似。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.23432343234323433" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhS6HOeg4ORSrXryibtQibte2FBtw4c1KRjJpX2wH1EJmTTyF04zAwDG5g/640?wx_fmt=png" data-type="png" data-w="1818" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 3 PTB 数据集上多比特量化 LSTM 和 GRU 的测试 PPW，其中均匀量化和均衡量化为现有论文中的结果，改进版贪婪法为我们自己实现的结果。</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.17312206572769953" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhqCnTjq6UQjd8XxicCAyacSWQJVUfHl7ictQ62TTrmBSuEZs3nAvE4IjQ/640?wx_fmt=png" data-type="png" data-w="1704" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 4 WikiText-2 数据集上多比特量化 LSTM 和 GRU 的测试 PPW。</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.17146212566059893" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUhAiapoQgQ69yWiczcpoUSXSgfRErDN4FP2iaN0l2ibzERalVUjbThRXnv1A/640?wx_fmt=png" data-type="png" data-w="1703" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 5 Text-8 数据集上多比特量化 LSTM 和 GRU 的测试 PPW</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">我们还进行了权重和激活同时量化的实验，结果如表 3、4 和 5 所示。从中可以看到，本文提出的交替方向法明显好过现有其他量化方法。即使与表现最好的改进版贪婪法相比，交替方向法实现类似的精度大概可以少用一个比特。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">我们还在 CPU 中实现了矩阵向量的二值乘法，其结果如表 6 所示。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><p style="max-width: 100%;min-height: 1em;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.297029702970297" data-s="300,640" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8oC6F0vlWgj4xb6DjI3yUh107Y2wJx1QmIvzMbKyeD1VhFepNPtbtSgZtfso29mUOmjxAh9ibewPg/640?wx_fmt=png" data-type="png" data-w="1616" style="box-sizing: border-box !important;word-wrap: break-word !important;width: auto !important;visibility: visible !important;"></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;">Table 6 CPU 中二值乘法与全精度乘法的时间比较</span></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="caret-color: rgb(136, 136, 136);color: rgb(136, 136, 136);font-size: 12.000000953674316px;font-style: italic;"><br></span></span></p><p style="max-width: 100%;min-height: 1em;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">小结</strong></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;text-align: justify;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">在这个工作中，我们主要考虑神经网络的多比特量化压缩加速问题。我们发现，如果编码的实系数固定，那么离散的二值编码 {-1,+1} 可以通过二叉搜索树高效的求解。基于这个发现，我们相应地提出交替方向法。我们将该方法用于量化语言模型中的 LSTM 和 GRU 结构，与全精度模型相比，通过 2 比特量化，我们可以减少约 16 倍的内存消耗，以及在 CPU 上实现约 6 倍的真实推断加速，而只产生少量的准确率损失。通过 3 比特量化，该方法在准确率上可以实现几乎没有损失甚至超过原始模型，并减少约 10.5 倍的内存消耗，以及在 CPU 上实现约 3 倍的真实推断加速。这些结果都远远优于现有量化方法的结果。 <img class="" data-ratio="0.3287671232876712" src="https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gW8Zfpicd40EribGuaFicDBCRH6IOu1Rnc4T3W3J1wE0j6kQ6GorRSgicib0fmNrj3yzlokup2jia9Z0YVeA/640?wx_fmt=png" data-type="png" data-w="73" style="font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;width: 48px !important;" width="48px"></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;text-align: justify;line-height: 25.6px;font-family: 微软雅黑;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(62, 62, 62);line-height: 25.6px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);box-sizing: border-box !important;word-wrap: break-word !important;">本文为机器之心发布，<strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">转载请联系本公众号获得授权</span></strong></span></strong>。</span></strong><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="margin-bottom: 5px;max-width: 100%;min-height: 1em;font-size: 18px;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(127, 127, 127);line-height: 25.6px;font-family: 微软雅黑;text-align: justify;box-sizing: border-box !important;word-wrap: break-word !important;">✄------------------------------------------------</span></p><p style="margin-bottom: 5px;max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(217, 33, 66);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">加入机器之心（全职记者/实习生）：hr@jiqizhixin.com</span></strong></p><p style="max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(217, 33, 66);line-height: 1.6;font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">投稿或寻求报道：editor@jiqizhixin.com</span></strong></p><p style="max-width: 100%;min-height: 1em;font-size: 18px;font-family: 微软雅黑;text-align: center;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 12px;color: rgb(217, 33, 66);line-height: 1.6;box-sizing: border-box !important;word-wrap: break-word !important;">广告&amp;商务合作：bd@jiqizhixin.com</span></strong></p><p><br></p>
                </div>
                <script nonce="751282532" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    (function(){
                        if (navigator.userAgent.indexOf("WindowsWechat") != -1){
                            var link = document.createElement('link');
                            var head = document.getElementsByTagName('head')[0];
                            link.rel = 'stylesheet';
                            link.type = 'text/css';
                            link.href = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg/page_mp_article_improve_winwx3d171e.css";
                            head.appendChild(link);
                        }
                    })();
                </script>
                
                
                                
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display:none;"></div>

                
                                <div class="reward_area tc" id="js_preview_reward" style="display:none;">
                    <p id="js_preview_reward_wording" class="tips_global reward_tips" style="display:none;"></p>
                    <p>
                        <a class="reward_access" id="js_preview_reward_link" href="##"><span class="icon-reward"></span>赞赏</a>

                    </p>
                </div>
                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x3534dd.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div><ul id="js_hotspot_area" class="article_extend_area"></ul><div class="rich_media_tool" id="js_toobar3">
                
                                
                                            <div id="js_read_area3" class="media_tool_meta tips_global meta_primary" style="display:none;">阅读 <span id="readNum3"></span></div>

                <span style="display:none;" class="media_tool_meta meta_primary tips_global meta_praise" id="like3">
                    <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum3"></span>
                </span>

                <a id="js_report_article3" style="display:none;" class="media_tool_meta tips_global meta_extra" href="##">投诉</a>

            </div><div class="rich_media_tool" id="js_sg_bar">
                
                                
                                
            </div>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
