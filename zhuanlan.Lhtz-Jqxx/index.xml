<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
<title>【量化投资与机器学习】微信公众号</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/</link>
<description>在量化投资的道路上，你不是一个人在战斗！ 主要介绍关于量化投资和机器学习的知识和应用。通过研报，论坛，博客，程序等途径全面的为大家带来知识食粮。版块语言分为：Python、Matlab、R，涉及领域有：量化投资、机器学习、深度学习、综合应用、干货分享等。</description>
<language>zh-cn</language>
<lastBuildDate>Thu, 05 Sep 2019 17:30:40 +0800</lastBuildDate>
<item>
<title>高盛花了1个亿！为减少股票交易的毫秒数</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80333424.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80333424&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-baffb07175a789e23fea4a8151c8d6a2_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;编辑：公众号海外部&lt;/p&gt;&lt;h2&gt;&lt;b&gt;背景&lt;/b&gt;&lt;/h2&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-70e3d56af1c9fdf30adbc0e0cf8a6a8f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;740&quot; data-rawheight=&quot;492&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;740&quot; data-original=&quot;https://pic4.zhimg.com/v2-70e3d56af1c9fdf30adbc0e0cf8a6a8f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-70e3d56af1c9fdf30adbc0e0cf8a6a8f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;740&quot; data-rawheight=&quot;492&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;740&quot; data-original=&quot;https://pic4.zhimg.com/v2-70e3d56af1c9fdf30adbc0e0cf8a6a8f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-70e3d56af1c9fdf30adbc0e0cf8a6a8f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;2019年7月8日，一名携带箱子的男子离开德意志银行驻伦敦办事处&lt;/p&gt;&lt;p&gt;德意志银行7月宣布退出股票交易，震惊了世界。但它不会是最后一家放弃股市的投资银行。&lt;/p&gt;&lt;p&gt;当被解雇的员工拿着解雇证明艰难地走出办公室时，媒体正确地聚焦在这家德国最大银行多年来肆无忌惮的野心和管理上的不善。但这掩盖了一个有关68万亿美元股市的事实：除了少数几家美国大型公司外，几乎所有人都认为股票交易是赔钱的事情。&lt;/p&gt;&lt;p&gt;在过去10年里&lt;b&gt;，数万亿美元从指数基金等主动策略转向被动策略，而量化基金和高频交易在日常交易中占据了更多的交易量&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;这损害了大多数老派对冲基金和资产管理公司的利益，并催生了复杂的电子交易平台，佣金仅占人工撮合交易的一小部分。&lt;/p&gt;&lt;p&gt;与此同时，各国央行在金融危机后的大部分时间里都在降息或将利率维持在接近于零的水平，有效地吸收了市场的波动性，使大客户更有可能继续观望。去年，MiFID II的欧洲监管机构对股票交易和研究进行了拆分，加大了这两方面的定价压力。&lt;/p&gt;&lt;p&gt;给大家科普一下&lt;b&gt;MiFID II&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;MiFID（Markets in Financial Instruments Directive）是指“欧盟金融工具市场指导”，是欧盟地区规范金融投资公司行为的法律框架文件，旨在促进欧盟形成金融工具批发以及零售交易的统一市场，同时在多个方面改善对客户的保护，其中包括增强市场透明度、出台更符合惯例的客户分类规则等。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-0139e2e1fcc879065473de44589b8087_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;995&quot; data-rawheight=&quot;603&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;995&quot; data-original=&quot;https://pic4.zhimg.com/v2-0139e2e1fcc879065473de44589b8087_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-0139e2e1fcc879065473de44589b8087_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;995&quot; data-rawheight=&quot;603&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;995&quot; data-original=&quot;https://pic4.zhimg.com/v2-0139e2e1fcc879065473de44589b8087_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-0139e2e1fcc879065473de44589b8087_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;最新MiFID II和MiFIR于2018年1月3日生效。MiFID法律框架最初于2004年颁布，并于2007年11月正式生效。但在金融危机过后，欧盟委员会又于2011年10月决定对MiFID进行了一次修订，并于2014年6月12日公布了修订版，被称为MiFID II，并公布了MiFIR“欧盟金融工具市场法规”(Markets in Financial Instruments Regulation )，该法规旨在阐明MiFID II框架下的具体法律法规。&lt;/p&gt;&lt;p&gt;MiFID II对其第一版改进的内容主要涉及投资服务提供方式、指令豁免范围、交易场所的组织规定、数据服务提供商的授权和义务、合格监管部门的制裁权利、第三国公司设立分公司等方面。其中，最为显著的修改有三处：集中化的交易系统、增加市场透明度，和订单最优执行。&lt;/p&gt;&lt;p&gt;在集中化的交易系统方面，重新定义一种新型交易场所—有组织交易场所（Organized trading facility，OTF），并将其纳入与场内交易场所相同的监管范畴。如将风险较高的衍生品集中化交易（引入场内交易），比如二元期权等。&lt;/p&gt;&lt;p&gt;在市场透明度方面，新法规对经纪商的报告要更多且细。MiFIR的交易报告是T+1报告，逐条列记投资者交易相关信息，包括买、卖方信息、价格质量、执行速度、结算规模、执行地点、到期日期及标的货币以及提交数据的数目及属性性质。此外，经纪商也必须公开报价。&lt;/p&gt;&lt;p&gt;在订单最优执行方面，投资公司需要采取所有合理的步骤，以便为客户指令获得最好的执行结果，这里面涉及到价格、成本、速度、指令执行的可能性以及指令的处置结果。同时，明确系统化内部撮合商在交易前以及交易后的责任，交易后的责任包括，公司必须达到透明度的要求，要有与监管市场同等的透明度。&lt;/p&gt;&lt;p&gt;&lt;b&gt;回到主题：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;一家大型投资银行的资深股票高管表示：“客户正遭受损失，银行太多了。”&lt;/p&gt;&lt;p&gt;根据Coalition数据显示，在股票收入排名中，低于摩根士丹利、高盛和摩根大通的是UBS、Bank of America和花旗集团。巴克莱、Credit Suisse、法国兴业银行、HSBC和法国巴黎银行的股价在进一步下跌。据报道，&lt;b&gt;德意志银行的股票部门去年亏损7.5亿美元&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;据一位业内人士说，排名前五名之外的银行通常没有足够的收入来实现至少10%的股本回报率，这是投资者预期的最低门槛。&lt;/p&gt;&lt;p&gt;一项创新使竞争变得更加激烈：&lt;b&gt;对冲基金和资产管理公司越来越多地使用所谓Aalgo Wheel（算法轮）自动将交易接到经纪商&lt;/b&gt;，并获得最佳表现。这是也是因为MiFID II的原因（前面说到的合规问题）。&lt;/p&gt;&lt;p&gt;要想留在游戏中，&lt;b&gt;银行必须参与一场昂贵的技术军备竞赛，在从smart routers和算法到高速连接到交易所等基础设施上投入数百万美元&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;接下来，规模较小的银行将更难管理。最大的投资银行已经拥有最多的交易数据。内部人士表示，&lt;b&gt;随着他们越来越善于将人工智能和其他技术应用于这些数据集，他们将越来越具有优势&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;&lt;b&gt;股票交易员和销售人员已经被挤出这个行业，或者被更年轻、更廉价、技术含量更高的员工取代&lt;/b&gt;。Coalition表示，至少自2012年以来，全球最大投资银行的就业水平每年都在下降。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;精要&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;根据公众号最新了解到的消息：高盛首席技术官Mike Blum称，高盛最近批准了一项&lt;b&gt;为期三年&lt;/b&gt;的计划，&lt;b&gt;斥资逾 1亿美元 对其股票交易平台进行全面改革&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;从技术角度看，文艺复兴和Two Sigma这样的巨头量化对冲基金是最苛刻的客户之一，而竞争对手摩根士丹利和J.P. Morgan也一直在竞争为量化基金提供服务。&lt;/p&gt;&lt;p&gt;Blum说：“随着我们在全球范围内推广这项技术，他们的速度肯定会有很大的提高。”&lt;/p&gt;&lt;h2&gt;&lt;b&gt;正文&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;高盛正将目标对准全球最大的量化对冲基金。&lt;/p&gt;&lt;p&gt;该项目的名字为&lt;b&gt;Atlas&lt;/b&gt;，旨在加速高盛自2014年以来在华尔街股票技术军备竞赛中落后的转变。&lt;/p&gt;&lt;p&gt;Blum说：“有了这项投资，让我们可以尝试去解决量化对冲基金领域的问题，为我们的客户创造无缝的体验，并尽可能地提高他们工作的效率”。Blum在电子交易领域工作了25年，于2017年加入高盛。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-28c9e07bf457690b28385c0a2f862d32_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;788&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;788&quot; data-original=&quot;https://pic3.zhimg.com/v2-28c9e07bf457690b28385c0a2f862d32_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-28c9e07bf457690b28385c0a2f862d32_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;788&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;788&quot; data-original=&quot;https://pic3.zhimg.com/v2-28c9e07bf457690b28385c0a2f862d32_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-28c9e07bf457690b28385c0a2f862d32_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;随着高盛、摩根士丹利和J.P. Morgan等公司在不断萎缩的市场中赢得越来越大的份额，股票交易变得越来越残酷。这&lt;b&gt;三家银行今年迄今的股票交易收入为114亿美元，比2018年低14%&lt;/b&gt;。随着全球交易量越来越多地转向电子交易，&lt;b&gt;这三家公司都在投资最新的电子交易技术&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;通过Atlas，高盛瞄准了十多只量化基金，这些基金代表着一系列的交易风格，理论上如果它们能满足这个群体，就能满足任何类型的对冲基金或资产管理公司客户。&lt;/p&gt;&lt;p&gt;Blum表示，该项目此该技术引入其核心交易平台，旨在提高交易速度和可靠性，并将其扩展到全球32个市场，包括清算和结算交易、股票分配、贷款股票和交易报告等其他功能。&lt;/p&gt;&lt;p&gt;Blum说：“当我们了解到量化客户群体以及他们的需求时，我们决定采用这项技术，基本上把它变成一个框架，可以用来解决多种问题。”&lt;/p&gt;&lt;p&gt;Blum的整个职业生涯都在致力于改进他的电子交易方式。他说，&lt;b&gt;他和其他电子交易先驱所采用的设计理念是：使用所谓的微服务（microservices）将复杂的问题分解成易于解决的问题&lt;/b&gt;。有了这一点，&lt;b&gt;再加上被称为Event Sourcing的开发策略，高盛的系统变得更快速、更可靠和可定制。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;1微秒等于百万分之一秒（10的负6次方秒）&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Blum说，其中一个目标是提高盛在交易订单上的表现，对于持续一微秒到大约30秒的交易订单其存续期较短，过去高盛可能一直难以处理这些订单。他说，在某些情况下，耗时数百毫秒的交易速度将超过100微秒。&lt;/p&gt;&lt;p&gt;Blum表示，一些量化分析师可能会同时发送数百或数千笔交易，Atlas能够压缩高盛消化这些订单的时间。&lt;/p&gt;&lt;p&gt;Blum还说：“随着我们在全球范围内推广这项技术，机构的速度肯定会有很大的提高”。“机构应该看到执行质量的提高，这不仅仅是因为速度，而是&lt;b&gt;因为我们正在彻底重写我们的算法&lt;/b&gt;，我们招募了更多的研究员和更多的量化分析师来改进我们的算法。”&lt;/p&gt;&lt;p&gt;国内的量化机构似乎这几年也在做着类似的事情，高频交易、机器学习应用等。加油！任重而道远！&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80333424</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>大爱！编程语言创意海报，每一幅都好喜欢！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80332617.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80332617&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cf02b8ccbfbc7bf0776586e797610cc5_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;特别感谢：ScudsCorp, wycats, S. Sever&lt;/p&gt;&lt;p&gt;今天，编辑部为大家分享来自leftoversalad的编程漫画系列。十分有创意，哈哈，可以拿来当壁纸了！&lt;/p&gt;&lt;p&gt;&lt;b&gt;一定看到底哦！&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b7e4814a5e73ff0b566f5a4751b39ed5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;562&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-b7e4814a5e73ff0b566f5a4751b39ed5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b7e4814a5e73ff0b566f5a4751b39ed5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;562&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-b7e4814a5e73ff0b566f5a4751b39ed5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-b7e4814a5e73ff0b566f5a4751b39ed5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a3b91530eeb66e0db0d707a64a11569b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;587&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic4.zhimg.com/v2-a3b91530eeb66e0db0d707a64a11569b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a3b91530eeb66e0db0d707a64a11569b_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;587&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic4.zhimg.com/v2-a3b91530eeb66e0db0d707a64a11569b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a3b91530eeb66e0db0d707a64a11569b_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-eec2033c2c04e39e812ecdad59bcfce2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;677&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic3.zhimg.com/v2-eec2033c2c04e39e812ecdad59bcfce2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-eec2033c2c04e39e812ecdad59bcfce2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;677&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic3.zhimg.com/v2-eec2033c2c04e39e812ecdad59bcfce2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-eec2033c2c04e39e812ecdad59bcfce2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9a057cd3be71e8ac3b3b0ef332e3f469_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;594&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-9a057cd3be71e8ac3b3b0ef332e3f469_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9a057cd3be71e8ac3b3b0ef332e3f469_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;594&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-9a057cd3be71e8ac3b3b0ef332e3f469_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-9a057cd3be71e8ac3b3b0ef332e3f469_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a309e78438604ac889517c275c1b2ec9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;471&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-a309e78438604ac889517c275c1b2ec9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a309e78438604ac889517c275c1b2ec9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;471&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic2.zhimg.com/v2-a309e78438604ac889517c275c1b2ec9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a309e78438604ac889517c275c1b2ec9_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ad6a2203faef3265b91d2a80d4ac86a6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;654&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic3.zhimg.com/v2-ad6a2203faef3265b91d2a80d4ac86a6_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ad6a2203faef3265b91d2a80d4ac86a6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;654&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic3.zhimg.com/v2-ad6a2203faef3265b91d2a80d4ac86a6_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-ad6a2203faef3265b91d2a80d4ac86a6_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-db6e348e1cb0b6e0308b308f9080a064_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;531&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-db6e348e1cb0b6e0308b308f9080a064_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-db6e348e1cb0b6e0308b308f9080a064_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;531&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-db6e348e1cb0b6e0308b308f9080a064_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-db6e348e1cb0b6e0308b308f9080a064_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-717290ca36f98deb5c67504d0ccb5cab_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;1222&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic4.zhimg.com/v2-717290ca36f98deb5c67504d0ccb5cab_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-717290ca36f98deb5c67504d0ccb5cab_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;1222&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic4.zhimg.com/v2-717290ca36f98deb5c67504d0ccb5cab_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-717290ca36f98deb5c67504d0ccb5cab_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a669e910d32850dc3f55de4d1e8c6b3c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-a669e910d32850dc3f55de4d1e8c6b3c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a669e910d32850dc3f55de4d1e8c6b3c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;491&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-a669e910d32850dc3f55de4d1e8c6b3c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-a669e910d32850dc3f55de4d1e8c6b3c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-61b953697537db15e65a288d83f6afa8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;576&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-61b953697537db15e65a288d83f6afa8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-61b953697537db15e65a288d83f6afa8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;500&quot; data-rawheight=&quot;576&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;500&quot; data-original=&quot;https://pic1.zhimg.com/v2-61b953697537db15e65a288d83f6afa8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-61b953697537db15e65a288d83f6afa8_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-01c11aaf61874afbb5eaeaf8339f481a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;781&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-01c11aaf61874afbb5eaeaf8339f481a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-01c11aaf61874afbb5eaeaf8339f481a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;781&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-01c11aaf61874afbb5eaeaf8339f481a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-01c11aaf61874afbb5eaeaf8339f481a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a272c5f405a5772fdc4bec5bcc012817_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;911&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-a272c5f405a5772fdc4bec5bcc012817_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a272c5f405a5772fdc4bec5bcc012817_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;911&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-a272c5f405a5772fdc4bec5bcc012817_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a272c5f405a5772fdc4bec5bcc012817_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1f644efda1d10e8c027eda3e4ee4b452_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-1f644efda1d10e8c027eda3e4ee4b452_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1f644efda1d10e8c027eda3e4ee4b452_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;1192&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-1f644efda1d10e8c027eda3e4ee4b452_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-1f644efda1d10e8c027eda3e4ee4b452_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6ebf0246f25dadc0b5d6c1689670f3ed_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;1189&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic2.zhimg.com/v2-6ebf0246f25dadc0b5d6c1689670f3ed_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6ebf0246f25dadc0b5d6c1689670f3ed_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;1189&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic2.zhimg.com/v2-6ebf0246f25dadc0b5d6c1689670f3ed_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-6ebf0246f25dadc0b5d6c1689670f3ed_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d1c588ed9376e665636c36a840f765cd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;977&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic2.zhimg.com/v2-d1c588ed9376e665636c36a840f765cd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d1c588ed9376e665636c36a840f765cd_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;977&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic2.zhimg.com/v2-d1c588ed9376e665636c36a840f765cd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-d1c588ed9376e665636c36a840f765cd_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br/&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b76b874a43cad87453f7067c3edc6ca3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;900&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-b76b874a43cad87453f7067c3edc6ca3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-b76b874a43cad87453f7067c3edc6ca3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;900&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-b76b874a43cad87453f7067c3edc6ca3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-b76b874a43cad87453f7067c3edc6ca3_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-e01b0608b14ee596689a9a773224d9d7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;809&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-e01b0608b14ee596689a9a773224d9d7_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-e01b0608b14ee596689a9a773224d9d7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;809&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic4.zhimg.com/v2-e01b0608b14ee596689a9a773224d9d7_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-e01b0608b14ee596689a9a773224d9d7_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6b8e6698313fff0abd97e53ea1d00150_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;811&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic1.zhimg.com/v2-6b8e6698313fff0abd97e53ea1d00150_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-6b8e6698313fff0abd97e53ea1d00150_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;811&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic1.zhimg.com/v2-6b8e6698313fff0abd97e53ea1d00150_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-6b8e6698313fff0abd97e53ea1d00150_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-05802925bdb78c7c5c92a0e122b8d91e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;857&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-05802925bdb78c7c5c92a0e122b8d91e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-05802925bdb78c7c5c92a0e122b8d91e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;857&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-05802925bdb78c7c5c92a0e122b8d91e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-05802925bdb78c7c5c92a0e122b8d91e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-87f9e1a6c9fca5c350c63397340113a2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;690&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-87f9e1a6c9fca5c350c63397340113a2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-87f9e1a6c9fca5c350c63397340113a2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;690&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-87f9e1a6c9fca5c350c63397340113a2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-87f9e1a6c9fca5c350c63397340113a2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-85be591df72858083dd5df5936f43740_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;922&quot; data-rawheight=&quot;964&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;922&quot; data-original=&quot;https://pic1.zhimg.com/v2-85be591df72858083dd5df5936f43740_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-85be591df72858083dd5df5936f43740_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;922&quot; data-rawheight=&quot;964&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;922&quot; data-original=&quot;https://pic1.zhimg.com/v2-85be591df72858083dd5df5936f43740_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-85be591df72858083dd5df5936f43740_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;大家可以点击下面的链接购买哦：&lt;/p&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.etsy.com/ca/listing/499789429/programming-languages-personified-poster&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;etsy.com/ca/listing/499&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;789429/programming-languages-personified-poster&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80332617</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>仓位管理：超越凯利公式，梦回华尔街！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80331226.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80331226&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-619dada2fb882c3f8822830be8ec2b6c_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;来自：quantfiction&lt;/p&gt;&lt;p&gt;编译：1+1=6&lt;/p&gt;&lt;h2&gt;&lt;b&gt;正文&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;爱因斯坦曾说过：“复利是世界第八大奇迹”。&lt;/p&gt;&lt;p&gt;&lt;b&gt;世界上最强大的力量，不是原子弹，而是复利+时间&lt;/b&gt;&lt;/p&gt;&lt;p&gt;复利投资的关键除了本金与年化收益率，便是&lt;b&gt;时间&lt;/b&gt;的神奇“魔力”。&lt;/p&gt;&lt;p&gt;我们来看看复利计算公式：&lt;/p&gt;&lt;p&gt;&lt;b&gt;FV=PV*(1+i)^n &lt;/b&gt;&lt;/p&gt;&lt;p&gt;其中&lt;/p&gt;&lt;ul&gt;&lt;li&gt;FV：Final Value终值&lt;/li&gt;&lt;li&gt;PV：Present Value现值&lt;/li&gt;&lt;li&gt;i：收益率&lt;/li&gt;&lt;li&gt;n：投资期数&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;举个简单的例子，如果你有1万元资金，投资时间为5年，年化收益率为10%。五年后，你一共能拿回多少呢？按照上面的公式，结果就是：&lt;/p&gt;&lt;p&gt;&lt;b&gt;FV=10000*(1+10%)^5=16105.1元&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这是交易者需要理解的最重要的一个概念。&lt;/p&gt;&lt;p&gt;为了在金融市场上获得真正的财富，人们必须随着账户的增长扩大头寸规模。那么，我们应该在每个交易机会中承担多少比例的资本风险？今天的推文带你揭开这个答案。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;案例1：抛硬币&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;让我们从一个简单的例子开始。假设在一个赌场，你和韩梅梅玩抛硬币的游戏，并根据结果下赌注。如果硬币是正面，你下注多少，韩梅梅就double你的注数；如果硬币是反面，你将输掉了整个赌注。那么，问题是，&lt;b&gt;你应该拿自己的多少本金来玩这个游戏&lt;/b&gt;？直观地说，它应该低于100％。如果第一次抛硬币反面朝上，你就输的光溜溜了！&lt;/p&gt;&lt;p&gt;在回答这个问题之前，我们将讨论&lt;b&gt;期望&lt;/b&gt;的概念，其表示为所有可能结果的平均值：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-adb7e7a0082bd2985538be52116b1b81_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;226&quot; data-rawheight=&quot;91&quot; class=&quot;content_image&quot; width=&quot;226&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-adb7e7a0082bd2985538be52116b1b81_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;226&quot; data-rawheight=&quot;91&quot; class=&quot;content_image lazy&quot; width=&quot;226&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-adb7e7a0082bd2985538be52116b1b81_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;其中&lt;/p&gt;&lt;ul&gt;&lt;li&gt;X：所有可能结果的随机变量&lt;/li&gt;&lt;li&gt;n：结果总数&lt;/li&gt;&lt;li&gt;x：每个结果的值&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;我们把这个值称为算术平均值。不过，我们更感兴趣的是几何期望值，也就是每次投注的预期资本回报率。这个数字越大，我们的财富累积速度就越快，最终资本价值也就越大。我们将其称为geometric holding period return（缩写为GHPR）。这个值的公式如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7ca3df685890c51d5a2465bbf4a38f68_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;413&quot; data-rawheight=&quot;91&quot; class=&quot;content_image&quot; width=&quot;413&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7ca3df685890c51d5a2465bbf4a38f68_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;413&quot; data-rawheight=&quot;91&quot; class=&quot;content_image lazy&quot; width=&quot;413&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7ca3df685890c51d5a2465bbf4a38f68_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;在抛硬币的例子中，这个等于(3*0)^(1/2)-1=-1。这告诉我们，如果一个人在每次抛硬币时都将其资本的100%用于风险投资，那么他的预期回报率是-100%；也就是说他失去了所有的钱。&lt;/p&gt;&lt;p&gt;代码如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b8f3c6d4863308288d4bbbde0dd8d9b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;477&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b8f3c6d4863308288d4bbbde0dd8d9b4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b8f3c6d4863308288d4bbbde0dd8d9b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;477&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b8f3c6d4863308288d4bbbde0dd8d9b4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-b8f3c6d4863308288d4bbbde0dd8d9b4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Expected Value (Arithmetic): 50.0%&lt;/p&gt;&lt;p&gt;Expected Value (Geometric): -100.0%&lt;/p&gt;&lt;h2&gt;&lt;b&gt;分散赌注&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果我们每次都用1%的资金进行风险投资，潜在的结果将是2%的收益或1%的损失。让我们来看看在这个场景下的期望值：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cef774d0b04df5c90d8c67ab5eff4b58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;156&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-cef774d0b04df5c90d8c67ab5eff4b58_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cef774d0b04df5c90d8c67ab5eff4b58_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;156&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-cef774d0b04df5c90d8c67ab5eff4b58_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-cef774d0b04df5c90d8c67ab5eff4b58_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Expected Value (Arithmetic): 0.5%&lt;/p&gt;&lt;p&gt;Expected Value (Geometric): 0.489%&lt;/p&gt;&lt;p&gt;由于每次投资的风险只占我们资金的一小部分，GHPR现在是正值。还要注意几何期望值小于算术值。其实，5%也只是一个猜测值！肯定有一个数字在1%到100%之间，可以在不破产的情况下使我们的资本增长最大化，凯利公式来啦！&lt;/p&gt;&lt;h2&gt;&lt;b&gt;凯利公式&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在概率论中，凯利公式（也称凯利方程式）是一个用以使特定赌局中，拥有正期望值之重复行为长期增长率最大化的公式，由约翰·拉里·凯利于1956 年在《贝尔系统技术期刊》中发表，可以计算出每次游戏中应投注的资金比例。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b2e32d83bd952193507961430757b0d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;234&quot; data-rawheight=&quot;69&quot; class=&quot;content_image&quot; width=&quot;234&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b2e32d83bd952193507961430757b0d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;234&quot; data-rawheight=&quot;69&quot; class=&quot;content_image lazy&quot; width=&quot;234&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-b2e32d83bd952193507961430757b0d2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;其中&lt;/p&gt;&lt;ul&gt;&lt;li&gt;f：每次投注资本的最优比例&lt;/li&gt;&lt;li&gt;W：盈利概率&lt;/li&gt;&lt;li&gt;1-W：亏损概率&lt;/li&gt;&lt;li&gt;R：赔率&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;我们来看看基于凯利公式的结果是：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d35a6bd7cf0464b23191cfe3123f6c48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;559&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-d35a6bd7cf0464b23191cfe3123f6c48_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d35a6bd7cf0464b23191cfe3123f6c48_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;559&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-d35a6bd7cf0464b23191cfe3123f6c48_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d35a6bd7cf0464b23191cfe3123f6c48_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Kelly f: 0.25&lt;/p&gt;&lt;p&gt;Expected Value (Arithmetic): 12.5%&lt;/p&gt;&lt;p&gt;Expected Value (Geometric): 6.06602%&lt;/p&gt;&lt;h2&gt;&lt;b&gt;最优f&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们可以通过遍历所有可能的结果并评估每个GHPR值来查看是否存在一个最佳的持股比例点。这将生成一条曲线，该曲线的峰值代表下注的最佳比例。Ralph Vince把这个值称为最优f。&lt;/p&gt;&lt;p&gt;代码如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4262207ee69ab25e5dd2f264ca6fff56_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1064&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-4262207ee69ab25e5dd2f264ca6fff56_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4262207ee69ab25e5dd2f264ca6fff56_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1064&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-4262207ee69ab25e5dd2f264ca6fff56_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-4262207ee69ab25e5dd2f264ca6fff56_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-390600e7e7054e80c39cd8d277fd9db9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;385&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-390600e7e7054e80c39cd8d277fd9db9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-390600e7e7054e80c39cd8d277fd9db9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;385&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-390600e7e7054e80c39cd8d277fd9db9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-390600e7e7054e80c39cd8d277fd9db9_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Optimal f: 0.25&lt;/p&gt;&lt;p&gt;Expected Value (Arithmetic): 12.5%&lt;/p&gt;&lt;p&gt;Expected Value (Geometric): 6.066%&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-731f9896e24f84c52df7b274285bbc2a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;611&quot; data-original=&quot;https://pic3.zhimg.com/v2-731f9896e24f84c52df7b274285bbc2a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-731f9896e24f84c52df7b274285bbc2a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;611&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;611&quot; data-original=&quot;https://pic3.zhimg.com/v2-731f9896e24f84c52df7b274285bbc2a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-731f9896e24f84c52df7b274285bbc2a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;我们可以看到，这种方法返回的结果与凯利公式相同。我们很快就会发现这种方法可以将值插入公式中。同样重要的是，要从图表中注意到投资风险过大的影响。即使这个游戏的预期收益非常高。事实上，在你的账户中投资超过f的最优比例实际上会对复合增长产生负面影响。应该清楚的是betting big to win big的想法只在一定程度上是正确的。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;案例二：掷骰子&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;下一个场景是掷骰子。现在让你下注。如果骰子出现偶数，韩梅梅付给你双倍的赌注。如果结果是奇数，你付给韩梅梅相同的倍数。我们看到这个游戏的算术期望是对你有利的。然而，为了评估这个游戏的几何平均收益，我们首先需要约束收益。如果你输五次，你付给韩梅梅5倍的赌注，你的赌资应该是你本金的1/5。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-1d9ad8b3a6eecf4a566c9334068f36b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;256&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-1d9ad8b3a6eecf4a566c9334068f36b4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-1d9ad8b3a6eecf4a566c9334068f36b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;256&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-1d9ad8b3a6eecf4a566c9334068f36b4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-1d9ad8b3a6eecf4a566c9334068f36b4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Expected Value (Arithmetic): 10.0%&lt;/p&gt;&lt;p&gt;Expected Value (Geometric): -100.0%&lt;/p&gt;&lt;p&gt;我们再次看到，如果你冒太大的风险，一开始看起来不错的赌注最终会让你破产。我们可以使用凯利公式来尝试确定每次下注的最佳投放量。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-1a47a208d661148aa23ef176098ebdff_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;232&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-1a47a208d661148aa23ef176098ebdff_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-1a47a208d661148aa23ef176098ebdff_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;232&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-1a47a208d661148aa23ef176098ebdff_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-1a47a208d661148aa23ef176098ebdff_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;让我们通过评估曲线的峰值将其与最佳f值进行比较。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-94df3060ce16415584be6de7e646018d_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1006&quot; data-rawheight=&quot;152&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1006&quot; data-original=&quot;https://pic2.zhimg.com/v2-94df3060ce16415584be6de7e646018d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-94df3060ce16415584be6de7e646018d_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1006&quot; data-rawheight=&quot;152&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1006&quot; data-original=&quot;https://pic2.zhimg.com/v2-94df3060ce16415584be6de7e646018d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-94df3060ce16415584be6de7e646018d_b.png&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-08e5c88a0e3645cfdbd83bfc76a7e826_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-08e5c88a0e3645cfdbd83bfc76a7e826_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-08e5c88a0e3645cfdbd83bfc76a7e826_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;640&quot; data-original=&quot;https://pic3.zhimg.com/v2-08e5c88a0e3645cfdbd83bfc76a7e826_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-08e5c88a0e3645cfdbd83bfc76a7e826_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d527d76c101be8184290a7c47554ecd3_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;129&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-d527d76c101be8184290a7c47554ecd3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d527d76c101be8184290a7c47554ecd3_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;129&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-d527d76c101be8184290a7c47554ecd3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-d527d76c101be8184290a7c47554ecd3_b.png&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;实际案例：市场收益&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;历史证明，股票市场是通过复利增长资本的可靠途径。让我们来看看为了获得最大的收益，我们应该在市场上投入多少资本！&lt;/p&gt;&lt;p&gt;在接下来的研究中，我们的数据基于标准普尔500指数ETF的日收益率：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4cb3cba2ee0ef51b4c50ce9768ea25ac_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;641&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-4cb3cba2ee0ef51b4c50ce9768ea25ac_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4cb3cba2ee0ef51b4c50ce9768ea25ac_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;641&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-4cb3cba2ee0ef51b4c50ce9768ea25ac_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-4cb3cba2ee0ef51b4c50ce9768ea25ac_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;让我们将凯利公式建议的分数与最优f进行比较：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7e21d5bb0f6a53cae4fe2f08fd30ecde_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-7e21d5bb0f6a53cae4fe2f08fd30ecde_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7e21d5bb0f6a53cae4fe2f08fd30ecde_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-7e21d5bb0f6a53cae4fe2f08fd30ecde_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-7e21d5bb0f6a53cae4fe2f08fd30ecde_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a15fab16c4f925f4c49fbb25b36a484c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;639&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;639&quot; data-original=&quot;https://pic1.zhimg.com/v2-a15fab16c4f925f4c49fbb25b36a484c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a15fab16c4f925f4c49fbb25b36a484c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;639&quot; data-rawheight=&quot;604&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;639&quot; data-original=&quot;https://pic1.zhimg.com/v2-a15fab16c4f925f4c49fbb25b36a484c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-a15fab16c4f925f4c49fbb25b36a484c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-514a9c8c314e9ff6c741c29b5fc28e80_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;158&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-514a9c8c314e9ff6c741c29b5fc28e80_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-514a9c8c314e9ff6c741c29b5fc28e80_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;158&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-514a9c8c314e9ff6c741c29b5fc28e80_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-514a9c8c314e9ff6c741c29b5fc28e80_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;凯利公式建议的分数实际上远不是最优的。在这种情况下，我们实际上应该投入更多的资本。为此，我们必须使用杠杆，要么通过借钱增加投注规模，要么利用期权或期货等带有杠杆的交易工具进行交易。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;回撤&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;到目前为止，我们只专注于最大化我们的资本收益。如果投资于最优f，账户价值将是初始价值的60倍以上。然而，作为一个投资者，我们可能也同样关心我们所承担的风险。&lt;/p&gt;&lt;p&gt;代码：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-51272c12ceb373448789598f8769e52c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1196&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-51272c12ceb373448789598f8769e52c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-51272c12ceb373448789598f8769e52c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1196&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-51272c12ceb373448789598f8769e52c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-51272c12ceb373448789598f8769e52c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-64cff448688f367634efa0902ee7405f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;612&quot; data-rawheight=&quot;572&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;612&quot; data-original=&quot;https://pic4.zhimg.com/v2-64cff448688f367634efa0902ee7405f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-64cff448688f367634efa0902ee7405f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;612&quot; data-rawheight=&quot;572&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;612&quot; data-original=&quot;https://pic4.zhimg.com/v2-64cff448688f367634efa0902ee7405f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-64cff448688f367634efa0902ee7405f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;为了实现最大收益，SPY自成立以来使用超过3倍的杠杆买入。这将产生最大的复合收益率，但会导致：&lt;/p&gt;&lt;p&gt;&lt;b&gt;最大回撤：97.23%&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在具有随机结果和正的数学期望的情况下，在每个事件上都有有限资金的最优部分。我们已经研究了两种确定这个最优比例的方法，凯利公式和最优f。我们还看到，&lt;b&gt;风险超过这个最优比例并不会给赌徒/交易员带来任何额外的收益&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;回撤曲线&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;上面的例子表明，在最优f上投资SPY会导致一些极端的不适。让我们来看看如何构造一条类似于GHPR最大跌幅的曲线，通过增加头寸规模来增加最大回撤。另外还提供一个衡量指标：Ulcer Index，代码如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-8a145c84f9cfa3246fc8490dbfcfcb89_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1004&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-8a145c84f9cfa3246fc8490dbfcfcb89_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-8a145c84f9cfa3246fc8490dbfcfcb89_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1004&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-8a145c84f9cfa3246fc8490dbfcfcb89_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-8a145c84f9cfa3246fc8490dbfcfcb89_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2ba67b708246384105b2ea1cba35e09c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1032&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-2ba67b708246384105b2ea1cba35e09c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2ba67b708246384105b2ea1cba35e09c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1032&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-2ba67b708246384105b2ea1cba35e09c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-2ba67b708246384105b2ea1cba35e09c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d739ce7c03037d5f7fd79bc0c18a53b2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;667&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d739ce7c03037d5f7fd79bc0c18a53b2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d739ce7c03037d5f7fd79bc0c18a53b2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;667&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d739ce7c03037d5f7fd79bc0c18a53b2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-d739ce7c03037d5f7fd79bc0c18a53b2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-45c6819da333dbe7d41ce9e248d0004f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;719&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-45c6819da333dbe7d41ce9e248d0004f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-45c6819da333dbe7d41ce9e248d0004f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;719&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-45c6819da333dbe7d41ce9e248d0004f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-45c6819da333dbe7d41ce9e248d0004f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cead771a1cb4f8cd2134ea8332c82394_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1048&quot; data-rawheight=&quot;148&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1048&quot; data-original=&quot;https://pic1.zhimg.com/v2-cead771a1cb4f8cd2134ea8332c82394_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-cead771a1cb4f8cd2134ea8332c82394_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1048&quot; data-rawheight=&quot;148&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1048&quot; data-original=&quot;https://pic1.zhimg.com/v2-cead771a1cb4f8cd2134ea8332c82394_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-cead771a1cb4f8cd2134ea8332c82394_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;从图中可以看出，随着头寸规模趋近于最优f，收益率和最大回撤都在增加，降额在最优f处超过90%。随着我们进一步扩大规模，缩减继续接近100％。然而，收益开始下降。这强化了这样一个事实：&lt;b&gt;通过增加规模来增加利润超过最优f是徒劳的。这样做只会带来更多的痛苦。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;然而，许多投资者的承受力远远低于97%。大多数人都有一个心理极限，如果超过这个极限，他们就会把钱从桌子上拿走。各位：&lt;/p&gt;&lt;p&gt;&lt;b&gt;回测和实盘真的不一样&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果一个人不能承担风险，那么回报就无关紧要了。出于这个原因，我们要努力下调超过我们极限点的限制曲线。新的有界曲线的峰值出现在实际的最优比例处。使用这部分资金将带来最大的收益，同时保护我们免受最大回撤的心理痛苦。&lt;/p&gt;&lt;p&gt;例如，假设我们希望在SPY中最大化我们的收益，而不让我们的亏损超过25％。&lt;/p&gt;&lt;p&gt;代码：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-fd0290146d8c97f7138784c8a2b9a386_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-fd0290146d8c97f7138784c8a2b9a386_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-fd0290146d8c97f7138784c8a2b9a386_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-fd0290146d8c97f7138784c8a2b9a386_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-fd0290146d8c97f7138784c8a2b9a386_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f8657b9a443621cbb8f747a5e2492f41_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;708&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-f8657b9a443621cbb8f747a5e2492f41_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f8657b9a443621cbb8f747a5e2492f41_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;708&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-f8657b9a443621cbb8f747a5e2492f41_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-f8657b9a443621cbb8f747a5e2492f41_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ca86bcd88c29ff99b11c0110374b96b_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;137&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ca86bcd88c29ff99b11c0110374b96b_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-4ca86bcd88c29ff99b11c0110374b96b_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;137&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-4ca86bcd88c29ff99b11c0110374b96b_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-4ca86bcd88c29ff99b11c0110374b96b_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;为了避免25%的回测，我们需要将杠杆从最优f值降低近9倍!&lt;/p&gt;&lt;h2&gt;&lt;b&gt;回撤让你清醒&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;对于从业人员来说，回撤是一个很好的风险指标，因为它最直接影响了他们的情绪。实际上，很少有交易员根据收益率的标准差或类似的波动性指标来决定是否遵循制定的策略。看着自己的账户余额从100万元亏到60万元，这是一种深刻的心灵体验！然而，使用回撤作为风险度量也存在许多限制。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;收益顺序&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;与复合收益不同，最大回撤取决于实现收益的顺序。我们将在下面通过打乱标准普尔收益的顺序并研究由此产生的股票曲线来说明这一点。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-8399ee899cec9b6c78b0486d41604d55_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;585&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-8399ee899cec9b6c78b0486d41604d55_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-8399ee899cec9b6c78b0486d41604d55_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;585&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-8399ee899cec9b6c78b0486d41604d55_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-8399ee899cec9b6c78b0486d41604d55_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2b5a06c69c747c136b54af25d0f84e31_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;983&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-2b5a06c69c747c136b54af25d0f84e31_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2b5a06c69c747c136b54af25d0f84e31_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;983&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-2b5a06c69c747c136b54af25d0f84e31_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-2b5a06c69c747c136b54af25d0f84e31_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a435e96ad168090bf9bfe384af63428e_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;173&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-a435e96ad168090bf9bfe384af63428e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a435e96ad168090bf9bfe384af63428e_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;173&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-a435e96ad168090bf9bfe384af63428e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-a435e96ad168090bf9bfe384af63428e_b.png&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4fc9df1f50d57f283dd8498896bbcad6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;414&quot; data-rawheight=&quot;654&quot; class=&quot;content_image&quot; width=&quot;414&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-4fc9df1f50d57f283dd8498896bbcad6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;414&quot; data-rawheight=&quot;654&quot; class=&quot;content_image lazy&quot; width=&quot;414&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-4fc9df1f50d57f283dd8498896bbcad6_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;我们看到，无论每日收益的顺序如何，每条曲线的GHPR都是相同的。使用传统定义的最优f不会区分这些曲线。然而，最大和最小的回撤的差异超过了20%！这是在只生成了10条曲线之后；我们将在下面看到，可能的值可以有很大的变化。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ac579b048f30caada1503d5249aef358_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;186&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ac579b048f30caada1503d5249aef358_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ac579b048f30caada1503d5249aef358_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;186&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ac579b048f30caada1503d5249aef358_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-ac579b048f30caada1503d5249aef358_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-97546d544571fb276b38fff4e11e4e93_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;756&quot; data-rawheight=&quot;526&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;756&quot; data-original=&quot;https://pic4.zhimg.com/v2-97546d544571fb276b38fff4e11e4e93_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-97546d544571fb276b38fff4e11e4e93_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;756&quot; data-rawheight=&quot;526&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;756&quot; data-original=&quot;https://pic4.zhimg.com/v2-97546d544571fb276b38fff4e11e4e93_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-97546d544571fb276b38fff4e11e4e93_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;最大回撤：78.479%&lt;/b&gt;&lt;/p&gt;&lt;p&gt;最大回撤从不到30％到超过70％不等！这个范围比较广泛。如果我们想使用回撤作为风险度量，我们需要处理其固有的不确定性。我们无法完全限制预期回撤结果，因为最大回撤值可能会出现在很大范围内。然而，我们可以相当有信心地说，所经历的最大回撤不会超过我们的阈值。为了做到这一点，我们计算了可能超过我们的风险阈值的最大回撤情况的百分比。如果这个百分比太大，我们必须使用较小的仓位（头寸）。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;时间范围&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;回撤的第二个重要特征是它依赖于时间范围。事实上，&lt;b&gt;可以证明最大回撤与时间的平方根成正比&lt;/b&gt;（大家可以自己证明一下）。直观地说，一个账户下个月的最大回撤将低于下一年的最大回撤。为了准确地设置最大回撤的阈值，我们需要定义时间范围。&lt;/p&gt;&lt;p&gt;例如，我们可能会指定在明年（约250个交易日）内回撤不得超过25％。基于我们之前的研究，我们想以一定程度的确定性或信心来陈述这个约束条件。统计显著性的一般为5%。我们希望有95%的把握，在未来的一年里，回撤将少于25%。&lt;/p&gt;&lt;p&gt;为了确定在这些条件下的理想情况，对于0和1之间的每一个f值，我们将采用以下步骤：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;生成许多可能的权益曲线（类似于蒙特卡罗）。&lt;/li&gt;&lt;ul&gt;&lt;li&gt;根据我们期望的时间范围，从收益分布中随机抽取一些收益作为样本。&lt;/li&gt;&lt;li&gt;通常选择&amp;gt;1000来获得一个精确的回撤分布图。&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;计算每条曲线的GHPR和最大回撤。&lt;/li&gt;&lt;li&gt;确定在我们指定的置信水平上的回撤水平。&lt;/li&gt;&lt;li&gt;记录GHPR值的中值（可以选择百分位数）。&lt;/li&gt;&lt;li&gt;如果在我们指定的置信水平上的回撤值低于我们的风险阈值，则将中值GHPR指定为该f的GHPR值。&lt;/li&gt;&lt;ul&gt;&lt;li&gt;如果不是，则设置GHPR = 0。以这样的仓位交易风险太大了。&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;在这个新的f曲线中找到一个点，使GHPR的期望值最大化。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;我们称这个点为“理想的f”。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-58ffcae45018bed6e6815f2ea1a8811a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1147&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-58ffcae45018bed6e6815f2ea1a8811a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-58ffcae45018bed6e6815f2ea1a8811a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1147&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-58ffcae45018bed6e6815f2ea1a8811a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-58ffcae45018bed6e6815f2ea1a8811a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7c958e27bfd1992c45ec8df949548731_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;720&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-7c958e27bfd1992c45ec8df949548731_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7c958e27bfd1992c45ec8df949548731_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;720&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-7c958e27bfd1992c45ec8df949548731_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-7c958e27bfd1992c45ec8df949548731_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-30113bc05637417ff8f4fc250900d6c8_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;135&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-30113bc05637417ff8f4fc250900d6c8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-30113bc05637417ff8f4fc250900d6c8_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;135&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-30113bc05637417ff8f4fc250900d6c8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-30113bc05637417ff8f4fc250900d6c8_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;使用这种方法，我们看到曲线更加参差不齐。这是由于使用蒙特卡罗模拟时所涉及的固有随机性。然而，我们观察到GHPR和回撤之间的一般关系与以前相同。有趣的是，这种方法建议使用的杠杆是之前确定性方法的2倍多。这有两个原因。&lt;/p&gt;&lt;p&gt;首先，我们大大缩短了时间范围。虽然第一次尝试使用了SPY的整个价格历史（近25年），而第二种方法模拟了未来一年的曲线。时间越短，我们预期的回撤就越少。其次，指数&lt;b&gt;收益率等金融时间序列往往同时表现出波动性聚类和自相关性&lt;/b&gt;。这意味着单个收益并不完全独立于以往收益，这是我们在建模过程中使用的假设。为了解决这个问题，用于将结果输入到头寸调整算法的策略应该在做出买入/卖出决策时就应该考虑这些因素。&lt;/p&gt;&lt;p&gt;在这些计算中使用的收益必须代表预期未来收益。理想的情况是使用实际收益或paper trading的结果。如果必须使用回测的结果，建议&lt;b&gt;尽可能使用样本外的结果&lt;/b&gt;。将过度优化的样本内结果代入这些公式，会低估风险，高估收益。如果你的策略在回测中夏普比率为8，但在实时交易中夏普比率接近0.5，那么你的杠杆将会很高，并很快超过你的风险承受能力。&lt;/p&gt;&lt;p&gt;现在，我们有了一种方法来确定我们理想的头寸规模占我们总账户净值的百分比。&lt;/p&gt;&lt;p&gt;但是，此方法只适用于单票收益。作为投资者，我们希望将多种资产和多策略组合到一个投资组合中去。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;两枚硬币&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在开始，我们研究了头寸大小对抛硬币游戏的影响。这次，我们要用两个硬币。为了显示不同程度的相关性所产生的影响，我们将尝试三种不同的场景：两种不相关的硬币、两种正相关的硬币和两种负相关的硬币。&lt;/p&gt;&lt;p&gt;头两场的结果和之前一样正面翻倍，反面输掉100%在第一个(非相关)场景中，潜在的结果如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4250153e137b5e5749a34a116c231cd0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;536&quot; data-rawheight=&quot;552&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;536&quot; data-original=&quot;https://pic1.zhimg.com/v2-4250153e137b5e5749a34a116c231cd0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4250153e137b5e5749a34a116c231cd0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;536&quot; data-rawheight=&quot;552&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;536&quot; data-original=&quot;https://pic1.zhimg.com/v2-4250153e137b5e5749a34a116c231cd0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-4250153e137b5e5749a34a116c231cd0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;因为两枚硬币都是同时抛的，所以我们必须在抛硬币之前下注。我们可以独立地对每一枚硬币下注，并以可能导致全部破产的金额为界限。在这种情况下，如果两个下注大小的总和&amp;gt;=100％，那么当场景4发生时，我们将保证损失所有的钱。根据这些投注规模计算出每个结果k的加权收益率R，计算公式如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-82a4ed7f22369a3c76b49376a6d77f62_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;490&quot; data-rawheight=&quot;140&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;490&quot; data-original=&quot;https://pic3.zhimg.com/v2-82a4ed7f22369a3c76b49376a6d77f62_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-82a4ed7f22369a3c76b49376a6d77f62_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;490&quot; data-rawheight=&quot;140&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;490&quot; data-original=&quot;https://pic3.zhimg.com/v2-82a4ed7f22369a3c76b49376a6d77f62_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-82a4ed7f22369a3c76b49376a6d77f62_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;其中&lt;/p&gt;&lt;ul&gt;&lt;li&gt;N：投注的独立结果总数&lt;/li&gt;&lt;li&gt;f：每个结果上的资金比例&lt;/li&gt;&lt;li&gt;x：每个结果的返回值&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;一旦我们有了这组加权收益，我们就可以像前面一样计算GHPR了。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ebbc28e7694ec34055d22e17b3c18bd8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;355&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ebbc28e7694ec34055d22e17b3c18bd8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ebbc28e7694ec34055d22e17b3c18bd8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;355&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ebbc28e7694ec34055d22e17b3c18bd8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-ebbc28e7694ec34055d22e17b3c18bd8_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;现在的目标是通过找出资金在每个结果上的最优比例来最大化两个赌注组合的GHPR。我们可以通过迭代每个下注大小的组合，计算每个组合的GHPR值，然后查看峰值在哪里来实现这一点。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-61846be7c4d7df7de2df20cef954e83e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;959&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-61846be7c4d7df7de2df20cef954e83e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-61846be7c4d7df7de2df20cef954e83e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;959&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-61846be7c4d7df7de2df20cef954e83e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-61846be7c4d7df7de2df20cef954e83e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Output:&lt;/p&gt;&lt;p&gt;coin 1  0.230000&lt;/p&gt;&lt;p&gt;coin 2  0.230000&lt;/p&gt;&lt;p&gt;ghpr    0.119119&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-96a2ad997cb09194b399d574f290788d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic2.zhimg.com/v2-96a2ad997cb09194b399d574f290788d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-96a2ad997cb09194b399d574f290788d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic2.zhimg.com/v2-96a2ad997cb09194b399d574f290788d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-96a2ad997cb09194b399d574f290788d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;从上面的结果中我们可以看出，为了使我们的资金长期增长最大化，最优策略是将23%的资金投入到每一种结果上，并将赌注押在正面。。这意味着我们的总风险是每个事件帐户的46％（两次抛掷）。该策略的预期GHPR为11.9％。&lt;/p&gt;&lt;p&gt;在最开始的例子中，在相同的概率下，单次抛硬币的最佳比例是25%，预期GHPR为6.07%。使用两个不相关的硬币，风险和潜在收益都几乎翻了一番。在这一点上，你可能会想，“你为什么不把两倍的钱押在一枚硬币上呢？”下面的场景将说明为什么多样化对我们有利。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;相关硬币&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;让我们来看看抛两枚完全相关的硬币的情况，也就是说，如果一个正面朝上，另一个正面朝上，反之亦然。这个游戏只有两种可能的场景：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-17562a2f388f948dacdad5cceb89f1b1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;434&quot; data-rawheight=&quot;300&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;434&quot; data-original=&quot;https://pic2.zhimg.com/v2-17562a2f388f948dacdad5cceb89f1b1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-17562a2f388f948dacdad5cceb89f1b1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;434&quot; data-rawheight=&quot;300&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;434&quot; data-original=&quot;https://pic2.zhimg.com/v2-17562a2f388f948dacdad5cceb89f1b1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-17562a2f388f948dacdad5cceb89f1b1_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;我们可以用第一个方法来检验这个博弈的最优策略。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-56f043fff17c01e669b5ed445296974c_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;163&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-56f043fff17c01e669b5ed445296974c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-56f043fff17c01e669b5ed445296974c_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;163&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-56f043fff17c01e669b5ed445296974c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-56f043fff17c01e669b5ed445296974c_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Output:&lt;/p&gt;&lt;p&gt;Coin 1  0.00000&lt;/p&gt;&lt;p&gt;Coin 2  0.25000&lt;/p&gt;&lt;p&gt;ghpr    0.06066&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-17499857d049ad615d74f9d0139e7954_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-17499857d049ad615d74f9d0139e7954_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-17499857d049ad615d74f9d0139e7954_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-17499857d049ad615d74f9d0139e7954_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-17499857d049ad615d74f9d0139e7954_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;在这种情况下，最优策略遵循完全相同的策略，就好像他们只能押一枚硬币一样。事实上，就像在一枚硬币的情况下一样，完全忽略第二个赌注，在第一个赌注上押上你账户的25%。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;负相关&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们将研究与第一枚硬币负相关第二枚硬币的情况。但问题是：第二枚硬币的期望值实际上是负的。&lt;/p&gt;&lt;p&gt;第二枚硬币的收益如下：反面，你仍然输掉100%的赌注。然而，如果出现正面，你只赢了60%的赌注。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9fc36a78031393600f734d999573d8f4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;440&quot; data-rawheight=&quot;298&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;440&quot; data-original=&quot;https://pic1.zhimg.com/v2-9fc36a78031393600f734d999573d8f4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-9fc36a78031393600f734d999573d8f4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;440&quot; data-rawheight=&quot;298&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;440&quot; data-original=&quot;https://pic1.zhimg.com/v2-9fc36a78031393600f734d999573d8f4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-9fc36a78031393600f734d999573d8f4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;乍一看，人们可能会想，你为什么要把自己的资本配置给第二枚硬币。这种游戏的算术期望值是每次输掉20%的赌注；这比赌场里的每场比赛都要糟糕！但是如果我们同时对这两个负相关结果下注，我们来看看结果：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-06fd83a3825d49b6aee62b37d143d90d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;139&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-06fd83a3825d49b6aee62b37d143d90d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-06fd83a3825d49b6aee62b37d143d90d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;139&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-06fd83a3825d49b6aee62b37d143d90d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-06fd83a3825d49b6aee62b37d143d90d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Output:&lt;/p&gt;&lt;p&gt;Coin 1  0.790000&lt;/p&gt;&lt;p&gt;Coin 2  0.990000&lt;/p&gt;&lt;p&gt;ghpr    0.130646&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c19f38b509a56ed68a7e412d7e4f4374_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-c19f38b509a56ed68a7e412d7e4f4374_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c19f38b509a56ed68a7e412d7e4f4374_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-c19f38b509a56ed68a7e412d7e4f4374_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c19f38b509a56ed68a7e412d7e4f4374_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;对于这个结果，首先，最大GHPR实际上从11.9％增加到13.1％。其次，我们建议在每一个可打赌的事件上（需要使用借来的钱或杠杆）押注资金总额的近180%。最后，我们应该把更大的赌注分配给一枚硬币，随着时间的推移，它肯定会赔钱。这些似乎都与直觉相悖。&lt;/p&gt;&lt;p&gt;这个例子是人为设计的，只是为了说明，所以我们不会深入研究它。我们可以通过对这两种结果都下注来保证利润。没有哪家赌场会向你提供这样的场景，市场可能会套利任何类似的机会。然而，它证明了负相关的力量，以及为什么我们应该尽可能地寻找它。同样的效果也可以在不完全负相关的情况下看到同样的效果，但这会让这个例子变得过于混乱。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;减少约束&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在前面的论述中，我们讨论了为什么“最优f”并不完全是最优的，即由于在最大杠杆水平上遇到的极端下降。&lt;/p&gt;&lt;p&gt;修改后的代码：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ec61a78e50df9c1f2e1f2078604ea852_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;870&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-ec61a78e50df9c1f2e1f2078604ea852_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-ec61a78e50df9c1f2e1f2078604ea852_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;870&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-ec61a78e50df9c1f2e1f2078604ea852_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-ec61a78e50df9c1f2e1f2078604ea852_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d5ed9c6c8272663886f2149f1ea81ef2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;876&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d5ed9c6c8272663886f2149f1ea81ef2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d5ed9c6c8272663886f2149f1ea81ef2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;876&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d5ed9c6c8272663886f2149f1ea81ef2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-d5ed9c6c8272663886f2149f1ea81ef2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-afe042ed0be60381b5ff91e474fd5285_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;392&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-afe042ed0be60381b5ff91e474fd5285_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-afe042ed0be60381b5ff91e474fd5285_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;392&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-afe042ed0be60381b5ff91e474fd5285_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-afe042ed0be60381b5ff91e474fd5285_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;对于本例，我们将使用一些实际的市场数据。从2005年到2015年：标普500指数（SPY）和长期国债（TLT）ETF的每日OHLC数据。这个窗口是任意选择的，但10年似乎是一个不错的时间窗口，这段时间包含了牛市、熊市、高波动性和低波动性。一旦我们有了价格数据，我们就可以计算每天的收益率，用于我们的头寸规模优化。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5f78510b21a248d4a4eee851c40f5b0e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic3.zhimg.com/v2-5f78510b21a248d4a4eee851c40f5b0e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5f78510b21a248d4a4eee851c40f5b0e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic3.zhimg.com/v2-5f78510b21a248d4a4eee851c40f5b0e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-5f78510b21a248d4a4eee851c40f5b0e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;接下来，我们将遍历所有分配权重的组合，以在给定风险容忍度的情况下找到最优值。以95%的置信度强制设置20%的最大回撤。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b1c5fed3dd664a307066624e0fe8431c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;413&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b1c5fed3dd664a307066624e0fe8431c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b1c5fed3dd664a307066624e0fe8431c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;413&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b1c5fed3dd664a307066624e0fe8431c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-b1c5fed3dd664a307066624e0fe8431c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a17ad535e02573f78e0697e78dcc6c93_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic4.zhimg.com/v2-a17ad535e02573f78e0697e78dcc6c93_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a17ad535e02573f78e0697e78dcc6c93_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;683&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic4.zhimg.com/v2-a17ad535e02573f78e0697e78dcc6c93_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a17ad535e02573f78e0697e78dcc6c93_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;关于上面的图表，首先要注意的是，搜索空间中只有一小块区域分配了非零GHPR值。在该地区之外，我们缺乏信心，即我们的缩编限制将得到满足。&lt;/p&gt;&lt;p&gt;优化后的结果表明，我们应该将大约36%的资金用于SPY，64%的资金用于TLT。这些权重之和为100%的事实只是一个巧合，而不是模型的特征/约束。这种配置策略的GHPR中值预测为每日0.034%（年化8.9%），其中95%生成的权益曲线的最大回撤&amp;lt;= 18.7%。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;多策略&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这种方法对两种回报流都很好，但多样化的真正好处来自于拥有许多不相关的策略。不幸的是，在二维返回空间外汇出现一些问题。首先，可视化变得非常困难。更重要的是，搜索投资组合权重组合所需的时间呈指数级增长。&lt;/p&gt;&lt;p&gt;用了将近两分钟的时间找到了只有两个回报序列的最优解。为了实现多样化，我们希望跨市场、跨风格和跨时间框架组合策略。这可能导致一个投资组合包含数十个单独的收益流。当你考虑到，对于每一个权重组合，我们都要生成数千条权益曲线来评估收益和亏损，这是一个非常耗时的过程。幸运的是，我们有一些节省时间的妙招。&lt;/p&gt;&lt;p&gt;结果表明，&lt;b&gt;夏普比率与我们的度量指标有很强的相关性，且不依赖于时间&lt;/b&gt;。我们不寻找最大GHPR，而是优化每个加权收益序列的最大夏普比率。这样，我们就不需要生成数千条潜在的权益曲线来评估权重的最佳组合是什么。这样做可以节省大量的时间。&lt;/p&gt;&lt;p&gt;从根本上减少寻找最优投资组合配置所需时间的第二种方法是&lt;b&gt;放弃可能组合的强力迭代，而采用非线性优化。&lt;/b&gt;我们将使用&lt;b&gt;cma&lt;/b&gt;包来实现这一点。具体算法见:&lt;/p&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//cma.gforge.inria.fr/cmaes_sourcecode_page.html&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;cma.gforge.inria.fr/cma&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;es_sourcecode_page.html&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;给定一个适应度函数和一系列输入，与尝试所有可能的输入组合相比，该算法将在更短的时间内找到一个局部（并且希望是全局）最小值。&lt;/p&gt;&lt;p&gt;但是，使用这种方法只能产生相对的权重组合;杠杆作用没有考虑在内。因此，我们将优化程序分为两部分：&lt;/p&gt;&lt;p&gt;1、找出使投资组合夏普比率最大化的相对配置权重。&lt;/p&gt;&lt;p&gt;2、在考虑给定的风险/回撤限制的前提下，确定适用于最大化GHPR的投资组合的杠杆率。&lt;/p&gt;&lt;p&gt;为了证明这种方法，我们将在两个ETF上创建三种“虚拟”策略：两种中长期趋势跟踪策略和一种短期均值回归策略。作为趋势的代表，我们将使用滚动z-score，定义如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-e1a60b749155475c1f67ade94befa318_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;305&quot; data-rawheight=&quot;116&quot; class=&quot;content_image&quot; width=&quot;305&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-e1a60b749155475c1f67ade94befa318_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;305&quot; data-rawheight=&quot;116&quot; class=&quot;content_image lazy&quot; width=&quot;305&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-e1a60b749155475c1f67ade94befa318_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;这是我们用来衡量交易决策的信号。对于趋势跟踪系统，我们将增加与信号成比例的位置大小；均值回归要乘以-1。为了得到每个策略的收益，我们把策略信号乘以正向回报（假设我们在信号之后进入open并在此之后退出）。&lt;/p&gt;&lt;p&gt;首先，我们将计算SPY和TLT的5、50和100天lookback周期的策略信号。从这些信号中，我们得到了这些策略收益。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e3790c36bb1a3678e3444ab295f83da5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;808&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-e3790c36bb1a3678e3444ab295f83da5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e3790c36bb1a3678e3444ab295f83da5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;808&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-e3790c36bb1a3678e3444ab295f83da5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-e3790c36bb1a3678e3444ab295f83da5_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;接下来，我们将使用常规优化来找到使我们的投资组合夏普比率最大化的权重。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5872a20e449e3eae7eb63a17397fed14_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1017&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-5872a20e449e3eae7eb63a17397fed14_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-5872a20e449e3eae7eb63a17397fed14_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1017&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-5872a20e449e3eae7eb63a17397fed14_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-5872a20e449e3eae7eb63a17397fed14_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c8347b33f24dd66a17c9bceef89a4732_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;204&quot; data-rawheight=&quot;340&quot; class=&quot;content_image&quot; width=&quot;204&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c8347b33f24dd66a17c9bceef89a4732_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;204&quot; data-rawheight=&quot;340&quot; class=&quot;content_image lazy&quot; width=&quot;204&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-c8347b33f24dd66a17c9bceef89a4732_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;这一优化的结果表明，理想的策略应该是将我们的大部分资金配置给短期均值回归策略，并限制在长期趋势跟踪策略中。&lt;/p&gt;&lt;p&gt;第一步完成了。我们已经确定了适用于每种策略的相对权重，以便使夏普比率最大化，但按照计算方法应用它们可能会导致风险过高或收益过低。为了解决这个问题，我们可以使用优化程序的的结果获得加权投资组合的收益。然后，可以应用最初的“理想f”来确定风险目标的适当杠杆率。&lt;/p&gt;&lt;p&gt;我们计算出在这个投资组合中投资的理想比例是32%。最后一步是将非杠杆投资组合权重乘以这个值，得到最终的投资组合配置：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f68a996a07a78a1f9299ff7b4c204960_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;216&quot; data-rawheight=&quot;333&quot; class=&quot;content_image&quot; width=&quot;216&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f68a996a07a78a1f9299ff7b4c204960_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;216&quot; data-rawheight=&quot;333&quot; class=&quot;content_image lazy&quot; width=&quot;216&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-f68a996a07a78a1f9299ff7b4c204960_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;最后，可视化此投资组合的表现：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7988c949825de719dc87919a21440d8c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;1024&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-7988c949825de719dc87919a21440d8c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7988c949825de719dc87919a21440d8c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1024&quot; data-rawheight=&quot;1024&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1024&quot; data-original=&quot;https://pic1.zhimg.com/v2-7988c949825de719dc87919a21440d8c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7988c949825de719dc87919a21440d8c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;警告&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;与交易策略领域的任何“最优”解决方案一样，你认为完美的回测，却在实盘中表现的平淡无奇或产生了灾难性的后果。在实现上面讨论的方法时，你要正视这个问题！&lt;/p&gt;&lt;p&gt;首先，&lt;b&gt;多策略没有考虑到交易成本&lt;/b&gt;。如果你的投资组合中的策略经常在市场中进进出出，那么这些策略很快就会变得很重要，并且必须加以考虑。接下来，&lt;b&gt;用于优化的策略收益必须是样本外的。实盘收益率值最好的，paper trading次之，如果没有实际收益率，可以使用样本外回测收益率。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;假设未来策略之间的关系与过去相似。如果这些关系消失，投资组合可能会处于非常糟糕。如上所述，杠杆计算中使用的最大回撤是基于加权收益的。一种策略的损失可以补偿同一时期另一种策略的收益。&lt;b&gt;为了解决所有策略同时对你产生不利的情况，你可以将每种策略历史上的最大回撤与投资组合权重相乘。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;最后，我们&lt;b&gt;必须假设未来不会像过去那么美好。Alpha衰减将影响大多数策略，即使有最严格的回测，在实际交易中结果通常也不会很好。我们还应该假设，最大回撤就在我们面前，因为从数学上讲，交易时间越长，大幅回撤的可能性就越大。我们最大的损失也是如此。为了减轻这种情况，我们可以应用安全系数来扩大历史上最大回撤，从而减少所用的杠杆数量。我们还可以设定一个比我们认为必要时更低的最大回撤门槛；这也有助于有效降低最佳杠杆率。&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;结论&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果一个人能够提高经风险调整后的收益，那么提高绝对收益所需要的一切，就是提高杠杆以适应他们的风险偏好。&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80331226</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>量化学术论文常：数据滥用严重、程序Bug泛滥！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80330635.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80330635&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-854b0272a7726129627e50496a2f3963_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;作者：Andrew&lt;br/&gt;译者：1+1=6&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;虚假结果已是常态&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在过去的一段时间里，我们进行了大量的论文复现，当模型在数据方面出现问题时，我们感到十分失望。&lt;b&gt;数据滥用是一个巨大的问题，而且是一个常态！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在数据驱动的交易或量化投资研究中，数据挖掘是你必须做的很大一部分工作。但是，成功地应用这些技术。需要对领域的细微差别、对假设的批判性评估、以及对探索统计学和科学哲学的承诺给予大量关注。上世纪80年代早期，摩根士丹利发明了配对交易 ，当时一位哥伦比亚大学的计算机科学专业的毕业生，正在计算按行业分类的股票组合的相对权重和相关性。在同一时期，RenTech刚刚起步。前董事总经理Robert Frey曾表示，他们的方法关键是纪律，而不是理论。创始人Jim Simons讲述了一件轶事，讲的是人们被派到纽约联邦储备银行大楼，手工抄写历史利率信息，这些信息被记录在一本书面账簿上。这些人可能是所有金融领域最成功的数据挖掘者或者叫他们挖矿者吧。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;程序Bug&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;当学者编写程序时，出现错误的概率和风险会大大提高。几年前，实证经济学（Empirical Economics）中最著名的一个结果实际上是一个&lt;b&gt;spreadsheet错误&lt;/b&gt;。 在《Quantitative Finance》发表的一篇论文中，有一篇提到一个回测软件，我们就发现了许多Bug。从长期因子模型研究到高频订单分析，研究人员正在编写越来越复杂的代码。有一个经常被引用的统计数据表明：&lt;b&gt;专业软件行业每交付1000行代码就会产生15-50个错误&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;专业人员都有15-50个Bug，可想而知。（此处只是对比，并无他意）&lt;/p&gt;&lt;p&gt;然而，据我们所知，&lt;b&gt;没有任何财经杂志有专业的软件开发人员审查提交的代码。&lt;/b&gt; &lt;b&gt;大多数金融期刊仍然没有或者没有强制执行代码提交和公开出版标准&lt;/b&gt;。这种愚蠢的做法既增加了结果的不确定性，也减缓了研究的进度。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;案例举证&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;另一个令人担忧的趋势（特别是在质量较差的期刊和质量较低的学术期刊中）是，很多研究和出版机构完全忽视了股票数据和高频交易中order book数据截面所需领域知识的差异。例如：&lt;/p&gt;&lt;p&gt;&lt;b&gt;举证1&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文随意地发明了一个衡量高频“liquidity takers”的指标，但如果作者能够咨询业内任何一个人，并意识到他其实是在计算竞相排队的做市商，以提供流动性。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7cfd15de14106f8b75d9571482dff8b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;728&quot; data-rawheight=&quot;715&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;728&quot; data-original=&quot;https://pic1.zhimg.com/v2-7cfd15de14106f8b75d9571482dff8b4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-7cfd15de14106f8b75d9571482dff8b4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;728&quot; data-rawheight=&quot;715&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;728&quot; data-original=&quot;https://pic1.zhimg.com/v2-7cfd15de14106f8b75d9571482dff8b4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-7cfd15de14106f8b75d9571482dff8b4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;举证2&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文假设股票成交量是正态分布的，因此他们没有像作者所说的那样找到高频“报价填充”的证据，而是通过一些自己的观察发现成交量就是这样的&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a239f1f1d7bc427337ce36353fa89aec_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;783&quot; data-rawheight=&quot;845&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;783&quot; data-original=&quot;https://pic1.zhimg.com/v2-a239f1f1d7bc427337ce36353fa89aec_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-a239f1f1d7bc427337ce36353fa89aec_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;783&quot; data-rawheight=&quot;845&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;783&quot; data-original=&quot;https://pic1.zhimg.com/v2-a239f1f1d7bc427337ce36353fa89aec_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-a239f1f1d7bc427337ce36353fa89aec_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.sec.gov/divisions/riskfin/seminar/ye031513.pdf&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;sec.gov/divisions/riskf&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;in/seminar/ye031513.pdf&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;举证3&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文不知道期货市场何时开盘，同时对无人交易合约的高预测准确性自己沾沾自喜。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-bf0be133e44f8b0285aaa2549d45dfcb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;721&quot; data-rawheight=&quot;845&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;721&quot; data-original=&quot;https://pic4.zhimg.com/v2-bf0be133e44f8b0285aaa2549d45dfcb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-bf0be133e44f8b0285aaa2549d45dfcb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;721&quot; data-rawheight=&quot;845&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;721&quot; data-original=&quot;https://pic4.zhimg.com/v2-bf0be133e44f8b0285aaa2549d45dfcb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-bf0be133e44f8b0285aaa2549d45dfcb_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;举证4&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文计算了在一次到期时购买期货合约并在第二天以不同期限卖出期货合约的收盘损益。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c8606b48d93cd318eb5cae6ba7c9058c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;917&quot; data-rawheight=&quot;842&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;917&quot; data-original=&quot;https://pic1.zhimg.com/v2-c8606b48d93cd318eb5cae6ba7c9058c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c8606b48d93cd318eb5cae6ba7c9058c_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;917&quot; data-rawheight=&quot;842&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;917&quot; data-original=&quot;https://pic1.zhimg.com/v2-c8606b48d93cd318eb5cae6ba7c9058c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-c8606b48d93cd318eb5cae6ba7c9058c_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//journals.plos.org/plosone/article/file%3Fid%3D10.1371/journal.pone.0156338%26type%3Dprintable&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;journals.plos.org/ploso&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ne/article/file?id=10.1371/journal.pone.0156338&amp;amp;type=printable&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;举证5&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文在对整个时间序列进行预测之前，对其进行去噪滤波，这意味着每个点都包含未来信息。作者还将交易成本加入到他们的盈利 / 亏损中。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-708571b72dd0254cfb66f71022c0f008_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;870&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-708571b72dd0254cfb66f71022c0f008_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-708571b72dd0254cfb66f71022c0f008_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;870&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-708571b72dd0254cfb66f71022c0f008_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-708571b72dd0254cfb66f71022c0f008_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//journals.plos.org/plosone/article/file%3Fid%3D10.1371/journal.pone.0180944%26type%3Dprintable&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;journals.plos.org/ploso&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ne/article/file?id=10.1371/journal.pone.0180944&amp;amp;type=printable&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;举证6&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这篇论文试图预测美股5分钟的收益率，但忽略了股市在晚上和周末闭市的事实，作者还尝试了一大堆模型，直到其中一个模型在样本中表现还不错，一步错，步步错！&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0eb88e155160fe01d34ab7481131aa20_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;764&quot; data-rawheight=&quot;427&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;764&quot; data-original=&quot;https://pic1.zhimg.com/v2-0eb88e155160fe01d34ab7481131aa20_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0eb88e155160fe01d34ab7481131aa20_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;764&quot; data-rawheight=&quot;427&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;764&quot; data-original=&quot;https://pic1.zhimg.com/v2-0eb88e155160fe01d34ab7481131aa20_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-0eb88e155160fe01d34ab7481131aa20_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//dl.acm.org/citation.cfm%3Fdoid%3D3026477.3021380&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;dl.acm.org/citation.cfm?&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;doid=3026477.3021380&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;总结&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;尽管市场数据的可用性稳步提高，开放源码软件社区的规模逐渐扩大，但算法交易和定量投资方面的学术研究存在着犯各种错误的风险，这些错误超出了众所周知的数据挖掘风险。随着研究依赖于越来越复杂的代码来处理更多的数据，当代学术研究人员必须扮演更重要的角色：如软件开发者和数据工程师。然而，现有的学术出版和同行评审制度似乎没有很好的设备来评估这些。在数据准备方面的一些小的疏忽和一些程序上的Bug会导致无效的结果，&lt;b&gt;这些结果可能会被忽视数年。要减轻这些风险并确保正在进行研究的完整性，就需要相关行业出台更加严格的标准。&lt;/b&gt;&lt;br/&gt;&lt;/p&gt;&lt;p&gt;在国内很多机构的研报中，这个现象更是普遍存在。大家在复现研报的时候经常会踩雷。我们曾亲身经历过很多次，只能感叹：&lt;/p&gt;&lt;p&gt;&lt;b&gt;一顿操作猛如虎，原来全是Overfitting&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80330635</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>风险平价这10年！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80329945.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80329945&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-8ab0764f9b25b20024c1d6c5378a43dc_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;作者：Mike Fernandez&lt;br/&gt;编译：1+1=6&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;前言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这是公众号推出&lt;b&gt;风险平价（Risk Parity）兴衰史&lt;/b&gt;的第一部分：&lt;/p&gt;&lt;p&gt;&lt;b&gt;追逐分散（多元化）&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;“没有只涨不跌的投资策略，你必须为最坏情况做好准备，没有模型告诉你什么是最坏，根据我的经验是把你能想到的最坏的结果乘以2即可”&lt;br/&gt;—— Cliff Asness，AQR资本联合创始人&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;60/40 与 Risk Parity&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;60/40组合：&lt;/b&gt;最受欢迎的资产配置模式是传统的60/40投资组合，又被称为基准投资组合。&lt;b&gt;是把资金投资于60%的股票和40%国债的一种投资组合&lt;/b&gt;。由于该组合资产配置简单，也被经常用于作为比较基准，其收益和风险也是被广泛接受的。&lt;/p&gt;&lt;p&gt;最新数据显示：2019年上半年，传统的60/40投资组合取得了自1997年以来最好的6个月开局。 以标普500指数和巴克莱美国综合指数分别作为股票和债券的代替指标，60/40混合指数在上半年的总回报率为13.57%。过去40多年来，60/40策略的上半年回报列表如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a64bdb57da55767bdb326431b8b60de5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;479&quot; data-rawheight=&quot;288&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;479&quot; data-original=&quot;https://pic2.zhimg.com/v2-a64bdb57da55767bdb326431b8b60de5_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a64bdb57da55767bdb326431b8b60de5_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;479&quot; data-rawheight=&quot;288&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;479&quot; data-original=&quot;https://pic2.zhimg.com/v2-a64bdb57da55767bdb326431b8b60de5_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a64bdb57da55767bdb326431b8b60de5_b.jpg&quot;/&gt;&lt;figcaption&gt;来自：Ploutos&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;将这个比较再延长28年，下表列出1991-2018年期间股票指数、债券指数、60/40、低波动性股票（LV）和80/20低波动性股票和债券组合的表现情况：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-dc3b9d61b351b143a57889ad12545a67_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;390&quot; data-rawheight=&quot;141&quot; class=&quot;content_image&quot; width=&quot;390&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-dc3b9d61b351b143a57889ad12545a67_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;390&quot; data-rawheight=&quot;141&quot; class=&quot;content_image lazy&quot; width=&quot;390&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-dc3b9d61b351b143a57889ad12545a67_b.jpg&quot;/&gt;&lt;figcaption&gt;来自：Ploutos&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;下面的图表显示了60/40策略的累计收益，其组成部分——标准普尔500指数和美国总债券指数以及低波动性指数和80/20投资组合。 &lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ccf32d94f6f1e8b55ba18a4e9ebc859f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;476&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;476&quot; data-original=&quot;https://pic4.zhimg.com/v2-ccf32d94f6f1e8b55ba18a4e9ebc859f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ccf32d94f6f1e8b55ba18a4e9ebc859f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;476&quot; data-rawheight=&quot;286&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;476&quot; data-original=&quot;https://pic4.zhimg.com/v2-ccf32d94f6f1e8b55ba18a4e9ebc859f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-ccf32d94f6f1e8b55ba18a4e9ebc859f_b.jpg&quot;/&gt;&lt;figcaption&gt;来自：Ploutos&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;然而从风险的角度来看，整体组合风险的90%来自股票，而只有10%来自债券，风险并不均衡&lt;/b&gt;。在高系统性风险的情况下，这无疑让投资组合暴露于高风险中。2008年金融危机中，传统的60/40组合给不少机构带来了严重损失。&lt;/p&gt;&lt;p&gt;风险平价（Risk Parity），又称为风险均衡，是磐安资产管理公司（PanAgora）首席投资官钱恩平博士（Edward Qian）在2005年提出来的，因此他又被称为风险均衡理论之父。钱博士拥有北京大学数学学士学位和佛罗里达州立大学应用数学博士学位，于1996年开始了他的投资生涯，2005年起一直都在磐安资管工作。他创造了“风险均衡”一词，还对定量股权投资组合管理做出了重要贡献。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a4f2cf862a7a67e2a6375738a591c6c1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;633&quot; data-rawheight=&quot;328&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;633&quot; data-original=&quot;https://pic2.zhimg.com/v2-a4f2cf862a7a67e2a6375738a591c6c1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a4f2cf862a7a67e2a6375738a591c6c1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;633&quot; data-rawheight=&quot;328&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;633&quot; data-original=&quot;https://pic2.zhimg.com/v2-a4f2cf862a7a67e2a6375738a591c6c1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a4f2cf862a7a67e2a6375738a591c6c1_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;虽然“风险均衡”这个概念在2005年才被提出来，但最早将这个理念付诸实践的是全球最大的对冲基金——桥水基金（Bridgewater Associates)，它的创始人是瑞·达利欧（Ray Dalio）。&lt;/p&gt;&lt;p&gt;&lt;b&gt;国内百度百科，有关风险平价的词条和公式推导就是我们公众号编辑部成员Wally所写&lt;/b&gt;，平时大家借鉴的公式就是我们的整的哟！&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-0eec3943e36ae65bb2ee2a0031168f7e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;847&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-0eec3943e36ae65bb2ee2a0031168f7e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-0eec3943e36ae65bb2ee2a0031168f7e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;847&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-0eec3943e36ae65bb2ee2a0031168f7e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-0eec3943e36ae65bb2ee2a0031168f7e_b.jpg&quot;/&gt;&lt;figcaption&gt;公众号编辑部贡献此词条及公式推导&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;风险平价法在资产配置上着眼于风险，而不考虑各资产的平均收益率，通常在配置中要求每类资产对整体投资组合的风险贡献是相同的&lt;/b&gt;。为了达到和60/40组合相当的收益率，可通过加杠杆和去杠杆的方式实现。因此，理论上，在相同的风险暴露水平下，风险平价组合能够获得比60/40组合更好的收益率；在获得相同收益率的情况下，风险平价组合会面临更低的风险，即更小的波动率。&lt;/p&gt;&lt;p&gt;国内有一篇教简单的论文有涉及，大家可以查看：&lt;/p&gt;&lt;p&gt;&lt;b&gt;文末下载此文档&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d83c19d412ca231ef9015526bfe7ec45_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;972&quot; data-rawheight=&quot;511&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;972&quot; data-original=&quot;https://pic2.zhimg.com/v2-d83c19d412ca231ef9015526bfe7ec45_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d83c19d412ca231ef9015526bfe7ec45_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;972&quot; data-rawheight=&quot;511&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;972&quot; data-original=&quot;https://pic2.zhimg.com/v2-d83c19d412ca231ef9015526bfe7ec45_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-d83c19d412ca231ef9015526bfe7ec45_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;2010年：黄金时代&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;对于具有风险平价的产品（而不是资产所有者）来说，“过去与未来结合”的黄金年份是在2010年：&lt;/p&gt;&lt;p&gt;1、&lt;b&gt;风险平价在2010年的表现比60/40高出13%&lt;/b&gt;。在2008年金融危机期间，许多版本在2008年的崩溃中也表现优异。&lt;/p&gt;&lt;p&gt;2、由于前所未有的量化宽松政策，人们越来越担心即将到来的大规模通货膨胀。所有人都认为，60/40的预期回报率正变得过低，另一个“2008”很快就会到来。&lt;/p&gt;&lt;p&gt;3、为了让事情更加完美，在接下来的两年里，&lt;b&gt;风险平价在2011年和2012年分别以+8.7%和+6.2%的优势击败了60/40。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;4、其结果是：“突然间”，所有基于逻辑多元化的风险平价论证最终对每个人和资金流入都有意义。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2012年：巨大冲击&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在2012年，风险平价给人们带来了巨大的冲击。&lt;/p&gt;&lt;p&gt;养老金计划在他们的业绩报告中创造了一个新的风险平价类别，这种情况几乎从未发生过。桥水和AQR成为了首选的提供机构，这也伴随着大量white papers的产生：&lt;/p&gt;&lt;p&gt;&lt;b&gt;文末下载此文档&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a34be8acd14fb4ad1030639e1c357c86_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;806&quot; data-rawheight=&quot;831&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;806&quot; data-original=&quot;https://pic3.zhimg.com/v2-a34be8acd14fb4ad1030639e1c357c86_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a34be8acd14fb4ad1030639e1c357c86_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;806&quot; data-rawheight=&quot;831&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;806&quot; data-original=&quot;https://pic3.zhimg.com/v2-a34be8acd14fb4ad1030639e1c357c86_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-a34be8acd14fb4ad1030639e1c357c86_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;文末下载此文档&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-19109773da0d0a9713d8337f592d01d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;927&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-19109773da0d0a9713d8337f592d01d2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-19109773da0d0a9713d8337f592d01d2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;800&quot; data-rawheight=&quot;927&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;800&quot; data-original=&quot;https://pic3.zhimg.com/v2-19109773da0d0a9713d8337f592d01d2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-19109773da0d0a9713d8337f592d01d2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;其创造了无数追随者的崇拜。几年后，即使是最著名的self-help guru也宣称风险平价是最明智的投资方式：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-354e0e7100440b716c73b368269ea075_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;593&quot; data-rawheight=&quot;866&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;593&quot; data-original=&quot;https://pic2.zhimg.com/v2-354e0e7100440b716c73b368269ea075_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-354e0e7100440b716c73b368269ea075_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;593&quot; data-rawheight=&quot;866&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;593&quot; data-original=&quot;https://pic2.zhimg.com/v2-354e0e7100440b716c73b368269ea075_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-354e0e7100440b716c73b368269ea075_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;2013年：完美错过&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;正如养老金计划刚刚实施了风险平价配置，2013年风险平价的表现令人震惊——比60/40低19.4%。&lt;/p&gt;&lt;p&gt;作为股票投资者，2013年是你梦寐以求的一年，风险平价完全回避了这一收益，实际上，总回报甚至下降了2%。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2014-2015年：持续低迷&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在此基础上，未来两年风险平价继续低于60/40，&lt;b&gt;2014年和2015年分别下降了1.5%和9.9%&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;1、这种痛苦的感觉逐渐演变为悲观的论调：有关通货紧缩的讨论、大宗商品配置受到质疑、风险平价的夏普比率假设受到批评，一些人将风险平价列为一种杠杆债券，即短期波动性债券等等。&lt;/p&gt;&lt;p&gt;2、对风险平价的信心严重削弱。辩护和批评越来越多。&lt;/p&gt;&lt;p&gt;&lt;b&gt;辩护方：&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-dd03f734b7a9743970688bb744df7f07_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;695&quot; data-rawheight=&quot;737&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;695&quot; data-original=&quot;https://pic4.zhimg.com/v2-dd03f734b7a9743970688bb744df7f07_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-dd03f734b7a9743970688bb744df7f07_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;695&quot; data-rawheight=&quot;737&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;695&quot; data-original=&quot;https://pic4.zhimg.com/v2-dd03f734b7a9743970688bb744df7f07_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-dd03f734b7a9743970688bb744df7f07_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;批判方：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;文末下载此文档&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f9cc2a6fa099dd190f0e540fb65e3969_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;728&quot; data-rawheight=&quot;951&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;728&quot; data-original=&quot;https://pic2.zhimg.com/v2-f9cc2a6fa099dd190f0e540fb65e3969_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f9cc2a6fa099dd190f0e540fb65e3969_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;728&quot; data-rawheight=&quot;951&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;728&quot; data-original=&quot;https://pic2.zhimg.com/v2-f9cc2a6fa099dd190f0e540fb65e3969_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-f9cc2a6fa099dd190f0e540fb65e3969_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;2016-2017年：略有反弹&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;相对业绩略有反弹（&lt;b&gt;2016年增长5.4% ，2017年增长1.6%&lt;/b&gt;） ，赢得了一些时间和耐心，但不足以扭转2013-2015年累积的痛苦，其衡量标准是收益的两倍。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2018年：又一重拳&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;风险平价表现低于60/40，&lt;b&gt;跌幅为-7.3%&lt;/b&gt; 。&lt;/p&gt;&lt;p&gt;是不是我们出局了？报道此事的头条新闻越来越多：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-e1c5ad17a26337fe742ba7da29075fe6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;732&quot; data-rawheight=&quot;867&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;732&quot; data-original=&quot;https://pic3.zhimg.com/v2-e1c5ad17a26337fe742ba7da29075fe6_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-e1c5ad17a26337fe742ba7da29075fe6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;732&quot; data-rawheight=&quot;867&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;732&quot; data-original=&quot;https://pic3.zhimg.com/v2-e1c5ad17a26337fe742ba7da29075fe6_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-e1c5ad17a26337fe742ba7da29075fe6_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-0064937c92b7d824c4f1a3b0fcb92c13_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;813&quot; data-rawheight=&quot;415&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;813&quot; data-original=&quot;https://pic4.zhimg.com/v2-0064937c92b7d824c4f1a3b0fcb92c13_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-0064937c92b7d824c4f1a3b0fcb92c13_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;813&quot; data-rawheight=&quot;415&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;813&quot; data-original=&quot;https://pic4.zhimg.com/v2-0064937c92b7d824c4f1a3b0fcb92c13_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-0064937c92b7d824c4f1a3b0fcb92c13_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;更令人惊讶的是，即使是该产品的最大拥护者也开始发起了牢骚：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-273acef521432b2a6c8e68fadc4026a4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;560&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-273acef521432b2a6c8e68fadc4026a4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-273acef521432b2a6c8e68fadc4026a4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;560&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-273acef521432b2a6c8e68fadc4026a4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-273acef521432b2a6c8e68fadc4026a4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.bloomberg.com/news/articles/2018-12-07/aqr-strips-risk-parity-name-from-mutual-fund-after-redemptions&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;bloomberg.com/news/arti&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;cles/2018-12-07/aqr-strips-risk-parity-name-from-mutual-fund-after-redemptions&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b5ffb5769e6275881b0a52924141ca18_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;308&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b5ffb5769e6275881b0a52924141ca18_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b5ffb5769e6275881b0a52924141ca18_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;308&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-b5ffb5769e6275881b0a52924141ca18_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-b5ffb5769e6275881b0a52924141ca18_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.investmentnews.com/article/20190528/FREE/190529950/wealthfront-has-courted-controversy-with-risk-parity-fund&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;investmentnews.com/arti&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;cle/20190528/FREE/190529950/wealthfront-has-courted-controversy-with-risk-parity-fund&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-21d8e0a19be2f1333cb4c01c1b2fdb25_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;730&quot; data-rawheight=&quot;212&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;730&quot; data-original=&quot;https://pic2.zhimg.com/v2-21d8e0a19be2f1333cb4c01c1b2fdb25_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-21d8e0a19be2f1333cb4c01c1b2fdb25_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;730&quot; data-rawheight=&quot;212&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;730&quot; data-original=&quot;https://pic2.zhimg.com/v2-21d8e0a19be2f1333cb4c01c1b2fdb25_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-21d8e0a19be2f1333cb4c01c1b2fdb25_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.pionline.com/article/20140917/ONLINE/140919848/bridgewater-combines-pure-alpha-and-risk-parity-beta-in-new-strategy&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;pionline.com/article/20&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;140917/ONLINE/140919848/bridgewater-combines-pure-alpha-and-risk-parity-beta-in-new-strategy&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;但并非所有人都在抛售，一些人实际上在增加配置，比如：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cba27f7078bf6c1c2bedb4fefcd325ed_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;854&quot; data-rawheight=&quot;399&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;854&quot; data-original=&quot;https://pic2.zhimg.com/v2-cba27f7078bf6c1c2bedb4fefcd325ed_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cba27f7078bf6c1c2bedb4fefcd325ed_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;854&quot; data-rawheight=&quot;399&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;854&quot; data-original=&quot;https://pic2.zhimg.com/v2-cba27f7078bf6c1c2bedb4fefcd325ed_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-cba27f7078bf6c1c2bedb4fefcd325ed_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.ai-cio.com/news/oregon-perf-shift-allocations-shrinking-stocks-pe/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;ai-cio.com/news/oregon-&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;perf-shift-allocations-shrinking-stocks-pe/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b3b2a7833f2fe4dca3b9cda3a5fbcc64_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;851&quot; data-rawheight=&quot;388&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;851&quot; data-original=&quot;https://pic1.zhimg.com/v2-b3b2a7833f2fe4dca3b9cda3a5fbcc64_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-b3b2a7833f2fe4dca3b9cda3a5fbcc64_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;851&quot; data-rawheight=&quot;388&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;851&quot; data-original=&quot;https://pic1.zhimg.com/v2-b3b2a7833f2fe4dca3b9cda3a5fbcc64_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-b3b2a7833f2fe4dca3b9cda3a5fbcc64_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.ai-cio.com/news/texas-teachers-shake-strategic-asset-allocation/&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;ai-cio.com/news/texas-t&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;eachers-shake-strategic-asset-allocation/&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;我们可以向这些反向投资者学习哦。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2019年&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果你在2018年sold风险平价，那么2019年将继续你的“timing torture”，因为长期利率的大幅下降已经推动风险平价再次超超越其业绩。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3894fb39df4d275c103f7064d8f653cd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;720&quot; data-rawheight=&quot;755&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;720&quot; data-original=&quot;https://pic2.zhimg.com/v2-3894fb39df4d275c103f7064d8f653cd_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-3894fb39df4d275c103f7064d8f653cd_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;720&quot; data-rawheight=&quot;755&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;720&quot; data-original=&quot;https://pic2.zhimg.com/v2-3894fb39df4d275c103f7064d8f653cd_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-3894fb39df4d275c103f7064d8f653cd_b.jpg&quot;/&gt;&lt;figcaption&gt;HFRI 12 Vol Institutional &lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;对风险平价投资者来说，追逐分散投资并不是一个愉快的经历。自2006年以来，风险平价每年仅比60/40低0.53%。我们怀疑大多数的风险平价投资者的投资结果与整个历史相似。&lt;b&gt;不要基于预期收益做出分散投资的决定。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;几年之后，一位刚从学校毕业的分析师看到这些数字时，他不会感到这些数字中任何令人兴奋或痛苦的地方。他将看到平均值、波动性，或许还有跟踪误差。相比之下，经历这些的理财顾问和投资委员会实时感到如此漫长的岁月，真的是度日如年。追逐分散投资的问题对分析师来说是不可见的。他们会统计数据，起草一份投资计划，得出一些有最新论据支持的新结论，然后提交给委员会。但这种偏见将一直困扰着分析师，直直到他经历漫长的岁月。直到现在，在电子表格中，这种偏见仍然只是一个小的单元格。不&lt;b&gt;要把Excel电子表格和真实投资混为一谈。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80329945</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>九坤，校招！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80329354.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80329354&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-52f3d3949e8863f074777ee3ca3cf7fe_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;量化投资与机器学习微信公众号【&lt;b&gt;量化岗位直推专栏】&lt;/b&gt;，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;量化主流自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;18W+&lt;/b&gt;用户，我们为所有量化金融机构&lt;b&gt;免费提供&lt;/b&gt;岗位招聘与推广，再次感谢各大金融机构对我们的信任和支持！&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-aea46c0314ac7028a6fefdcb142d32e0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;513&quot; data-rawheight=&quot;4096&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;513&quot; data-original=&quot;https://pic1.zhimg.com/v2-aea46c0314ac7028a6fefdcb142d32e0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-aea46c0314ac7028a6fefdcb142d32e0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;513&quot; data-rawheight=&quot;4096&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;513&quot; data-original=&quot;https://pic1.zhimg.com/v2-aea46c0314ac7028a6fefdcb142d32e0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-aea46c0314ac7028a6fefdcb142d32e0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;​&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80329354</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>71803倍！超强Pandas循环提速攻略</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80328910.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80328910&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-7976dc5a70e10a1882fef0f98c2a39d8_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;作者：Benedikt Droste&lt;br/&gt;编译：1+1=6&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;前言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;如果你使用Python和Pandas进行数据分析，循环是不可避免要使用的。然而，即使对于较小的DataFame来说，使用标准循环也是非常耗时的，对于较大的DataFrame来说，你懂的。今天，公众号为大家分享一个关于Pandas提速的小攻略，助你一臂之力！&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-dc067151ef42008be7f3c20b8cff4c0a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;537&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-dc067151ef42008be7f3c20b8cff4c0a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-dc067151ef42008be7f3c20b8cff4c0a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;537&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-dc067151ef42008be7f3c20b8cff4c0a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-dc067151ef42008be7f3c20b8cff4c0a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;相关文章&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;u&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653293723%26idx%3D1%26sn%3D8fcb3effaffd583882d5ffe13b330fe2%26chksm%3D802dce8eb75a4798bcb14f9f9cb19b1333c2e31d78fc837448b8a4c8990da9ad083c7fe5ecee%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;1、30倍！使用Cython加速Python代码&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;2、&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653294102%26idx%3D1%26sn%3D5dc9d21b3497fe6e1c8df98ee61e02c7%26chksm%3D802dcc03b75a4515a630076cbbe4d116ba1897f4fbb961b0811a888272f9e12953c3ca967c3c%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;CuPy：将Numpy提速700倍！&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;3&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653293923%26idx%3D2%26sn%3D3c344ab8661a2d9d6b79caa6f253f35d%26chksm%3D802dcf76b75a466080145f290dc01ddc5775906e16e04cec5d48a10f1356b37b2644fd67a38a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;、10个提高工作效率的Pandas小技巧&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;4&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653292258%26idx%3D1%26sn%3Dd5d79cecb461eab3591ab8e3c2c03ce0%26chksm%3D802dc4f7b75a4de195bcd6211ac8532d68096bef4d7ca0e5a4fcd792d1e2c7dd5bbea85f91cf%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;、高逼格使用Pandas加速代码，向for循环说拜拜！&lt;/a&gt;&lt;/u&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;标准循环&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Datatrame是Pandas对象，具有行和列。如果使用循环，你将遍历整个对象。Python不能利用任何内置函数，而且速度非常慢。 我们创建了一个包含65列和1140行的Dataframe。它包含了2016-2019赛季的足球比赛结果。我们希望创建一个新列，用于标注某个特定球队是否打了平局。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ca5fccfe61a3e213a78d190a6aa3b6c0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;500&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ca5fccfe61a3e213a78d190a6aa3b6c0_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-ca5fccfe61a3e213a78d190a6aa3b6c0_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;500&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-ca5fccfe61a3e213a78d190a6aa3b6c0_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-ca5fccfe61a3e213a78d190a6aa3b6c0_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7c0dcd2541f929c9cd0af9ddd4be1382_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;539&quot; data-rawheight=&quot;93&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;539&quot; data-original=&quot;https://pic3.zhimg.com/v2-7c0dcd2541f929c9cd0af9ddd4be1382_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7c0dcd2541f929c9cd0af9ddd4be1382_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;539&quot; data-rawheight=&quot;93&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;539&quot; data-original=&quot;https://pic3.zhimg.com/v2-7c0dcd2541f929c9cd0af9ddd4be1382_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-7c0dcd2541f929c9cd0af9ddd4be1382_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;正如你看到的，这个循环非常慢，花了&lt;b&gt;20.7秒&lt;/b&gt;。让我们看看如何才能更有效率。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;iterrows()：快321倍&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在第一个例子中，我们循环遍历了整个DataFrame。Iterrows()&lt;b&gt;为每一行返回一个 Series，因此它以索引对的形式遍历DataFrame，以Series的形式遍历目标列&lt;/b&gt;。这使得它比标准循环更快：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cadd40b0ec73adc80c6fcbbb8fc18d2d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;518&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-cadd40b0ec73adc80c6fcbbb8fc18d2d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cadd40b0ec73adc80c6fcbbb8fc18d2d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;518&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-cadd40b0ec73adc80c6fcbbb8fc18d2d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-cadd40b0ec73adc80c6fcbbb8fc18d2d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0ed44d7f4861b53625dc66c092a0db51_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;694&quot; data-rawheight=&quot;140&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;694&quot; data-original=&quot;https://pic2.zhimg.com/v2-0ed44d7f4861b53625dc66c092a0db51_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0ed44d7f4861b53625dc66c092a0db51_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;694&quot; data-rawheight=&quot;140&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;694&quot; data-original=&quot;https://pic2.zhimg.com/v2-0ed44d7f4861b53625dc66c092a0db51_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-0ed44d7f4861b53625dc66c092a0db51_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;该代码运行时间为&lt;b&gt;87毫秒&lt;/b&gt;，&lt;b&gt;比标准循环快321倍&lt;/b&gt;。 &lt;/p&gt;&lt;p&gt;但是，我们建议不要使用它，因为有更快的选择，而且&lt;b&gt;iterrows()不能保留行之间的 dtype&lt;/b&gt;。这意味着，如果你在dataframe dtypes上使用iterrows() ，它会被更改，这可能会导致很多问题。如果一定要保留dtypes，也可以使用itertuple()。这里我们不详细讨论，你可以在这里找到官方文件：&lt;/p&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.itertuples.html%3Fsource%3Dpost_page-----805030df4f06----------------------&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;pandas.pydata.org/panda&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;s-docs/stable/reference/api/pandas.DataFrame.itertuples.html?source=post_page-----805030df4f06----------------------&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Apply()：快811倍&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;apply本身并不快，但与DataFrame结合使用时，它具有很大的优势。这取决于apply表达式的内容。 如果它可以在Cython中执行，那么apply要快得多。&lt;/p&gt;&lt;p&gt;我们可以在Lambda函数中使用apply。 所要做的就是指定轴，使用axis=1，因为我们希望执行按列操作：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a437bbe396b590dc33e666935c92e7ce_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;848&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;848&quot; data-original=&quot;https://pic3.zhimg.com/v2-a437bbe396b590dc33e666935c92e7ce_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a437bbe396b590dc33e666935c92e7ce_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;848&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;848&quot; data-original=&quot;https://pic3.zhimg.com/v2-a437bbe396b590dc33e666935c92e7ce_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-a437bbe396b590dc33e666935c92e7ce_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;这段代码甚至比以前的方法更快，时间为&lt;b&gt;27毫秒&lt;/b&gt;。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Pandas Vectorization：快9280倍&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们利用向量化的优势来创建真正高效的代码。关键是要避免案例1中那样的循环代码：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0287247e9f994fd8cdc52462f271b90c_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;597&quot; data-rawheight=&quot;96&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;597&quot; data-original=&quot;https://pic1.zhimg.com/v2-0287247e9f994fd8cdc52462f271b90c_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0287247e9f994fd8cdc52462f271b90c_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;597&quot; data-rawheight=&quot;96&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;597&quot; data-original=&quot;https://pic1.zhimg.com/v2-0287247e9f994fd8cdc52462f271b90c_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-0287247e9f994fd8cdc52462f271b90c_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;我们再次使用了开始时构建的函数。我们所要做的就是改变输入。我们直接将Pandas Series传递给我们的功能，这使我们获得了巨大的速度提升。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;Nump Vectorization：快71803倍&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在前面的示例中，我们将Pandas Series传递给函数。通过adding.values，我们得到一个Numpy数组：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-257321f5a92e53411cc297627574c938_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;755&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;755&quot; data-original=&quot;https://pic1.zhimg.com/v2-257321f5a92e53411cc297627574c938_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-257321f5a92e53411cc297627574c938_b.png&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;755&quot; data-rawheight=&quot;97&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;755&quot; data-original=&quot;https://pic1.zhimg.com/v2-257321f5a92e53411cc297627574c938_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-257321f5a92e53411cc297627574c938_b.png&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Numpy数组是如此之快，因为我们引用了局部性的好处：&lt;/p&gt;&lt;p&gt;&lt;b&gt;访问局部性（locality of reference）&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在计算机科学中，访问局部性，也称为局部性原理，是取决于存储器访问模式频繁访问相同值或相关存储位置的现象的术语。访问局部性有两种基本类型——时间和空间局部性。时间局部性是指在相对较小的持续时间内对特定数据和/或资源的重用。空间局部性是指在相对靠近的存储位置内使用数据元素。当数据元素被线性地排列和访问时，例如遍历一维数组中的元素，发生顺序局部性，即空间局部性的特殊情况。&lt;/p&gt;&lt;p&gt;局部性只是计算机系统中发生的一种可预测的行为。展示强访问局部性的系统是通过使用诸如在处理器核心的流水线级处的高速缓存，用于存储器的预取和高级分支预测器的技术的性能优化的良好候选者。&lt;/p&gt;&lt;p&gt;代码运行了&lt;b&gt;0.305毫秒&lt;/b&gt;，比开始时使用的标准循环快了 &lt;b&gt;71803倍！&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;总结&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;我们比较了五种不同的方法，并根据一些计算将一个新列添加到我们的DataFrame中。我们注意到了速度方面的巨大差异：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d3341b355e9f0fadf42f0955ceaed71a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;533&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d3341b355e9f0fadf42f0955ceaed71a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-d3341b355e9f0fadf42f0955ceaed71a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;533&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-d3341b355e9f0fadf42f0955ceaed71a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-d3341b355e9f0fadf42f0955ceaed71a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;请记住：&lt;/p&gt;&lt;p&gt;&lt;b&gt;1、如果确定需要使用循环，则应始终选择apply方法。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;2、否则，vectorization总是更好的，因为它更快！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;文章参考&lt;/b&gt;&lt;/p&gt;&lt;p&gt;[1] &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/52673285/performance-of-pandas-apply-vs-np-vectorize-to-create-new-column-from-existing-c&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;stackoverflow.com/quest&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ions/52673285/performance-of-pandas-apply-vs-np-vectorize-to-create-new-column-from-existing-c&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;[2 ] &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Locality_of_reference&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;en.wikipedia.org/wiki/L&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;ocality_of_reference&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80328910</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>CuPy：将Numpy提速700倍！</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80328224.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80328224&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-5c6c2a6d8cc0c197a5b7bfb19d8d44db_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&gt;作者：George Seif&lt;br/&gt;编译：1+1=6&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;前言&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;Numpy是Python社区的一份礼物。它允许数据科学家、机器学习实践者和统计学家以一种简单有效的方式处理矩阵式的海量数据。&lt;/p&gt;&lt;p&gt;当你发现Python代码运行缓慢时，特别是看到许多 for-loop循环时，那么将数据处理迁移到Numpy并让其向量化以最快的速度完成工作总是一个好主意！&lt;/p&gt;&lt;p&gt;尽管如此，即使这样加速Numpy也只能在CPU上运行。由于使用者的CPU通常有8个或更少的内核，因此可以加速的速度是有限的。&lt;/p&gt;&lt;p&gt;如何解决这个问题，CuPy来啦！&lt;/p&gt;&lt;h2&gt;&lt;b&gt;相关文章&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653293723%26idx%3D1%26sn%3D8fcb3effaffd583882d5ffe13b330fe2%26chksm%3D802dce8eb75a4798bcb14f9f9cb19b1333c2e31d78fc837448b8a4c8990da9ad083c7fe5ecee%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;1、30倍！使用Cython加速Python代码&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653293923%26idx%3D2%26sn%3D3c344ab8661a2d9d6b79caa6f253f35d%26chksm%3D802dcf76b75a466080145f290dc01ddc5775906e16e04cec5d48a10f1356b37b2644fd67a38a%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;2、10个提高工作效率的Pandas小技巧&lt;/a&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzAxNTc0Mjg0Mg%3D%3D%26mid%3D2653292258%26idx%3D1%26sn%3Dd5d79cecb461eab3591ab8e3c2c03ce0%26chksm%3D802dc4f7b75a4de195bcd6211ac8532d68096bef4d7ca0e5a4fcd792d1e2c7dd5bbea85f91cf%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;3、高逼格使用Pandas加速代码，向for循环说拜拜！&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;什么是CuPy？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;CuPy是一个通过利用CUDA GPU库在Nvidia GPU上实现Numpy数组的库&lt;/b&gt;。通过这种实现，由于拥有许多CUDA核心GPU，可以实现更好的并行加速。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0e8b90028c93a608105b6839d58cd729_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;957&quot; data-rawheight=&quot;389&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;957&quot; data-original=&quot;https://pic2.zhimg.com/v2-0e8b90028c93a608105b6839d58cd729_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0e8b90028c93a608105b6839d58cd729_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;957&quot; data-rawheight=&quot;389&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;957&quot; data-original=&quot;https://pic2.zhimg.com/v2-0e8b90028c93a608105b6839d58cd729_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-0e8b90028c93a608105b6839d58cd729_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;官网：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/cupy/cupy&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/cupy/cupy&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;CuPy的接口是Numpy的镜像，在大多数情况下，它可以被直接替代。&lt;b&gt;只要用兼容的CuPy代码替换你的Numpy代码，你就可以加快 GPU 的运行速度&lt;/b&gt;。CuPy将支持Numpy的大多数数组操作，包括索引、广播和各种矩阵转换。&lt;/p&gt;&lt;p&gt;你也可以编写自定义Python代码，利用CUDA和GPU加速，如果你有一些特定的东西还不支持的话。 只需要一小段C++格式的代码，CuPy就会自动执行GPU转换，非常类似于使用Cython。&lt;/p&gt;&lt;p&gt;我们可以通过pip安装这个库：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;pip&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cupy&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;运行GPU基于CuPy&lt;/b&gt;&lt;/p&gt;&lt;p&gt;对于这些基准测试，我们将使用PC机进行以下设置：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;i7–8700k CPU&lt;/li&gt;&lt;li&gt;1080 Ti GPU&lt;/li&gt;&lt;li&gt;32 GB of DDR4 3000MHz RAM&lt;/li&gt;&lt;li&gt;CUDA 9.0&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;一旦安装了CuPy，我们可以像Numpy一样导入它：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cupy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cp&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;对于剩下的代码，在Numpy和CuPy之间切换就像用CuPy的cp替换Numpy中的np一样简单。下面的代码为Numpy和CuPy创建了一个3D数组，其中包含10亿个1。 为了测试创建数组的速度，使用了 Python的本地time库：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;c1&quot;&gt;### Numpy and CPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;### CuPy and GPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;令人难以置信的是，即使只是创建数组，CuPy仍然要快得多。 &lt;b&gt;Numpy在1.68秒内创建了10亿个1的数组，而CuPy只花了0.16秒，这是10.5倍的加速！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;让我们尝试对数组进行一些数学运算。这次我们将整个数组乘以5，再次查看Numpy与CuPy的速度。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;c1&quot;&gt;### Numpy and CPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;### CuPy and GPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在本例中，CuPy完胜Numpy。Numpy花了0.507秒，而CuPy只花了0.000710秒。&lt;b&gt;714.1倍&lt;/b&gt;的加速！&lt;/p&gt;&lt;p&gt;现在让我们尝试使用多个数组并执行一些操作：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;c1&quot;&gt;### Numpy and CPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_cpu&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;### CuPy and GPU&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_gpu&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在本例中，&lt;b&gt;Numpy在CPU上以1.49秒&lt;/b&gt;的时间执行该进程，而&lt;b&gt;CuPy在GPU上以0.0922秒&lt;/b&gt;的时间执行该进程。&lt;b&gt;16.16倍的加速！&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;总是那么快吗?&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;使用CuPy是在GPU上多次加速Numpy和矩阵操作的一个很好的方法。需要注意的是，你将&lt;b&gt;获得的加速度在很大程度上取决于所使用数组的大小&lt;/b&gt;。下面的表格显示了当我们改变数组的大小时速度上的差异：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b0bc627898ba956020d21c7e4ab380d1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;410&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-b0bc627898ba956020d21c7e4ab380d1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-b0bc627898ba956020d21c7e4ab380d1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;410&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-b0bc627898ba956020d21c7e4ab380d1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-b0bc627898ba956020d21c7e4ab380d1_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;一旦：&lt;/p&gt;&lt;p&gt;&lt;b&gt;达到约1000万个数据点，加速度就会急剧上升！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;而一旦：&lt;/p&gt;&lt;p&gt;&lt;b&gt;超过1亿个数据点，加速度就会大大加快！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在此之下：&lt;/p&gt;&lt;p&gt;&lt;b&gt;Numpy实际上更快！&lt;/b&gt;&lt;/p&gt;&lt;p&gt;还要记住，&lt;b&gt;更多的GPU内存将帮助你处理更多的数据，所以重要的是看看你的GPU是否有足够的内存来容纳足够的数据&lt;/b&gt;，而 CuPy是值得的！&lt;/p&gt;&lt;p&gt;&lt;i&gt;来自：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//twitter.com/GeorgeSeif94&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;twitter.com/GeorgeSeif9&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80328224</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>你能在千禧年赚多少钱？</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80327672.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80327672&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：公众号编辑部&lt;/p&gt;&lt;h2&gt;&lt;b&gt;如何加入千禧年&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;千禧年基金（Millennium Management）是一家成立于1989年的全球性投资管理公司，截至2019年8月1日，&lt;b&gt;管理规模达392亿美元&lt;/b&gt;。在美国、欧洲和亚洲办事处有&lt;b&gt;超过2900名员工&lt;/b&gt;。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-9e2fb894a57e420c739ffa0c1ad8fe7a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;221&quot; data-rawheight=&quot;221&quot; class=&quot;content_image&quot; width=&quot;221&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-9e2fb894a57e420c739ffa0c1ad8fe7a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;221&quot; data-rawheight=&quot;221&quot; class=&quot;content_image lazy&quot; width=&quot;221&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-9e2fb894a57e420c739ffa0c1ad8fe7a_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;仅去年一年，该公司就雇佣了300人，其中180人被大致归类为投资人员。这并不意味着进入千禧年是件容易的事。&lt;b&gt; 他们不招收没有业绩的专业投资人士。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果你是一名&lt;b&gt;基金经理&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;b&gt;你需要有成熟的策略，还需证明你可以很快赚到钱。而且只能通过交易高流动性的产品来实现。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果你是一名&lt;b&gt;分析师&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;b&gt;你需要说服千禧年的一位基金经理聘请你加入他/她的团队。 每个团队通常由七八个人组成。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;▍金融时报&lt;/b&gt;在年初报道：&lt;/p&gt;&lt;p&gt;对冲基金经历了7年来最糟糕的一年，2018年第四季度的金融市场动荡让许多人措手不及。 但对于陷入困境的行业来说，这并不全是坏消息：它们也十年来首次击败了标普500。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-90cd63fe94c1a551b070720910267c24_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;700&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;700&quot; data-original=&quot;https://pic1.zhimg.com/v2-90cd63fe94c1a551b070720910267c24_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-90cd63fe94c1a551b070720910267c24_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;700&quot; data-rawheight=&quot;454&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;700&quot; data-original=&quot;https://pic1.zhimg.com/v2-90cd63fe94c1a551b070720910267c24_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-90cd63fe94c1a551b070720910267c24_b.jpg&quot;/&gt;&lt;figcaption&gt;*图片来自：金融时报&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;知情人士表示，Point72上涨约0.7% ，Exodus Point上涨0.6% ，&lt;b&gt;千禧年上涨4.88%&lt;/b&gt; 。&lt;/p&gt;&lt;p&gt;千禧年团队的策略五花八门，有相对价值、统计套利、合并套利，或者纯粹的固收和大宗商品投资，但都有一个共同点：&lt;b&gt;他们只投资流动性高的产品&lt;/b&gt;。这和前面说的如出一辙！&lt;/p&gt;&lt;p&gt;因此，加入千禧年的基金经理要么需要加入现有团队中的一个，要么提出一个全新的策略。如果选择后者，你会被详细询问该想法的有效性。那些曾经有过此经历人说：这个过程非常、非常给力。&lt;b&gt;如果千禧年喜欢你，它将为你建立一个充满数据、分析和世界级的办公室环境&lt;/b&gt;。这可能是你最接近于管理自己的基金的方式。&lt;/p&gt;&lt;p&gt;这可能就是为什么前高盛董事总经理Ankit Raj、前hutchinson Hill创始人Neil christs、前高盛交易员兼投资组合经理Uberto Palomba等人选择去千禧年的原因。FCA的数据显示，千禧年去年在伦敦总共雇佣了约35人（并非全部为 PMs)），包括最近从Citadel出来的Diego Megia，以及前汇丰（HSBC）高收益和投资企业信贷分析主管Julien Raffelsbauer等。&lt;/p&gt;&lt;p&gt;即便如此，千禧年并不适合每个人。2018年，大约有35人离开了千禧的伦敦办事处，根据FCA的数据，其中25人还没有在英国的注册职位上重新露面。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;你能在千禧年赚多少钱？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;千禧年对冲基金在全球范围内被分为200个独立运营团队，每个团队的&lt;b&gt;收益与其自身业绩成正比&lt;/b&gt;。 而千禧年的薪酬结构更加细化：&lt;b&gt;如果你的团队的策略做得好，你就会得到奖励，即使该基金其他团队都出现了亏损。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这对你的工资和奖金意味着什么？千禧年没有在全球公布薪酬，但该基金的两家英国实体：Millennium Capital Management ltd.（英国控股公司，包括所有行政和投资人员）和Millennium Capital Partners LLP（主要由投资人员组成）刚刚公布了截至2018年12月31日的年度薪酬信息。&lt;/p&gt;&lt;p&gt;Millennium Capital Partners的薪酬最高。2018年，12名合伙人的平均利润分配为130万英镑（高于前一年的110万英镑），&lt;b&gt;收入最高的合伙人获得650万英镑&lt;/b&gt;（低于前一年的700万英镑）。&lt;/p&gt;&lt;p&gt;除了12名合伙人，Millennium Capital Partners在2018年聘用了&lt;b&gt;127名专业投资人员&lt;/b&gt;，向他们支付了总计6900万英镑的薪资，&lt;b&gt;平均每人54.3万英镑&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;如果加上行政人员，平均薪酬就会下降。Millennium Capital Management在英国的279名员工（142名专业人士和137名管理人员）2018年的平均薪资为9200万英镑，&lt;b&gt;平均每人33万英镑&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;去年，千禧年旗下两家英国公司的营业额都增长了19%左右，达到2.26亿英镑。然而，每个注册实体的成本几乎成比例增加，结果是利润基本停滞不前。&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80327672</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
<item>
<title>另类Alpha：基于产业节点联动效应的量化交易策略</title>
<link>https://henix.github.io/feeds/zhuanlan.Lhtz-Jqxx/2019-08-29-80326765.html</link>
<description>&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80326765&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;title-image&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-053dd06d746ebd7f17b7d675fc261b55_b.jpg&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&lt;p&gt;作者：数库科技&lt;/p&gt;&lt;h2&gt;&lt;b&gt;一、数据说明&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1、产品节点标准化处理&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;产业链是由不同产品节点通过上下游关系连接起来的网状数据&lt;/b&gt;。数库以GICS行业分类为标准，通过对上市公司财务报告上的主营业务分项数据的标准化处理，将财报上数以万计的非标准化产品标准化为近4000个产品节点，并在这些产品节点之间定义了以下关系：&lt;/p&gt;&lt;p&gt;• A：生产设备：上游生产制造时所需要的工业机械、电气设备等&lt;/p&gt;&lt;p&gt;• D：销售渠道：购买原材料或者销售成品的环节&lt;/p&gt;&lt;p&gt;• F：辅助设备：产品后续正常运转所需的辅助设备&lt;/p&gt;&lt;p&gt;• M：生产原料：上游生产制造时所需要的原材料等&lt;/p&gt;&lt;p&gt;• P：主体：一般是生产流程产出的成品，或待销售 的产品、服务 &lt;/p&gt;&lt;p&gt;• R：辅助材料：产品后续正常运转所需的辅助材料&lt;/p&gt;&lt;p&gt;• T：技术服务：生产时所需要的专业技术、商业服务或为相关产品提供的后续服务&lt;/p&gt;&lt;p&gt;如下图所示，为“半导体”上下游的关系图，其中上游有如“生产设备”相关的“半导体设备”及真空镀膜设备，下游有如“技术服务”的“半导体产品安装服务”。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0bbae204fe76125273b9124f55a4887d_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;979&quot; data-rawheight=&quot;281&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;979&quot; data-original=&quot;https://pic2.zhimg.com/v2-0bbae204fe76125273b9124f55a4887d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-0bbae204fe76125273b9124f55a4887d_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;979&quot; data-rawheight=&quot;281&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;979&quot; data-original=&quot;https://pic2.zhimg.com/v2-0bbae204fe76125273b9124f55a4887d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-0bbae204fe76125273b9124f55a4887d_b.jpg&quot;/&gt;&lt;figcaption&gt;图1：半导体产品上下游关系图&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;上市公司在年报及半年报会披露该报告期的主营业务收入的分项数据，通过匹配这些非标准的产品与数库产业链的标准产品节点，我们可以把上市公司根据其主营业务把他们串联在一起。如图2所示，美的集团在17年的年报上披露了其主营业务收入的明细情况，我们通过标准化处理把“暖通空调”标准化为“空调器”、“机器人及自动化系统”标准化为“工业机器人”等。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-45314edce911851fbc11e8c5ce0c0b18_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;922&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;922&quot; data-original=&quot;https://pic1.zhimg.com/v2-45314edce911851fbc11e8c5ce0c0b18_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-45314edce911851fbc11e8c5ce0c0b18_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;922&quot; data-rawheight=&quot;316&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;922&quot; data-original=&quot;https://pic1.zhimg.com/v2-45314edce911851fbc11e8c5ce0c0b18_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-45314edce911851fbc11e8c5ce0c0b18_b.jpg&quot;/&gt;&lt;figcaption&gt;图2：美的集团2017年主营业务收入&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;当有了每家上市公司的标准化主营业务收入数据后，不同的上市公司自然就可以通过这些标准的产品节点串联在一起，如下图3所示为空调产业链的部分数据，空调器的下游有白色家电销售，而相关的公司有“苏宁易购”；空调器的上游有“铜矿及其精矿”，相关的公司有“华钰矿业”等。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f124dfb52d00eb0d252c486d5eed7759_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-f124dfb52d00eb0d252c486d5eed7759_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-f124dfb52d00eb0d252c486d5eed7759_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;387&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic2.zhimg.com/v2-f124dfb52d00eb0d252c486d5eed7759_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-f124dfb52d00eb0d252c486d5eed7759_b.jpg&quot;/&gt;&lt;figcaption&gt;图3：空调产业链&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;2、产品层级与唯一主营业务&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;正如行业分类有级别之分，数据的产业链数据中产品节点也有层级之分，数库产品的一级科目对应的是数库行业分类的四级行业，&lt;b&gt;产品最深可以到9级（也就是行业的12级）&lt;/b&gt;，每家上市公司的唯一主营业务定义为在某个产品层级上的收入占其总收入的50%以上，我们就以该产品节点作为这家上市公司该报告期的主营业务。&lt;/p&gt;&lt;p&gt;如下图4所示，在玻璃容器这个4级的产品节点上，相关的上市公司有“山东华鹏”、“德力股份”等6家上市公司，但其中只有前两家上市公司在该产品节点的收入占比超过50%，所以我们就以“玻璃容器”作为“山东华鹏”及“德力股份”的唯一主营业务。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f790bd9314834c60bb18832181c953a8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;275&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f790bd9314834c60bb18832181c953a8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-f790bd9314834c60bb18832181c953a8_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;939&quot; data-rawheight=&quot;275&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;939&quot; data-original=&quot;https://pic1.zhimg.com/v2-f790bd9314834c60bb18832181c953a8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-f790bd9314834c60bb18832181c953a8_b.jpg&quot;/&gt;&lt;figcaption&gt;图4：产品层级及业务收入占比&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;二、策略研究&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1、策略逻辑&lt;/b&gt;&lt;/p&gt;&lt;p&gt;根据数库的产业链数据，我们可以定义每家A股上市公司的唯一主营业务。当唯一主营业务相同的公司里，大部分公司的股价出现同向涨跌，而剩下的没有出现同向涨跌的公司的股价是否会在后面的交易日里出现联动效应呢？这就是本章我们探讨的基于产业链数据的股价联动的交易策略。&lt;/p&gt;&lt;p&gt;具体的策略逻辑做如下定义：&lt;/p&gt;&lt;p&gt;&lt;b&gt;首先，根据每家公司的唯一主营业务，找出唯一主营业务且公司数量大于等于4家上市公司的产品节点。统计在上一个交易日，这N家上市公司股价的涨跌情况，如果有超过75%的公司的股价同涨（收益率均大于0），则在第二个交易日买入剩余的未上涨的股票。如果有超过75%的公司的股价同跌（收益率均小于0），则在第二个交易日做空剩余的未下跌的股票。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;2、回测研究&lt;/b&gt;&lt;/p&gt;&lt;p&gt;回测区间2015年1月份至2019年7月份，由于考虑到主营业务必须要反应同一个财报期的情况，对于财报数据我们没有做Point in Time的处理。而是采用以下对其规则：1-4月份使用上一年度的半年报数据，5-8月份使用上一年度的年报数据，9-12月份使用本年度的半年报数据。&lt;/p&gt;&lt;p&gt;&lt;b&gt;2.1 数据统计&lt;/b&gt;&lt;/p&gt;&lt;p&gt;在数库提供产业链数据表中，有一张数据表[fin_secu_primary_product]专门提供每个报告期各上市公司唯一主营业务的数据。该表的相关字段说明如下表：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-34a30444943ac1149aebf574ad1d6a4f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;662&quot; data-rawheight=&quot;885&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;662&quot; data-original=&quot;https://pic4.zhimg.com/v2-34a30444943ac1149aebf574ad1d6a4f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-34a30444943ac1149aebf574ad1d6a4f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;662&quot; data-rawheight=&quot;885&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;662&quot; data-original=&quot;https://pic4.zhimg.com/v2-34a30444943ac1149aebf574ad1d6a4f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-34a30444943ac1149aebf574ad1d6a4f_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;我们统计了2015-2019每个报告期涉及的唯一主营产品的数量，以及唯一主营产品相同且公司数量超过四家的公司的产品节点覆盖的所有A股上市公司的数量。从下图可以看出，&lt;b&gt;A股上市公司所有主营产品的种类大约在1200-1500之间&lt;/b&gt;；同样，&lt;b&gt;唯一主营产品相同且超过四家公司的产品节点总共覆盖的A股上市公司的数量在1000-1600之间&lt;/b&gt;。所以该策略在监测同一产品节点股价的联动性时，大概覆盖了全市场一半的股票。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-2b8a73415f975973c063cca4c1eef842_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;629&quot; data-rawheight=&quot;329&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;629&quot; data-original=&quot;https://pic3.zhimg.com/v2-2b8a73415f975973c063cca4c1eef842_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-2b8a73415f975973c063cca4c1eef842_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;629&quot; data-rawheight=&quot;329&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;629&quot; data-original=&quot;https://pic3.zhimg.com/v2-2b8a73415f975973c063cca4c1eef842_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-2b8a73415f975973c063cca4c1eef842_b.jpg&quot;/&gt;&lt;figcaption&gt;图5：各财报期唯一主营业务产品数量&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2f15d25c2f76054f369c5e39797f0f21_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;629&quot; data-rawheight=&quot;364&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;629&quot; data-original=&quot;https://pic2.zhimg.com/v2-2f15d25c2f76054f369c5e39797f0f21_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2f15d25c2f76054f369c5e39797f0f21_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;629&quot; data-rawheight=&quot;364&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;629&quot; data-original=&quot;https://pic2.zhimg.com/v2-2f15d25c2f76054f369c5e39797f0f21_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-2f15d25c2f76054f369c5e39797f0f21_b.jpg&quot;/&gt;&lt;figcaption&gt;图6：各财报期唯一主营业务产品公司数量大于4家的产品节点覆盖的上市公司数量&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;2.2 回测结果&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如下图所示，&lt;b&gt;在2015.01-2019.07月份，该策略大幅跑赢了买入持有策略&lt;/b&gt;，其中空头、多头和多空策略的累积收益分别为32%、27%及69%，胜率分别为49%、47%及55%。详细的收益率的统计指标如表格8所示。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cf2ef3bc9d0c193710cc53335d14c029_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;775&quot; data-rawheight=&quot;393&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;775&quot; data-original=&quot;https://pic2.zhimg.com/v2-cf2ef3bc9d0c193710cc53335d14c029_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-cf2ef3bc9d0c193710cc53335d14c029_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;775&quot; data-rawheight=&quot;393&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;775&quot; data-original=&quot;https://pic2.zhimg.com/v2-cf2ef3bc9d0c193710cc53335d14c029_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-cf2ef3bc9d0c193710cc53335d14c029_b.jpg&quot;/&gt;&lt;figcaption&gt;图7：2015-2019收益曲线图&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-44caa8cb8a954d607e17b00b9040198e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1073&quot; data-rawheight=&quot;796&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1073&quot; data-original=&quot;https://pic3.zhimg.com/v2-44caa8cb8a954d607e17b00b9040198e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-44caa8cb8a954d607e17b00b9040198e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1073&quot; data-rawheight=&quot;796&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1073&quot; data-original=&quot;https://pic3.zhimg.com/v2-44caa8cb8a954d607e17b00b9040198e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-44caa8cb8a954d607e17b00b9040198e_b.jpg&quot;/&gt;&lt;figcaption&gt;表1：策略收益指标&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;我们还统计了每日交易的股票的数量，如下图所示，其中买入最多的一个交易日是买入了158只股票，平均每天买入的股票为49只；卖出最多的一个交易日也是卖出了158只股票，平&lt;b&gt;均每天卖出的股票为35只。&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a0e7e8ec58b8520d7db0ef685d83e6fb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;739&quot; data-rawheight=&quot;372&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;739&quot; data-original=&quot;https://pic4.zhimg.com/v2-a0e7e8ec58b8520d7db0ef685d83e6fb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a0e7e8ec58b8520d7db0ef685d83e6fb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;739&quot; data-rawheight=&quot;372&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;739&quot; data-original=&quot;https://pic4.zhimg.com/v2-a0e7e8ec58b8520d7db0ef685d83e6fb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-a0e7e8ec58b8520d7db0ef685d83e6fb_b.jpg&quot;/&gt;&lt;figcaption&gt;图8：2015-2019年每交易日交易股票数量箱型图&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;以上的回测中，我们监测了所有的产品节点，但并不是所有的产品节点都有明显的联动效应，下图给出了所有产品节点的收益表现的分布图，我们可以看出有相当一部分的产品节点在2015-2019的4年多时间没有产生正收益。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-5113b102588510f8f22c186a63d2ee55_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1020&quot; data-rawheight=&quot;189&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1020&quot; data-original=&quot;https://pic2.zhimg.com/v2-5113b102588510f8f22c186a63d2ee55_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-5113b102588510f8f22c186a63d2ee55_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1020&quot; data-rawheight=&quot;189&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1020&quot; data-original=&quot;https://pic2.zhimg.com/v2-5113b102588510f8f22c186a63d2ee55_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-5113b102588510f8f22c186a63d2ee55_b.jpg&quot;/&gt;&lt;figcaption&gt;图9：所有产品节点的收益分布图&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;既然有大部分产品的联动效应无法获取正收益，势必会降低整个策略的收益。所以我们考虑，在监测产品节点的联动效应到最终交易的过程中，我们可以对产品进行筛选。可以用滚动窗口的形式，每次选取前一段时间联动效应最明显的产品节点进行交易。&lt;/p&gt;&lt;p&gt;所以我们又进行了如下测试，&lt;b&gt;每一周根据前一周的表现（平均收益），选取收益最高的前20个产品进行联动效应的监测并交易，当扣除双边千分之三的交易成本之后&lt;/b&gt;，回测效果如下图所示，可以发现该策略的收益优于上述包含所有产品节点的策略。其中红色的线为每个滚动窗口做多上一个窗口中多头策略表现最好的产品节点，同时做空的是上一个窗口中空头策略表现最好的产品节点。而绿色线表示每个滚动窗口选取的是上一个窗口中多空策略表现最好的产品节点。我们可以发现该策略的主要收益的贡献来源于多头策略，下表给出了具体的收益指标，其中&lt;b&gt;多头、空头和多空策略的累积收益分别为85%、9.4%及119.90%，年化收益分别为15.2%，2.1%及19.8%。&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-758f4e751688166b1d207504f4baca58_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;750&quot; data-rawheight=&quot;449&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;750&quot; data-original=&quot;https://pic1.zhimg.com/v2-758f4e751688166b1d207504f4baca58_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-758f4e751688166b1d207504f4baca58_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;750&quot; data-rawheight=&quot;449&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;750&quot; data-original=&quot;https://pic1.zhimg.com/v2-758f4e751688166b1d207504f4baca58_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-758f4e751688166b1d207504f4baca58_b.jpg&quot;/&gt;&lt;figcaption&gt;图10：滚动筛选前20最优产品节点策略收益&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-39e68e0e933de29fd3aee7c9a970027f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;735&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-39e68e0e933de29fd3aee7c9a970027f_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-39e68e0e933de29fd3aee7c9a970027f_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;735&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-39e68e0e933de29fd3aee7c9a970027f_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-39e68e0e933de29fd3aee7c9a970027f_b.jpg&quot;/&gt;&lt;figcaption&gt;表2：滚动筛选前20最优产品节点策略收益指标&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-15df7f7ff45400ef1dbe324f4f11b2ba_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;616&quot; data-rawheight=&quot;372&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;616&quot; data-original=&quot;https://pic3.zhimg.com/v2-15df7f7ff45400ef1dbe324f4f11b2ba_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-15df7f7ff45400ef1dbe324f4f11b2ba_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;616&quot; data-rawheight=&quot;372&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;616&quot; data-original=&quot;https://pic3.zhimg.com/v2-15df7f7ff45400ef1dbe324f4f11b2ba_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-15df7f7ff45400ef1dbe324f4f11b2ba_b.jpg&quot;/&gt;&lt;figcaption&gt;图11：滚动选取前20个产品节点，每日交易的股票数量&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;以下是滚动筛选前10个表现最好的产品节点的收益，从下至上其年化收益分别为6.3%，25%，33%及34%：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7fdeab68937d583fab8e38365d687b5a_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;716&quot; data-rawheight=&quot;431&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;716&quot; data-original=&quot;https://pic3.zhimg.com/v2-7fdeab68937d583fab8e38365d687b5a_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-7fdeab68937d583fab8e38365d687b5a_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;716&quot; data-rawheight=&quot;431&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;716&quot; data-original=&quot;https://pic3.zhimg.com/v2-7fdeab68937d583fab8e38365d687b5a_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-7fdeab68937d583fab8e38365d687b5a_b.jpg&quot;/&gt;&lt;figcaption&gt;图12：滚动筛选前10个表现最好产品节点收益图&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d5f0bebf333933b6f4aab572880fe8eb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;717&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-d5f0bebf333933b6f4aab572880fe8eb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d5f0bebf333933b6f4aab572880fe8eb_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;717&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-d5f0bebf333933b6f4aab572880fe8eb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-d5f0bebf333933b6f4aab572880fe8eb_b.jpg&quot;/&gt;&lt;figcaption&gt;图13：滚动筛选前10最优产品节点策略收益指标&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;我们对所有产品节点的策略胜率及收益进行排序，选出了整个回测区间收益最高的前 20 个产品及 胜率最高的前 20 个产品节点。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-467cf19c8f6be7f87f7203678eaee9e4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;993&quot; data-rawheight=&quot;831&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;993&quot; data-original=&quot;https://pic1.zhimg.com/v2-467cf19c8f6be7f87f7203678eaee9e4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-467cf19c8f6be7f87f7203678eaee9e4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;993&quot; data-rawheight=&quot;831&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;993&quot; data-original=&quot;https://pic1.zhimg.com/v2-467cf19c8f6be7f87f7203678eaee9e4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-467cf19c8f6be7f87f7203678eaee9e4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-951cde6bf0d8eefc5bad022c6cf2d872_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1023&quot; data-rawheight=&quot;1052&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1023&quot; data-original=&quot;https://pic3.zhimg.com/v2-951cde6bf0d8eefc5bad022c6cf2d872_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-951cde6bf0d8eefc5bad022c6cf2d872_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1023&quot; data-rawheight=&quot;1052&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; width=&quot;1023&quot; data-original=&quot;https://pic3.zhimg.com/v2-951cde6bf0d8eefc5bad022c6cf2d872_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-951cde6bf0d8eefc5bad022c6cf2d872_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;&lt;b&gt;三、总结&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;数库产业链数据给我们提供了对于公司主营业务更标准化的视角。本篇报告研究了&lt;b&gt;同一产品节点下股价的联动效应，无论当前处于熊市或牛市，当公司主营业务相同时，其受到的外界对于股价的影响因素也非常相似&lt;/b&gt;。回测结果也显示，我们可以对各产品节点进行监测，以捕捉股价联动效应带来的超额收益。后续的研究中，我们会继续关注不同产品上下游之间的价格传导效应。&lt;/p&gt;&lt;p&gt;如获取报告原文或数库产业链数据请联系：&lt;i&gt;business@chinascope.com&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;—End—&lt;/i&gt;&lt;/p&gt;&lt;p&gt;量化投资与机器学习微信公众号，是业内垂直于&lt;b&gt;Quant&lt;/b&gt;、&lt;b&gt;MFE&lt;/b&gt;、&lt;b&gt;CST、AI&lt;/b&gt;等专业的&lt;b&gt;主流量化自媒体&lt;/b&gt;。公众号拥有来自&lt;b&gt;公募、私募、券商、银行、海外&lt;/b&gt;等众多圈内&lt;b&gt;10W+&lt;/b&gt;关注者。每日发布行业前沿研究成果和最新量化资讯。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</description>
<author>量化投资机器学习</author>
<guid isPermaLink="false">2019-08-29-80326765</guid>
<pubDate>Thu, 29 Aug 2019 00:00:00 +0800</pubDate>
</item>
</channel>
</rss>
