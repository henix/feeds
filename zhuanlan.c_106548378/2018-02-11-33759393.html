<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>不同数据推送机制对高频交易的影响</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/33759393">原文</a></p>
<p>研究高频交易策略首先当然得有高频数据，国内并没有那种真正的分笔数据。</p><p>一般CTP免费接到的都是一秒两次的数据，一秒两次不代表500毫秒一次，上期所是严格的按照0、500毫秒报数据，比如这样的：</p><img src="https://pic3.zhimg.com/v2-20a018e3ba98ea4d922326ffaf218b06_r.jpg" data-caption="" data-size="normal" data-rawwidth="717" data-rawheight="348"><p>但大商所不是，比如这样的：</p><img src="https://pic4.zhimg.com/v2-e423b63639c3c48f925809cd9ac32494_r.jpg" data-caption="" data-size="normal" data-rawwidth="528" data-rawheight="356"><p>可见精确的毫秒数不是固定0、500的，但大概间隔是500毫秒。</p><p>有人问这么样对交易有什么影响呢？如果策略是单品种出信号的，或许没什么影响，毕竟都是一个品种的信息过来，然后计算指标之类的；但如果是跨品种的，则会有一定影响。</p><p>比如上期所，固定0、500的，不一定每个时间点每个品种都会有行情。例如我们做rb和hc，它们高度相关的，可能09:33:05.000的时候rb有行情，但hc没有，在回测的时候，我们可以沿用hc前面的行情值；但在实盘的时候我们并不知道hc会不会有行情。</p><p>当然，实盘接收行情可以选择按照一定顺序推送，比如hc先送，rb后送，那么我们收到rb的行情之后，如果还没收到hc的行情，那么我们就知道此刻hc没有行情；但如果恰好那个时间点，hc有行情，rb没有，就比较麻烦了，因为我们收到hc的时候并不知道rb是没有行情的。</p><p>如果不是特别高频的，可以等待一些时间，比如等待一定时间后rb都没有行情，那么我们就确认这个时刻rb没有了。至于等待多少呢？这个要自己根据实际情况估算，一般毫秒级别。</p><p>大商所就没有这个问题，因为行情不是整0、500推送的，时间点每个品种不一样，比如我们看看j的情况：</p><img src="https://pic3.zhimg.com/v2-13c159213e6e7df4c92948e53e66f9b2_r.jpg" data-caption="" data-size="normal" data-rawwidth="557" data-rawheight="370"><p>比如在21：17：03，i的毫秒数是384、857，j的毫秒数是407、910，默认都是同一台机器的，可见之间的间隔也有数十毫秒。</p><p>如果是做那种跨品种的策略，显然大商所就容易多了，比如j的407毫秒的数据过来的时候，我当然就已经拿到i的384毫秒的数据，当然就可以用i的因子，合并数据也容易，直接按毫秒数合并，完全一样的毫秒数也有，但毕竟情况也不多的。实盘也容易，毕竟也是按照这些顺序来的，偶尔有随机影响。</p><p>另外可以注意到21：17：04的时候i有两个行情，分别在381和932，而j只有一个行情，在317，下一个行情是21：17：05.258，如果i在381的时候有大趋势，由于品种之间的lead/lag关系，对j也有一定影响，如果跨品种的信号，那么j在21：17：04.381就可以触发交易，而如果是但品种的信号，则需要等到21:17:05.258，满了差不多一秒，对高频来说，滑点之类的影响就非常非常大了；哪怕381没有趋势，或许932时候有，也领先了几百毫秒。从市场微观结构看，行情发动各品种不可能同时的，肯定有一些时间上的差异，比如几十、几百毫秒，高频很多时候就是赚这些钱，从逻辑上并没有太复杂的地方。</p><p>当然，提早太多也不好，一般高频信号衰减是非常快的。有些人回测时发现一个信号发生后5秒价格真的涨了，误以为自己信号很好，提前5秒预判趋势，但实际上这是不对的，因为他买了之后要忍受5秒的浮亏。那种由于市场数据发布机制导致的几十毫秒延迟产生的盈利反而是最靠谱的。</p><p>另外还有深度行情，比如大商所的：</p><img src="https://pic4.zhimg.com/v2-75d1f4b9b97136edfb55a707789d5d99_r.jpg" data-caption="" data-size="normal" data-rawwidth="414" data-rawheight="336"><p>这是淘宝买的，只精确到秒，没有精确到毫秒，所以做单品种还行，多品种就无法合并数据了。</p><p>有人说可不可以用一档数据估算五档的时间呢？其实是有点难度的，比如这个例子：</p><img src="https://pic1.zhimg.com/v2-05a85544fca1753a52d703f4c5a1f598_r.jpg" data-caption="" data-size="normal" data-rawwidth="355" data-rawheight="305"><p>一档数据在13：30：38.139的时候累计成交量是1758918，而五档数据在13:30:37的时候累计成交量是1758928，可见两者的时钟很不一样，很可能交易所就是两个机器来发布行情，机器时钟不一样。</p><p>如果是自己接数据，则没有这个问题，同一台机器同时接受两种行情，记录自己的机器时间，不按交易所的时间，甚至几台机器同时接收数据，然后再校准，再弄一套更靠谱一些的数据进行回测研究，那当然投入成本会更大一些。</p><p>其实很多高频交易公司做几年了有这些积累当然优势明显，刚入门的只能买淘宝数据慢慢摸索，甚至先从低频一些的日内策略出发，慢慢过渡到高频，有点积累了再加大投入。但有时候，低频策略就不大稳定，老板可能也会不满意。</p><p>很多时候也没有这么极端。比如高频策略可以每周创新高，很低频的持仓1、2周的每年创新高，那么偏日内非高频的或许每3个月创新高，对硬件投入也不大。对高频的人来说，习惯了极低回撤的日子，不能忍受这类日内非高频的；对于低频的来说，IT投入不是很大，难以做这类日内的，觉得容量也不大，所以刚入门高频的反而可以从这种爹爹不疼爷爷不爱的策略入手。</p><p>其实真正高频的策略反而就是辛苦活，能这么低回撤高回报的肯定不是赚取风险收益，固定成本会投入很大，当老板还行，在里面打工估计生活状态会比较差。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
