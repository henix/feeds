<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>暴走的程序员</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/103395428">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-0966181556a4e09679540af9023dbc72_b.jpg" alt=""></div><p>昨天一篇 &#34;<a href="https://link.zhihu.com/?target=https%3A//words.steveklabnik.com/a-sad-day-for-rust" class=" wrap external" target="_blank" rel="nofollow noreferrer">a sad day for rust</a>&#34; 霸榜了 <a href="https://link.zhihu.com/?target=https%3A//news.ycombinator.com/item%3Fid%3D22075076" class=" wrap external" target="_blank" rel="nofollow noreferrer">hacker news</a>。<a href="https://link.zhihu.com/?target=https%3A//github.com/actix/actix-web" class=" wrap external" target="_blank" rel="nofollow noreferrer">actix-web</a> 的作者 <a href="https://link.zhihu.com/?target=https%3A//github.com/fafhrd91" class=" wrap external" target="_blank" rel="nofollow noreferrer">fafhrd91</a> 在无法忍受 &#34;unsafe shitstorm&#34; 之后，决绝地将这个在各大评测网站名列第一的 web 框架下线了。一时间社区叫苦不迭，所有使用了 actix-web 作为依赖的项目，都受到（潜在的）影响。这件事的威力虽然不如之前让<a href="https://link.zhihu.com/?target=https%3A//qz.com/646467/how-one-programmer-broke-the-internet-by-deleting-a-tiny-piece-of-code/" class=" wrap external" target="_blank" rel="nofollow noreferrer">半个互联网瘫痪的 leftpad 事件</a>，但也够开源社区喝一壶的。</p><p>让我先为各位吃瓜群众简单介绍一下前因后果。</p><p>actix-web 是 rust 语言下的一个很有影响力的 web 开源框架，常年在 TechEmpower 排行榜雄踞第一（目前作者已经移除了 actix-web）：</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-a1f1c92018316ea2c77e39d3154fc490_b.jpg" data-size="normal" data-rawwidth="1191" data-rawheight="405" class="origin_image zh-lightbox-thumb" width="1191" data-original="https://pic1.zhimg.com/v2-a1f1c92018316ea2c77e39d3154fc490_r.jpg"/></noscript><img src="https://pic1.zhimg.com/v2-a1f1c92018316ea2c77e39d3154fc490_b.jpg" data-size="normal" data-rawwidth="1191" data-rawheight="405" class="origin_image zh-lightbox-thumb lazy" width="1191" data-original="https://pic1.zhimg.com/v2-a1f1c92018316ea2c77e39d3154fc490_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-a1f1c92018316ea2c77e39d3154fc490_b.jpg"/><figcaption>https://www.techempower.com/benchmarks/</figcaption></figure><p>它这么快是有原因的 —— fafhrd91 使用了大量的 <code>unsafe</code>（rust 关键字，用来标注那些绕过编译器检查，作者来保证内存安全的代码）来尽可能榨取性能。这些大量使用的 <code>unsafe</code> 引发了了一轮又一轮使用 actix-web，却又憎恶不安全代码的用户的讨论，也就是作者口中的 &#34;unsafe shitsotrm&#34;，最终在精神上压垮了作者。在移走 actix-web 后，fafhrd91 写了一篇 &#34;postmortem&#34;，不无悲哀地说：</p><blockquote>Each of this projects was rewritten from scratch at least 4-5 time. I hope I expanded some boundaries and found few new patterns, I hope other developers will check source code and find inspiration to move even further. Nowadays supporting actix project is not fun, and be part of rust community is not fun as well.<br/>I am done with open source.</blockquote><p>fafhrd91 有他的道理。他想把对 rust 的使用 &#34;push to its limit&#34;，看看性能上究竟能走多远。在这点上，他无疑是成功的。然而，如果他做的是个更偏底层的项目，比如操作系统，人们也许会理解他。但将这些普通程序员尚未掌握，心生恐惧的奇淫技巧用在一个 web 项目上，大家的心里总是有疙瘩。人们对于他们不能理解的事物总是会心生畏惧。&#34;a sad day for rust&#34; 的作者说：</p><blockquote>有人翻看了 actix-web 的源码，发现里面使用了大量的不安全的代码。这并不算什么事 —— 但问题是，很多不安全的代码没有必要。于是事情开始往糟糕的方向发展。<br/><br/>actix-web 的作者强硬回复说：那些不安全代码没问题。这简直是程序员「不安全代码焦虑症」的完美模型：一个大型的，重要的，有影响力的库，却包含大量不安全代码，并且作者对此态度消极。<br/><br/>需要注意的是，这群人是程序员，他们不仅仅抱怨，他们会写代码。不管是打着开源软件精神的旗号还是真心想贡献，他们用代码来回应。无奈，提交的补丁被作者驳回。这也并没有什么大不了的：项目的维护者有权利决定是否要接受提交的补丁。<br/><br/>于是，reddit 上开始了热火朝天的争论。言论开始擦枪走火，滑向丑陋的一面。更多的问题被提交，关闭，以及锁定。最终，作者接受了一些补丁，把不安全代码大大降低。<br/><br/>人们还是不够满意，更多的争论，更多的补丁，更多的口水战，以及嫌隙（bad blood）。</blockquote><p>其实我一直觉得 rust 里 unsafe 这个关键字用得不好，其实叫 &#34;unchecked&#34; 更贴切，且显得没那么极端。你看，unsafe code 翻译过来是「不安全代码」，是不是看着就立刻产生不安全的感觉？</p><p>我稍稍翻阅了一下 actix-web 的问题单，发现争论还算温和，并且大多还算就事论事 —— 和国内的论坛的撕逼相比，这样的口水战简直是学前班的水平。但这还是伤害了作者的心：本来写代码是为了找乐子，现在成了负担：在坚持自己理念和大众的责难中他两头都不是人，于是干脆像韦爵爷一样，大吼一声：老子不干了！</p><p>留给开源界的是，一地鸡毛。</p><p>投入巨大精力长期维护一个开源项目，靠的是热情。这热情需要持续的浇筑。本来，开源软件强调的是 no warranty，as is。你不喜欢，大可不用，或者选择其他项目，甚至 fork 一份按你的意愿来运作。但这个世界偏有那么一撮人：他们对现状不满，却逼迫你做出改变，来符合他们期待的样子。你若妥协，他们将其视作「正义」的胜利；你若不妥协，他们会步步紧逼，直到你妥协为止。</p><p>很久前 reddit 上有个帖子（原文找不到了），号召大家不要用 ring（rust 下用 google 的 boringssl 构建的一个加密库），理由是作者不愿意接受 pull request，除非付费。我顺着帖子给出的链接看过去，发现作者的诉求也很合理：他并不打算做某些小众的平台的支持，如果对方迫切需要的话，那么就赞助。这是多么正常的诉求啊。享用着别人免费提供的软件还嫌人家想靠这个赚钱 —— 难不成开源软件的作者就活该努力过成一个穷逼？</p><p>我是个不太愿意在社区讨论的人，这几年尤其严重。早年我在知乎也曾广泛回答过问题，在专栏连载过文章，和键盘侠们撕过。后来我渐渐不回答问题了，偶尔犯了傻逼回答一两个，我都不去看评论。其实里面有有营养的评论，但它们被无意义的抖机灵，晒优越，鸡蛋里挑骨头以及言语中透着轻蔑的引战给淹没了。何必呢？我写文章是为了开心，而键盘侠耗费几分钟的精力就可以贬低我几个小时甚至更长时间的努力，就像 syn flood 攻击一样。对此，我选择不回应 —— 我为什么要让键盘侠们利用我的不开心成为他们开心的源泉呢？</p><p>所以从道义上，我是支持 farfhrd91 的 —— 虽然我自己也不喜欢 actix-web 的代码 —— 但我依然支持作者使用他自己的权利。相对于 leftpad 那位不计后果的作者，farfhrd91 并没有 unpublish 他创建的包，代码库只是转到了<a href="https://link.zhihu.com/?target=https%3A//github.com/fafhrd91/actix-web" class=" wrap external" target="_blank" rel="nofollow noreferrer">他个人名下</a>，给那些的确需要访问的人留有 fork 的余地。</p><p>哀莫大于心死。这是我从一个暴走的程序员身上看到的。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
