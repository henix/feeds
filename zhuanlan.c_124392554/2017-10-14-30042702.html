<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>想下山的小和尚</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/30042702">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-1042bd391ecde45fe922e576c2175e78_r.jpg" alt=""></div><p>在《<i>算法之道</i>》中看到这样一个问题（文字描述按本强迫症重度晚期的习惯<i>略作</i>调整）：</p><hr><p>在深山中的宝珠寺里有一个年轻的小和尚叫做“哀青”（哀叹青春，这名字起的就不吉利），他<b>想要下山去</b>。</p><p>他的师父告诉他“<a href="https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;tn=monline_3_dg&amp;wd=%E5%A5%B3%E4%BA%BA%E6%98%AF%E8%80%81%E8%99%8E&amp;oq=%25E5%25B1%25B1%25E4%25B8%258B%25E7%259A%2584%25E5%25A5%25B3%25E4%25BA%25BA%25E6%2598%25AF%25E8%2580%2581%25E8%2599%258E&amp;rsv_pq=ab630ed70000364b&amp;rsv_t=b125Hel9MVse1fHQa7VdpRzQ2j1yfkAzRlNTZmT59JI2ry4FTkMoQjVVWcr61%2FMSSQ%2BB&amp;rqlang=cn&amp;rsv_enter=1&amp;inputT=259&amp;rsv_sug3=4&amp;rsv_sug1=4&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_sug4=689">山下的女人是老虎</a>”，小和尚于是问道那为什么不直接叫做“女老虎”啊？师父说：这个叫做<i>比喻</i>。</p><p>小和尚：<a href="http://music.163.com/#/song?id=28111636&amp;market=baiduqk">我想/问问问问/问我该怎么脱身/你却说/花花世界/不必当真/多么伤人</a>。</p><p>老和尚只好给他一个金钵，装有27颗佛珠，其中15颗为红色，12颗为绿色（而旁边还有一大筐红色佛珠和一大筐绿色佛珠）。每天寺庙的晨钟响起时，小和尚可进行如下2个操作中的任意1个：</p><ol><li>如果钵中里面至少有3颗红色的佛珠，则和尚可以从钵中取出3颗红色的佛珠，并放入2颗绿色的佛珠（即用2颗绿色佛珠替换3颗红色佛珠）。——记之为 <equation>f</equation> 操作。</li><li>将钵中的所有佛珠置换为另一种颜色的佛珠（即将原来的红色佛珠替换为绿色佛珠。将原来的绿色佛珠替换为红色佛珠）。——记之为 <equation>g</equation> 操作。</li></ol><blockquote>例如在第1次钟声响起时，小和尚可将钵里的3颗红色佛珠拿走，并加入2颗绿色佛珠，这样，钵里将有12颗红色佛珠和14颗绿色佛珠；在第2次钟声响起时，小和尚可将钵中每颗佛珠都置换为相反的颜色，这样，钵里将有14颗红色佛珠和12颗绿色佛珠……</blockquote><p>当钵中<b>只剩下5颗红色佛珠和5颗绿色佛珠</b>时，小和尚就可以离开宝珠寺下山去享受<a href="http://music.163.com/#/song?id=142647&amp;market=baiduqk">精彩而又无奈的外面的世界</a>了。</p><p>请问：小和尚应该如何操作才能离开宝珠寺？</p><hr><p>用 <equation>(x,y)</equation> 表示钵中的红色佛珠数和绿色佛珠数。则开始时表示为 <equation>(15,12)</equation> ，目标是 <equation>(5,5)</equation> 。</p><p>于是两种操作就是两个函数 <equation>f(x,y)=(x-3,y+2)</equation> 和 <equation>g(x,y)=(y,x)</equation> 。</p><p>好了，下面开始解决问题，而首先要分析问题，看能得到些什么：</p><hr><p>1. 执行操作的次数</p><p>如果用 <equation>s(x,y)=x+y</equation> 表示钵中的红色佛珠数和绿色佛珠数之和。</p><p>则 <equation>g</equation> 操作不改变这个值，即 <equation>s(g(x,y))=s(x,y)</equation> 。</p><p>而 <equation>f</equation> 操作将这个值减少1，即 <equation>s(f(x,y))=s(x,y)-1</equation> 。</p><p>初始情况 <equation>s(15,12)=27</equation> ，目标情况 <equation>s(5,5)=10</equation> 。</p><p>因此必定是进行了<b>17次 </b><equation>f</equation> <b>操作</b>！</p><hr><p>2. </p><p>用 <equation>d(x,y)=|x-y|</equation> 表示钵中的红色佛珠数和绿色佛珠数之差（的绝对值）。</p><p>则 <equation>g</equation> 操作不改变这个值，即 <equation>d(g(x,y))=d(x,y)</equation> 。</p><p>而对于 <equation>f</equation> 操作来说， <equation>d(f(x,y))=|x-y-5|</equation> 。</p><p>由于目标状态下 <equation>d(5,5)=0</equation> ，因此在操作过程中 <equation>d(x,y)</equation>都应该保持是5的倍数 。</p><p>而最初情况时 <equation>d(15,12)=3</equation> ，所以无论如何也<b>不可能</b>仅使用这两种操作达到目标。</p><hr><p>3. 下面从操作序列入手进行分析。</p><p>首先，很明显两次 <equation>g</equation> 操作相当于没有进行任何操作，因此操作次序必定是“若干次连续的 <equation>f</equation> 操作”和“1次 <equation>g</equation> 操作”交替进行。</p><p>其次，可以验证</p><ol><li><equation>f^a\circ g\circ f^b\circ g\circ f^c=g\circ f^b\circ g\circ f^{a+c}</equation> </li><li><equation>f^a\circ g\circ f^b \circ g=g\circ f^a\circ g\circ f^b</equation> </li></ol><p>于是可以将所有包含17个 <equation>f</equation> 操作的操作序列简化为下述5种之一：</p><ol><li><equation>f^{17}</equation> </li><li><equation>f^{17}\circ g</equation> </li><li><equation>g\circ f^{17}</equation> </li><li><equation>f^{x}\circ g \circ f^{17-x}</equation> </li><li><equation>g\circ f^{x}\circ g \circ f^{17-x}</equation> </li></ol><p>然后最多进行1+1+1+16+16=35次验证后就知道，小和尚无论怎样做都是<b>徒劳无功</b>的。</p><p>简化过程例如：</p><img src="https://pic4.zhimg.com/v2-c45071b7a0117c8d104713f3da246760_r.jpg" data-caption="" data-rawwidth="1194" data-rawheight="663"><hr><p>许多年后，沧海桑田白云苍狗，小和尚也变成了老和尚，当新的小和尚问起他山下什么样的时侯，新的老和尚（旧的小和尚）只是默默递给他一个的装有15颗红色佛珠和12颗绿色佛珠金钵，然后转过身去，嘴角喃喃道：<a href="http://www.kugou.com/song/3e4a04.html?frombaidu?frombaidu#hash=06462BFC7972EF6DCF6E522023183E40&amp;album_id=0">有一个声音/它说/哀青/没离开过</a>……</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
