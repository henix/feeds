<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>什么是爱情？ ——与“秘书问题”</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/32671131">原文</a></p>
<div class="title-image"><img src="https://pic4.zhimg.com/v2-33266122ab1c4b9ab7fc232cd9a94712_r.jpg" alt=""></div><p>爱情不过是一种普通的玩意儿，一点也不稀奇。——中文歌曲《卡门》（<a href="https://zhuanlan.zhihu.com/p/33418457">胖三金</a>出教室）</p><a href="http://bd.kuwo.cn/yinyue/7599843?from=baidu" data-draft-node="block" data-draft-type="link-card">卡门-aMEI-单曲-酷我音乐-好音质用酷我</a><a href="https://y.qq.com/n/yqq/song/000CwHH21IjRtq.html?ADTAG=baiduald&amp;play=1" data-draft-node="block" data-draft-type="link-card" data-image="v2-31a543940f43fcb8d26c8d2b3a7ad84a" data-image-width="300" data-image-height="300" data-image-size="ipico">卡门-罗文 - QQ音乐-千万正版音乐海量无损曲库新歌热歌天天畅听的高品质音乐平台！</a><a href="http://www.xiami.com/song/153542" data-draft-node="block" data-draft-type="link-card" data-image="v2-3bf474af07ccf6020a2b134ddac312b8" data-image-width="1066" data-image-height="1066" data-image-size="ipico">http://www.xiami.com/song/153542</a><a href="http://www.xiami.com/song/153542">卡门-徐小凤</a><a href="http://www.xiami.com/song/153542" data-draft-node="block" data-draft-type="link-card" data-image="v2-3bf474af07ccf6020a2b134ddac312b8" data-image-width="1066" data-image-height="1066" data-image-size="ipico">卡门-徐小凤</a><p>虽然我第一次听到<b>中文</b>的它是在这里——</p><img src="https://pic2.zhimg.com/v2-8b96925bbdf3274230a771631245a417_r.jpg" data-caption="" data-size="normal" data-rawwidth="280" data-rawheight="420"><p>然而它其实是：爱情像一只自由的小鸟（L'amour est un oiseau rebelle）——比才歌剧《卡门(Carmen)》</p><a href="http://www.iqiyi.com/w_19rr0cotfh.html" data-draft-node="block" data-draft-type="link-card" data-image="v2-8d4d0e706eb99cfffdf6e4f6afdecb5e" data-image-width="120" data-image-height="160" data-image-size="120x160">歌剧《卡门》选段—爱情像一只自由的小鸟</a><hr><p>有一天，柏拉图问苏格拉底：<b>什么是爱情</b>？ </p><p>苏格拉底说：你穿过这片稻田，去摘一株最大最金黄的麦穗回来，但是有个规则——你不能走回头路，而且你只能摘一次。 </p><p>柏拉图去了，过了很久，他空手回来了。 </p><p>柏拉图说：当我走在田间的时候，曾看到过几株特别大特别灿烂的麦穗，可我总想着前面也许会有更大更好的，因为只可以摘一次，于是就没有摘；但当我最后走到尽头时，却才发觉手上一串麦穗也没有！…… </p><p>苏格拉底意味深长地说：这，就是<b>爱情</b>。</p><hr><p>这就是<b>爱</b> 说也说不清楚。</p><a href="http://music.163.com/#/song?id=109517&amp;autoplay=true&amp;market=baiduhd" data-draft-node="block" data-draft-type="link-card" data-image="v2-12f933fe314ef04e769e226cd806529c" data-image-width="360" data-image-height="360" data-image-size="ipico">糊涂的爱（电视剧《过把瘾》主题曲） - 刘欢 - 单曲 - 网易云音乐</a><hr><p><br></p><p>而这个故事则让老人家我想起了“<b>秘书问题</b>”：某公司希望聘请1名秘书，共有 <equation>n</equation> 人来面试，他们自觉地排成一列。假定所有应聘者的“岗位适合度”（“质素”？matching accuracy？） 都不相同。</p><p>面试规则是：</p><ul><li>每次面试1名应聘者；</li><li>面试时该应聘者回答问题后过后公司便要即时决定是否聘用他，如果当时决定不聘用，之后也不能再考虑应聘者；如果决定聘用，之后的应聘者就不再需要面试；</li><li>面试时可以将当前应聘者与之前面试过的每个人进行比较。</li></ul><p>假定策略是：</p><ul><li>取定某整数 <equation>k</equation> （ <equation>1\leq k&lt;n</equation> ）；</li><li>对于前 <equation>k</equation> 个应聘者，只面试和记住他们的“质素”，但是一个<b>都不录用</b>；</li><li>从第 <equation>k+1</equation> 到第 <equation>n-1</equation> 名应聘者，如果发现了（第一个）比前 <equation>k</equation> 个都好的应聘者，则录用他，招聘过程结束；</li><li>如果已经面试到了第 <equation>n</equation> 名应聘者，无论如何都只好录用他。</li></ul><hr><p>例如 <equation>n=4</equation> ， <equation>k=2</equation> 时：</p><img src="https://pic2.zhimg.com/v2-a457b55c6735b2abc5ac2d1d15a45bdc_r.jpg" data-caption="" data-size="normal" data-rawwidth="825" data-rawheight="307"><p>浅蓝色的是被直接“滤掉”的，橙色的是最终获得录用的。</p><p>24种情况中，有4种情况下选择了1（最差的）、有4种情况下选择了2、有6种情况下选择了3、有10种情况下选择了4（最优的）。</p><p>例如 <equation>n=4</equation> ， <equation>k=1</equation> 时：</p><img src="https://pic4.zhimg.com/v2-9bf0b5b864be1a0028ea9900868ed592_r.jpg" data-caption="" data-size="normal" data-rawwidth="825" data-rawheight="307"><p>24种情况中，有2种情况下选择了1、有4种情况下选择了2、有7种情况下选择了3、有11种情况下选择了4。</p><hr><p>计算最终录用的是“质素”排名 <equation>m</equation> 的应聘者的情况和概率：</p><p><b>情况1：</b> <equation>k\geq m</equation>   （例如 <equation>m=3</equation> ， <equation>k=5</equation> ）</p><img src="https://pic1.zhimg.com/v2-e1a2e340af709d16fd8640b4d7407f53_r.jpg" data-caption="" data-size="normal" data-rawwidth="372" data-rawheight="67"><p>此时</p><ul><li>前 <equation>k</equation> 名应聘者中，<b>一定</b>有排名高于 <equation>m</equation> 的；</li><li>排名 <equation>m</equation> 的应聘者<b>一定</b>是最后一名应聘者（位置定了）；</li><li>排名最高的人<b>一定</b>在前 <equation>k</equation> 名应聘者中（位置也定了，而且他就是前 <equation>k</equation> 名应聘者中排名高于 <equation>m</equation> 的人）</li></ul><p>于是可能的排列数为 <equation>k\times (n-2)!</equation> ，其中排名最高的人的位置有 <equation>k</equation> 种可能，排名最高的人和排名 <equation>m</equation> 的人之外的人有 <equation> (n-2)!</equation> 种排列可能。</p><p>这种情况的概率为： <equation>p(n,k:m)=\frac{k\times (n-2)!}{n!}=\frac{k}{n(n-1)}</equation> 。</p><p><b>情况2：</b> <equation>n&gt;m&gt;k</equation> </p><p>此时又分两种情况</p><p>① 前 <equation>k</equation> 个中有比 <equation>m</equation> 大的。如此必然排名 <equation>m</equation> 的应聘者一定是最后1名应聘者、且排名最高的人一定在前 <equation>k</equation> 名应聘者中，此时类似于情况1，排列数为 <equation>k\times (n-2)!</equation> 。</p><p>② 前 <equation>k</equation> 名应聘者排名均小于 <equation>m</equation> 。设 <equation>i=\max\{前k个值\}</equation> （ <equation>i</equation> 的取值范围是 <equation>k\sim m-1</equation> ），那么 <equation>m</equation> 在 <equation>i+1\sim n</equation> 中一定是排在最前面的。</p><img src="https://pic2.zhimg.com/v2-7cd4cb5ed29300599254afcea10a9cfa_r.jpg" data-caption="" data-size="normal" data-rawwidth="659" data-rawheight="160"><p>于是可能的排列数为 <equation>\sum_{i=k}^{m-1}{\left[ C_{n-k}^{n-i}\times\left( n-i-1 \right)! \right]\times\left[ C_{k}^{1} \right]\times\left( i-1 \right)!}</equation> ，其中 <equation> C_{n-k}^{n-i}</equation> 表示在后面的 <equation>n-k</equation> 个位置中选择 <equation>n-i</equation> 个放置 <equation>i+1\sim n</equation> ， <equation>( n-i-1 )! </equation> 表示 <equation>m</equation> 在 <equation>i+1\sim n</equation> 中一定是排在最前面而后面的排列随意， <equation> C_{k}^{1}</equation> 表示 <equation>i</equation> 在前 <equation>k</equation> 个中的位置，余下的 <equation>i-1</equation> 个位置随意放置 <equation>1\sim i-1</equation> 即可。</p><p>经整理得到情况2的总概率为： <equation>p(n,k:m)=\frac{1}{C_n^k}\cdot\sum_{i=k}^{m-1}\frac{1}{n-i}\cdot C_{i-1} ^{k-1} +\frac{k}{n(n-1)}</equation> 。</p><p><b>情况3：</b> <equation>m=n</equation> </p><p>此时前 <equation>k</equation> 名应聘者中不包含排名最高的人，余者类似情况2的②。</p><p>可能的排列数为 <equation>\sum_{i=k}^{n-1} C_{n-k}^{n-i}\times\left( n-i-1 \right)! \times C_{k}^{1} \times\left( i-1 \right)!</equation> 。</p><p>情况3的概率为： <equation>p(n,k:n)=\frac{1}{C_n^k}\cdot \sum_{i=k}^{n-1}\frac{1}{n-i}\cdot C_{i-1} ^{k-1} </equation> 。</p><hr><p>另一种计算方法：</p><p><b>情况3：</b> <equation>m=n</equation> </p><p>此时考虑“ <equation>n</equation> 号人选”所在的位置 <equation>i+1</equation> 。</p><img src="https://pic4.zhimg.com/v2-005b077692d42594ccce8b8ab1bdbf46_r.jpg" data-caption="" data-size="normal" data-rawwidth="652" data-rawheight="273"><p>前 <equation>i</equation> 个中最优者必定在前 <equation>k</equation> 个中。</p><p>先选前 <equation>i</equation> 个数，有 <equation>C_{n-1}^{i}</equation> 种选择，放置其中的最大数有 <equation>k</equation> 种方法，剩下的 <equation>i-1</equation> 个数有 <equation>(i-1)!</equation> 种放置方法，后面的 <equation>n-1-i</equation> 个数的放置方法数为 <equation>(n-1-i)!</equation> 。此时的排列数为 <equation>C_{n-1}^{i}\times k\times(i-1)!\times(n-1-i)!=(n-1)!\frac{k}{i}</equation> ，所以总的排列数为 <equation>(n-1)!\sum_{i=k}^{n-1}{\frac{k}{i}}</equation> 。情况3的概率为： <equation>p(n,k:n)=\frac{k}{n}\cdot\sum_{i=k}^{n-1}\frac{1}{i}</equation> 。</p><p><b>情况2：</b> <equation>n&gt;m&gt;k</equation> </p><p>类似于情况3可得到 <equation>p(n,k:m)=\frac{1}{C_{n-1}^{m-1}}\cdot\frac{k}{n}\cdot\sum_{i=k}^{m-1} C_{n-1-i} ^{m-1-i}\cdot \frac{1}{i} +\frac{k}{n(n-1)}</equation> 。</p><hr><p>假设最终聘用了“质素”排名 <equation>m</equation> 的应聘者这种情况的收益是 <equation>f(n,k:m)</equation> 。</p><p>那么上述方案的总收益（带权期望值）就是 <equation>\sum_{m=1}^{n}{f(n,k:m)\cdot p(n,k:m)}</equation> 。</p><ul><li>当 <equation>f(n,k:m)\equiv 1</equation> 时（选谁都行，那干嘛不就直接选第一个人就好？！），无论采用哪个概率表达式都可以计算得到 <equation>\sum_{m=1}^{n}{f(n,k:m)\cdot p(n,k:m)}=1</equation> ——这其实就是本人对概率表达式的一个验算过程。</li><li>当 <equation>f(n,k:m)\equiv m</equation> 时，无论采用哪个概率表达式都可以计算得到 <equation>\sum_{m=1}^{n}{f(n,k:m)\cdot p(n,k:m)}=\frac{n-k}{2}\cdot\left( \frac{n+1}{n}+\frac{k}{k+1} \right)+\frac{k}{2}</equation> ——求一阶导数、二阶导数后得到：当 <equation>\sqrt{n}-1</equation> 时，和式取得最大值 <equation>\frac{1+n}{2n}\cdot\left( 1-2\sqrt{n}+2n\right)</equation> 。</li><li><equation>p(n,k:n)=\frac{k}{n}\cdot\sum_{i=k}^{n-1}\frac{1}{i}\approx\frac{k}{n}\left( \ln (n-1)-\ln(k-1) \right)\approx\frac{k}{n}\ln\frac{n}{k} </equation> ， <equation>p(n,k:n)'\approx\frac{1}{n}\cdot \left( \ln \frac{n}{k}+k\cdot\left( -\frac{1}{k} \right) \right) </equation> ，当 <equation>k=\frac{n}{e}</equation> 时，取得极值 <equation>\frac{1}{e}\approx0.3679</equation> 。</li><li>所以！！！“<b>希望选到的人的平均质素最好</b>”和“<b>希望选到质素最好的人的概率最大</b>”是<b>不同的问题</b>！！！对应的值 <equation>k</equation> 也不同。</li></ul><img src="https://pic3.zhimg.com/v2-201af526f719e080e8523e5ebf00bdae_r.jpg" data-caption="" data-size="normal" data-rawwidth="945" data-rawheight="641"><hr><p>这是我的计算的草稿，我希望我是饶了弯路——</p><img src="https://pic1.zhimg.com/v2-d9a9578263fb053ff1eb07ccabf4c834_r.jpg" data-caption="" data-size="normal" data-rawwidth="1264" data-rawheight="480"><hr><p>最后回到“<b>爱情</b>”的问题，也许这就是一些婚恋节目中在“<i>你能让我在宝马里面哭么</i>”之外，还问及“<i>你有几次恋爱经历</i>”的理论依据吧（固定 <equation>n</equation>考虑 <equation>k</equation> ）……</p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
