<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>如何在米筐上实现对冲</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/25345357">原文</a></p>
<div class="title-image"><img src="https://pic1.zhimg.com/v2-202f7ed7bd7baed0d7e349ac7fc4a68f_r.jpg" alt=""></div>2月16日在中金所发文调整期货保证金和手续费以后，股指期货终于迎来了股灾以后的首次松绑。也许这个时候你还没有反应过来这对于量化基金意味着什么。<img src="https://pic3.zhimg.com/v2-1a5c146dbda23d3766c86b764f05631b_r.png" data-rawwidth="596" data-rawheight="186"><p>但是两天后，<b>杜蕾斯母公司利洁以总价约179亿美元，折合每股90美元的价格收购美赞臣，现实直接演示了什么是对冲——要么现在买我的套，要么10个月后买我的奶粉。</b>今天我们也来用期货与股票的混合策略来实现α对冲。<br></p><h1><strong>α对冲策略简介</strong></h1><p>首先，什么是 <strong>α 对冲策略</strong> ？</p><p>根据CAPM模型(点我查看CAPM研究)，任何投资组合的收益都是和市场超额收益的关系为：<br></p><img src="https://pic2.zhimg.com/v2-0e8fe9de68fc4e6e8f40c6bcfc2d503f_r.png" data-rawwidth="342" data-rawheight="97"><p>其中， <b>RP,RM</b>别为投资组合和市场组合相对于无风险收益率的超额收益率。但是呢，我们不那么相信神话，我们确认能够构建那么一个投资组合，使得回归关系是为：<img src="https://pic2.zhimg.com/v2-f84b49d83d8b3787988231f06d825cf9_r.png" data-rawwidth="264" data-rawheight="73"></p><p>其中，<b>rP，rM</b>分别为历史投资组合、市场组合的超额收益。</p><p><b>阿尔法</b>。衡量策略的超额收益。Alpha数值越高代表超风险额度收益越大。这里我们采用的无风险利率是对应的是1个月、3个月、6个月、12个月的国债收益。这样做计算出来的alpha更准确。<img src="https://pic3.zhimg.com/v2-af7a6de72361baa2961b2ac4ca8e1ac9_r.png" data-rawwidth="361" data-rawheight="194"></p><p>更通俗的讲，<b>α就是我们战胜市场的表现</b>，也是做量化的目标啊！</p><p>幸运的是，在回测时，Ricequant已经自动计算好了策略的超额收益<b>α</b>。下图为某裸多策略的回测结果：<img src="https://pic1.zhimg.com/v2-5605508e765aeb0d8250082b12f218fd_r.png" data-rawwidth="1142" data-rawheight="308">可以看到，虽然策略的超额收益<b>α</b>达到了<b>0.754</b>，但策略的波动以及回撤非常大，而<b>α</b>对冲的目标就是，利用衍生品（如：股指期货）来对冲掉市场风险（即：<b>βE(RM)</b>），经过对冲，投资组合的超额收益为：<img src="https://pic4.zhimg.com/v2-38698f3a06c2e6745d87a1552d06cf83_r.png" data-rawwidth="391" data-rawheight="87"></p><p>所以，经过对冲后的策略，准确来说，<b>β=0</b>，一般来说，<b>β</b>会很小（统计上为0），也就是说投资组合的超额收益与市场超额收益相关性很小。</p><p>如果，一个经过对冲后的策略是这个模样，（<b>β=−1.14</b>）<img src="https://pic2.zhimg.com/v2-9032f2d3ae90891614fdbd60cbd2e999_r.png" data-rawwidth="1115" data-rawheight="87">一个比较<b>合适的α对冲策略</b>长得应该像这样：（<b>β=0.079</b>）<img src="https://pic2.zhimg.com/v2-93c1031da2483716be04b9bc473d7b36_r.png" data-rawwidth="1119" data-rawheight="297"></p><br><h1><b>如何进行对冲？</b></h1><p>首先，在进行对冲之前，我们需要选择对冲工具，现在，市场上可供我们选择的指数期货有：<b>沪深300指数期货，中证500指数期货，上证50指数期货</b>；指数标志分别为：<b>IF,IC,IH</b>。实际生活中，我们很难去定义所谓的：市场，我们仅用能一些代表性好的指数去近似市场。<br></p><p>对于指数期货而言，一般有四个合约：当月合约，下月合约，季度合约，半年合约。利用如下代码可以查询<img src="https://pic1.zhimg.com/v2-a28c0c0e602083af96faa0e27132f749_r.png" data-rawwidth="757" data-rawheight="108"></p><p>在选择对冲标的时候，除了选择类型外，我们还需要决定选择哪一期合约。</p><p><strong>答案是：主力合约</strong><br></p><p>主力合约：合约首次上市时，以当日收盘同品种持仓量最大者作为从第二个交易日开始的主力合约。当同品种其他合约持仓量在收盘后超过当前主力合约1.1倍时，从第二个交易日开始进行主力合约的切换。日内不会进行主力合约的切换。以下代码实现获取主力合约。<img src="https://pic2.zhimg.com/v2-268aad190eb54abd83f36d09c37fb123_r.png" data-rawwidth="761" data-rawheight="218"></p><p>在进行对冲时，我们选择主力连续合约，即：<strong>期货标志+88</strong> ，如'IF88'表示沪深300指数期货主力连续合约。<br></p><br><h3><b>期货下单</b></h3><p>与股票不同，期货可以开空仓，这使得下单复杂度变得更大，涉及： 开多仓，开空仓，平多仓，平空仓 四种方式。<br></p><p><strong>开多仓</strong>：顾名思义，买入股指期货合约，下单指令为：buy_open(id_or_ins, amount, style=OrderType)</p><p><strong>开空仓</strong>：卖出合约，下单指令为：sell_open(id_or_ins, amount, style=OrderType)</p><p><strong>平多仓</strong>：卖出多头仓位从而平仓，下单指令为：sell_close(id_or_ins, amount, style=OrderType)</p><p><strong>平空仓</strong>：买入合约平掉空头合约，下单指令为：buy_close(id_or_ins, amount, style=OrderType)</p><p><b>注意，多空指令不能交叉使用，如：处于多头时，不能通过开一手空单平仓，只能通过卖平。</b><br></p><br><h2><b>在原有的裸多策略上实现对冲</b></h2><p>参考了社区中关于根据每股净资产和每股资本公积金，在此基础上做了一些更改，实现了对冲。<br></p><p>回测时间：<a href="tel:2013-01-01;2017-01-01">2013-01-01~2017-01-01</a></p><p><strong>对冲策略：</strong></p><ul><li><p>始终开一手沪深300主力连续合约 IF88 ，保证金倍率为 1倍（无杠杆）</p></li><li><p>以空头市值作为股票总市值</p></li><li><p>每只股票购入相同的市值（不是等仓位，而是等市值，此处未考虑价格因素）</p></li></ul><p><strong>对冲前</strong>：（<b>β=0.8636</b>）<img src="https://pic2.zhimg.com/v2-e3b40a5d385baea3f25cec900dbda23e_r.png" data-rawwidth="1141" data-rawheight="313"><strong>对冲后</strong>：（<b>β=−0.0411</b>） 杠得住股灾1.0 ，2.0， 3.0<img src="https://pic3.zhimg.com/v2-7c1bf9e17520d81e8dfdc45e3222281f_r.png" data-rawwidth="1141" data-rawheight="303"></p><p>可以看到策略经过对冲之后，β就基本为0了。</p><p>当然，遭遇了一次比较大的回撤，这个问题可以进一步优化了。</p><p><strong>接下我们来看一下策略思路。<img src="https://pic2.zhimg.com/v2-217f1819f7ed23e419649dd96c1e7bda_r.png" data-rawwidth="807" data-rawheight="357"><img src="https://pic4.zhimg.com/v2-b7e4d9b960bebe0482a92767ee2ad68a_r.png" data-rawwidth="833" data-rawheight="530"></strong></p><p><b><a href="https://www.ricequant.com/community/topic/2576/">一键传送，学会对冲！</a></b></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
