<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Lambda calculus引论(四): 规约策略</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/25858377">原文</a></p>
<p>在第一节里介绍了λ-表达式的β-规约以及The Church-Rosser Theorem, 证明了所有的表达式若能规约得到normal form则无论采用什么规约顺序与方式结果都是唯一的. 第一节中围绕规约产生的值进行介绍, 本节则对规约过程中的不同的规约策略以及其影响进行介绍.</p><br><br><h2><b>The quasi-leftmost-reduction theorem</b></h2><p><b>定义:</b> 向量记号<equation>\vec{P}=P_1\dots P_n</equation>, 记<equation>M\;\vec{P}=M\;P_1\dots P_n</equation>, 若<equation>n=0</equation>则<equation>\vec{P}</equation>为空<equation>M\;\vec{P}=M</equation>. 类似地记<equation>\lambda \vec{x}.\; M=\lambda x_1.\dots\lambda x_n.\; M</equation>, 若<equation>n=0</equation>则<equation>\vec{x}</equation>为空<equation>\lambda \vec{x}.\; M=M</equation>.</p><br><br><p><b>定义: </b>记所有normal form集合为<equation>NF_{\beta}</equation>. <br></p><br><p>注: 对于所有<equation>M\in NF_{\beta}</equation>具有两种形式: <equation>M=x\vec{R}</equation>或<equation>M=\lambda x. R\quad(R\in NF_{\beta})</equation>. 或更精确地说<equation>M</equation>形如<equation>M=\lambda \vec{z}. x\vec{R} \quad(\vec{R} \in NF_{\beta}) </equation>.</p><br><br><p><b>定义: </b>若λ-term<equation>M</equation>存在normal form<equation>N</equation>, <equation>M\;\triangleright_{\beta}^{*}\;N</equation>. 称其为正规化的(normalizing), 或称之为弱规范化的(weak normalizing). 所有弱规范化的λ-term集合记作<equation>WN_{\beta}</equation>. </p><br><br><p><b>定义:</b> 若λ-term<equation>M</equation>的任意规约序列长度均有限, 即无论通过何种规约方式均有<equation>M\;\triangleright_{\beta}^{*}\;N</equation>, <equation>N\in NF_{\beta}</equation>, 则称其为强正规化的(strongly normalizing). 所有强规范化的λ-term集合记作<equation>SN_{\beta}</equation>. </p><p><equation>SN_{\beta}</equation>的补集记作<equation>\infty_{\beta}</equation>, 即存在某一规约序列长度为无穷的表达式集合.</p><br><br><p><b>定义: </b>形如<equation>(\lambda x.P)Q</equation>的表达式为可约式(redex). 所有的表达式具有两种形式: <equation>\lambda \vec{z}.(x\vec{R})</equation>或<equation>\lambda \vec{z}.((\lambda x. P)Q\vec{R})</equation>.</p><br><ul><li>若表达式形如<equation>\lambda \vec{z}.((\lambda x. P)Q\vec{R})</equation>, 称其中的可约式<equation>(\lambda x. P)Q</equation>为头可约式(head redex).</li><li>非头可约式称为内部可约式(internal redex).</li><li><equation>\lambda</equation>最靠近左边最外层的可约式称为最左可约式(leftmost redex). 由定义得所有的头可约式均为最左可约式.</li></ul><br><br><p><b>定义: </b>对于一个非normal form λ-term <equation>M
</equation></p><br><ul><li>对<equation>M</equation>中最左可约式进行β-规约得到<equation>N</equation>记作: <equation>M\;\triangleright^{l}_{\beta}\;N</equation>.<br></li><li>对<equation>M</equation>中头可约式进行β-规约得到<equation>N</equation>记作: <equation>M\;\triangleright^{h}_{\beta}\;N</equation>.<br></li><li>对<equation>M</equation>中内部可约式进行β-规约得到<equation>N</equation>记作: <equation>M\;\triangleright^{i}_{\beta}\;N</equation>.<br></li></ul><br><br><p><b>定义: </b>向量规约记号<equation>\vec{M}\;\triangleright_{p}\;\vec{N}</equation> (<equation>\triangleright_{p}</equation>为平行β-规约, 参考第一节), 当且仅当<equation>\forall i\quad M_i\;\triangleright_{p}\;N_i</equation>.</p><p>平行内部规约(parallel internal reduction)<equation>\vec{M}\;\triangleright^{i}_{p}\;\vec{N}</equation>为<equation>\Lambda</equation>上满足推导规则:</p><equation>\begin{align}
&amp;\vec{M}\;\triangleright_{p}\;\vec{N}&amp;&amp;\Rightarrow\;\lambda \vec{z}.(x\vec{M})\;\triangleright^{i}_{p}\;\lambda \vec{z}.(x\vec{N})\\
&amp;\vec{M}\;\triangleright_{p}\;\vec{N}, \;S\;\triangleright_{p}\;T,\;R\;\triangleright_{p}\;U&amp;&amp;\Rightarrow\;\lambda \vec{z}.((\lambda x.S)R\vec{M})\;\triangleright^{i}_{p}\;\lambda \vec{z}.((\lambda x.T)U\vec{N})\\
\end{align}</equation><br><p>的最小二元关系.</p><br><br><p><b>引理1:</b></p><br><ul><li>若<equation>M\;\triangleright^{h}_{\beta}\;N</equation>, 则有<equation>\lambda x.M\;\triangleright^{h}_{\beta}\;\lambda x.N</equation>.</li><li>若<equation>M\;\triangleright^{h}_{\beta}\;N</equation>且<equation>M</equation>不为抽象(abstraction, 即形如<equation>\lambda x.P</equation>), 则有<equation>ML\;\triangleright^{h}_{\beta}\;NL</equation>.</li><li>若<equation>M\;\triangleright^{h}_{\beta}\;N</equation>, 则有<equation>M[L/x]\;\triangleright^{h}_{\beta}\;N[L/x]</equation>.</li></ul><p>证明:</p><p>1. 2. 根据定义, 显然.</p><p>3. <equation>M\;\triangleright^{h}_{\beta}\;N</equation>, 即<equation>M=\lambda \vec{z}.((\lambda y. P)Q\vec{R})</equation>, <equation>N=\lambda \vec{z}.(P[Q/y]\vec{R})</equation>. 若<equation>x\in \vec{z}</equation>根据替换定义显然成立.</p><p>若<equation>x=y</equation>或<equation>x\in FV(P)</equation>, 有<equation>M[L/x]=\lambda \vec{z}.((\lambda y. P)Q[L/x]\vec{R}[L/x])</equation>, <equation>N[L/x]=\lambda \vec{z}.(P[Q/y][L/y]\vec{R[L/x]})</equation>. 根据替换引理(参考第一节)有<equation>N[L/x]=\lambda \vec{z}.(P[(Q[L/x])/y]\vec{R[L/x]})</equation>即有<equation>M[L/x]\;\triangleright^{h}_{\beta}\;N[L/x]</equation>.</p><br><p>若<equation>x\ne y</equation>且<equation>y\notin FV(L)</equation>, 有<equation>M[L/x]=\lambda \vec{z}.((\lambda y. P[L/x])Q[L/x]\vec{R}[L/x])</equation>, <equation>N[L/x]=\lambda \vec{z}.(P[Q/y][L/x]\vec{R[L/x]})</equation>. 根据替换引理有<equation>N[L/x]=\lambda \vec{z}.(P[L/x][(Q[L/x])/y]\vec{R[L/x]})</equation>, 即有<equation>M[L/x]\;\triangleright^{h}_{\beta}\;N[L/x]</equation>.</p><br><p>否则<equation>y\in FV(L)</equation>, 则令<equation>M=\lambda \vec{z}.((\lambda z. P[z/y])Q\vec{R})</equation>, <equation>N=\lambda \vec{z}.(P[y/z][Q/z]\vec{R})</equation>, <equation>z</equation>是新引入的名称, 则<equation>z\notin FV(L)</equation>, 将<equation>P[z/y]</equation>作为新<equation>P</equation>代入上述<equation>x\ne z</equation>且<equation>z\notin FV(L)</equation>情况, 即有<equation>M[L/x]\;\triangleright^{h}_{\beta}\;N[L/x]</equation>.</p><p>证毕.</p><br><br><p><b>定义: </b><equation>M \blacktriangleright_{p} N</equation>为满足:</p><equation>\begin{align}
&amp;M=M_0\;\triangleright^{h}_{\beta}\;M_1\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_n\;\triangleright^{i}_{p}\;N\\
&amp;M_i\;\triangleright_{p}\;N\quad(\forall i\in \{0\dots n\})
\end{align}</equation><br><p>的<equation>\Lambda</equation>上最小二元关系.</p><br><br><p><b>引理2: </b></p><ul><li>若<equation>M\blacktriangleright_{p} M^{'}</equation>, 则有<equation>\lambda x.M\blacktriangleright_{p} \lambda x.M^{'}</equation>.</li><li>若<equation>M\blacktriangleright_{p} M^{'}</equation>与<equation>N\blacktriangleright_{p} N^{'}</equation>, 则有<equation>MN\blacktriangleright_{p} M^{'}N^{'}</equation>.</li><li>若<equation>M\blacktriangleright_{p} M^{'}</equation>与<equation>N\blacktriangleright_{p} N^{'}</equation>, 则有<equation>M[N/x]\blacktriangleright_{p} M^{'}[N^{'}/x]</equation>.</li></ul><br><p>证明:</p><p>1. 根据定义与<equation>M\blacktriangleright_{p} M^{'}</equation>, 有<equation>\lambda x.M_i\;\triangleright^{h}_{\beta}\;\lambda x.M_{i+1}</equation>与<equation>\lambda x.M_n\;\triangleright^{i}_{p}\;\lambda x.N</equation>且<equation>\lambda x.M_i\;\triangleright_{p}\;\lambda x.N</equation>, 即有<equation>\lambda x.M\blacktriangleright_{p} \lambda x.M^{'}</equation>.</p><p>2. 若<equation>M_i\;\;(i\in \{0\dots n\})</equation>中存在抽象项, 即某项<equation>M_i</equation>形如<equation>\lambda x.P</equation>, 取<equation>k</equation>为最小的<equation>i</equation>使得<equation>M_i</equation>为抽象. 令<equation>M_k=\lambda x.P</equation>, 由<equation>M_k\;\triangleright_{p}\;M^{'}</equation>得<equation>M^{'}=\lambda x.P^{'}</equation>且<equation>P\;\triangleright_{p}\;P^{'}</equation>,又由<equation>N\blacktriangleright_{p} N^{'}\Rightarrow N\;\triangleright_{p}\;N^{'}</equation>得 <equation>(\lambda x. P)N\triangleright^{i}_{p}(\lambda x. P^{'})N^{'}</equation>, 即<equation>M_kN\;\triangleright^{i}_{p}\;M^{'}N^{'}</equation>.<br></p><br><p>若<equation>M_i\;\;(i\in \{0\dots n\})</equation>中存在不抽象项, 则令<equation>k=n</equation>, <equation>M_k</equation>不为抽象且<equation>M_i\;\triangleright_{p}\;M^{'}</equation>, 又有<equation>N\blacktriangleright_{p} N^{'}\Rightarrow N\;\triangleright_{p}\;N^{'}</equation>, 故根据定义有<equation>M_kN\;\triangleright^{i}_{p}\;M^{'}N^{'}</equation>.</p><p>由<equation>M_i\;\triangleright_{p}\;M^{'}</equation>与<equation>N\blacktriangleright_{p} N^{'}\Rightarrow N\;\triangleright_{p}\;N^{'}</equation>得<equation>M_iN\;\triangleright_{p}\;M^{'}N^{'}</equation>. 故有:</p><equation>\begin{align}
&amp;MN=M_0N\;\triangleright^{h}_{\beta}\;M_1N\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_kN\;\triangleright^{i}_{p}\;M^{'}N^{'}\\
&amp;M_iN\;\triangleright_{p}\;M^{'}N^{'}\quad(\forall i\in \{0\dots k\})
\end{align}</equation><br><p>即<equation>MN\blacktriangleright_{p} M^{'}N^{'}</equation>.</p><br><p>3. 由<equation>M_i\;\triangleright_{p}\;M^{'}</equation>, <equation>N\blacktriangleright_{p} N^{'}\Rightarrow N\;\triangleright_{p}\;N^{'}</equation>与第一节引理2得: <equation>M_i[N/x]\;\triangleright_{p}\; M^{'}[N^{'}/x]</equation>.</p><p>由引理1得<equation>M_i[N/x]\;\triangleright^{h}_{\beta}\;M_{i+1}[N/x]</equation>. 又有<equation>N\blacktriangleright_{p} N^{'}\Rightarrow N\;\triangleright_{p}\;N^{'}</equation>.</p><br><p>对于<equation>M_n\;\triangleright^{i}_{p}\;M^{'}</equation>, 若<equation>M_n=\lambda \vec{z}.((\lambda y. P)Q\vec{R})</equation>则<equation>M^{'}=\lambda \vec{z}.((\lambda y. P^{'})Q^{'}\vec{R^{'}})</equation>其中<equation>P\;\triangleright_{p}\;P^{'}</equation>, <equation>Q\;\triangleright_{p}\;Q^{'}</equation>,<equation>\vec{R}\;\triangleright_{p}\;\vec{R^{'}}</equation>. 由第一节引理2<equation>P[N/x]\;\triangleright_{p}\;P^{'}[N^{'}/x]</equation>, <equation>Q[N/x]\;\triangleright_{p}\;Q^{'}[N^{'}/x]</equation>与<equation>\vec{R}[N/x]\;\triangleright_{p}\;\vec{R^{'}}[N^{'}x]</equation>, 故有<equation>\lambda \vec{z}.((\lambda y. P[N/x])Q[N/x]\vec{R}[N/x])\;\triangleright^{i}_{p}\;\lambda \vec{z}.((\lambda y. P^{'}[N^{'}/x])Q^{'}[N^{'}/x]\vec{R^{'}}[N^{'}/x])</equation> (若<equation>y=x</equation>则其中<equation>\lambda y. P</equation>与<equation>\lambda y. P^{'}</equation>保持不替换, 结论依然成立), 即<equation>M_n[N/x]\;\triangleright^{i}_{p}\;M^{'}[N^{'}/x]</equation>. </p><p>若<equation>M_n=\lambda \vec{z}.(y\vec{R})</equation>则<equation>M^{'}=\lambda \vec{z}.(y\vec{R^{'}})</equation>, 若<equation>x\ne y</equation>由第一节引理2得: <equation>\vec{R}[N/x]\;\triangleright_{p}\;\vec{R}[N^{'}/x]</equation>故有<equation>\lambda \vec{z}.(y\vec{R}[N/x])\;\triangleright^{i}_{p}\;\lambda \vec{z}.(y\vec{R}[N^{'}/x])</equation>, 即<equation>M_n[N/x]\;\triangleright^{i}_{p}\;M^{'}[N^{'}/x]</equation>. 故有:</p><equation>\begin{align}
&amp;M[N/x]=M_0[N/x]\;\triangleright^{h}_{\beta}\;M_1[N/x]\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_n[N/x]\;\triangleright^{i}_{p}\;M^{'}[N^{'}/x]\\
&amp;M_i[N/x]\;\triangleright_{p}\;M^{'}[N^{'}/x]\quad(\forall i\in \{0\dots k\})
\end{align}</equation><br><p>即<equation>M[N/x]\blacktriangleright_{p} M^{'}[N^{'}/x]</equation>.<br></p><br><p>若<equation>x= y</equation>, <equation>M_n[N/x]=\lambda \vec{z}.(N\vec{R}[N/x])</equation>, <equation>M^{'}[N^{'}/x]=\lambda \vec{z}.(N^{'}\vec{R^{'}}[N^{'}/x])</equation>. 其中有<equation>N\blacktriangleright_{p} N^{'}</equation>可得<equation> N\;\triangleright_{p}\;N^{'}</equation>, <equation>M_n\;\triangleright^{i}_{p}\;M^{'}</equation>可得<equation>\vec{R}\;\triangleright_{p}\vec{R^{'}}</equation>, 根据第一节引理2有<equation>\vec{R}[N/x]\;\triangleright_{p}\;\vec{R^{'}}[N^{'}/x]</equation> 且根据上述证明2中有: 若<equation>M\blacktriangleright_{p} M^{'}</equation>与<equation>N\;\triangleright_{p}\;N^{'}</equation>, 则有<equation>MN\blacktriangleright_{p} M^{'}N^{'}</equation>, 故<equation>N\vec{R}[N/x]\blacktriangleright_{p}N^{'}\vec{R^{'}}[N^{'}/x]</equation>. 根据证明1有: 若<equation>M\blacktriangleright_{p} M^{'}</equation>, 则有<equation>\lambda x.M\blacktriangleright_{p} \lambda x.M^{'}</equation>, 得<equation>\lambda \vec{z}.(N\vec{R}[N/x])\blacktriangleright_{p}\lambda \vec{z}.(N^{'}\vec{R^{'}}[N^{'}/x])</equation>即<equation>M_n[N/x]\blacktriangleright_{p}M^{'}[N^{'}/x]</equation>. <br></p><p>根据定义有<equation>M_n[N/x]=M_{n_0}[N/x]\;\triangleright^{h}_{\beta}\;M_{n_1}[N/x]\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_{n_m}[N/x]\;\triangleright^{i}_{p}\;M^{'}[N^{'}/x]</equation>与<equation>M_{n_i}[N/x]\;\triangleright_{p}\;M^{'}[N^{'}/x]\quad(\forall i\in \{0\dots m\})</equation>, 故有:</p><br><equation>\begin{align}
&amp;M[N/x]=M_0[N/x]\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_n[N/x]\;\triangleright^{h}_{\beta}\;M_{n_0}[N/x]\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_{n_m}[N/x]\;\triangleright^{i}_{p}\;M^{'}[N^{'}/x]\\
&amp;M_i[N/x]\;\triangleright_{p}\;M^{'}[N^{'}/x]\quad(\forall i\in \{0\dots k\})\\
&amp;M_{n_i}[N/x]\;\triangleright_{p}\;M^{'}[N^{'}/x]\quad(\forall i\in \{0\dots m\})
\end{align}</equation><br><p>即<equation>M[N/x]\blacktriangleright_{p} M^{'}[N^{'}/x]</equation>.<br></p><br><p>证毕.</p><br><br><p><b>引理3: </b></p><br><ul><li>若<equation>M\;\triangleright_{p}\;N</equation>则存在λ-term<equation>L</equation>使得: <equation>M\;\triangleright^{h*}_{p}\;L\;\triangleright^{i}_{p}\;N</equation>.</li><li>若<equation>M\;\triangleright^{i}_{p}\;N\;\triangleright^{h}_{p}\;L</equation>, 则存在λ-term<equation>O</equation>使得: <equation>M\;\triangleright^{h*}_{p}\;O\;\triangleright^{i}_{p}\;N</equation>.</li></ul><br><p>证明:</p><p>1. 若<equation>M=N</equation>则为平凡情况<equation>M=L\triangleright^{i}_{p}\;N</equation>. 若<equation>M\ne N</equation>, 由引理2得<equation>(\blacktriangleright_{p})^{=}</equation>满足所有<equation>\triangleright_{p}</equation>推导规则, 对推导步骤做归纳得<equation>(\blacktriangleright_{p})^{=}=\triangleright_{p}</equation>. 故若<equation>M\;\triangleright_{p}\;N</equation>则有<equation>M\blacktriangleright_{p}N</equation>, 根据定义有:<equation>M=M_0\;\triangleright^{h}_{\beta}\;M_1\;\triangleright^{h}_{\beta}\;\dots\;\triangleright^{h}_{\beta}\;M_n\;\triangleright^{i}_{p}\;N</equation>即<equation>L=M_n</equation>, <equation>M\;\triangleright^{h*}_{p}\;L\;\triangleright^{i}_{p}\;N</equation>.</p><br><p>2. <equation>M\;\triangleright^{i}_{p}\;N\;\triangleright^{h}_{p}\;L</equation>, 其中<equation>N\;\triangleright^{h}_{p}\;L</equation>意味着<equation>N</equation>中至少存在一个头可约式, 故<equation>M,N</equation>可表示为<equation>M=\lambda \vec{z}.((\lambda y. P)Q\vec{R})</equation>, <equation>N=\lambda \vec{z}.((\lambda y. P^{'})Q^{'}\vec{R^{'}})</equation>其中<equation>P\;\triangleright_{p}\;P^{'}</equation>, <equation>Q\;\triangleright_{p}\;Q^{'}</equation>,<equation>\vec{R}\;\triangleright_{p}\;\vec{R^{'}}</equation>. 那么<equation>L=\lambda \vec{z}.(P^{'}[Q^{'}/y]\vec{R^{'}})</equation>. 令<equation>O^{'}=\lambda \vec{z}.(P[Q/y]\vec{R})</equation>, 则<equation>M\;\triangleright^{h}_{p}\;O^{'}</equation>. 又有<equation>O^{'}\;\triangleright_{p}\;L</equation>, 由第一部分证明有存在<equation>O</equation>满足: <equation>O^{'}\;\triangleright^{h*}_{p}\;O\;\triangleright^{i}_{p}\;L</equation>, 故有<equation>M\;\triangleright^{h}_{p}\;O^{'}\;\triangleright^{h*}_{p}\;O\;\triangleright^{i}_{p}\;N</equation>, 即<equation>M\;\triangleright^{h*}_{p}\;O\;\triangleright^{i}_{p}\;N</equation>.</p><br><p>证毕.</p><br><br><p><b>定理(leftmost reduction): </b>若λ-term<equation>M</equation>存在normal form<equation>N</equation>, 则<equation>M\;\triangleright_{\beta}^{l*}\;N</equation>.</p><p>证明: 对<equation>M</equation>的normal form<equation>N</equation>长度做归纳.</p><p><u>归纳基础</u>: 若<equation>length(N)=1</equation>即<equation>N=x</equation>. </p><p><equation>M\;\triangleright_{\beta}^{*}\;N</equation>由引理3第一部分得<equation>M\;\triangleright_{\beta}^{h*}\;L_1\;\triangleright_{\beta}^{i}\;N_1\;\triangleright_{\beta}^{h*}\;\cdots \triangleright_{\beta}^{h*}\;L_n\;\triangleright_{\beta}^{i}\;N</equation>, 又由引理3第二部分得<equation>\triangleright_{\beta}^{h*}</equation>与<equation>\triangleright_{\beta}^{i*}</equation>的顺序可交换, 即可把所有<equation>\triangleright_{\beta}^{h*}</equation>交换放置在<equation>\triangleright_{\beta}^{i*}</equation>前, 则有<equation>M\;\triangleright_{\beta}^{h*}\;L\;\triangleright_{\beta}^{i*}\;N</equation>, 其中<equation>L</equation>无头可约式, <equation>L</equation>形如<equation>L=\lambda \vec{z}.(x\vec{R})</equation>. 由于<equation>N=x</equation>且<equation>L\;\triangleright_{\beta}^{i*}\;N</equation>, 则<equation>\vec{z}=\emptyset</equation>与<equation>\vec{R}=\emptyset</equation>, 即<equation>N=L=x</equation>, <equation>M\;\triangleright_{\beta}^{h*}\;N</equation>. 由定义知头规约均为最左规约, 即<equation>M\;\triangleright_{\beta}^{l*}\;N</equation>.<br></p><p><u>归纳步骤</u>: 归纳假设当<equation>length(N)\leq n</equation>时均有<equation>M\;\triangleright_{\beta}^{l*}\;N</equation>.</p><p>当<equation>length(N)= n+1</equation>时, 与归纳基础中同理有: <equation>M\;\triangleright_{\beta}^{h*}\;L\;\triangleright_{\beta}^{i*}\;N</equation>, 其中<equation>L=\lambda \vec{z}.(x\vec{R})</equation>, <equation>N=\lambda \vec{z}.(x\vec{R^{'}})</equation>, <equation>\vec{R}\;\triangleright_{\beta}\;\vec{R^{'}}</equation>, <equation>\vec{R^{'}}</equation>为normal form. 显然有<equation>length(\vec{R^{'}})\leq n</equation>, 根据归纳假设有<equation>\vec{R}\;\triangleright_{\beta}^{l*}\;\vec{R^{'}}</equation>. 其中<equation>\vec{R}</equation>至<equation>\vec{R^{'}}</equation>的最左规约亦为<equation>\lambda \vec{z}.(x\vec{R})</equation>至<equation>\lambda \vec{z}.(x\vec{R^{'}})</equation>的最左规约 (<equation>\lambda \vec{z}.(x\vec{R})</equation>中无头可约式), 即<equation>M\;\triangleright_{\beta}^{h*}\;L\;\triangleright_{\beta}^{h*}\;N</equation>则有<equation>M\;\triangleright_{\beta}^{l*}\;N</equation>.</p><br>由归纳得对于任意λ-term<equation>M</equation>若<equation>M</equation>存在normal form<equation>N</equation>, 则有<equation>M\;\triangleright_{\beta}^{l*}\;N</equation>.<p>证毕.<br></p><br><br><p>leftmost reduction定理提供了一种规约策略, 若λ-term存在normal form则通过最左规约一定能得到该normal form, 即规约求值停机.<br></p><br><br><p><b>定义: </b>对于一规约序列有</p><ul><li>若规约序列中存在无穷多次的头规约(head reductions), 则称之为quasi-head.</li><li>若规约序列中存在无穷多次的最左规约(leftmost reductions), 则称之为quasi-leftmost.</li></ul><br><br><b>定理: quasi-leftmost-reduction theorem</b><br><p>对于normalizing λ-term<equation>M</equation></p><ul><li><equation>M
</equation>中无quasi-head规约序列.<br></li><li><equation>M
</equation>中无quasi-leftmost规约序列.</li></ul><br>证明:<br><p>1. 若存在quasi-head规约序列, 由引理3得, 将所有的头规约交换移动至规约序列的最前端, 由于规约序列中存在无穷多的头规约, 故该规约序列为无穷长的头规约序列. 又有头规约即为最左规约, 则该最左规约序列为无穷长, 由leftmost reduction定理得<equation>M</equation>是非正规的, 矛盾. 故<equation>M
</equation>无quasi-head规约序列.</p><p>2. 对<equation>M</equation>的normal form<equation>N</equation>长度做归纳.</p><br><p><u>归纳基础</u>: 若<equation>length(N)=1</equation>即<equation>N=x</equation>.</p><p>由证明第一部分得<equation>M\;\triangleright_{\beta}^{*}\;N</equation>规约序列中不存在无穷多的头规约, 即存在某λ-term使得<equation>M\;\triangleright_{\beta}^{*}\;L\;\triangleright_{\beta}^{i*}\;N</equation>, 在<equation>L</equation>之后的规约序列中不存在头规约, 故<equation>L</equation>无头可约式, <equation>L</equation>形如<equation>L=\lambda \vec{z}.(x\vec{R})</equation>. 由于<equation>N=x</equation>且<equation>L\;\triangleright_{\beta}^{i*}\;N</equation>, 则<equation>\vec{z}=\emptyset</equation>与<equation>\vec{R}=\emptyset</equation>, 即<equation>N=L=x</equation>, 即规约序列中不存在无穷多的最左规约.</p><br><p><u>归纳步骤</u>: 归纳假设当<equation>length(N)\leq n</equation>时均有所有<equation>M\;\triangleright_{\beta}^{*}\;N</equation>规约序列中不存在无穷多的最左规约.</p><p>当<equation>length(N)= n+1</equation>时. 与归纳基础中同理有: <equation>M\;\triangleright_{\beta}^{*}\;L\;\triangleright_{\beta}^{i*}\;N</equation>, 其中<equation>L=\lambda \vec{z}.(x\vec{R})</equation>, <equation>N=\lambda \vec{z}.(x\vec{R^{'}})</equation>, <equation>\vec{R}\;\triangleright_{\beta}\;\vec{R^{'}}</equation>, <equation>\vec{R^{'}}</equation>为normal form. 显然有<equation>length(\vec{R^{'}})\leq n</equation>, 根据归纳假设有<equation>\vec{R}\;\triangleright_{\beta}^{l*}\;\vec{R^{'}}</equation>. 其中<equation>\vec{R}</equation>至<equation>\vec{R^{'}}</equation>的规约序列中不存在无穷多的最左规约. 即<equation>M\;\triangleright_{\beta}^{*}\;N</equation>规约序列中亦不存在无穷多的最左规约.</p><br>由归纳得对于任意normalizing λ-term<equation>M</equation>, 无quasi-leftmost规约序列.<p>证毕.</p><br><br><p>quasi-leftmost-reduction theorem为判断λ-term是否存在normal form提供了工具, 即给定某一规约序列, 若该规约序列为quasi-head或quasi-leftmost则该λ-term为非normalizing的.<br></p><br><br><h2><b>λI-calculus</b></h2><p><b>定义: </b>λI-表达式</p><p><equation>\Lambda_{I}^{-}</equation>为满足: <equation>\Lambda_{I}^{-}=s\;|\;\Lambda_{I}^{-}\Lambda_{I}^{-}\;|\;\lambda s.M\quad(M\in\Lambda_{I}^{-}, s\in FV(M))</equation> 的最小集合.</p><p>即:</p><equation>\begin{align}
&amp;s\in \Lambda_{I}^{-}\\
&amp;M\in \Lambda_{I}^{-}, s\in FV(M)\Rightarrow (\lambda s.M) \in \Lambda_{I}^{-}\\
&amp;M,N\in \Lambda_{I}^{-}\Rightarrow MN\in\Lambda_{I}^{-}
\end{align}</equation><br><br><p><b>定义:</b> λI-term</p><p>λI-term为λI-表达式在α-equivalence下的表达式商集:<br></p><equation>\begin{align}
&amp;[M]_{\alpha}=\{N\in\Lambda_{I}^{-}\;|\;M=_{\alpha}N\}\\
&amp;\Lambda_{I} =\Lambda_{I}^{-}/_{=_{\alpha}}=\{[M]_{\alpha}\;|\;M\in\Lambda_{I}^{-}\}
\end{align}</equation><br><br><p>λI-calculus对λ-表达式添加了一个限制, 即所有的绑定名称均需要出现在子表达式中, 典型的例子如: <equation>K=\lambda x.\lambda y.x</equation>, <equation>I=\lambda x.x</equation>, 其中<equation>I</equation>属于λI-表达式, 而<equation>K</equation>不属于λI-表达式(<equation>\lambda y.x</equation>中绑定名称<equation>y</equation>并没有出现在子表达式<equation>x</equation>里). 有时候为了区别, 将λ-calculus称为λK-calculus.<br></p><br><p>显然λI-calculus为λK-calculus的子集. 对于λK-calculus的定义与操作亦适用于λI-calculus, 如α-等价 ,β-规约, η-规约等等.</p><br><br><p><b>引理4:</b></p><equation>\begin{align}
&amp;M,N\in\Lambda_{I}\Rightarrow M[N/x]\in\Lambda_{I}\\
&amp;\lambda x.M\in\Lambda_{I}\Rightarrow FV((\lambda x.M)N)=FV(M[N/x])\\
&amp;M\in\Lambda_{I}, M\;\triangleright_{\beta}^{*}\;N \Rightarrow N\in\Lambda_{I}\\
&amp;M\in\Lambda_{I}, M\;\triangleright_{\beta}^{*}\;N \Rightarrow FV(M)=FV(N)\\
\end{align}</equation><br><p>证明:</p><p>1. 对<equation>M</equation>做结构归纳, 易证.</p><p>2. 由<equation>x\in FV(M)</equation>, 则<equation>FV(M[N/x])=(FV(M)\cup FV(N))/\{x\}</equation>.</p><equation>\begin{align}
FV((\lambda x.M)N)&amp;=(FV(M)/\{x\})\cup FV(N)\\
&amp;=(FV(M)\cup FV(N))/\{x\}\\
&amp;=FV(M[N/x])
\end{align}</equation><p>3. 4. 设<equation>A=(\lambda x.P)Q</equation>,<equation>B=P[Q/x]</equation> 有<equation>A\;\triangleright_{\beta}\;B</equation>即<equation>(\lambda x.P)Q\;\triangleright_{\beta}\;P[Q/x]</equation>由证明1与2得<equation>P[Q/x]\in\Lambda_{I}</equation>与<equation>FV((\lambda x.P)Q)=FV(P[Q/x])</equation>. 即有若<equation>M\in\Lambda_{I}, M\;\triangleright_{\beta}^{*}\;N</equation>则<equation>N\in\Lambda_{I}</equation>与<equation>FV(M)=FV(N)</equation>.</p><p>证毕.</p><br><br><p><b>定理: Church-Rosser Theorem(for λI-calculus)</b></p><br><p>若λI-term <equation>M</equation>有: <equation>M\;\triangleright_{\beta}^{*}\;M_1</equation> 与 <equation>M\;\triangleright_{\beta}^{*}\;M_2</equation> (<equation>M_1,M_2\in\Lambda_{I}</equation>), 则存在某一λI-term<equation>N</equation>满足:<equation>M_1\;\triangleright_{\beta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\beta}^{*}\;N</equation>.</p><p>证明: 在λK-calculus中, 由Church-Rosser Theorem(参考第一节推论1), 在λ-term<equation>N</equation>满足:<equation>M_1\;\triangleright_{\beta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\beta}^{*}\;N</equation>. 由引理4第3条及<equation>M_1\;\triangleright_{\beta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\beta}^{*}\;N</equation>, 则有</p><br><br><p><b>引理5(Church-Rosser property): </b>λI-term<equation>M,\;M^{'}</equation>有<equation>M=_{\beta}M^{'}</equation>, 则存在λI-term<equation>N</equation>满足<equation>M\;\triangleright_{\beta}^{*}\;N</equation> 与 <equation>M^{'}\;\triangleright_{\beta}^{*}\;N</equation>.</p><br><p>证明: 在λK-calculus中, 由Church-Rosser property(参考第一节推论1)有<equation>M\;\triangleright_{\beta}^{*}\;N</equation>, <equation>M^{'}\;\triangleright_{\beta}^{*}\;N</equation>. 由引理4第3条<equation>M\;\triangleright_{\beta}^{*}\;N</equation>, <equation>M^{'}\;\triangleright_{\beta}^{*}\;N</equation>且<equation>M,M^{'}\in\Lambda_{I}</equation>, 则有<equation>N\in\Lambda_{I}</equation>. 证毕.</p><br><br><p><b>定义: </b>规约策略(reduction strategy)<equation>F:\Lambda \to\Lambda </equation>, 满足: </p><ul><li>若<equation>M</equation>为normal form则<equation>F(M)=M</equation>.<br></li><li>否则有<equation>M\;\triangleright^{*}_{\beta}\;F(M)</equation>.<br></li></ul><p>若对于任意弱规范化(weak normalizing)的<equation>M</equation>均有存在<equation>i\in \mathbb{N}</equation>使得<equation>F^{i}(M)</equation>为normal form, 则称<equation>F</equation>为规范化的(normalizing).</p><br><br><p><b>定义: </b>规约策略<equation>F:\Lambda \to\Lambda </equation>为单步规约策略(one-step reduction strategy), 满足: 对于<equation>M\notin NF_{\beta}</equation>有<equation>M\;\triangleright_{\beta}\;F(M)</equation>.</p><br><br><p>如: 最左规约策略: </p><p>若<equation>M</equation>为normal form则<equation>F_{L}(M)=M</equation>, 否则<equation>M\;\triangleright^{l}_{\beta}\;F(M)</equation>, 即<equation>F_{L}</equation>为最左规约策略, 根据leftmost reduction定理得, <equation>F_{L}</equation>为规范化的.</p><br><p>call by name策略: </p><ul><li>若<equation>M\in NF_{\beta}</equation>则<equation>F_{n}(M)=M</equation>.</li><li>若<equation>\vec{P}\in NF_{\beta},\; Q\notin NF_{\beta}</equation>, 则<equation>F_{n}(\lambda \vec{z}.(x\vec{P}Q\vec{R}))=\lambda \vec{z}.(x\vec{P}F_{n}(Q)\vec{R})</equation>.<br></li><li>若<equation>x\in FV(P)</equation>, 则<equation>F_{n}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.(P[Q/x]\vec{R})</equation>, 否则<equation>F_{n}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.(P\vec{R})</equation>.</li></ul><p>call by value策略:</p><br><ul><li>若<equation>M\in NF_{\beta}</equation>则<equation>F_{v}(M)=M</equation>.</li><li>若<equation>\vec{P}\in NF_{\beta},\; Q\notin NF_{\beta}</equation>, 则<equation>F_{v}(\lambda \vec{z}.(x\vec{P}Q\vec{R}))=\lambda \vec{z}.(x\vec{P}F_{v}(Q)\vec{R})</equation>.<br></li><li>若<equation>Q\in NF_{\beta}</equation>, 则<equation>F_{v}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.(P[Q/x]\vec{R})</equation>.</li><li>若<equation>Q\notin NF_{\beta}</equation>, 则<equation>F_{v}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.((\lambda x.P)F_{v}(Q)\vec{R})</equation>.</li></ul><p>若<equation>M\notin NF_{\beta}</equation>则显然有<equation>M\;\triangleright_{\beta}\;F_{n}(M)</equation>与<equation>M\;\triangleright_{\beta}\;F_{v}(M)</equation>.</p><br><br><p><b>定义: </b>单步规约策略<equation>F_{\infty}:\Lambda \to\Lambda </equation>, 满足:</p><br><ul><li>若<equation>M\in NF_{\beta}</equation>则<equation>F_{\infty}(M)=M</equation>.</li><li>若<equation>\vec{P}\in NF_{\beta},\; Q\notin NF_{\beta}</equation>, 则<equation>F_{\infty}(\lambda \vec{z}.(x\vec{P}Q\vec{R}))=\lambda \vec{z}.(x\vec{P}F_{\infty}(Q)\vec{R})</equation>.<br></li><li>若<equation>x\in FV(P)</equation>或<equation>Q\in NF_{\beta}</equation>, 则<equation>F_{\infty}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.(P[Q/x]\vec{R})</equation>.</li><li>若<equation>x\notin FV(P)</equation>且<equation>Q\notin NF_{\beta}</equation>, 则<equation>F_{\infty}(\lambda \vec{z}.((\lambda x.P)Q\vec{R}))=\lambda \vec{z}.((\lambda x.P)F_{\infty}(Q)\vec{R})</equation>.</li></ul><p>若<equation>M\notin NF_{\beta}</equation>则显然有<equation>M\;\triangleright_{\beta}\;F_{\infty}(M)</equation>.</p><br><br><p><b>引理6: </b>当<equation>Q\in SN_{\beta}</equation>或<equation>x\in FV(P)</equation>时, 若<equation>P[Q/x]\vec{R}\in SN_{\beta}</equation>则<equation>(\lambda x.P)Q\vec{R}\in SN_{\beta}</equation>. 及其逆否命题若<equation>(\lambda x.P)Q\vec{R}\in \infty_{\beta}</equation>则<equation>P[Q/x]\vec{R}\in \infty_{\beta}</equation>.</p><br><p>证明: <equation>P[Q/x]\vec{R}\in SN_{\beta}</equation>则<equation>P,\vec{R}\in SN_{\beta}</equation>, 若<equation>x\notin FV(P)</equation>则<equation>Q\in SN_{\beta}</equation>. 若<equation>x\in FV(P)</equation>, <equation>P[Q/x]\vec{R}\in SN_{\beta}</equation>且<equation>Q</equation>为<equation>P[Q/x]</equation>的子表达式, 即有<equation>Q\in SN_{\beta}</equation>. 设<equation>(\lambda x.P)Q\vec{R}\in \infty_{\beta}</equation>, 对于任意无穷规约序列均有:</p><equation>(\lambda x.P)Q\vec{R}\;\triangleright_{\beta}\;P^{'}[Q^{'}/x]\vec{R^{'}}\;\triangleright_{\beta}\;\cdots</equation><br><p>其中<equation>P\;\triangleright^{*}_{\beta}\;P^{'}</equation>, <equation>Q\;\triangleright^{*}_{\beta}\;Q^{'}</equation>, <equation>\vec{R}\;\triangleright^{*}_{\beta}\;\vec{R^{'}}</equation>且<equation>P^{'},\;Q^{'}\;,\vec{R^{'}}\in NF_{\beta}</equation>.</p><p>又有<equation>P[Q/x]\vec{R}\;\triangleright^{*}_{\beta}\;P^{'}[Q^{'}/x]\vec{R^{'}}\;\triangleright_{\beta}\;\cdots</equation>为无穷规约序列, 与<equation>P[Q/x]\vec{R}\in SN_{\beta}</equation>矛盾. 故<equation>(\lambda x.P)Q\vec{R}\in SN_{\beta}</equation>. </p><p>证毕.</p><br><br><p><b>引理7: </b>若<equation>M\in\infty_{\beta}</equation>则<equation>F_{\infty}(M)\in\infty_{\beta}</equation>.</p><p>证明: 对<equation>M</equation>的做结构归纳.</p><p><u>归纳基础</u>: 若<equation>M=\lambda \vec{z}.((\lambda x.P)Q\vec{R})</equation>且<equation>x\in FV(P)</equation>或<equation>Q\in NF_{\beta}</equation>, 则<equation>F_{\infty}(M)=\lambda \vec{z}.(P[Q/x]\vec{R})</equation>. 由<equation>M=\lambda \vec{z}.((\lambda x.P)Q\vec{R})\in\infty_{\beta}</equation>则<equation>(\lambda x.P)Q\vec{R}\in\infty_{\beta}</equation>, 又由引理6得<equation>P[Q/x]\vec{R}\in \infty_{\beta}</equation>, 即<equation>F_{\infty}(M)=\lambda \vec{z}.(P[Q/x]\vec{R})\in\infty_{\beta}</equation>.<br></p><p><u>归纳步骤</u>: 归纳假设对于任意<equation>M</equation>的子表达式<equation>N</equation>均有<equation>N\in\infty_{\beta}</equation>则<equation>F_{\infty}(N)\in\infty_{\beta}</equation>.</p><p>对于<equation>M=\lambda \vec{z}.(x\vec{P}Q\vec{R})</equation> (<equation>\vec{P}\in NF_{\beta},\; Q\notin NF_{\beta}</equation>), <equation>F_{\infty}(M)=\lambda \vec{z}.(x\vec{P}F_{\infty}(Q)\vec{R})</equation>, 若<equation>Q\in\infty_{\beta}</equation>, 由归纳假设得<equation>F_{\infty}(Q)\in\infty_{\beta}</equation>则<equation>F_{\infty}(M)=\lambda \vec{z}.(x\vec{P}F_{\infty}(Q)\vec{R})\in\infty_{\beta}</equation>. 若<equation>Q\notin\infty_{\beta}</equation>则由<equation>M\in\infty_{\beta}</equation>得<equation>\vec{R}\in \infty_{\beta}</equation>, 即<equation>F_{\infty}(M)=\lambda \vec{z}.(x\vec{P}F_{\infty}(Q)\vec{R})\in\infty_{\beta}</equation>.<br></p><p>对于<equation>M=\lambda \vec{z}.((\lambda x.P)Q\vec{R})</equation> (<equation>x\notin FV(P)</equation>且<equation>Q\notin NF_{\beta}</equation>), <equation>F_{\infty}(M)=\lambda \vec{z}.((\lambda x.P)F_{\infty}(Q)\vec{R})</equation>. 若<equation>Q\in\infty_{\beta}</equation>, 由归纳假设得<equation>F_{\infty}(Q)\in\infty_{\beta}</equation>则<equation>F_{\infty}(M)=\lambda \vec{z}.((\lambda x.P)F_{\infty}(Q)\vec{R})\in\infty_{\beta}</equation>. 若<equation>Q\in\infty_{\beta}-NF_{\beta}</equation>又有<equation>x\notin FV(P)</equation>则<equation>(\lambda x.P)F_{\infty}(Q)\vec{R}\;\triangleright^{*}_{\beta}\;P\vec{R}</equation>. 又由<equation>M=\lambda \vec{z}.((\lambda x.P)Q\vec{R})\in\infty_{\beta}</equation>则<equation>(\lambda x.P)Q\vec{R}\in\infty_{\beta}</equation>, 由引理6得<equation>P[Q/x]\vec{R}=P\vec{R}\in \infty_{\beta}</equation>, 即<equation>(\lambda x.P)F_{\infty}(Q)\vec{R}\in\infty_{\beta}</equation>, 故<equation>F_{\infty}(M)=\lambda \vec{z}.(P[Q/x]\vec{R})\in\infty_{\beta}</equation>.</p><p>故综上<equation>F_{\infty}(M)\in\infty_{\beta}</equation>. 由结构归纳得对于任意<equation>M\in\infty_{\beta}</equation>均有<equation>F_{\infty}(M)\in\infty_{\beta}</equation>.</p><br><p>证毕.</p><br><br><p><b>定义:</b> 规约策略<equation>F</equation>为无穷规约策略(Perpetual reduction strategy)当且仅当对于<equation>M\in \infty_{\beta}</equation>下列规约序列为无穷序列:</p><br><p><equation>M\;\triangleright_{\beta}\;F(M)\;\triangleright_{\beta}\;F^{2}(M)\;\triangleright_{\beta}\;\cdots</equation>.<br></p><br><br><p><b>引理8: </b>规约策略<equation>F_{\infty}</equation>为无穷规约策略.</p><p>证明: <equation>M\in \infty_{\beta}</equation>由引理7得<equation>F(M)\in \infty_{\beta}</equation>即<equation>F(M)\notin NF_{\beta}</equation>, 故递推得对于任意<equation>i\in \mathbb{N}</equation>均有<equation>F^{i}(M)\;\triangleright_{\beta}\;F^{i+1}(M)</equation>即<equation>M\;\triangleright_{\beta}\;F(M)\;\triangleright_{\beta}\;F^{2}(M)\;\triangleright_{\beta}\;\cdots</equation>为无穷序列.</p><p>证毕.</p><br><br><p><b>定理(Church, Rosser):</b><br></p><ul><li>若<equation>M\in \Lambda_{I}</equation>, <equation>M\in WN_{\beta}</equation>, 则有<equation>M\in SN_{\beta}</equation>.</li><li>若<equation>M\in \Lambda_{I}</equation>, <equation>M\in \infty_{\beta}</equation>, <equation>M\;\triangleright_{\beta}\;N</equation>, 则有<equation>N\in \infty_{\beta}</equation>.</li></ul><p>证明:</p><p>1. <equation>M\in WN_{\beta}</equation>, 由leftmost reduction定理有<equation>M\;\triangleright^{l*}_{\beta}\;N</equation>, <equation>N\in NF_{\beta}</equation>. </p><p>设<equation>L\in \Lambda_{I}</equation>且<equation>L\notin NF_{\beta}</equation>, 对于<equation>L</equation>中的所有形如<equation>\lambda \vec{z}.((\lambda x.P)Q\vec{R})</equation>的子表达式<equation>L^{'}</equation>均有<equation>x\in FV(P)</equation>, 故<equation>F_{\infty}(L^{'})=\lambda \vec{z}.(P[Q/x]\vec{R})</equation>, 即<equation>L^{'}\;\triangleright^{l}_{\beta}\;F_{\infty}(L^{'})</equation>, 对于<equation>L</equation>若<equation>L=\lambda \vec{z}.((\lambda x.P)Q\vec{R})</equation>显然可得<equation>L\;\triangleright^{l}_{\beta}\;F_{\infty}(L)</equation>, 若<equation>L=\lambda \vec{z}.(x\vec{P}Q\vec{R})</equation>, 则<equation>F_{\infty}(L)=\lambda \vec{z}.(x\vec{P}F_{\infty}(Q)\vec{R})</equation>, 其中<equation>Q</equation>为<equation>L</equation>的子表达式, 归纳假设<equation>Q\;\triangleright^{l}_{\beta}\;F_{\infty}(Q)</equation>则有<equation>L\;\triangleright^{l}_{\beta}\;F_{\infty}(L)</equation>. 由结构归纳得对于任意<equation>L\in \Lambda_{I}</equation>且<equation>L\notin NF_{\beta}</equation>, 均有<equation>L\;\triangleright^{l}_{\beta}\;F_{\infty}(L)</equation>.<br></p><br><equation>M\;\triangleright^{l*}_{\beta}\;N</equation>则可表示为<equation>\exists k\in \mathbb{N}\quad N=F^{k}(M)</equation>且<equation>N\in NF_{\beta}</equation>, 由引理8得<equation>M\notin \infty_{\beta}</equation>即<equation>M\in SN_{\beta}</equation>.<br><p>2. <equation>M\in \infty_{\beta}</equation>即<equation>M\notin SN_{\beta}</equation>, 由证明第一部分得<equation>M\notin WN_{\beta}</equation>. 又有<equation>M\;\triangleright_{\beta}\;N</equation>故<equation>N\notin WN_{\beta}</equation>即<equation>N\in \infty_{\beta}</equation>.</p><br><p>证毕.</p><br><br><p>该定理揭示了在λI-calculus中弱规范性等价于强规范性. 该性质为证明其他λ-calculus约束中的强规范性提供了工具, 若能证明在某种约束下λ-calculus具有弱规范性, 且该约束可以转化为λI-calculus形式, 则在该约束下λ-calculus具有强规范性. </p><p>例如下一节将讲到的simply typed λ-calculus具有强规范性.</p><br><br><h2><b>βη-规约</b></h2><p>之前所有的性质中涉及的规约均为β-规约, 在规约关系中加入η-规约后为βη-规约, 之前的定理与性质在βη-规约下依然成立.</p><br><br><p><b>定义: </b>βη-规约<equation>\triangleright_{\beta\eta}</equation>为满足以下推导规则最小二元关系<br></p><equation>\begin{align}
&amp;P\;\triangleright_{\eta}\;P^{'}&amp;&amp;\Rightarrow\;P\;\triangleright_{\beta\eta}\;P^{'}\\
&amp;P\;\triangleright_{\beta}\;P^{'}&amp;&amp;\Rightarrow\;P\;\triangleright_{\beta\eta}\;P^{'}\\
\end{align}</equation><br><p>相似地可以定义多步βη-规约<equation>\triangleright_{\beta\eta}^{*}</equation>与βη-等价<equation>=_{\beta\eta}</equation>.</p><br><br><p><b>定义:</b> 拓展等价性(Extensional equality)<equation>=_{ext}</equation>为满足以下推导规则最小二元等价关系</p><br><equation>\begin{align}
&amp;M\;\triangleright_{\beta}\;N&amp;&amp;\Rightarrow\;M=_{ext}N\\
&amp;Mx=_{ext}\;Nx\quad(x \notin FV(M)\;and\; x\notin FV(N) )&amp;&amp;\Rightarrow\;M=_{ext}N\\
&amp;P\;\triangleright_{\beta}\;P^{'}&amp;&amp;\Rightarrow\;PQ=_{ext}P^{'}Q\\
&amp;P\;\triangleright_{\beta}\;P^{'}&amp;&amp;\Rightarrow\;QP=_{ext}QP^{'}\\
\end{align}</equation><br><p>其中第二条规则称为<equation>Rule(\zeta)</equation>. 可以证明另一种等价性表示为对于任意<equation>P</equation>均有<equation>MP=_{ext}\;NP\;\Rightarrow\;M=_{ext}\;N</equation>.</p><p>(归纳证明<equation>M[P/x]=_{ext}N[P/x]\;\Rightarrow\;M=_{ext}N</equation>, 然后代入<equation>Rule(\zeta)</equation>)</p><br><br><p><b>定理: </b>拓展等价性<equation>=_{ext}</equation>等价于βη-等价性<equation>=_{\beta\eta}</equation>.</p><p>证明: 规则1,3,4对于<equation>=_{\beta\eta}</equation>显然成立.</p><p>对于规则2, 设<equation>Mx=_{\beta\eta}\;Nx</equation>, 由η-规约推导关系<equation>P\;\triangleright_{\eta}\;P^{'}\Rightarrow\;\lambda x.P\;\triangleright_{\eta}\;\lambda x.P^{'}</equation>有<equation>\lambda x.Mx=_{\beta\eta}\;\lambda x.Nx</equation>. 又有<equation>x \notin FV(M)</equation>和<equation>x\notin FV(N)</equation>, 则由η-规约得<equation>M=_{\beta\eta}\;N</equation>, 即<equation>Mx=_{\beta\eta}\;Nx\;\Rightarrow\;M=_{\beta\eta}\;N</equation>.</p><p>反之则显然若满足βη-等价性<equation>=_{\beta\eta}</equation>则必满足拓展等价性<equation>=_{ext}</equation>.</p><br><p>故<equation>=_{ext}</equation>与<equation>=_{\beta\eta}</equation>关系等价. 证毕.</p><br><br><p><b>引理9: </b>若<equation>M\;\triangleright_{\eta}\;N\;\triangleright_{\beta}\;L</equation>, 则存在λ-term<equation>O</equation>使得: <equation>M\;\triangleright_{\beta}\;O\;\triangleright^{*}_{\eta}\;N</equation>.</p><p>证明: 由于η-规约项与β-规约项不相交(注: 所有形如<equation>(\lambda x.M)N</equation>的η-规约均视为β-规约), 故可交换规约顺序. 由于<equation>M\;\triangleright_{\eta}\;N</equation>中的η-规约项<equation>\lambda x.Mx</equation>β-规约后可能在<equation>O</equation>中重复出现, 故需要多步η-规约. </p><br><p>例如: </p><equation>\begin{align}
&amp;(\lambda x.xx)(\lambda z.yz)\;\triangleright_{\eta}\;(\lambda x.xx)y\;\triangleright_{\beta}\;yy\\
&amp;(\lambda x.xx)(\lambda z.yz)\;\triangleright_{\beta}\;(\lambda z.yz)(\lambda z.yz)\;\triangleright_{\eta}\;(\lambda z.yz)y\;\triangleright_{\eta}\;yy
\end{align}</equation><p>证毕.</p><br><br><p><b>引理10(η-postponement): </b>所有βη-规约<equation>M\;\triangleright_{\beta\eta}\;N</equation>均能表示为<equation>M\;\triangleright^{*}_{\beta}\;L\;\triangleright^{*}_{\eta}\;N</equation>.</p><br><p>证明: 对于每一步η-规约由引理9得可交换顺序至β-规约后, 故可将所有η-规约后置. </p><p>证毕.</p><br><br><p><b>引理11: </b>η-规约具有强规范性.</p><p>证明: η-规约使λ-term长度减小, 故所有的λ-term的η-规约序列均有限.</p><p>证毕.</p><br><br><p><b>引理12:</b> η-规约具有对角性.</p><br><p>证明: 显然两次不同的η-规约必不相交, 故可重复另外一次η-规约得到相同的λ-term.</p><p>证毕.</p><br><br><p><b>定义: weak Church-Rosser property(WCR)</b></p><p>二元关系<equation>\triangleright</equation>满足: <equation>M\;\triangleright\;M_1</equation> 与 <equation>M\;\triangleright\;M_2</equation>存在一<equation>N</equation>使得:<equation>M_1\;\triangleright^{*}\;N</equation> 与 <equation>M_2\;\triangleright^{*}\;N</equation>.</p><br><br><p><b>定义: Church-Rosser property(CR)</b></p><p>二元关系<equation>\triangleright</equation>满足: <equation>M\;\triangleright^{*}\;M_1</equation> 与 <equation>M\;\triangleright^{*}\;M_2</equation>存在一<equation>N</equation>使得:<equation>M_1\;\triangleright^{*}\;N</equation> 与 <equation>M_2\;\triangleright^{*}\;N</equation>.</p><br><br><p><b>定理:</b> 多步β-规约<equation>\triangleright^{*}_{\eta}</equation>具有Church-Rosser property, 即λ-term<equation>M</equation>若有:</p><p><equation>M\;\triangleright_{\eta}^{*}\;M_1</equation> 与 <equation>M\;\triangleright_{\eta}^{*}\;M_2</equation>则存在λ-term<equation>N</equation>满足:<equation>M_1\;\triangleright_{\eta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\eta}^{*}\;N</equation>.</p><p>证明: 由第一节引理4与引理12可得. </p><p>证毕.</p><br><br><p><b>引理(Newman's lemma): </b>若二元关系具有强规范性与WCR, 则其具有CR.</p><br><p>证明: 将在下一节证明.</p><br><br><p><b>定理: Church-Rosser Theorem(for βη-reduction)<br></b></p><p>对于λ-term<equation>M</equation>若有:<equation>M\;\triangleright_{\beta\eta}^{*}\;M_1</equation> 与 <equation>M\;\triangleright_{\beta\eta}^{*}\;M_2</equation>则存在一λ-term<equation>N</equation>满足:</p><p><equation>M_1\;\triangleright_{\beta\eta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\beta\eta}^{*}\;N</equation>.</p><p>证明: 由引理10得<equation>M\;\triangleright_{\beta\eta}^{*}\;M_1</equation> 与 <equation>M\;\triangleright_{\beta\eta}^{*}\;M_2</equation>可表示为<equation>M\;\triangleright^{*}_{\beta}\;L_1\;\triangleright^{*}_{\eta}\;M_1</equation>与<equation>M\;\triangleright^{*}_{\beta}\;L_2\;\triangleright^{*}_{\eta}\;M_2</equation>. 由Church-Rosser Theorem得存在<equation>R</equation>满足<equation>L_1\;\triangleright_{\beta}^{*}\;R</equation> 与 <equation>L_2\;\triangleright_{\beta}^{*}\;R</equation>. </p><p>对于<equation>L_1\;\triangleright_{\beta}^{*}\;R</equation>, 可表示为<equation>L_1\;\triangleright_{\beta}^{n}\;R\quad(n\in \mathbb{N})</equation></p><p>定义关系<equation>\triangleright_{\beta\eta}^{\leq n}</equation>为β-规约次数小于等于<equation>n</equation>的<equation>\triangleright_{\beta\eta}^{*}</equation>规约. 由引理10与引理11得关系<equation>\triangleright_{\beta\eta}^{\leq n}</equation>具有强规范性. 类似于引理9可证<equation>\triangleright_{\beta\eta}^{\leq n}</equation>具有WCR. 故由Newman's lemma可得<equation>\triangleright_{\beta\eta}^{\leq n}</equation>具有CR, 即存在<equation>P</equation>满足: <equation>R\triangleright_{\beta\eta}^{\leq n}P_1</equation>与<equation>M_1\triangleright_{\beta\eta}^{\leq n}P_1</equation>. 由于<equation>L_1\;\triangleright_{\beta}^{n}\;R</equation>, 故<equation>R\;\triangleright^{*}_{\eta}P_1</equation>.</p><p>同理可得有<equation>R\;\triangleright^{*}_{\eta}P_2</equation>, <equation>M_2\triangleright_{\beta\eta}^{\leq m}P_2</equation>. 由于<equation>\triangleright^{*}_{\eta}</equation>具有CR, 且<equation>R\;\triangleright^{*}_{\eta}P_1</equation>与<equation>R\;\triangleright^{*}_{\eta}P_2</equation>, 故存在<equation>N</equation>使得<equation>P_1\;\triangleright^{*}_{\eta}\;N</equation>与<equation>P_2\;\triangleright^{*}_{\eta}\;N</equation>. 同时又有<equation>M_1\triangleright_{\beta\eta}^{\leq n}P_1\;\triangleright^{*}_{\eta}\;N</equation>与<equation>M_2\triangleright_{\beta\eta}^{\leq m}P_2\;\triangleright^{*}_{\eta}\;N</equation>, 即是<equation>M_1\triangleright_{\beta\eta}^{*}\;N</equation>与<equation>M_2\triangleright_{\beta\eta}^{*}\;N</equation>, 即<equation>\triangleright_{\beta\eta}^{*}</equation>具有CR. <br></p><p>证毕.</p><br><br><p><b>推论1(unique normal form):</b>若λ-term<equation>M</equation>有<equation>M\;\triangleright_{\beta\eta}^{*}\;M_1</equation> 与 <equation>M\;\triangleright_{\beta\eta}^{*}\;M_2</equation>并且<equation>M_1,\;M_2</equation>为normal form. 则<equation>M_1=M_2</equation>.<br></p><p>证明: 类似于第一节推论4. 假设<equation>M_1\ne M_2</equation>, 由Church-Rosser Theorem得: 存在<equation>N</equation>满足<equation>M_1\;\triangleright_{\beta\eta}^{*}\;N</equation> 与 <equation>M_2\;\triangleright_{\beta\eta}^{*}\;N</equation>.</p><p>由于<equation>M_1\ne M_2</equation>故<equation>N\ne M_1</equation>或<equation>N\ne M_2</equation>. 则<equation>M_1\;\triangleright_{\beta\eta}^{*}\;N</equation>或<equation>M_2\;\triangleright_{\beta\eta}^{*}\;N</equation>中可进行至少一次βη-规约, 与normal form定义矛盾. 因此<equation>M_1=M_2</equation>. 证毕.</p><br><br><p><b>推论2:</b> leftmost reduction theorem和quasi-leftmost-reduction theorem在βη-规约下依然成立.</p><p>证明: 由引理10(η-postponement)与引理11 β-规约具有强规范性. 易证.</p><br><br><p>同样地, 在λI-calculus中将β-规约拓展为βη-规约定理与性质依然成立.</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
