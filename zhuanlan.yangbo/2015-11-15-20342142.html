<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>不优雅的F#</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/20342142">原文</a></p>
英文的Elegance通常固定翻译为“优雅”，并不是日常汉语中的优美典雅的意思，而是指内涵丰富而组成元素简单高效。<br><br>以游戏设计为例：<br><ul><li>围棋规则很简单但变化很丰富，所以围棋规则很优雅。（元素简单内涵丰富）<br></li><li>三国杀每一张武将都有截然不同的特殊技能，所以规则多，例外多，然而三国杀武将强弱分明，策略并不复杂，那么三国杀的游戏规则就很不优雅。（元素复杂内涵肤浅）<br></li></ul><br>F#是OCaml的方言。我用过OCaml，没有用过F#，但看过F#的文档。<br><br>F#虽然也算一门现代编程语言，但语言设计远远不如Scala优雅。F#的标准库和.NET标准库互相之间格格不入，F#的基于代数数据类型（ADT）的类型系统也和.net原生的类库风格格格不入。F#生态环境和Scala相比更是弱爆了。在工程实践中，无论面向对象编程还是函数式编程，Scala都有大量的框架和第三方库，更不要说Scala标准库本身就完爆F#标准库。<br><br>我觉得微软当年在卖碟的鲍尔默领导下，对技术的理解有点走火入魔，设计的API臃肿不堪，死守向后兼容性不放。<br>所以微软设计的语言也是这个尿性，压根没动脑筋思考过怎么把函数式语言融入面向对象中，只是简单兼容OCaml语法，再额外增加一堆不相干的功能。相比之下Martin Odersky做过Pizza、Generic Java，很多年前就已经试过怎么在JVM中实现函数式编程，最终完成的Scala抛弃与Java的源代码兼容性，最终平滑的把函数式编程特性和面向对象融入在一起：参见<a href="http://www.infoq.com/cn/articles/Scala-Design" data-editable="true" data-title="Scala的设计目标——Martin Odersky访谈（二）" class="">Scala的设计目标——Martin Odersky访谈（二）</a>。<br><br>Scala和F#的关系类似Lua和____（此处可填Python、JavaScript、Ruby）。Lua的语言核心极为精简，然而其他动态语言能做到的功能，Lua都能做到。尽管Lua对于语言特性非常吝啬，却早在十多年前就支持了coroutine，这很具有前瞻性。<br>Roberto Ierusalimschy写过一篇文章论述它是如何设计Lua的：<a href="https://queue.acm.org/detail.cfm?id=1983083" data-editable="true" data-title="Passing a Language through the Eye of a Needle" class="">Passing a Language through the Eye of a Needle</a><br><br><a href="http://www.zhihu.com/people/excited-vczh" data-hash="0970f947b898ecc0ec035f9126dd4e08" class="member_mention" data-editable="true" data-title="@vczh">@vczh</a> 说：<blockquote>Scala比F#更烂是因为Scala比C++更复杂，永远都学不会。</blockquote><p>我能理解<a data-hash="0970f947b898ecc0ec035f9126dd4e08" href="http://www.zhihu.com/people/0970f947b898ecc0ec035f9126dd4e08" class="member_mention" data-editable="true" data-title="@vczh">@vczh</a> 作为微软员工，无法黑微软的痛楚，但我还是觉得 <a data-hash="0970f947b898ecc0ec035f9126dd4e08" href="http://www.zhihu.com/people/0970f947b898ecc0ec035f9126dd4e08" class="member_mention" data-editable="true" data-title="@vczh">@vczh</a> 对“复杂”的理解稍显浅薄。<br><br>我们看看Scala作者Martin Odersky写的<a href="http://www.ac.net.blog.163.com/blog/static/13649056201232581654403/" data-editable="true" data-title="简单还是复杂？" class="">简单还是复杂？</a><br>我自己从头比了比上下文无关语法的数量，Scala相当紧凑，和Haskell或OCaml相当，比Java5稍少，比C#和C++少得多。 <br>由于F#是OCaml的超集，F#的语法比Scala复杂。F#功能并不比Scala强但语法比Scala复杂，暗示着F#中存在冗余语法或者不一致的语法，也就是，不优雅。</p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
