<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>从概率分布函数背景推断交易策略</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/51744821">原文</a></p>
<p>技术分析的主要目的是观察市场事件，计算其后果以制定预测，从这个意义上讲，市场技术人员正在处理统计概率。特别是，技术人员经常使用一种称为振荡器的指标来预测短期价格变动。振荡器可以被视为高通滤波器，因为它消除了较低频率的趋势，同时允许较高频率的分量通过以反应短期价格波动。另一方面，移动平均线通过消除短期价格变动而作为低通滤波器，同时允许保留较长期趋势分量。因此，移动平均线用作趋势检测器，而振荡器以与“去趋势”数据相反的方式起作用，以便增强短期价格变动。振荡器和移动平均线是将价格输入转换为输出波形以放大或强调输入数据的某些方面的滤波器。过滤过程必然会从输入数据中删除信息，其应用程序并非没有后果。</p><p>短期交易的振荡器（以及移动平均线）的一个重要问题是它们引入滞后。虽然在学术上有趣，但滞后的后果对交易者来说代价高昂。滞后源于这样一个事实，即设计的振荡器是反应性的而不是预期的。因此，交易者必须等待确认;一个过程，会引入额外的滞后行为。现在人们普遍认为，经典振荡器在后见之明可以非常精确，但通常不足以预测未来的短期市场方向，这在很大程度上是由于滞后造成的。</p><p><b>概率分布函数</b></p><p>经典振荡器的基本缺点是它们是反应性的而不是预期的。结果，振荡器中不希望的滞后分量显着降低了它们作为有利可图的短期交易工具的实用性。所需要的是一种用于预测转折点的有效机制。</p><p>概率分布函数（PDF）可以从统计领域借用，用于检验趋势市场价格，以推断交易策略。 PDF为经典振荡器提供了另一种方法;在预测短期转折点时不会因果关系的问题。</p><p>PDF将事件放入“箱”中，每个箱包含y轴中出现的次数和x轴中的事件范围。例如，考虑图1A中所示的方波。虽然在现实世界中不切实际，但如果将方波设想为只能具有-1或+1值的价格，则得到的PDF仅包含-1和+1处的两个垂直“尖峰”。如图1B所示。这种波形不能使用传统的振荡器进行交易，因为在振荡器产生信号之前任何价格变动都将结束。但是，正如下面的PDF所示，理论方波与现实世界的短期周期相差无几。</p><p>作为一个实际例子，理论正弦波可用于更准确地模拟现实世界的趋势价格。理想化的正弦波如图1C所示，其相应的PDF如图1D所示。方波的波形和正弦波的PDF非常相似。在每种情况下，波形很可能接近它们的极值，如图1D中的大尖峰所示。这些峰值对应于趋势价格中的短期转折点。在转折点附近的概率很高，因为在周期的这些阶段中价格变动很小，图1C中的价格仅在0.8到1.0和-0.8到-1.0之间。</p><img src="https://pic4.zhimg.com/v2-2be84cf5d9b832dd82ab3d8eb64518d1_r.jpg" data-caption="图1A 方波波形" data-size="normal" data-rawwidth="499" data-rawheight="272" data-watermark="watermark" data-original-src="v2-2be84cf5d9b832dd82ab3d8eb64518d1" data-watermark-src="v2-1d74dbc36a733ad503642bafcfddc54c" data-private-watermark-src=""><img src="https://pic4.zhimg.com/v2-db8966f6f03102ee05475b58d40f281e_r.jpg" data-caption="图1B 方波PDF" data-size="normal" data-rawwidth="449" data-rawheight="204" data-watermark="watermark" data-original-src="v2-db8966f6f03102ee05475b58d40f281e" data-watermark-src="v2-ca77b66ad85474aeb8bc57e03325ac79" data-private-watermark-src=""><img src="https://pic2.zhimg.com/v2-8fa70699551bdf5fe3bdf2988b9328d5_r.jpg" data-caption="图1C 正弦波" data-size="normal" data-rawwidth="447" data-rawheight="224" data-watermark="watermark" data-original-src="v2-8fa70699551bdf5fe3bdf2988b9328d5" data-watermark-src="v2-34fbf5d53e72602380a8cb1218298a17" data-private-watermark-src=""><img src="https://pic2.zhimg.com/v2-08516e99a25158e38be103a33b2f45d9_r.jpg" data-caption="图1D 正弦波PDF" data-size="normal" data-rawwidth="449" data-rawheight="224" data-watermark="watermark" data-original-src="v2-08516e99a25158e38be103a33b2f45d9" data-watermark-src="v2-bfd69c950b08315c49b4d35e34e7fa38" data-private-watermark-src=""><p>短期价格接近极端短途旅行的高概率是短期周期和波段交易的主要困难。 此举主要发生在振荡器能够确定转折点之前。 该指标“有效”，但仅在后见之明使其有用性有限，无法预测未来的价格变动。这种滞后困境的可能解决方案是开发预测转折点的技术。尽管使用经典振荡器非常难以实现，但PDF为我们提供了在适当成形时预测转折点或使用两种替代方法的机会：</p><p>1.将市场数据建模为正弦波，并通过从中生成前导余弦波将模拟波形移至未来。</p><p>2.应用变换后的波形来消除基本的偏移，即罕见的事件 - 并预测从峰值出现的短期价格回归。</p><p>下面将检查这些方法中的每一种。然而，从可视化正弦波PDF的类比开始，然后检查实际市场数据的PDF是有启发性的。如将要显示的那样，市场数据PDF既不是通常假设的高斯分布，也不是有效市场假设所声称的随机。</p><p><b>测量概率分布函数</b></p><p>如图2B所示，可视化如何测量PDF的简单方法是将波形设想为在垂直框架上的平行水平线上串起的珠子，如图2A所示。顺时针旋转线框90度（1/4圈），使水平线现在垂直，使珠子落到底部。这些珠子在图2B中与它们在波形中每条水平线处的密度成正比地堆叠，在极端转折点+1和-1处出现的次数最多。</p><img src="https://pic4.zhimg.com/v2-3db999f44cb826a3f9cfad966add22f7_r.jpg" data-caption="图2A 正弦波波形" data-size="normal" data-rawwidth="487" data-rawheight="264" data-watermark="watermark" data-original-src="v2-3db999f44cb826a3f9cfad966add22f7" data-watermark-src="v2-c1fdc89ee69bc261827448461614965f" data-private-watermark-src=""><img src="https://pic1.zhimg.com/v2-2b8e5080ae27db278dec809940ecbb2a_r.jpg" data-caption="图2B 正弦波PDF" data-size="normal" data-rawwidth="443" data-rawheight="247" data-watermark="watermark" data-original-src="v2-2b8e5080ae27db278dec809940ecbb2a" data-watermark-src="v2-5a8bf99cee0ed41358a9a4f2e2311409" data-private-watermark-src=""><p>使用计算机程序测量去趋势价格的PDF在概念上与在线框结构中堆叠珠子相同。 去趋势价格波形的幅度被量化为“箱”（即垂线），然后将每个箱中的出现相加以产生测量的PDF。 价格被标准化为在所选渠道期内的最高点和最低点之间。图3显示了使用美国国债期货连续合约在30年内测量的实际价格PDF。 注意，在每种情况下，分布类似于正弦波的分布。 不均匀的形状表明，开发基于正弦波建模的短期交易系统可能是成功的。</p><img src="https://pic3.zhimg.com/v2-93493c663da3f9d54e4b280942c02412_r.jpg" data-caption="图3A 图3. 30年美国国债 20Bar通道的PDF" data-size="normal" data-rawwidth="487" data-rawheight="256" data-watermark="watermark" data-original-src="v2-93493c663da3f9d54e4b280942c02412" data-watermark-src="v2-ba636908dbff367084a37ee44f5b3257" data-private-watermark-src=""><img src="https://pic3.zhimg.com/v2-24855b6202c160c464963ec0d3644e58_r.jpg" data-caption="图3B 30年美国国债 40Bar通道的PDF" data-size="normal" data-rawwidth="483" data-rawheight="258" data-watermark="watermark" data-original-src="v2-24855b6202c160c464963ec0d3644e58" data-watermark-src="v2-f6d7de4d76f5cef398198badf638712b" data-private-watermark-src=""><p>在渠道期内将价格标准化为波动不是降低价格的唯一方法。 另一种方法是将上涨日收盘价与下跌天数相加。 这样，这些总和的差异可以归一化为它们的总和。 结果是标准化通道，并且是经典RSI指标的通用形式。 使用这种去除相同的30年美国国债数据的方法测量的PDF如图4所示。在这种情况下，PDF更像是熟悉的高斯PDF钟形曲线。 由此可以得出结论，基于周期的短期交易系统不会成功，因为高概率点不接近最大偏移转折点。</p><p>在通道期内将价格标准化为波动不是降低价格的唯一方法。 另一种方法是将上涨日收盘价与下跌天数相加。 这样，这些总和的差异可以归一化为它们的总和。 结果是标准化通道，并且是经典RSI指标的通用形式。 使用这种去除相同的30年美国国债数据的方法测量的PDF如图4所示。在这种情况下，PDF更像是熟悉的高斯PDF钟形曲线。 由此可以得出结论，基于周期的短期交易系统不会成功，因为高概率点不接近最大偏移转折点。</p><img src="https://pic4.zhimg.com/v2-a08d9eb1e0b9961fab97dba36302e622_r.jpg" data-caption="图4 30年美国国债的RSI PDF测量结果" data-size="normal" data-rawwidth="864" data-rawheight="431" data-watermark="watermark" data-original-src="v2-a08d9eb1e0b9961fab97dba36302e622" data-watermark-src="v2-06a24c3d08cfe0809b7524a7266c4074" data-private-watermark-src=""><p>因为转折点具有相对低的概率，所以可以推断出替代策略。这个想法是当趋势价格在预期价格反转到更高概率区域时低于下限附近的阈值时买入。同样，当趋势价格超过上限附近的阈值时，策略将卖出。请注意，这与使用RSI信号的经典30/70或20/80阈值不同，因为信号不等待确认跨越阈值。在这里，我们预计会出现更高概率发生的逆转 - 我们期望恢复正常。在经典指标（例如随机指标振荡器）的情况下使用这种预期方法可能成本很高，因为随机指标很容易长时间保持在极端偏移点（或工程术语中的“轨道”）。</p><p>如前所述，另一种消除价格数据的方法是过滤是使用高通滤波器来移除其低频趋势分量。一旦去趋势化，结果必须标准化为固定的偏移，以便在应用PDF之前可以将其正确分箱。生成的PDF如图5所示。在这种情况下，PDF形状在所有箱柜中几乎是一致的。统一的PDF意味着一个箱中的振幅与另一个箱中的振幅一样可能。在这种情况下，基于周期的策略和基于低概率事件的策略都不可能成功。必须以某种方式转换PDF以增强低概率事件，以便在交易中有用。</p><img src="https://pic2.zhimg.com/v2-a5cb79d19ae0fb02c1b982a764171f3d_r.jpg" data-caption="图5 30年美国国债的实测HighPass滤波PDF" data-size="normal" data-rawwidth="864" data-rawheight="441" data-watermark="watermark" data-original-src="v2-a5cb79d19ae0fb02c1b982a764171f3d" data-watermark-src="v2-a906f328914fb69cc33e6a4371851049" data-private-watermark-src=""><p><b>转换PDF</b></p><p>并非所有去趋势技术都会产生表明成功交易技术的PDF。 与振荡器可以应用于价格数据以增强短期转折点的方式大致相同，转换函数可以应用于趋势价格，以增强“黑天鹅”的识别，即极不可能的事件并发展成功 基于预测黑天鹅事件后回归恢复正常的交易策略。</p><p>例如，可以通过使用Fisher变换来增强PDF。 该数学函数改变在-1和+1的极限之间变化的输入波形，几乎将任何PDF转换成具有接近高斯的波形。 Fisher变换方程，其中x是输入，y是输出： <equation>y=\frac{1}{2}ln\frac{1+x}{1-x}</equation> </p><p>与振荡器不同，Fisher变换是一种无滞后的非线性函数。 该变换扩展了-1和+1偏移附近的输入波形的幅度，因此它们可以被识别为低概率事件。 如图6所示，当不处于极值时，变换几乎是线性的。 简单来说，除了低概率极值之外，Fisher变换不会做任何事情。 因此可以推测，如果可以识别低概率事件，则可以采用交易策略来预测在其发生之后恢复到正常概率。</p><img src="https://pic3.zhimg.com/v2-9542dc28cc1a38edbb3b58dbb9683fae_r.jpg" data-caption="图6 Fisher变换非线性转换导致几乎正态PDF的信号幅度" data-size="normal" data-rawwidth="864" data-rawheight="483" data-watermark="watermark" data-original-src="v2-9542dc28cc1a38edbb3b58dbb9683fae" data-watermark-src="v2-d29b8d18534c1ec982a2e4825d5b2b3b" data-private-watermark-src=""><p>Fisher变换的效果通过将其应用于产生图5中的PDF的HighPass过滤器方法来证明。输出被重新调整以进行适当的分级以生成新的测量PDF。 新的测量PDF显示在图7中，原始PDF显示在插图中以供参考。 这里我们有一个波形，建议使用低概率事件的交易策略。 当转换后的价格超过上限阈值时，预期超出该阈值的概率较低。 因此，超过上限阈值提供了高概率销售机会。 相反，当转换后的价格低于下限阈值时，期望保持低于该阈值的概率较低，因此低于下限阈值呈现买入机会。</p><img src="https://pic2.zhimg.com/v2-aa01bfda3758ed28755191ab7c4d9906_r.jpg" data-caption="图7.使用Fisher变换测量的HighPass滤波30年美国国债的PDF" data-size="normal" data-rawwidth="864" data-rawheight="435" data-watermark="watermark" data-original-src="v2-aa01bfda3758ed28755191ab7c4d9906" data-watermark-src="v2-3007e30b7640b7f6b61f2d7b3a363b06" data-private-watermark-src=""><p><b>交易策略</b></p><p>很明显，没有一种短期交易策略适用于所有情况，因为PDF可以根据消除趋势的方法而有很大差异。由于通过归一化到峰值去除的数据的PDF具有理论正弦波的外观，逻辑交易策略将假设波形实际上是正弦波，然后在它们出现之前识别正弦波转折点。另一方面，使用通用RSI方法去趋势化的数据或使用具有希尔伯特变换的HighPass过滤器去趋势化的数据应该使用基于更统计方法的交易策略。因此，对于RSI和希尔伯特变换方法，策略逻辑包括当趋势价格交叉低于较低阈值时买入并且当趋势价格超过上限阈值时卖出。虽然有点违反直觉，但第二种策略是基于这样的想法：超出阈值偏移的价格是低概率事件，最可能的结果是价格将恢复到均值。</p><p>两种短期交易策略都有共同的问题。问题在于趋势去除了趋势分量，趋势可以继续而不是让价格恢复到均值。在这种情况下，短期逆转是完全错误的事情。因此，需要额外的交易规则。增加策略的规则是确定价格何时与入场价格的百分比相对于短期头寸相反。如果发生这种情况，则只需逆转头寸，并允许新交易朝趋势方向发展。</p><p>“信道”周期策略在固定的回顾周期内通过简单的搜索算法计算出信道长度上的最高接近和最低接近。然后，去趋势价格被计算为当前收盘价和最低收盘价之间的差值，归一化为渠道宽度。通道宽度是通道长度上的最高收盘价和最低收盘价之间的差值。然后，去趋势价格是BandPass过滤1，以从周期为信道长度的数据中获得近似正弦波。从微积分中已知d（Sin（ωt））/ dt =ωCos（ωt）。由于简单的一个条形差异是一个速率变化，它大致相当于一个导数。因此，幅度校正的前导函数被计算为一个条形变化率除以已知的角频率。在这种情况下，角频率是2π除以信道长度。具有正弦波和前导余弦波，主要交易信号是这两个波形的交叉点。如果交易的偏差超过入选价格的选定百分比，该策略还包括逆转。</p><p>通用“RSI”策略将关闭时的差异与所选RSI长度上的关闭无关。 RSI计算为这两个和的差值，归一化为它们的总和。三抽头FIR滤波器引入少量平滑。主要交易规则是，如果平滑信号超过上限阈值则卖空，如果平滑信号超过下限阈值则卖出。和以前一样，如果交易的逆差超过入选价格的选定百分比，该策略还包括逆转。</p><p>高通滤波器加Fisher变换（“Fisher”）策略过滤高通滤波器2的收盘价。然后将经滤波的信号归一化以落在-1和+1之间，因为该范围是Fisher变换有效所需的。在三抽头FIR滤波器中平滑归一化幅度。该平滑信号被限制为大于-.999且小于+.999，以避免如果其输入精确为1则使Fisher变换爆炸。最后，计算Fisher变换。主要交易规则是，如果Fisher变换超过上限阈值则卖空，如果Fisher变换超过下限阈值则卖出。和以前一样，如果交易的逆差超过入选价格的选定百分比，该策略还包括逆转。</p><p>这三种交易策略适用于2007年12月7日之前5年美国国债期货连续合约的数据。表1总结了这三个系统的表现。所有三个系统均表现出可观的表现，RSI策略和Fisher策略在盈利交易百分比和利润因子（总奖金除以总损失）方面具有相似的表现。所有结果均基于交易单一合约而不考虑滑点和佣金。需要强调的是，所有设置在整个五年期间保持不变。由于交易策略只有少量可优化的参数，因此可以在不缩短交易参数比率的情况下在较短的时间内进行优化。</p><img src="https://pic3.zhimg.com/v2-88c4aa62393d924b3f0d8430dda5db73_r.jpg" data-caption="" data-size="normal" data-rawwidth="902" data-rawheight="200" data-watermark="watermark" data-original-src="v2-88c4aa62393d924b3f0d8430dda5db73" data-watermark-src="v2-a9e6ec08cea214a1ab0acacbfcf694f9" data-private-watermark-src=""><p>交易策略的年度化表现通过将五年期间的实际交易应用于蒙特卡洛分析260天（大约交易年度）来评估。在每种情况下，蒙特卡洛分析使用10,000次迭代，模拟近40年的交易。进行此分析的软件是Inside Edge Systems的MCSPro3。由于中心极限定理，年利润的概率分布具有正态分布，而亏损具有瑞利分布。蒙特卡罗分析的优势在于，不仅可以产生最可能的年度利润和亏损，而且还可以轻松评估盈亏平衡或更好的概率。此外，可以通过将最可能的年度利润除以最可能的年度缩减来制定比较奖励/风险比率。人们还可以从缩编中的两个或三个西格玛点的大小来评估小账户中的可容忍风险和所需资本化的数量。</p><p>渠道策略的蒙特卡洛结果如图8所示。最有可能的年利润为11,650美元，最可能的最大亏损为7,647美元，风险回报率为1.52。渠道策略在年化基础上有88.3％的收支平衡或更好。</p><img src="https://pic1.zhimg.com/v2-a83a404ba745e4325b0cd1487fb2156e_r.jpg" data-caption="" data-size="normal" data-rawwidth="968" data-rawheight="288" data-watermark="watermark" data-original-src="v2-a83a404ba745e4325b0cd1487fb2156e" data-watermark-src="v2-37a35089a83c8c33c14e786e9da195dd" data-private-watermark-src=""><p>RSI策略的蒙特卡罗结果如图9所示。最有可能的年利润为17,085美元，最可能的最大亏损为6,219美元。 由于利润较高且亏损率低于渠道策略，因此风险比率回报率大得多，为2.75。 RSI策略在年度化基础上也有更好的96.6％的收支平衡或更好。</p><img src="https://pic3.zhimg.com/v2-dba7226056af6cb01b6dfe14b2409903_r.jpg" data-caption="" data-size="normal" data-rawwidth="970" data-rawheight="292" data-watermark="watermark" data-original-src="v2-dba7226056af6cb01b6dfe14b2409903" data-watermark-src="v2-c1248fe5f849019dac19a832e244edae" data-private-watermark-src=""><p>Fisher策略的蒙特卡罗结果如图10所示。最有可能的年利润为16,590美元，最可能的最大亏损为6,476美元。 2.56的风险回报率与RSI策略大致相同。 Fisher变换策略也有相同的收支平衡或更好的机会，达到96.1％。</p><img src="https://pic3.zhimg.com/v2-9c7b2d217f3496e3f078a880b0497fd8_r.jpg" data-caption="" data-size="normal" data-rawwidth="962" data-rawheight="298" data-watermark="watermark" data-original-src="v2-9c7b2d217f3496e3f078a880b0497fd8" data-watermark-src="v2-f753353f2b0a8fd71c91233926b8d5b4" data-private-watermark-src=""><p>这些研究表明，三种交易策略在不同时间内都是稳健的，并且在应用于通用符号时提供相当的性能。 为了进一步展示跨时间的稳健性以及应用于完全不同的符号，使用自1982年成立以来的连续合约对标准普尔期货的表现进行了评估。在这种情况下，我们显示通过交易单一合约而产生的权益曲线复利。 滑点和佣金没有余额。 权益曲线的形状部分地通过点数大小从每点500美元变化到每点250美元，通货膨胀，合同绝对值的增加以及波动性的增加来解释。 重点是三种交易策略中没有一种在合约的整个生命周期内权益增长都有显着下降。</p><img src="https://pic3.zhimg.com/v2-d3e0ffe829d87edee32e57b823ba0469_r.jpg" data-caption="" data-size="normal" data-rawwidth="966" data-rawheight="428" data-watermark="watermark" data-original-src="v2-d3e0ffe829d87edee32e57b823ba0469" data-watermark-src="v2-4ccf39cd2a824df0f51c071de975244b" data-private-watermark-src=""><img src="https://pic1.zhimg.com/v2-4dfe3406122da1cadd3a36b18a2e4142_r.jpg" data-caption="" data-size="normal" data-rawwidth="968" data-rawheight="434" data-watermark="watermark" data-original-src="v2-4dfe3406122da1cadd3a36b18a2e4142" data-watermark-src="v2-0b30ff7da7630d2d4592314d71a07900" data-private-watermark-src=""><img src="https://pic1.zhimg.com/v2-bae1720ea1acf5d166f6ac33ef4eec0a_r.jpg" data-caption="" data-size="normal" data-rawwidth="968" data-rawheight="442" data-watermark="watermark" data-original-src="v2-bae1720ea1acf5d166f6ac33ef4eec0a" data-watermark-src="v2-432c09e4d941f8958a093d0f183cf6f6" data-private-watermark-src=""><p>与更传统的交易策略相比，这些新交易策略的强劲表现尤其引人注目。 例如，图14显示了传统RSI交易系统的股票增长，该RSI交易系统在RSI超过20％水平时买入，在RSI超过80％水平时卖出。 当交易出现逆差超过入场价格的几个百分点时，该系统也会反转头寸。 这种传统的RSI系统经过优化，可以在标准普尔期货合约的整个生命周期内获得最大利润。 不仅有传统的RSI策略有巨大的下降，但其整体利润因子仅为1.05， 此处所描述的任何一种新策略都能在期限内提供卓越的表现，这种差异证明了该方法的有效性和这些新系统的稳健性。</p><img src="https://pic2.zhimg.com/v2-37b61a126a082a3f06185e42045c566b_r.jpg" data-caption="" data-size="normal" data-rawwidth="966" data-rawheight="452" data-watermark="watermark" data-original-src="v2-37b61a126a082a3f06185e42045c566b" data-watermark-src="v2-9c35297889d969b87b21a7541ed270be" data-private-watermark-src=""><p><b>结论</b></p><p>PDF已经被证明可以为经典振荡器提供一种替代方法，这种方法在预测短期转折点时是非因果关系。已经提出了几种具体的交易策略，这些策略在很长的时间内表现出强大的表现，以适应不同的市场条件; 跨越大量交易以避免曲线拟合; 在不同的市场中展示出免于市场人格的自由。在每种情况下，PDF都可以推断出可能成功的交易策略。 当没有建议策略时，可以应用Fisher变换将PDF更改为高斯分布。 高斯PDF然后推断使用回归均值的交易策略可以成功。</p><p></p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
