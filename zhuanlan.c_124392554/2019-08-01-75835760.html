<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>不诚实的猜数字游戏</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/75835760">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-f3bc0bca263529377ded0c56ce8dc12a_b.jpg" alt=""></div><p>猜猜 猜猜猜 猜猜猜猜猜</p><p>You got me crazy</p><p>I want you baby</p><p>猜猜 让你猜 答案 猜出来</p><a href="https://link.zhihu.com/?target=https%3A//music.163.com/%23/song%3Fid%3D531295652%26autoplay%3Dtrue%26market%3Dbaiduhd" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-52427db7392f811d481140946c840f69_ipico.jpg" data-image-width="500" data-image-height="500" class=" wrap external" target="_blank" rel="nofollow noreferrer">猜猜猜 - 赵采儿 - 单曲 - 网易云音乐</a><hr/><p>相信读者都和我一样，了解过“<b>1~100的猜数字游戏</b>”——</p><p>（为简单起见先改为1~31之间的整数，其实道理上都是一样的）</p><p><b>(1)</b> 甲悄咪咪地选择一个1~31之间的整数 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> ，但是不告诉乙；</p><p><b>(2) </b>乙猜测这个数是 <img src="https://www.zhihu.com/equation?tex=y" alt="y" eeimg="1"/> ；</p><p>(3) 甲（诚实地）告诉乙是“ <img src="https://www.zhihu.com/equation?tex=x%3Dy" alt="x=y" eeimg="1"/> ”（猜中了）、“ <img src="https://www.zhihu.com/equation?tex=x%3Cy" alt="x&lt;y" eeimg="1"/> ”（猜大了）、“ <img src="https://www.zhihu.com/equation?tex=x%3Ey" alt="x&gt;y" eeimg="1"/> ”（猜小了）三种情况中的哪一种；如果是“ <img src="https://www.zhihu.com/equation?tex=x%3Dy" alt="x=y" eeimg="1"/> ”（猜中了）则游戏结束，否则返回<b>(2)</b>乙继续猜。</p><p>问题：乙采用什么样的方法<b>至多</b>多少次<b>一定</b>可以猜中 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 的值？</p><hr/><p>这个问题很简单，就是采用“二分”的策略，我简单的用下图表示吧：</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-ce14f12ec2727894b8ba05a39741caf9_b.jpg" data-caption="" data-size="normal" data-rawwidth="908" data-rawheight="623" class="origin_image zh-lightbox-thumb" width="908" data-original="https://pic2.zhimg.com/v2-ce14f12ec2727894b8ba05a39741caf9_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-ce14f12ec2727894b8ba05a39741caf9_b.jpg" data-caption="" data-size="normal" data-rawwidth="908" data-rawheight="623" class="origin_image zh-lightbox-thumb lazy" width="908" data-original="https://pic2.zhimg.com/v2-ce14f12ec2727894b8ba05a39741caf9_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-ce14f12ec2727894b8ba05a39741caf9_b.jpg"/></figure><p>或者</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-9acc4f064fc69d1e997e59e4a5b7719e_b.png" data-caption="" data-size="normal" data-rawwidth="1572" data-rawheight="258" class="origin_image zh-lightbox-thumb" width="1572" data-original="https://pic3.zhimg.com/v2-9acc4f064fc69d1e997e59e4a5b7719e_r.jpg"/></noscript><img src="https://pic3.zhimg.com/v2-9acc4f064fc69d1e997e59e4a5b7719e_b.png" data-caption="" data-size="normal" data-rawwidth="1572" data-rawheight="258" class="origin_image zh-lightbox-thumb lazy" width="1572" data-original="https://pic3.zhimg.com/v2-9acc4f064fc69d1e997e59e4a5b7719e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-9acc4f064fc69d1e997e59e4a5b7719e_b.png"/></figure><p>那么如果是猜 <img src="https://www.zhihu.com/equation?tex=1%5Csim2%5En-1" alt="1\sim2^n-1" eeimg="1"/> 之间的数字。也可以表示成上图的二叉树，树的<b>高度 <img src="https://www.zhihu.com/equation?tex=h" alt="h" eeimg="1"/> 加1</b>就是乙保证必定猜中所需要的猜测的次数，树的结点数目就恰等于 <img src="https://www.zhihu.com/equation?tex=2%5En-1" alt="2^n-1" eeimg="1"/> 。可以很容易分析得到 <img src="https://www.zhihu.com/equation?tex=%28h%2B1%29%5Cleq+%5Clog_2%28%282%5En-1%29%2B1%29%3Dn" alt="(h+1)\leq \log_2((2^n-1)+1)=n" eeimg="1"/> ，也就是说这时乙<b>最多猜测 <img src="https://www.zhihu.com/equation?tex=n" alt="n" eeimg="1"/> 次必定可以猜中</b>。</p><p>（熟悉“基于比较的排序算法的复杂度下界”的朋友们一定清楚这个套路。）</p><hr/><p>可以把问题抽象为：</p><p><b>(1)</b> 甲悄咪咪在集合 <img src="https://www.zhihu.com/equation?tex=A" alt="A" eeimg="1"/> 中选择一个元素 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> ，但是不告诉乙，假定集合 <img src="https://www.zhihu.com/equation?tex=A" alt="A" eeimg="1"/> 有 <img src="https://www.zhihu.com/equation?tex=n" alt="n" eeimg="1"/> 个元素；</p><p><b>(2) </b>乙猜测这个数在 <img src="https://www.zhihu.com/equation?tex=A" alt="A" eeimg="1"/> 的某个子集 <img src="https://www.zhihu.com/equation?tex=B" alt="B" eeimg="1"/> 中；</p><p><b>(3)</b> 甲（诚实地）回答乙的猜测是正确的还是错误的；</p><p><b>(4)</b> 乙可根据自己是否已经可以确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 来决定是否返回<b>(2)</b>继续猜。</p><p><b>问题：</b>乙采用什么样的方法<b>至多</b>多少次<b>一定</b>可以猜中 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 的值？</p><p>那么乙的策略就是：</p><p><b>(1)</b> 如果目前已确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合中仅有一个元素，则“猜测”那唯一的元素即可；</p><p><b>(2)</b> 如果目前已确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合中至少有两个元素，则将该集合等分为基数（几乎）相同（包含的元素个数相等）的两个集合 <img src="https://www.zhihu.com/equation?tex=A_1" alt="A_1" eeimg="1"/> 和 <img src="https://www.zhihu.com/equation?tex=A_2" alt="A_2" eeimg="1"/> ，之后询问“甲你老实告诉我，你选的元素在集合 <img src="https://www.zhihu.com/equation?tex=A_1" alt="A_1" eeimg="1"/> 里面么？”。之后根据甲的回答将 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合“缩小”至一半，并返回步骤<b>(1)</b>。</p><p>这时乙<b>最多猜测 </b><img src="https://www.zhihu.com/equation?tex=%5Clceil++%5Clog_2n+%5Crceil" alt="\lceil  \log_2n \rceil" eeimg="1"/><b> 次必定可以猜中</b>。</p><hr/><p>现在问题变化为：</p><p>假定集合 <img src="https://www.zhihu.com/equation?tex=A" alt="A" eeimg="1"/> 有 <img src="https://www.zhihu.com/equation?tex=n" alt="n" eeimg="1"/> 个元素。甲悄咪咪在集合 <img src="https://www.zhihu.com/equation?tex=A" alt="A" eeimg="1"/> 中选择一个元素 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> ，但是不告诉乙；</p><p>乙可以提出问题：“你选的数 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 在集合 <img src="https://www.zhihu.com/equation?tex=B" alt="B" eeimg="1"/> 中么？”；</p><p>甲可以回答“是”或者“否”；然而，甲并<b>不诚实</b>！甲可能说<b>相反的结果</b>（可以理解为“撒谎”，但不是“我哪知道你猜的对不对”这种撒谎），但是</p><p><b>约束(1) </b>甲不会连续两句话都说<b>相反的结果</b>。</p><blockquote>然而这时候即使明知 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合中仅有2个元素 <img src="https://www.zhihu.com/equation?tex=%5Cleft%5C%7B+a%2Cb+%5Cright%5C%7D" alt="\left\{ a,b \right\}" eeimg="1"/> ，乙提问“它是 <img src="https://www.zhihu.com/equation?tex=a" alt="a" eeimg="1"/> 么？”而甲回答“是”的时候，乙也不能确认真实的情况是什么；乙提问两次“它是 <img src="https://www.zhihu.com/equation?tex=a" alt="a" eeimg="1"/> 么？”而甲回答“是”、“否”时，乙也不能确认真实的情况是什么；乙提问三次“它是 <img src="https://www.zhihu.com/equation?tex=a" alt="a" eeimg="1"/> 么？”而甲回答“是”、“否”、“是”时，乙也不能确认真实的情况是什么；乙提问四次“它是 <img src="https://www.zhihu.com/equation?tex=a" alt="a" eeimg="1"/> 么？”而甲回答“是”、“否”、“是”、“否”时，乙也不能确认真实的情况是什么……<br/>所以有如下的<b>约束(2)：</b></blockquote><p><b>约束(2) </b>且假定：如果乙能够指出 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在集合的元素数目不超过3——也就是可以圈定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 的范围不超过3个“嫌疑数”，那么甲就<b>不再说谎</b>。</p><p>那么这时<b>乙的策略</b>又是什么呢？</p><hr/><p><b>有人</b>提出了以下的（至少让我很震惊的）方法（非本人所创，但目前我也查不到来源了）：</p><p><b>(猜测策略1)</b> 如果目前已确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合中不超过3个元素，则由约束2可知，乙至多猜测2次即可。</p><p><b>(猜测策略2)</b> 如果目前已确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合中至少有4个元素，则将该集合等分为基数（几乎）相同（包含的元素个数相等）的4个集合 <img src="https://www.zhihu.com/equation?tex=A_1%2CA_2%2CA_3" alt="A_1,A_2,A_3" eeimg="1"/> 和 <img src="https://www.zhihu.com/equation?tex=A_4" alt="A_4" eeimg="1"/> ，之后询问两个问题“1. 甲你选的元素在集合 <img src="https://www.zhihu.com/equation?tex=A_1%5Ccup+A_2" alt="A_1\cup A_2" eeimg="1"/> 里面么？”、“2. 甲你选的元素在集合 <img src="https://www.zhihu.com/equation?tex=A_1%5Ccup+A_3" alt="A_1\cup A_3" eeimg="1"/> 里面么？”。之后根据下表将  <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合排除掉“ <img src="https://www.zhihu.com/equation?tex=1%2F4" alt="1/4" eeimg="1"/> ”，继而将 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合“大小缩小”至 <img src="https://www.zhihu.com/equation?tex=3%2F4" alt="3/4" eeimg="1"/> ，并返回步骤<b>(1)</b>。</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-c8c6650e7462d28f1527adbfe8e9b205_b.jpg" data-caption="" data-size="normal" data-rawwidth="937" data-rawheight="588" class="origin_image zh-lightbox-thumb" width="937" data-original="https://pic2.zhimg.com/v2-c8c6650e7462d28f1527adbfe8e9b205_r.jpg"/></noscript><img src="https://pic2.zhimg.com/v2-c8c6650e7462d28f1527adbfe8e9b205_b.jpg" data-caption="" data-size="normal" data-rawwidth="937" data-rawheight="588" class="origin_image zh-lightbox-thumb lazy" width="937" data-original="https://pic2.zhimg.com/v2-c8c6650e7462d28f1527adbfe8e9b205_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-c8c6650e7462d28f1527adbfe8e9b205_b.jpg"/></figure><hr/><p>下面分析一下乙的保证能够猜中的猜测次数吧：</p><ul><li>如果满足(猜测策略1)，那么至多需要猜测两次；</li><li>如果满足(猜测策略2)，那么猜测2次后次就可以将“嫌疑数”的规模缩小到3/4。</li></ul><p>用 <img src="https://www.zhihu.com/equation?tex=T%28n%29" alt="T(n)" eeimg="1"/> 表示目前已确定 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所在的集合有 <img src="https://www.zhihu.com/equation?tex=n" alt="n" eeimg="1"/> 个元素时，乙保证可以猜出 <img src="https://www.zhihu.com/equation?tex=x" alt="x" eeimg="1"/> 所需要的猜测次数的上限。则： <img src="https://www.zhihu.com/equation?tex=T%28n%29%3D2%2BT%28%5Cfrac%7B3%7D%7B4%7Dn%29" alt="T(n)=2+T(\frac{3}{4}n)" eeimg="1"/> , <img src="https://www.zhihu.com/equation?tex=n%3E3" alt="n&gt;3" eeimg="1"/> ； <img src="https://www.zhihu.com/equation?tex=T%28n%29%3D2" alt="T(n)=2" eeimg="1"/> ， <img src="https://www.zhihu.com/equation?tex=n%5Cleq3" alt="n\leq3" eeimg="1"/> 。</p><p>倒推可以得到（有些许误差，但不影响复杂度）： <img src="https://www.zhihu.com/equation?tex=T%28n%29%5Capprox+2%5Ctimes%5Clog_%7B4%2F3%7Dn%5Capprox+4.82%5Clog_2n+" alt="T(n)\approx 2\times\log_{4/3}n\approx 4.82\log_2n " eeimg="1"/> 。也就是说这时乙<b>最多猜测 </b><img src="https://www.zhihu.com/equation?tex=4.82%5Clog_2n" alt="4.82\log_2n" eeimg="1"/><b> 次左右必定可以猜中</b>。</p><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
