<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>汉诺塔杂谈（四）——汉诺塔与格雷码</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/36124395">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-2e08829f48cfaa96aca03148d173111a_r.jpg" alt=""></div><p>由<a href="https://zhuanlan.zhihu.com/p/29254973">格雷码</a>也可以得到 <equation>n</equation> 个盘子的汉诺塔的非递归算法：</p><p>对于有 <equation>n</equation> 个盘子的汉诺塔问题，按序写出所有<i>n</i>位格雷码，自左而右标记为第 <equation>n</equation> 位、第 <equation>n-1</equation> 位、…第2位、第1位。第 <equation>i(1\leq i\leq2^n-1)</equation> 个格雷码和第 <equation>i+1</equation> 个格雷码的差异的位数号，即表示第 <equation>i</equation> 步移动的盘子的号码。</p><p>类似于“<a href="http://zhuanlan.zhihu.com/p/36085324">汉诺塔杂谈（三）——非递归算法</a>”中所述：  </p><ul><li>对于其他磁盘，总是有唯一的移动可能性。</li><li>对于最小的盘子而言，总是有两种移动的可能性——若 <equation>n</equation> 为偶数，最小的盘子的移动次序是A→B→C→A→…；若 <equation>n</equation> 为奇数，按顺时针方向依次摆放A→C→B→A→…。</li></ul><p><equation>n=4</equation> 的情况如下表所示：</p><img src="https://pic4.zhimg.com/v2-beeb61b6f29384e851b315c60649a2e2_r.jpg" data-caption="" data-size="normal" data-rawwidth="817" data-rawheight="589" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>而从一个 <equation>n</equation> （ <equation>n\geq1</equation> ）位格雷码 <equation>G_nG_{n-1}…G_2G_1</equation> 也可以得出当前 <equation>n</equation> 个盘子在3个柱的分布情况：</p><ul><li><equation>G_n=0</equation> 表示<i>n</i>号盘子在A柱， <equation>G_n=1</equation> 表示<i>n</i>号盘子在C柱；</li><li><equation>G_{n-1}=0</equation> 表示 <equation>n-1</equation> 号盘子在 <equation>n</equation> 号盘子在上面， <equation>G_{n-1}=1</equation> 表示 <equation>n-1</equation> 号盘子在B柱；</li><li><equation>G_k=0</equation> 表示 <equation>k</equation> （ <equation>1\leq k\leq n-2</equation> ）号盘子在 <equation>k+1</equation> 号盘子上面， <equation>G_k=1</equation> 表示 <equation>k</equation> 号盘子不在 <equation>k+1</equation> 号盘子上面，此时确定 <equation>k</equation> 号盘子的位置的方法是：计算 <equation>G_nG_{n-1}…G_{k+2}</equation> 对应的普通二进制编码的十进制数值 <equation>m</equation> ，之后查询下表。</li></ul><img src="https://pic1.zhimg.com/v2-1e6a9589c1333aa44727fe27a4fece0d_r.jpg" data-caption="" data-size="normal" data-rawwidth="438" data-rawheight="358" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><hr><p>例如： <equation>n=6</equation> ，格雷码为 <equation>G_6G_5G_4G_3G_2G_1=101101</equation> （十进制值为54）。</p><ul><li><equation>G_6=1</equation> ，故而6号盘子在C柱；</li></ul><img src="https://pic4.zhimg.com/v2-d32b8ff1019c053d4e3eaa4badfade9f_r.jpg" data-caption="" data-size="normal" data-rawwidth="459" data-rawheight="107" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><ul><li><equation>G_5=0</equation> ，5号盘子在6号盘子上面，也在C柱；</li></ul><img src="https://pic1.zhimg.com/v2-77d8cc42dd3784d12d1901b3066e7fc5_r.jpg" data-caption="" data-size="normal" data-rawwidth="459" data-rawheight="155" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><ul><li><equation>G_4=1</equation> ，4号盘子不在5号盘子上面，6+4为偶数， <equation>G_6=1</equation> 代表的十进制数为1， <equation>1\equiv1 \pmod 3</equation> ，查上表知4号盘子在A柱；</li></ul><img src="https://pic3.zhimg.com/v2-e798b2a98f29e392e51e50f217e7e01e_r.jpg" data-caption="" data-size="normal" data-rawwidth="459" data-rawheight="203" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><ul><li><equation>G_3=1</equation> ，3号盘子不在4号盘子上面，6+3为奇数， <equation>G_6G_5=10</equation> 代表的十进制数为2， <equation>2\equiv2 \pmod 3</equation> ，查上表知3号盘子在B柱；</li></ul><img src="https://pic3.zhimg.com/v2-f3c231e9769af5e09b4b300937b88ef0_r.jpg" data-caption="" data-size="normal" data-rawwidth="458" data-rawheight="251" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><ul><li><equation>G_2=0</equation> ，2号盘子在3号盘子上面，2号盘子也在B柱；</li></ul><img src="https://pic4.zhimg.com/v2-09d310f85c49c8e088d3322021f84357_r.jpg" data-caption="" data-size="normal" data-rawwidth="458" data-rawheight="299" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><ul><li><equation>G_1=1</equation> ，1号盘子不在2号盘子上面，6+1为奇数， <equation>G_6G_5G_4G_3=1011</equation> 代表的十进制数为13， <equation>13\equiv1\pmod 3</equation> ，查上表知1号盘子在A柱。</li></ul><img src="https://pic3.zhimg.com/v2-11c7446aa11fe84972deba9e441de173_r.jpg" data-caption="" data-size="normal" data-rawwidth="458" data-rawheight="347" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>而后自下而上观察该表即得到6个盘子在3个柱上的位置</p><hr><p>最后回到汉诺塔图（<a href="http://zhuanlan.zhihu.com/p/36090187">汉诺塔杂谈（二）——汉诺塔图</a>），如果用1代替<i>A</i>、用2代替<i>B</i>、用3代替<i>C</i>，则可得到下图。沿最长简单道路可以得到 <equation>n</equation> 位3维“格雷码”（加引号的原因是首尾不相邻）。</p><img src="https://pic3.zhimg.com/v2-e1dbefad3b3427616a0cdb2b77d0568f_r.jpg" data-caption="" data-size="normal" data-rawwidth="834" data-rawheight="401" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><img src="https://pic3.zhimg.com/v2-811fef67511aab37d6d9e63166f50a0c_r.jpg" data-caption="" data-size="normal" data-rawwidth="550" data-rawheight="399" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p>而要得到真正的 <equation>n</equation> 位3维格雷码的话，方法就是将最长道路“下方的两个小三角形”的边水平翻转180°后再添加一条边即得图中的一条哈密尔顿回路（参看“<a href="http://zhuanlan.zhihu.com/p/36090187">汉诺塔杂谈（二）——汉诺塔图</a>”），依次经过的顶点就构成了真正的 <equation>n</equation> 位3维格雷码。</p><p>以 <equation>n=3</equation> 为例，如下图所示。</p><img src="https://pic2.zhimg.com/v2-d64fa295307e44c73481d1f71fc96e63_r.jpg" data-caption="" data-size="normal" data-rawwidth="1302" data-rawheight="414" data-watermark="" data-original-src="" data-watermark-src="" data-private-watermark-src=""><p></p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
