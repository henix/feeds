<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Contravariant Functors</title>
</head>
<body>
<p><a href="https://zhuanlan.zhihu.com/p/40272611">原文</a></p>
<div class="title-image"><img src="https://pic2.zhimg.com/v2-5c90cc84819d9084f9b13fc09bd6abf2_r.jpg" alt=""></div><p></p><a href="https://youtu.be/IJ_bVVsQhvc" data-draft-node="block" data-draft-type="link-card">George Wilson - Contravariant Functors: The Other Side of the Coin (youtube)</a><p>吃外卖的时候看的, 不长又欢乐的一个 talk.</p><p>从 Contravariant 的  Functor 开始介绍它的 Applicative , Alternative 版: Divisible 和 Decidable.</p><p>一开始拿 predicate 作为 Contravariant 的例子,  自嘲 so boring 之后换 pretty printer 作为例子最后总结出:</p><img src="https://pic1.zhimg.com/v2-e31336410b2e758342acc23eaedc4c23_r.jpg" data-caption="" data-size="normal" data-rawwidth="1396" data-rawheight="780" data-watermark="watermark" data-original-src="v2-e31336410b2e758342acc23eaedc4c23" data-watermark-src="v2-b4b6daa28d4c5aaee30d9f7cca8d7d8a" data-private-watermark-src=""><p> Applicative, Alternative 一个比较 practical 的例子是 async 里的 <a href="https://hackage.haskell.org/package/async/docs/Control-Concurrent-Async.html#t:Concurrently">Concurrently</a>, 当 fork 出多个 “线程” 一起计算结果的时候, 所有结果都要就是 applicative, 只需要其中一个就是 alternative (how to combine multiple results). 另外的例子可以看 Parser Combinator (Parser Combinator 真是万能的例子</p><p>Contravariant, Divisible, Decidable 的中缀运算符设计得也特别有意思, 就是把"&lt;&gt;"到过来变"&gt;&lt;", Haskell 里的运算符设计还是有点规律的不是鬼画符  XD</p><p><br></p><p>BTW, 这个 talk 很好地展现用 Haskell 的语言特性&lt;del&gt;猫论&lt;/del&gt;做抽象吸引我的一面:</p><p>type class hierarchy 就是个做抽象跟复用的地图: 当发现一个东西是 Functor 的时候就会想这货有没有可能也是一个 Applicative/Alternative ? 如果是, 这个 “computation”(type class) 在这个 context 下代表什么操作? 更进一步如果是 Applicative 的话, 有没有可能是 Monad? 这个 talk QA部分就有人问是不是 Monad, George 小哥早就准备好了答案 XD.</p><p>而且这种抽象和复用不像一些"设计模式"一样, 只能靠例子和自然语言来描述, 它们是有 law 的, talk 里每次提到 law 大家都会欢呼一下 XD</p><p>这些抽象的关系有时候就调换个参数(Contravariant), 反转个箭头(monad -&gt; comonad), uncurry 一下 (学 Haskell 真不需要懂多少猫论的, 会看类型签名就好</p><p>当然了 <a href="http://hackage.haskell.org/package/contravariant">contravariant</a> 这个库的作者依旧是神奇的 Edward Kmett, 如果想知道更多 Functor 请看依旧是 George Wilson 小哥去年同样在 YOW! Lambda Jam 的 <a href="https://youtu.be/JUVMiRRq6wU">The Extended Functor Family</a>, 当然了里面提到的库都是 Edward Kmett 写的. George Wilson 的 talk 都好赞, 写的库也是.</p><p><br></p><p>(别看到 Haskell 就 BB Monad 了, 还有很多可以 BB 是不是 </p>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=UA-7909075-5"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'UA-7909075-5');
</script>
<script>
var _hmt = _hmt || [];
</script>
<script async defer="defer" src="https://hm.baidu.com/hm.js?e3d40295e416616ddc21287da9646d31"></script>
</body>
</html>
